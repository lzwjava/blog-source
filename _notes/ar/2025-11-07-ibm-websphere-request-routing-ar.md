---
audio: false
generated: true
image: false
lang: ar
layout: post
model: anthropic/claude-4.5-sonnet
title: توجيه طلبات آي بي إم ويب سبير مُوضَّح
translated: true
---

دعوني أوضح كيف يتعامل خادم تطبيقات ويب IBM (WAS) مع الطلبات الواردة والتوجيه:

## تدفق الطلب في IBM WAS

عند وصول طلب إلى IBM WAS، إليك التدفق النموذجي:

**1. طبقة خادم الويب (اختياري)**
- يصل الطلب أولاً إلى IBM HTTP Server (IHS) أو خادم ويب آخر
- تقوم إضافة خادم الويب بتوجيه الطلب إلى مثيل WAS المناسب

**2. نقطة دخول حاوية الويب**
يدخل الطلب إلى WAS عبر **حاوية الويب**، والتي هي جزء من محرك الخدمات الأساسي. هيكل الحزم الرئيسي هو:

```
com.ibm.ws.webcontainer.*
```

**3. سلسلة معالجة الطلب**

يحدث التوجيه عبر عدة مكونات:

**إطار قناة النقل**
- `com.ibm.ws.channel.*` - يتعامل مع الاتصالات الشبكية
- تقوم قنوات نقل HTTP باستقبال الطلب

**معالجة حاوية الويب**
```
com.ibm.ws.webcontainer.servlet.ServletWrapper
com.ibm.ws.webcontainer.filter.WebAppFilterManager
```

**4. تنفيذ سلسلة المرشحات**

تعمل المرشحات تمامًا مثل مرشحات الخدمات القياسية في Java ولكن يتم إدارتها بواسطة WAS:

- **يتم تعريفها في web.xml** لتطبيقك
- يتم ربط المرشحات بالترتيب المحدد
- يمكن لكل مرشح فحص/تعديل الطلب والاستجابة
- يستخدم واجهة `javax.servlet.Filter` القياسية

```xml
<filter>
    <filter-name>MyFilter</filter-name>
    <filter-class>com.example.MyFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>MyFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
```

**ترتيب تنفيذ المرشح:**
1. يقوم WAS بتحميل تكوينات المرشح عند بدء تشغيل التطبيق
2. يقوم WebAppFilterManager بإنشاء سلسلة المرشحات
3. في كل طلب: الطلب → المرشح1 → المرشح2 → ... → الخدمة

## الحزم الرئيسية في IBM WAS

**الحزم الأساسية:**
- `com.ibm.ws.webcontainer.*` - تنفيذ حاوية الويب
- `com.ibm.ws.runtime.*` - خدمات وقت التشغيل
- `com.ibm.websphere.servlet.*` - امتدادات الخدمات الخاصة بـ WAS
- `com.ibm.ws.channel.*` - طبقة النقل
- `com.ibm.ejs.*` - خدمات حاوية EJB
- `com.ibm.ws.naming.*` - تنفيذ JNDI

## آلية التوجيه

**توجيه المضيف الافتراضي:**
- يتم تكوينه في وحدة تحكم إدارة WAS
- يقوم بتعيين مجموعات `اسم المضيف:المنفذ` إلى التطبيقات
- التكوين: `VirtualHost → Host Aliases → Applications`

**توجيه جذر السياق:**
- لكل تطبيق جذر سياق (مثال: `/myapp`)
- يحتفظ WAS بسجل للتطبيقات المنشورة
- تعيين URI: `http://server:port/contextRoot/servletPath`

**تعيين الخدمة:**
- يتم تعريفه في web.xml أو التعليقات التوضيحية
- مطابقة النمط (مطابقة تامة، مسار، امتداد، افتراضي)

## تسلسل بدء تشغيل التطبيق

عند بدء تشغيل التطبيق:
1. **تهيئة محمل الفئات** - يحصل التطبيق على محمل الفئات الخاص به
2. **تحليل web.xml** - يتم تحميل المرشحات والخدمات وأجهزة الاستماع
3. **تشغيل ServletContextListeners** - `contextInitialized()`
4. **إنشاء مثيل للمرشحات** - يتم استدعاء دالة `init()`
5. **الخدمات ذات التحميل عند البدء** - تهيئة الخدمات التي تبدأ فورًا
6. **وضع علامة STARTED على التطبيق** - جاهز لاستقبال الطلبات

يتم تحديث سجل التوجيه، ويصبح التطبيق متاحًا الآن عند جذر السياق الخاص به.

هل يوضح هذا كيف يتعامل WAS مع توجيه الطلبات والترشيح؟