---
layout: default
---

<main id="content" class="main-content post-content" role="main">
  <div class="title-row post-title-row">
    <h2 class="title post-title">
      {{ page.title }}
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
    <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="{{ page.path }}">PDF</a>

    <!-- Audio Button -->
    {% if page.audio %}
    <a href="#" id="playAudioButton" class="button audio-button" data-file-path="{{ page.path }}">Audio</a>
    {% endif %}

    <!-- Language Select Section -->
    {% assign current_lang = page.path | split: '-' | last | split: '.' | first %}
    {% assign file_parts = page.path | split: '/' | last | replace: ".md", "" | split: '-' %}
    {% assign base_name = file_parts | slice: 3, file_parts.size | join: '-' | replace: "-#{current_lang}", "" %}
    
    {% assign base_name_length = base_name | size %}
    {% if current_lang == "hant" %}
      {% assign length_to_slice = base_name_length | minus: 5 %}
    {% else %}
      {% assign length_to_slice = base_name_length | minus: 3 %}
    {% endif %}
    {% assign base_name = base_name | slice: 0, length_to_slice %}
    
    <select id="languageSelect" class="button right-button">
        
        <option value="/{{ base_name }}-en" {% if current_lang == "en" %}selected{% endif %}>English</option>
        <option value="/{{ base_name }}-zh" {% if current_lang == "zh" %}selected{% endif %}>中文</option>
        <option value="/{{ base_name }}-ja" {% if current_lang == "ja" %}selected{% endif %}>日本語</option>
        <option value="/{{ base_name }}-es" {% if current_lang == "es" %}selected{% endif %}>Español</option>
        <option value="/{{ base_name }}-hi" {% if current_lang == "hi" %}selected{% endif %}>हिंदी</option>
        <option value="/{{ base_name }}-fr" {% if current_lang == "fr" %}selected{% endif %}>Français</option>
        <option value="/{{ base_name }}-de" {% if current_lang == "de" %}selected{% endif %}>Deutsch</option>
        <option value="/{{ base_name }}-ar" {% if current_lang == "ar" %}selected{% endif %}>العربية</option>
        <option value="/{{ base_name }}-hant" {% if current_lang == "hant" %}selected{% endif %}>繁體中文</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>
  {% if page.generated %}
  {% assign ai_message = "" %}
  {% case current_lang %}
    {% when "en" %}
      {% assign ai_message = "This post was generated by AI." %}
    {% when "zh" %}
      {% assign ai_message = "这篇文章是由AI生成的。" %}
    {% when "ja" %}
      {% assign ai_message = "この記事は、AIによって生成されました。" %}
    {% when "es" %}
      {% assign ai_message = "Esta publicación fue generada por IA." %}
    {% when "hi" %}
      {% assign ai_message = "यह पोस्ट AI द्वारा उत्पन्न किया गया था।" %}
    {% when "fr" %}
      {% assign ai_message = "Cet article a été généré par l'IA." %}
    {% when "de" %}
      {% assign ai_message = "Dieser Beitrag wurde von KI generiert." %}
    {% when "ar" %}
      {% assign ai_message = "تم إنشاء هذا المنشور بواسطة AI." %}
    {% when "hant" %}
      {% assign ai_message = "這篇文章是由AI產生的。" %}
  {% endcase %}

  <p style="font-style: italic; text-align: center;">{{ ai_message }}</p>
  {% endif %}

  {{ content }}

  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>

    <!-- Date Button -->
    {% if page.path contains '20' %}
    {% assign date_parts = page.path | split: '/' %}
    {% assign date_segment = date_parts[1] %}

    {% if date_segment contains '-' %}
    {% assign date_components = date_segment | split: '-' %}

    {% if date_components.size >= 3 %}
    {% assign file_date = date_components[0] | append: '.' | append: date_components[1] | append: '.' | append:
    date_components[2] %}
    <a href="#" class="button">{{ file_date }}</a>
    {% else %}
    <a href="#" class="button">{{ 'now' | date: "%Y.%m.%d" }}</a>
    {% endif %}

    {% else %}
    <a href="#" class="button">{{ 'now' | date: "%Y.%m.%d" }}</a>
    {% endif %}
    {% endif %}

    <button id="themeTogglePost" class="icon-button" aria-label="Toggle Theme">
      {% include theme-icons.html %}
    </button>

    {% assign donate_url = "/donate-en" %}
    {% if page.lang %}
      {% assign donate_url = "/donate-" | append: page.lang %}
    {% endif %}
    <a href="{{ donate_url }}" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>