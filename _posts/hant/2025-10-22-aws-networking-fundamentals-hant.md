---
audio: false
generated: true
image: false
lang: hant
layout: post
model: x-ai/grok-4-fast
title: AWS 虛擬網絡基礎
translated: true
type: note
---

### AWS 虛擬網絡基礎

AWS 透過其**虛擬私有雲（VPC）**服務提供靈活且隔離的網絡環境。這就像是您在 AWS 雲端中專屬的邏輯隔離區域，您可以在其中啟動 EC2 執行個體、RDS 資料庫等資源。下面我將用簡單的方式拆解您提到的關鍵組件（虛擬網絡、閘道、子網路）以及一些相關組件（「等等」），並說明它們如何協同運作。

#### 虛擬網絡（VPC - 虛擬私有雲）
- **它是什麼**：AWS 網絡的基礎。VPC 是專屬於您 AWS 帳戶的虛擬網絡，類似於傳統資料中心網絡，但位於雲端。它橫跨一個區域內的一個或多個可用區域（AZ）。
- **主要功能**：
  - 您可以使用 CIDR 區塊定義其 IP 地址範圍（例如 10.0.0.0/16，允許約 65,000 個 IP 地址）。
  - 預設為隔離狀態 — 除非您進行配置，否則沒有任何流量進出。
  - 支援 IPv4 和 IPv6。
- **為何使用它**：控制您資源的存取、安全性和連線能力。每個 AWS 帳戶都有一個預設 VPC，但您可以為生產環境建立自訂的 VPC。
- **範例**：將 VPC 想像成您在 AWS「社區」中的私人後院 — 您決定內部的圍欄、閘門和路徑。

#### 子網路
- **它們是什麼**：VPC IP 地址範圍的細分。每個子網路都綁定到單一可用區域，並在您的網絡內充當分段區域。
- **類型**：
  - **公有子網路**：此處的資源可以直接存取網際網路（透過網際網路閘道）。
  - **私有子網路**：與直接網際網路存取隔離；用於敏感資源，如資料庫。
- **主要功能**：
  - 大小由 CIDR 定義（例如 10.0.1.0/24 對應約 250 個 IP）。
  - 您可以在每個可用區域中擁有多個子網路以實現高可用性。
  - 資源（例如 EC2 執行個體）會啟動到子網路中。
- **為何使用它們**：增強安全性和容錯能力 — 例如，將網頁伺服器放在公有子網路中，應用程式伺服器放在私有子網路中。
- **範例**：如果您的 VPC 是一座城市，子網路就是社區：公有子網路靠近高速公路（網際網路），私有子網路位於門禁社區內。

#### 閘道
閘道將您的 VPC 連接到外部世界或其他網絡。有幾種類型：

- **網際網路閘道（IGW）**：
  - **它是什麼**：一個高可用性組件，附加到您的 VPC，實現與公共網際網路的雙向通訊。
  - **運作方式**：將流量從公有子網路路由到網際網路（反之亦然）。需要更新路由表以引導流量（例如 0.0.0.0/0 → igw-xxxx）。
  - **為何使用它**：用於面向公眾的應用程式，如網站。它是免費的並自動擴展。
  - **範例**：通往網際網路的前門 — 附加它、更新路由，您的公有資源就可以瀏覽或被瀏覽。

- **NAT 閘道（網路地址轉譯）**：
  - **它是什麼**：位於公有子網路中，允許私有子網路資源發起出站網際網路流量（例如軟體更新），而不會將它們暴露於入站流量。
  - **運作方式**：將私有 IP 轉譯為公共 Elastic IP。比 NAT 執行個體更可靠。
  - **為何使用它**：為私有資源提供安全的出站存取。費用約為每小時 0.045 美元 + 資料傳輸費。
  - **範例**：單向閥 — 私有伺服器可以「向外呼叫」獲取套件，但沒有人可以不請自來地敲門。

- **其他閘道**（簡要說明）：
  - **虛擬私有閘道（VGW）**：用於連接到您內部部署網路的 VPN 連線。
  - **Transit Gateway**：像樞紐一樣連接多個 VPC 和內部部署網路。

#### 其他相關組件（「等等」）
- **路由表**：定義流量在您的 VPC 內如何路由（例如到 IGW、NAT 或對等連線）。每個子網路都有一個關聯的路由表 — 將其視為交通地圖。
- **網路 ACL（存取控制清單）**：子網路層級的無狀態防火牆，透過 IP/通訊協定控制入站/出站流量（例如允許連接埠 80）。
- **安全群組**：執行個體層級的狀態防火牆，像 EC2/RDS 的個人保鏢（例如允許從您的 IP 進行 SSH 連線）。
- **VPC 對等連線**：連接兩個 VPC（即使在不同帳戶/區域）以進行私有通訊，就像直接隧道。
- **Elastic Network Interfaces（ENI）**：執行個體的虛擬網絡卡，允許多個 IP 或附加功能。

#### 整體協作方式
1. 使用 CIDR 區塊建立 VPC。
2. 跨可用區域新增子網路（公有/私有）。
3. 附加網際網路閘道以實現公共存取。
4. 配置路由表以引導流量（例如公有子網路路由到 IGW）。
5. 將資源啟動到子網路中，並使用安全群組/NACL 進行保護。
6. 對於私有出站流量，新增 NAT 閘道。

此設定確保了可擴展性、安全性和韌性。若要動手實作，請從 AWS 主控台中的 VPC 精靈開始 — 它會自動配置基本設定。

如果您需要圖表、程式碼範例或特定部分的詳細資訊（例如對等連線），請告訴我！

**參考資料**：
- [AWS VPC 文件](https://docs.aws.amazon.com/vpc/latest/userguide/what-is-amazon-vpc.html)
- [AWS 子網路指南](https://docs.aws.amazon.com/vpc/latest/userguide/configure-subnets.html)
- [AWS 閘道概覽](https://docs.aws.amazon.com/vpc/latest/userguide/VPC_Internet_Gateway.html)