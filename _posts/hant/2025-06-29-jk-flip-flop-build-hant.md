---
audio: false
generated: true
lang: hant
layout: post
title: 構建與測試JK正反器
translated: true
type: note
---

在之前的影片中，我們探討了 JK 正反觸發器及其運作方式，注意到它與 SR 正反觸發器相似，但增加了回饋機制。這種回饋使得輸出在時脈上升緣且兩個輸入均為高電位時能夠切換，而非進入未定義狀態。在本影片中，我將實際建構並觀察其運作功能。

我根據提供的電路圖建構了一個 JK 正反觸發器。在建構過程中，我發現圖中的標籤有誤：這裡實際上是 K 輸入，而這裡是 J 輸入。J 對應設定功能，意味著當它變為高電位時，Q 輸出也應變為高電位。相反地，K 對應重置功能，因此當它變為高電位時，Q 輸出應變為低電位。除了這個微小的標籤修正外，其餘電路都是正確的。

對於 NOR 閘，我使用了 74LS02 晶片，具體來說是晶片頂部的兩個 NOR 閘。另一個晶片 74LS11 則是三組 3 輸入 AND 閘。我在電路中使用了其中兩組三輸入 AND 閘。

通電後，電路進入穩定狀態，Q 輸出顯示為「開啟」。接著我連接了時脈電路。您看到的兩個開關通過下拉電阻保持低電位；按下按鈕會使輸入變為高電位。這些開關通過綠色導線連接到兩個 AND 閘，作為 K 和 J 輸入。

時脈信號也輸入到 AND 閘。它經過一個 RC 電路，該電路由一個 0.0001 微法拉電容和一個 1000 歐姆電阻組成。這個 RC 電路的輸出通過兩條白色導線傳送到兩個 AND 閘的另一個輸入端。AND 閘的輸出由藍色導線表示，這些導線連接到 NOR 閘的兩個輸入端。NOR 閘的其他輸入端通過黃色導線接收來自其自身輸出的回饋。這些黃色導線也迴路返回到 AND 閘。最後，NOR 閘的輸出驅動兩個 LED：一個用於 Q，另一個用於 Q 的補數。

當 K 輸入被驅動為高電位時，鎖存器應重置，Q 輸出應關閉，而實際情況也是如此。同樣地，將 J 輸入驅動為高電位應設定鎖存器，使 Q 輸出開啟，實際情況也符合。重要的是，請注意變化並非在按下按鈕時立即發生；而是在下一個時脈信號到來時才發生，因為此操作是由時脈上升緣門控的。

現在，由於這是 JK 正反觸發器，如果 J 和 K 輸入均設為高電位，我們預期輸出會隨著每個時脈脈衝切換。然而，它並未持續切換。有時會切換，特別是我稍微調整電路時，但非常不穩定。為了確保我同時按下兩個按鈕，我將在它們之間插入跳線，有效地為 J 和 K 提供持續的高電位輸入。這*應該*會使它在每個時脈上升緣時切換。雖然現在運作得較好，但仍然不穩定。

這種不穩定的行為有明確的解釋，而理解它的最佳方式是使用示波器檢查信號。

首先，讓我們查看時脈輸入作為參考。示波器顯示時脈信號以每秒約兩次的頻率開關。示波器上每個刻度代表 100 毫秒，因此在 10 個刻度範圍內，它每秒脈衝兩次。

接下來，我想觀察輸出，因為這是我們預期會隨每個時脈脈衝切換的部分。時脈確實以每秒約兩次脈衝的頻率運作。目前，輸出並未切換，但經過輕微調整後，它確實會切換，儘管不穩定。當它*確實*切換時，它會在時脈的上升緣進行切換，符合預期。

有趣的部分出現在我們放大時脈上升緣時。我們在那裡看到一些活動。進一步放大後，情況變得相當清楚：當時脈變為高電位時，輸出*確實*切換，但它來回切換多次，最終才穩定下來。這正是行為如此不穩定的原因。輸出在時脈上升緣如預期般切換，但隨後不久又快速再次切換。這些快速切換的周期約為 82 奈秒。

這種稱為「競態」的現象，在我們重新檢視電路圖時就說得通了。時脈脈衝，即使我們僅打算使用其前沿，仍會保持高電位相當長的時間（在此情況下為 250 毫秒）。如果輸出在脈衝返回零*之前*切換，回饋迴路會導致它再次切換，如此反覆，導致多次切換。因此，當時脈脈衝變為高電位時，輸出開啟，但隨後立即反覆關閉和開啟。僅是偶然情況下，它有時會穩定在預期狀態。

這種競態條件的根本原因在於用於檢測上升緣的 RC 電路。我提到電容為 0.0001 微法拉，電阻為 1000 歐姆。將這些值相乘可得到 RC 電路的時間常數，這表示脈衝寬度。此時間常數約為 100 奈秒。

讓我們測量電路的脈衝輸入。最初，在縮小視圖時看起來很好——在時脈上升緣有一個快速脈衝，符合預期。問題在於這個脈衝不夠*快*。它是一個 1 微秒的脈衝，而在那 1 微秒內，輸出反覆開啟和關閉，直到脈衝降至邏輯零時才最終穩定。

對此我們能做些什麼？一種選擇是縮短脈衝。考慮到切換周期約為 80 奈秒，我們需要一個遠短於 1 微秒的脈衝。我們可以嘗試將 1000 歐姆的電阻更改為 100 歐姆的電阻，這應能將時間常數減少至 100 奈秒。

更換電阻後，我們觀察到一個小得多的脈衝。然而，它仍然無法穩定工作。此時，我們遇到了麵包板的限制。數十奈秒範圍的高速信號在麵包板上具有挑戰性，因為存在雜散電容、電感和其他寄生效應。這解釋了為什麼僅僅將手在電路附近揮動就能改變其行為，因為我的手作為接地物體改變了電容。

您可以看到輸出現在變為高電位，然後變為低電位，並保持低電位。但同樣地，如果我調整手的位置，它可能會開始切換。我沒有更改任何連接，只是移動我的手，這就影響了電容。

即使在這個時間尺度上，我們時脈的上升緣也不完全尖銳，這同樣是由於麵包板的限制。我們產生的脈衝不像使用較大電阻時那樣乾淨。最終，這一切都表明我們正在挑戰麵包板上可行的極限。這種使用 RC 電路檢測上升緣的方法在 JK 正反觸發器中由於競態條件而固有地存在問題。如果脈衝不夠窄（理想情況下僅幾奈秒），輸出將回饋並在每個時脈上升緣時切換多次。

那麼，解決方案是什麼？在下一部影片中，我將展示一種遠優越的建構 JK 正反觸發器的方法，該方法完全消除了這種競態問題：主從 JK 正反觸發器。這是一種更穩健的設計，應該可以在麵包板上無任何問題地運作。