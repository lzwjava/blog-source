---
audio: false
generated: true
lang: hant
layout: post
title: 使用Arduino構建共射極放大器
translated: true
type: note
---

使用 Arduino 構建共射極（CE）放大器是個有趣的專案，但需要釐清各自角色：Arduino 本身不會作為放大器（它是數位微控制器），但可作為以雙極性接面電晶體（BJT）構建的 CE 放大器電路的信號源或測量工具。CE 放大器是經典的類比電路，使用 NPN 或 PNP 電晶體放大微小輸入信號，提供適中的電壓增益和電流增益。

本文將引導您設計基本的 NPN 型 CE 放大器，利用 Arduino 產生輸入信號（透過 PWM）並測量輸出。此設置將在運用 Arduino 功能的同時展示放大效果。

---

### **共射極放大器概覽**
- **用途：** 放大微小交流信號（例如音頻或正弦波）
- **主要特點：**
  - 電晶體工作在主動區
  - 輸入信號施加於基極，輸出從集極擷取
  - 電壓增益由電阻比例與電晶體特性決定
- **元件：**
  - NPN 電晶體（如 2N3904 或 BC547）
  - 電阻（用於偏壓與負載）
  - 電容（用於耦合交流信號）
  - Arduino（信號源與測量工具）

---

### **步驟 1：設計電路**

#### **所需元件**
- NPN 電晶體（如 2N3904）
- 電阻：R1 = 47kΩ、R2 = 10kΩ（偏壓）、RC = 1kΩ（集極）、RE = 220Ω（射極）
- 電容：C1 = 10µF（輸入耦合）、C2 = 10µF（輸出耦合）、CE = 100µF（射極旁路，可選用於提高增益）
- Arduino（如 Uno 型號）
- 麵包板、跳線
- 電源供應（Arduino 5V 針腳或外部 9V，依需求調整）

#### **電路示意圖**
```
Vcc (5V) ---- R1 ----+---- RC ---- 集極 (C)
             47kΩ     |     1kΩ          |
                      |                  |
基極 (B) --- C1 -----+                  |
            10µF     |                  |
Arduino PWM (Pin 9)  R2                 |
                     10kΩ              輸出 --- C2 ---- 接 Arduino A0
                      |                  |         10µF
                      |                  |
                      +---- RE ---- 射極 (E) --- CE (可選) --- GND
                           220Ω                   100µF
                      |
                     GND
```
- **偏壓（R1、R2）：** 設定電晶體工作點
- **RC：** 集極電阻用於輸出信號
- **RE：** 射極電阻用於穩定電路
- **C1、C2：** 阻隔直流，通過交流信號
- **CE（可選）：** 旁路 RE 以提高交流增益

#### **工作點設定**
- 目標：將電晶體偏壓設定於主動區（例如 VCE ≈ 2.5V，適用 5V 電源）
- 分壓電路（R1、R2）：\\( V_B = V_{CC} \cdot \frac{R2}{R1 + R2} = 5 \cdot \frac{10k}{47k + 10k} \approx 0.88V \\)
- \\( V_E = V_B - V_{BE} \approx 0.88 - 0.7 = 0.18V \\)
- \\( I_E = \frac{V_E}{RE} = \frac{0.18}{220} \approx 0.82 \, \text{mA} \\)
- \\( V_C = V_{CC} - I_C \cdot RC \approx 5 - 0.82 \cdot 1k \approx 4.18V \\)
- \\( V_{CE} = V_C - V_E \approx 4.18 - 0.18 = 4V \\)（適用 5V 電源）

---

### **步驟 2：使用 Arduino 作為信號源**

#### **Arduino 的角色**
- 使用 PWM（脈衝寬度調變）在支援 PWM 的針腳（如第 9 腳）產生微小交流信號
- 可選添加簡易 RC 低通濾波器，將 PWM 轉換為近似正弦波

#### **產生信號的程式碼**
```cpp
const int pwmPin = 9; // PWM 輸出腳

void setup() {
  pinMode(pwmPin, OUTPUT);
  // 設定 PWM 頻率（可選，預設約 490 Hz）
}

void loop() {
  // 使用 PWM 模擬正弦波（範圍 0-255）
  for (int i = 0; i < 360; i += 10) {
    float sineValue = sin(radians(i)); // 正弦波範圍 -1 至 1
    int pwmValue = 127 + 127 * sineValue; // 縮放至 0-255
    analogWrite(pwmPin, pwmValue);
    delay(10); // 調整頻率（此處約 100 Hz）
  }
}
```
- **輸出：** 約 0–5V PWM 信號，以 2.5V 為中心，峰對峰值約 2.5V
- **C1：** 移除直流偏移，僅將交流分量（約 1.25V 峰值）傳遞至基極

#### **可選濾波器**
在第 9 腳與 GND 之間串聯 1kΩ 電阻和 0.1µF 電容，於 C1 前擷取信號，可將 PWM 平滑轉換為粗略正弦波

---

### **步驟 3：測量輸出信號**

#### **Arduino 測量方式**
- 將放大器輸出（C2 之後）連接至 A0
- 使用 Arduino 讀取放大後的信號，並透過序列監視器顯示

#### **測量與顯示的程式碼**
```cpp
const int inputPin = A0; // 測量輸出點

void setup() {
  Serial.begin(9600);
}

void loop() {
  int sensorValue = analogRead(inputPin); // 0-1023 對應 0-5V
  float voltage = sensorValue * (5.0 / 1023.0);
  Serial.print("輸出電壓 (V): ");
  Serial.println(voltage);
  delay(100); // 調整取樣率
}
```

#### **預期增益**
- 電壓增益 \\( A_v = -\frac{RC}{RE} = -\frac{1k}{220} \approx -4.5 \\)（負號表示相位反轉）
- 輸入：約 1.25V 峰值（經耦合後）
- 輸出：約 4.5 × 1.25 = 5.625V 峰值（但受電源限制會被削波至 5V）

---

### **步驟 4：組裝與測試**

#### **組裝步驟**
1. 依照示意圖在麵包板上接線
2. 上傳信號產生程式碼至 Arduino，並將第 9 腳連接至 C1
3. 透過 Arduino 5V 為電路供電（或使用 9V 並調整電阻值）
4. 上傳測量程式碼並開啟序列監視器（鮑率 9600）

#### **驗證要點**
- **輸入信號：** C1 後約 1–2V 峰對峰值（若有萬用電錶或示波器可輔助驗證）
- **輸出信號：** 應呈現放大（約 4–5V 峰對峰值）且相位反轉
- 用萬用電錶檢查 VCE（約 2–4V）以確保工作於主動區

---

### **技巧與故障排除**
- **增益過低：** 在 RE 兩端並聯 CE（100µF）以提升交流增益（消除 RE 的退化作用）
- **削波現象：** 若輸出超過 5V，可降低輸入振幅（調整 PWM 範圍）或提高 Vcc（例如使用 9V 外部電源）
- **雜訊干擾：** PWM 本身具方波特性，可透過外部信號產生器或濾波器改善正弦波形
- **電晶體規格：** 確保 2N3904 可承受工作電流（此處 Ic < 200mA，屬安全範圍）

此設置展示了 CE 放大器的核心行為——電壓放大——同時整合 Arduino 進行信號生成與分析。若想調整增益、連接揚聲器播放音頻，或優化信號品質，歡迎隨時交流！