---
audio: false
generated: true
lang: hant
layout: post
title: 微電腦基礎
translated: true
type: note
---

以下是**第一部分：微型電腦基礎**的綜合教學，涵蓋您查詢中概述的主題：*微型電腦系統概述、演進歷程、馮·紐曼架構、關鍵效能指標、微處理器（CPU）結構、8086/8088內部暫存器，以及匯流排週期與時序分析*。本教學設計詳盡且易於理解，假設讀者已具備電腦系統的基礎知識。

---

## 第一部分：微型電腦基礎

### 1. 微型電腦系統概述

**微型電腦**是一種小型、成本相對較低的電腦，以微處理器作為其中央處理單元（CPU）。它包括記憶體、輸入/輸出（I/O）介面及周邊設備，適用於個人、嵌入式或工業應用。

#### 微型電腦系統的組成部分
- **微處理器（CPU）**：系統的大腦，負責提取、解碼和執行指令。
- **記憶體**：
  - **ROM（唯讀記憶體）**：儲存韌體或永久指令（例如 BIOS）。
  - **RAM（隨機存取記憶體）**：執行期間用於暫存資料和程式的臨時儲存空間。
- **輸入/輸出（I/O）設備**：用於使用者互動的介面（例如鍵盤、滑鼠、顯示器）。
- **匯流排系統**：
  - **資料匯流排**：在組件之間傳輸資料。
  - **位址匯流排**：指定記憶體或 I/O 位置。
  - **控制匯流排**：傳遞控制信號以協調操作。
- **周邊設備**：儲存裝置（例如硬碟）、通訊埠及其他硬體。

#### 特點
- 體積小巧、成本低廉且用途廣泛。
- 應用於個人電腦、嵌入式系統（例如家電、汽車）及 IoT 設備。
- 可透過軟體為多種任務進行程式設計。

---

### 2. 微型電腦的演進歷程

微型電腦的演進反映了半導體技術、軟體及架構設計的進步。

#### 關鍵里程碑
- **1971年：Intel 4004**：第一款微處理器，4位元 CPU，擁有 2,300 個電晶體，專為計算器設計。
- **1974年：Intel 8080**：8位元微處理器，被視為首款真正的微型電腦 CPU，用於 Altair 8800 等早期系統。
- **1978年：Intel 8086/8088**：16位元處理器，驅動 IBM PC（1981年），奠定了 x86 架構的基礎。
- **1980年代：個人電腦**：Apple II、IBM PC 和 Commodore 64 使電腦普及化。
- **1990年代至2000年代**：32位元和64位元處理器（例如 Intel Pentium、AMD Athlon）效能提升。
- **2010年代至今**：多核心處理器、GPU 及 ARM 架構微型電腦（例如 Raspberry Pi）主導移動和嵌入式系統。

#### 趨勢
- **摩爾定律**：電晶體數量約每18至24個月翻倍，使 CPU 更快速、更小巧。
- **微型化**：從房間大小的電腦發展至手持設備。
- **整合化**：系統單晶片（SoC）設計結合了 CPU、GPU 和記憶體。
- **功耗效率**：專注於低功耗處理器，適用於移動和 IoT 應用。

---

### 3. 馮·紐曼架構

**馮·紐曼架構**是大多數現代電腦（包括微型電腦）的基礎。由約翰·馮·紐曼於1945年提出，描述了一個系統，其中單一記憶體同時儲存指令和資料。

#### 關鍵特點
- **單一記憶體**：程式（指令）和資料共享同一記憶體空間，透過同一匯流排存取。
- **組成部分**：
  - **CPU**：包含：
    - **算術邏輯單元（ALU）**：執行計算。
    - **控制單元（CU）**：管理指令提取、解碼和執行。
    - **暫存器**：用於暫存資料的小型高速儲存空間（例如程式計數器、累加器）。
  - **記憶體**：儲存指令和資料。
  - **I/O 系統**：與外部設備介接。
  - **匯流排**：連接組件，用於資料、位址和控制信號。
- **儲存程式概念**：指令儲存於記憶體中，允許程式動態修改。
- **順序執行**：指令逐一提取、解碼和執行。

#### 馮·紐曼瓶頸
- CPU 和記憶體之間的共享匯流排限制了效能，因為資料和指令無法同時提取。
- 解決方案：快取記憶體、管線化及哈佛架構（指令和資料記憶體分離，用於某些微控制器）。

#### 範例
在基於 8086 的微型電腦中：
- 指令（例如 `MOV AX, BX`）和資料（例如 AX、BX 中的值）位於 RAM 中。
- CPU 透過位址匯流排提取指令，處理後將結果存回記憶體或暫存器。

---

### 4. 關鍵效能指標

微型電腦的效能取決於多個指標，這些指標定義了其處理能力和效率。

#### a. 字組長度
- **定義**：CPU 單次操作可處理的位元數（例如 8位元、16位元、32位元、64位元）。
- **影響**：
  - 較大的字組長度允許一次處理更多資料，提升效能。
  - 決定可定址記憶體的範圍（例如 16位元位址匯流排 = 64 KB，32位元 = 4 GB）。
- **範例**：Intel 8086 的字組長度為 16位元，而現代 CPU 使用 64位元架構。

#### b. 時脈速度
- **定義**：CPU 執行指令的頻率，以赫茲（Hz）為單位，通常為 MHz 或 GHz。
- **影響**：
  - 較高的時脈速度意味著每秒更多週期，增加吞吐量。
  - 受功耗和散熱限制。
- **範例**：8086 運行於 4.77–10 MHz；現代 CPU 透過渦輪加速超過 5 GHz。

#### c. 記憶體容量
- **定義**：可用於儲存資料和程式的 RAM 和 ROM 容量。
- **影響**：
  - 較大的記憶體支援複雜應用和多工處理。
  - 快取記憶體（例如 L1、L2）減少存取延遲。
- **範例**：早期 8086 系統擁有 64 KB–1 MB RAM；現代系統擁有 16–128 GB。

#### 其他指標
- **指令集複雜度**：CISC（例如 x86）與 RISC（例如 ARM）影響效率。
- **匯流排寬度**：較寬的匯流排（例如 32位元 vs 16位元）提升資料傳輸速率。
- **MIPS/FLOPS**：衡量每秒指令或浮點運算次數。

---

### 5. 微處理器（CPU）結構

微處理器是微型電腦的核心，負責執行指令。其結構包括功能單元和互連部分。

#### 通用 CPU 組成部分
- **算術邏輯單元（ALU）**：執行算術（例如加法）和邏輯運算（例如 AND、OR）。
- **控制單元（CU）**：協調指令提取、解碼和執行。
- **暫存器**：用於暫存資料的高速記憶體（例如累加器、索引暫存器）。
- **程式計數器（PC）**：保存下一指令的位址。
- **指令暫存器（IR）**：儲存當前指令。
- **匯流排介面單元（BIU）**：管理與記憶體和 I/O 的通訊。

#### 8086/8088 CPU 結構
Intel 8086（16位元）和 8088（8位元外部資料匯流排）具有相似的內部結構，分為：
- **匯流排介面單元（BIU）**：
  - 處理記憶體和 I/O 操作。
  - 包含段暫存器（CS、DS、SS、ES），用於定址最多 1 MB 記憶體。
  - 使用段:偏移定址生成實體位址。
- **執行單元（EU）**：
  - 使用 ALU 和通用暫存器執行指令。
  - 包含旗標暫存器用於狀態（例如零旗標、進位旗標、符號旗標）。

---

### 6. 8086/8088 內部暫存器

暫存器是 CPU 內的小型高速儲存位置。8086/8088 擁有 14 個 16位元暫存器，分類如下：

#### a. 通用暫存器
用於資料操作和算術運算。
- **AX（累加器）**：主要用於算術、I/O 及資料傳輸。
  - 分為 AH（高位元組）和 AL（低位元組）。
- **BX（基底）**：保存基底位址或資料。
- **CX（計數器）**：用於迴圈和字串操作。
- **DX（資料）**：儲存資料或 I/O 埠位址。

#### b. 段暫存器
用於記憶體定址（1 MB 位址空間）。
- **CS（程式碼段）**：指向程式碼段以取得指令。
- **DS（資料段）**：指向資料段。
- **SS（堆疊段）**：指向堆疊以用於函數呼叫和中斷。
- **ES（附加段）**：用於附加資料段。

#### c. 指標和索引暫存器
管理記憶體指標和索引。
- **SP（堆疊指標）**：指向堆疊頂部。
- **BP（基底指標）**：存取堆疊資料（例如函數參數）。
- **SI（來源索引）**：指向字串操作中的來源資料。
- **DI（目的索引）**：指向字串操作中的目的資料。

#### d. 指令指標
- **IP**：保存程式碼段內下一指令的偏移量。

#### e. 旗標暫存器
一個 16位元暫存器，包含狀態和控制旗標：
- **狀態旗標**：
  - **ZF（零旗標）**：若結果為零則設定。
  - **SF（符號旗標）**：若結果為負則設定。
  - **CF（進位旗標）**：若有進位/借位則設定。
  - **OF（溢位旗標）**：若算術溢位發生則設定。
  - **AF（輔助進位）**：用於 BCD 算術。
  - **PF（奇偶旗標）**：若結果有偶數個位元則設定。
- **控制旗標**：
  - **DF（方向旗標）**：控制字串操作方向。
  - **IF（中斷旗標）**：啟用/停用中斷。
  - **TF（陷阱旗標）**：啟用單步除錯。

#### 8086/8088 中的定址
- **實體位址** = 段暫存器 × 16 + 偏移量。
- 範例：若 CS = 1000h 且 IP = 0100h，則指令位址為 1000h × 16 + 0100h = 10100h。

---

### 7. 匯流排週期與時序分析

8086/8088 透過**匯流排週期**與記憶體和 I/O 設備通訊，由 CPU 的時脈同步。匯流排週期定義了讀取或寫入資料的過程。

#### 匯流排週期類型
- **記憶體讀取**：從記憶體提取指令或資料。
- **記憶體寫入**：將資料儲存至記憶體。
- **I/O 讀取**：從 I/O 設備讀取資料。
- **I/O 寫入**：傳送資料至 I/O 設備。

#### 匯流排週期結構
每個匯流排週期包含 **4 個 T-state**（時脈週期）：
1. **T1**：位址置於位址匯流排上；ALE（位址鎖存啟用）信號啟動。
2. **T2**：發出控制信號（例如 RD 用於讀取，WR 用於寫入）。
3. **T3**：資料透過資料匯流排傳輸。
4. **T4**：匯流排週期完成；狀態信號更新。

#### 時序分析
- **時脈頻率**：決定 T-state 持續時間（例如在 5 MHz 下，1 T-state = 200 ns）。
- **等待狀態**：若記憶體/設備速度慢於 CPU，則延長 T3。
- **範例**：
  - 對於記憶體讀取在 5 MHz：
    - T1：位址設定（200 ns）。
    - T2：RD 信號啟動（200 ns）。
    - T3：資料取樣（200 ns，或更長若有等待狀態）。
    - T4：匯流排釋放（200 ns）。
    - 總計 = 800 ns（無等待狀態）。
- **8088 差異**：8088 使用 8位元資料匯流排，需要兩個匯流排週期進行 16位元資料傳輸，與 8086 的 16位元匯流排相比效能降低。

#### 匯流排信號
- **ALE**：從多工位址/資料匯流排鎖存位址。
- **RD/WR**：指示讀取或寫入操作。
- **M/IO**：區分記憶體與 I/O 存取。
- **DT/R**：設定資料匯流排方向（傳輸/接收）。
- **DEN**：啟用資料匯流排收發器。

#### 實務考量
- **記憶體存取時間**：必須小於匯流排週期持續時間，以避免等待狀態。
- **中斷**：可能暫停匯流排週期以處理外部事件。
- **DMA（直接記憶體存取）**：暫時停止 CPU 匯流排存取以實現更快的資料傳輸。

---

### 範例：8086 指令執行
追蹤簡單指令 `MOV AX, [1234h]`，假設 DS = 1000h：
1. **提取**：
   - BIU 計算位址：1000h × 16 + 1234h = 11234h。
   - 指令透過記憶體讀取週期（4 T-state）提取。
2. **解碼**：
   - EU 將 `MOV` 解碼為記憶體到暫存器傳輸。
3. **執行**：
   - BIU 在 11234h 執行另一次記憶體讀取以提取 16位元資料。
   - 資料載入 AX。
4. **匯流排週期**：
   - 指令提取：4 T-state。
   - 資料提取：4 T-state。
   - 總計：約 8 T-state（1.6 µs 在 5 MHz，無等待狀態）。

---

### 總結
- **微型電腦系統**：整合 CPU、記憶體、I/O 及匯流排，實現多功能計算。
- **演進歷程**：從 4位元 Intel 4004 到現代 64位元多核心處理器。
- **馮·紐曼架構**：指令和資料統一記憶體，具有順序執行模型。
- **效能指標**：字組長度、時脈速度和記憶體容量驅動能力。
- **8086/8088 結構**：BIU 和 EU 帶有專用暫存器用於定址和執行。
- **暫存器**：通用、段、指標和旗標暫存器實現靈活程式設計。
- **匯流排週期**：4 T-state 用於記憶體/I/O 操作，對時序和效能至關重要。

---

### 練習問題
1. 解釋馮·紐曼瓶頸及現代 CPU 如何緩解它。
2. 計算 CS = 2000h，IP = 0500h 的實體位址。
3. 描述每個 8086 段暫存器的作用。
4. 與 8086 相比，8088 的 8位元資料匯流排如何影響效能？
5. 模擬在 8 MHz 下記憶體寫入操作的匯流排週期。

---

本教學為理解微型電腦基礎提供了堅實的基礎，重點關注 8086/8088 架構。如果您希望深入探討特定主題（例如組合語言程式設計、中斷處理），請告知！