---
audio: false
generated: false
lang: hant
layout: post
title: 測試 NPM 註冊表
translated: true
---

要測試你的 NPM 註冊表是否正常運作，特別是需要使用者名稱和密碼的情況下，你可以按照以下幾個簡單的步驟來驗證其連接性、身份驗證和提供套件的能力。由於這是一個私人註冊表（由憑證暗示），你需要在測試套件安裝之前確保身份驗證已正確設置。以下是測試你的註冊表的完整指南，以及一些建議的 NPM 套件來嘗試安裝。

---

### 測試註冊表的步驟

1. **設置身份驗證**
   - 由於註冊表需要使用者名稱和密碼，你需要登入以驗證你的 NPM 客戶端。
   - 在你的終端機中運行以下命令，將 `<registry-url>` 替換為你的註冊表的實際 URL：
     ```
     npm login --registry=<registry-url>
     ```
   - 你將被提示輸入你的使用者名稱和密碼（可能還有電子郵件，取決於註冊表）。完成後，這將在你的 `.npmrc` 文件中存儲一個身份驗證令牌，允許訪問註冊表。

2. **驗證註冊表連接**
   - 使用 `npm ping` 命令來檢查註冊表是否可達：
     ```
     npm ping --registry=<registry-url>
     ```
   - 如果成功，這個命令將確認註冊表伺服器已啟動並響應。你通常會看到類似 "Ping success: <registry-url>" 的輸出。如果失敗，可能存在連接問題或 URL 不正確。

3. **檢查身份驗證**
   - 使用 `npm whoami` 命令來確保你的使用者名稱和密碼已正確設置：
     ```
     npm whoami --registry=<registry-url>
     ```
   - 如果身份驗證成功，這應該返回你的使用者名稱。如果失敗或返回錯誤（例如，"not authenticated"），請重新檢查你的憑證或登入步驟。

4. **測試套件安裝**
   - 試著安裝一個套件來確認註冊表可以提供套件。由於這是一個私人註冊表，你需要安裝一個你知道存在於其上的套件。然而，如果註冊表代理公共 NPM 註冊表（這是私人註冊表如 Verdaccio 的常見設置），你可以使用流行的公共套件進行測試。
   - 例如命令：
     ```
     npm install <package-name> --registry=<registry-url>
     ```
   - 將 `<package-name>` 替換為你的註冊表上可用的套件（更多套件建議請參見下文）。

---

### 一些 NPM 套件來嘗試

由於這是一個私人註冊表，我無法確切知道哪些套件可用。然而，根據常見情況，這裡有一些建議：

- **如果註冊表代理公共 NPM 註冊表：**
  - 許多私人註冊表配置為鏡像公共註冊表，允許在身份驗證後訪問公共套件。在这种情况下，你可以嘗試安裝知名的公共套件：
    - `lodash`：一個流行的實用程序庫。
      ```
      npm install lodash --registry=<registry-url>
      ```
    - `express`：一個廣泛使用的 Node.js 網絡框架。
      ```
      npm install express --registry=<registry-url>
      ```
    - `react`：一個流行的用於構建用戶界面的庫。
      ```
      npm install react --registry=<registry-url>
      ```
  - 如果這些安裝成功，這將確認註冊表正常工作並可以提供套件。

- **如果註冊表僅託管私人套件：**
  - 你需要安裝一個你知道存在於你的私人註冊表上的套件。請與你的團隊或註冊表的文檔/網絡介面（如果可用）確認套件名稱。例如：
    - 如果有一個名為 `my-org-utils` 的套件，嘗試：
      ```
      npm install my-org-utils --registry=<registry-url>
      ```
  - 如果沒有具體的套件名稱，我無法列出具體的私人套件，因此請使用與你的組織相關的套件。

---

### 注意事項和故障排除

- **成功指標**：如果 `npm ping` 正常運行，`npm whoami` 返回你的使用者名稱，並且套件安裝沒有錯誤，你的註冊表正常運行。
- **常見問題**：
  - **身份驗證錯誤**：如果 `npm whoami` 失敗，請重新運行 `npm login`。
  - **找不到套件**：確保套件存在於註冊表。如果使用公共套件並失敗，你的註冊表可能不代理公共註冊表。
  - **連接問題**：如果 `npm ping` 失敗，請重新檢查 `<registry-url>` 和你的網絡設置。
- **避免全局變更**：為避免影響你的全局 NPM 配置，你可以在新目錄中測試，該目錄具有本地 `.npmrc` 文件，但上述帶有 `--registry` 旗標的命令足以進行測試。

按照這些步驟並嘗試建議的套件，你可以確認你的註冊表正常運行並正確處理身份驗證和套件檢索。如果你有特定的套件名稱來自你的註冊表，請使用這些名稱而不是提供的公共示例。