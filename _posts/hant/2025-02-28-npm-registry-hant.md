---
audio: false
generated: true
lang: hant
layout: post
title: 測試 NPM 註冊表
translated: true
type: note
---

要測試你的 NPM 註冊表是否正常運作，特別是當它需要用戶名和密碼時，你可以按照以下幾個簡單步驟來驗證其連線能力、認證機制以及套件提供功能。由於這是私有註冊表（憑證要求暗示了這一點），你需要先確保認證設定正確無誤，再測試套件安裝。以下是完整的註冊表測試指南，以及一些建議可用於測試安裝的 NPM 套件。

---

### 測試註冊表步驟

1. **設定認證**
   - 由於註冊表需要用戶名和密碼，你需要登入以驗證你的 NPM 客戶端。
   - 在終端機中執行以下指令，將 `<registry-url>` 替換為你的註冊表實際網址：
     ```
     npm login --registry=<registry-url>
     ```
   - 系統將提示你輸入用戶名和密碼（視註冊表設定可能還需要電子郵件）。完成後，認證令牌將儲存於你的 `.npmrc` 檔案中，使你能夠存取該註冊表。

2. **驗證註冊表連線**
   - 使用 `npm ping` 指令檢查註冊表是否可連線：
     ```
     npm ping --registry=<registry-url>
     ```
   - 若成功，此指令將確認註冊表伺服器正常運作且能回應。通常你會看到類似 "Ping success: <registry-url>" 的輸出。若失敗，可能是連線問題或網址錯誤。

3. **檢查認證狀態**
   - 為確保用戶名和密碼設定正確，使用 `npm whoami` 指令：
     ```
     npm whoami --registry=<registry-url>
     ```
   - 若認證成功，此指令應返回你的用戶名。若失敗或返回錯誤（例如 "not authenticated"），請重新檢查你的憑證或登入步驟。

4. **測試套件安裝**
   - 嘗試安裝套件以確認註冊表能提供套件服務。由於是私有註冊表，你需要安裝已知存在於該註冊表中的套件。不過，若註冊表有代理公共 NPM 註冊表（如 Verdaccio 等私有註冊表的常見設定），你可以使用熱門的公共套件進行測試。
   - 範例指令：
     ```
     npm install <package-name> --registry=<registry-url>
     ```
   - 將 `<package-name>` 替換為你的註冊表中可用的套件（下方將提供套件建議）。

---

### 可嘗試的 NPM 套件建議

由於這是私有註冊表，我無法確知哪些套件可用。不過，根據常見情境提供以下建議：

- **若註冊表代理了公共 NPM 註冊表：**
  - 許多私有註冊表會設定為鏡像公共註冊表，讓用戶在認證後能存取公共套件。此時，你可以嘗試安裝知名的公共套件：
    - `lodash`: 熱門的實用程式庫。
      ```
      npm install lodash --registry=<registry-url>
      ```
    - `express`: 廣泛使用的 Node.js 網頁框架。
      ```
      npm install express --registry=<registry-url>
      ```
    - `react`: 用於建構使用者介面的熱門函式庫。
      ```
      npm install react --registry=<registry-url>
      ```
  - 若這些套件能成功安裝，即確認註冊表運作正常且能提供套件。

- **若註冊表僅託管私有套件：**
  - 你需要安裝已知存在於私有註冊表中的套件。請向你的團隊查詢或查看註冊表的說明文件/網頁介面（如果有的話）以取得套件名稱。例如：
    - 如果有個名為 `my-org-utils` 的套件，可嘗試：
      ```
      npm install my-org-utils --registry=<registry-url>
      ```
  - 由於沒有具體的套件名稱，我無法列出確切的私有套件，請使用與你組織相關的套件。

---

### 注意事項與疑難排解

- **成功指標**：若 `npm ping` 運作正常、`npm whoami` 返回你的用戶名，且套件能無錯誤安裝，即表示你的註冊表功能正常。
- **常見問題**：
  - **認證錯誤**：若 `npm whoami` 失敗，請重新執行 `npm login`。
  - **找不到套件**：請確認套件存在於註冊表中。若使用公共套件卻失敗，可能是你的註冊表未代理公共註冊表。
  - **連線問題**：若 `npm ping` 失敗，請重新檢查 `<registry-url>` 及你的網路設定。
- **避免全域變更**：為避免影響全域 NPM 設定，你可以在新目錄中使用本機 `.npmrc` 檔案進行測試，但上述帶有 `--registry` 旗標的指令已足夠用於測試。

透過遵循這些步驟並嘗試建議的套件，你將能確認註冊表運作正常，且能正確處理認證與套件獲取。如果你有註冊表中的具體套件名稱，請使用那些名稱而非本文提供的公共範例。