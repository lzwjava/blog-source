---
audio: false
lang: hant
layout: post
title: macOS 組合語言：Hello World
translated: true
---

這段程式碼建立了一個「Hello, World!」程式。它使用系統呼叫將訊息寫入主控台，然後退出。`.text` 區段包含可執行指令，從 `_start` 開始。它首先設定 `sys_write` 呼叫（印到標準輸出），然後是 `sys_exit` 呼叫（乾淨地退出）。`.data` 區段儲存訊息本身並計算其長度。

```bash
.global _start
.text

_start:
    // 將 "Hello, World!" 寫入標準輸出
    mov x8, #64             // write 系統呼叫編號 (sys_write)
    mov x0, #1              // 檔案描述符 1 (標準輸出)
    ldr x1, =msg            // 訊息的位址
    mov x2, #14             // 訊息的長度
    svc #0                  // 呼叫系統呼叫

    // 退出程式
    mov x8, #93             // exit 系統呼叫編號 (sys_exit)
    mov x0, #0              // 退出碼 0
    svc #0                  // 呼叫系統呼叫

.data
msg:
    .asciz "Hello, World!\n"
```

```bash
as -o hello.o hello.s

% clang -o hello hello.o -nostdlib -e _start -Wl,-platform_version,macos,15.0,15.0 -arch arm64

% ./hello
zsh: 無效系統呼叫  ./hello
```
