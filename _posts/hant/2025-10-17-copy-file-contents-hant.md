---
audio: false
generated: true
image: false
lang: hant
layout: post
model: x-ai/grok-4-fast
title: 在 Vi 中複製檔案內容
translated: true
type: note
---

## 在 Vi 中複製（或移動）一個檔案的所有內容到新檔案

根據你使用 vi 的情況，我假設你想要選擇並複製/刪除一個檔案的全部內容，然後貼上到新檔案中。Vi 不像圖形介面編輯器那樣有直接的「全選」功能，但你可以在**指令模式**（按 `Esc` 確保你處於該模式）中高效地完成此操作。我將涵蓋**複製**（保留原始內容）和**剪下/刪除**（移動內容）兩種方法。

### 逐步操作：複製所有內容到新檔案
1. 開啟原始檔案：  
   ```
   vi oldfile.txt
   ```

2. 拉取（複製）整個檔案：  
   - 輸入 `gg`（前往檔案頂部）。  
   - 然後輸入 `yG`（從目前位置拉取到檔案結尾）。  
   *替代方法（Vim 專用，適用於 Red Hat 的 vim）：* 輸入 `:1,$y` 並按 `Enter`（拉取第 1 行到結尾的所有行）。

3. 開啟新檔案：  
   - 輸入 `:e newfile.txt` 並按 `Enter`（建立/開啟新檔案）。

4. 貼上內容：  
   - 輸入 `p`（在游標後貼上；由於檔案是空的，會貼在頂部）。  
   *替代方法：* 輸入 `P` 在游標前貼上。

5. 儲存並退出新檔案：  
   - 輸入 `:wq` 並按 `Enter`。

原始檔案保持不變。

### 逐步操作：刪除所有內容並貼上到新檔案（移動）
此操作會在複製後刪除原始內容。

1. 開啟原始檔案：  
   ```
   vi oldfile.txt
   ```

2. 先拉取（複製）整個檔案：  
   - `gg` 然後 `yG`（或 `:1,$y`）。

3. 刪除所有內容：  
   - 輸入 `gg`（前往頂部）。  
   - 然後 `dG`（從目前位置刪除到結尾）。  
   *替代方法：* 輸入 `:%d` 並按 `Enter`（刪除所有行）。  
   如有需要，儲存：`:w`（覆寫現在為空的檔案）。

4. 開啟新檔案：  
   - 輸入 `:e newfile.txt` 並按 `Enter`。

5. 貼上：  
   - 輸入 `p`。

6. 儲存並退出：  
   - `:wq`。

### 快速提示
- 如果不小心在拉取前刪除了內容，使用 `u` 復原。
- 若要在不每次開啟新檔案的情況下跨檔案操作：在第一個檔案中拉取，然後使用 `vi newfile.txt`，貼上並儲存。
- 對於大型檔案，這些指令速度很快，因為 vi 能高效處理緩衝區。

建議在測試檔案上練習以熟悉操作！

[如何在 Vim 中複製文字到另一個檔案](https://stackoverflow.com/questions/1239801/how-to-copy-to-the-end-of-the-line-in-vim)  
[Vim：拉取（複製）整個檔案](https://vim.fandom.com/wiki/Yank_%28copy%29_the_entire_file)