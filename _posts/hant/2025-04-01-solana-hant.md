---
audio: false
generated: true
lang: hant
layout: post
title: Solana
translated: true
type: note
---

Solana 是一個專為擴展性與速度設計的高效能區塊鏈，旨在支援全球應用。它透過八項核心技術創新的獨特組合實現此目標。以下是 Solana 運作原理的技術解析：

**核心原則與目標：**

* **高吞吐量：** Solana 目標是每秒處理數萬筆交易（TPS），遠超過許多其他區塊鏈。
* **低手續費：** 維持低交易成本是實現可及性的關鍵目標。
* **擴展性：** 其架構設計能在應用增長時隨之擴展，且不犧牲效能。

**「八大創新」：**

Solana 透過一系列相互關聯的技術實現其效能，這些技術常被統稱為其「八大創新」：

1.  **歷史證明（PoH）：** 這是一項關鍵創新，作用類似去中心化時鐘。
    * **運作原理：** PoH 是一種高頻率可驗證延遲函數（VDF）。VDF 需要一定數量的順序步驟來計算，且結果能有效被驗證。
    * **Solana 的實現方式：** 領導者（提議下一個區塊的節點）會順序計算 SHA-256 雜湊值。這創造了一個歷史記錄，能證明事件之間已經過特定時間。
    * **益處：** PoH 提供了無需信任、可驗證的事件排序，無需依賴個別節點的時間戳，顯著降低了共識所需的通訊開銷。

2.  **Tower BFT：** Solana 的共識機制是一種混合方法，結合了 PoH 與一種權益證明（PoS）形式，稱為 Tower BFT（拜占庭容錯）。
    * **運作原理：** 驗證者對帳本狀態進行投票。PoH 作為全球時鐘，讓驗證者能就記錄在 PoH 序列中的事件時間與順序達成一致。
    * **權益削減：** 對已觀察到的 PoH 歷史投反對票的驗證者可能會受到懲罰（權益削減），激勵他們保持誠實。
    * **益處：** Tower BFT 利用 PoH 提供的時間同步，實現具有高容錯能力的快速共識。

3.  **Turbine：** 這是 Solana 的區塊傳播協議。
    * **運作原理：** 領導者不是將整個區塊發送給每個節點，而是將區塊分解成更小的數據包（最多 64,000 個）。每個驗證者從領導者那裡收到區塊的一小部分，然後將該部分傳播給其對等節點。
    * **益處：** 這顯著降低了每個驗證者的頻寬需求，並讓網絡能夠擴展到更多節點，而不會在區塊傳播中產生瓶頸。

4.  **Gulf Stream：** 這是 Solana 的無記憶體池交易轉發協議。
    * **運作原理：** 驗證者不是等待交易在記憶體池中打包成區塊，而是將收到的交易轉發給下一個預期領導者。這讓下一個領導者能在當前區塊最終確定之前就開始執行交易。
    * **益處：** 由於交易在處理流程中更早被處理，這大幅降低了交易確認時間。

5.  **Sealevel：** 這是 Solana 的平行交易處理引擎。
    * **運作原理：** Solana 能在多個 GPU 核心上平行處理數千筆交易。交易會指定它們將讀取和寫入的帳戶。Sealevel 接著能識別非重疊的交易並同時執行它們。
    * **益處：** 這是 Solana 高吞吐量的關鍵因素，因為它能有效利用硬體資源。

6.  **流水線處理（Pipelining）：** Solana 透過將交易處理流程劃分為多個階段（獲取、驗證、執行、記錄），並為不同交易重疊這些階段來進行優化。
    * **運作原理：** 當一組交易正在執行時，下一組可以被獲取，而前一組可以被記錄。這創造了一個連續的交易處理流程。
    * **益處：** 這最大化了效率，並減少了處理流程中的閒置時間。

7.  **Cloudbreak：** 這是 Solana 的水平擴展帳戶資料庫。
    * **運作原理：** Solana 的狀態（所有帳戶及其資料）儲存在一個名為 Cloudbreak 的水平擴展資料庫中。這允許在整個網絡上進行高效的讀取和寫入操作。
    * **益處：** 這種架構能夠處理大量帳戶和高的資料存取需求。

8.  **Archivers：** 這是 Solana 用於鏈下帳本儲存的解決方案。
    * **運作原理：** 隨著時間推移，區塊鏈帳本會顯著增長。為了保持網絡效率，Solana 使用一個由歸檔節點（Archiver node）組成的網絡來儲存歷史帳本資料。驗證者定期將部分帳本發送給歸檔節點，並使用複製證明（PoR）來確保資料的完整性和可用性。
    * **益處：** 這減輕了驗證者的儲存負擔，使他們能專注於處理新交易。

**交易處理流程（簡化）：**

1.  用戶提交一筆交易。
2.  驗證者將交易轉發給下一個預期領導者（Gulf Stream）。
3.  領導者根據歷史證明（PoH）序列對交易進行排序。
4.  領導者的節點在多個核心上平行執行交易（Sealevel）。
5.  領導者創建一個包含已排序和已執行交易的區塊，以及 PoH 序列。
6.  該區塊被分解成較小的數據包並傳播給驗證者（Turbine）。
7.  驗證者驗證該區塊並對其有效性進行投票（Tower BFT），使用 PoH 序列作為可靠的時間戳。
8.  一旦超大多數驗證者同意，該區塊即被最終確定並添加到區塊鏈中。

**關鍵技術層面：**

* **Rust 程式語言：** Solana 的核心軟體使用 Rust 編寫，Rust 以其效能、安全性和並行特性而聞名，非常適合構建高效能區塊鏈基礎設施。
* **libp2p：** Solana 利用 libp2p 網絡庫進行節點間的點對點通訊。

**與其他區塊鏈的比較：**

與許多其他按順序處理交易的區塊鏈不同，Solana 的平行處理能力（Sealevel）及其去中心化時鐘（PoH）是實現其高吞吐量和低延遲的關鍵區別。雖然其他區塊鏈可能專注於不同的層面，例如安全性或去中心化的權衡，但 Solana 優先考慮效能。

**優勢與權衡：**

* **優勢：** 極快的交易速度、低交易手續費、高擴展性潛力。
* **權衡：** 複雜的架構可能導致驗證者需要更高的硬體要求。與較舊、更成熟的區塊鏈相比，過去也存在一些關於去中心化程度的擔憂，儘管網絡在這方面持續演進。

總而言之，Solana 透過實施一套協同工作的創新技術，從計時到交易執行和資料傳播，優化了區塊鏈流程的每個階段，從而實現了其高效能。