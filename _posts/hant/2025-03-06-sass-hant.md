---
audio: false
generated: true
lang: hant
layout: post
title: 使用 Sass 進行 CSS 預處理
translated: true
---

這裡有一個全面的指南，教你如何在前端開發中使用 **Sass**。Sass（Syntactically Awesome Style Sheets）是一種 CSS 預處理器，通過變量、嵌套、混合（mixins）等功能增強 CSS，使你的樣式表更容易編寫和維護。以下，我將帶你走過在前端項目中設置和使用 Sass 的步驟，涵蓋簡單的命令行方法和與 Webpack 等構建工具的整合。

---

### **什麼是 Sass？**
Sass 是一種工具，通過允許你使用類似編程的功能來擴展 CSS。它編譯成瀏覽器可以理解的普通 CSS。Sass 支持兩種語法：
- **.scss**：使用大括號和分號，類似於 CSS（最受歡迎）。
- **.sass**：使用縮進而不是大括號（較少見）。

在這個指南中，我們將專注於 `.scss` 語法，因為它的廣泛使用和與 CSS 的熟悉度。

---

### **在前端使用 Sass 的步驟**

#### **1. 安裝 Sass**
要使用 Sass，你首先需要安裝它。你可以通過 npm（Node Package Manager）來安裝，這在前端開發中很常見。

- **選項 1：全局安裝（命令行使用）**
  在你的終端中運行以下命令來全局安裝 Sass：
  ```bash
  npm install -g sass
  ```
  這樣你就可以在系統的任何地方使用 `sass` 命令。

- **選項 2：本地安裝（專案特定）**
  為了在專案中更好地控制版本，將 Sass 作為開發依賴項安裝：
  ```bash
  npm install --save-dev sass
  ```
  然後你可以通過 `npx sass` 運行 Sass，或者在 `package.json` 中添加腳本。

#### **2. 編寫 Sass 代碼**
創建一個 `.scss` 文件（例如 `styles.scss`），並使用 Sass 功能編寫你的樣式。這裡有一個例子：

```scss
// 變量
$primary-color: #333;
$font-size: 16px;

// 嵌套
nav {
  background-color: $primary-color;
  ul {
    list-style: none;
    li {
      font-size: $font-size;
    }
  }
}

// 混合
@mixin border-radius($radius) {
  border-radius: $radius;
}

.button {
  @include border-radius(5px);
  padding: 10px;
}
```

Sass 的主要功能包括：
- **變量**：存儲可重用的值，如顏色或尺寸。
- **嵌套**：更直觀地編寫層次化的 CSS 規則。
- **混合**：定義可重用的樣式塊。
- **部分文件**：使用以 `_` 開頭的文件（例如 `_variables.scss`），並通過 `@import 'variables';` 導入它們來組織代碼。

#### **3. 編譯 Sass 為 CSS**
Sass 文件必須編譯成 CSS 以便瀏覽器使用它們。

- **命令行編譯**
  使用 `sass` 命令編譯你的 `.scss` 文件：
  ```bash
  sass input.scss output.css
  ```
  - `input.scss`：你的 Sass 文件。
  - `output.css`：生成的 CSS 文件。

- **自動編譯**
  為了避免手動編譯，使用 `--watch` 標誌來監視變化：
  ```bash
  sass --watch input.scss output.css
  ```
  這樣在 `input.scss` 變化時會重新編譯 `output.css`。

- **優化輸出**
  為了生產環境，使用以下命令壓縮 CSS：
  ```bash
  sass input.scss output.css --style compressed
  ```

#### **4. 在 HTML 中包含 CSS**
在 HTML 中鏈接編譯後的 `output.css` 文件，就像你對待普通 CSS 一樣：
```html
<link rel="stylesheet" href="output.css">
```

#### **5. 組織你的 Sass 文件**
對於較大的專案，使用部分文件和導入來結構化你的 Sass 文件：
- 創建部分文件，例如 `_variables.scss`、`_mixins.scss` 或 `_header.scss`。
- 將它們導入到主文件（例如 `main.scss`）：
  ```scss
  @import 'variables';
  @import 'mixins';
  @import 'header';
  ```
- 編譯 `main.scss` 為 `main.css`。

---

### **使用構建工具（可選）**
對於更複雜的專案，將 Sass 整合到構建工具（如 Webpack 或 Gulp）中，以自動化編譯並優化工作流程。

#### **Webpack 設置**
1. **安裝依賴項**：
   ```bash
   npm install --save-dev sass sass-loader css-loader style-loader webpack webpack-cli
   ```
2. **配置 Webpack**（`webpack.config.js`）：
   ```javascript
   module.exports = {
     module: {
       rules: [
         {
           test: /\.scss$/,
           use: ['style-loader', 'css-loader', 'sass-loader'],
         },
       ],
     },
   };
   ```
3. **在 JavaScript 中導入 Sass**：
   在你的入口文件（例如 `index.js`）中導入你的 Sass：
   ```javascript
   import './styles/main.scss';
   ```
4. **運行 Webpack**：
   ```bash
   npx webpack
   ```
   這將編譯 Sass 並將其與你的 JavaScript 打包在一起。

#### **Gulp 設置**
1. **安裝依賴項**：
   ```bash
   npm install --save-dev gulp gulp-sass sass
   ```
2. **配置 Gulp**（`gulpfile.js`）：
   ```javascript
   const gulp = require('gulp');
   const sass = require('gulp-sass')(require('sass'));

   gulp.task('sass', function () {
     return gulp.src('src/*.scss')
       .pipe(sass().on('error', sass.logError))
       .pipe(gulp.dest('dist'));
   });

   gulp.task('watch', function () {
     gulp.watch('src/*.scss', gulp.series('sass'));
   });
   ```
3. **運行 Gulp**：
   ```bash
   gulp sass  # 編譯一次
   gulp watch # 監視變化
   ```

---

### **額外提示**
- **源映射**：為了調試，使用 `sass --sourcemap`（命令行）生成源映射，或者在構建工具中配置它。
- **供應商前綴**：使用工具（例如在 Webpack 中使用 `postcss-loader`）自動添加瀏覽器前綴。
- **主題**：在部分文件（例如 `_variables.scss`）中定義變量，並為不同的主題覆蓋它們。
- **最佳實踐**：避免深層嵌套（以防止特異性問題），並確保編譯後的 CSS 高效。

---

### **總結**
在前端開發中使用 Sass：
1. **全局安裝 Sass**（`npm install -g sass`）或本地安裝。
2. **編寫 Sass 代碼**，在 `.scss` 文件中使用變量和嵌套等功能。
3. **編譯為 CSS**，使用 `sass` 命令或構建工具。
4. **在 HTML 中鏈接 CSS**。
5. 可選地，使用 `--watch` 自動編譯，或者與 Webpack 或 Gulp 等工具整合。

Sass 使你的 CSS 更易維護和強大——適合小型實驗和大型前端專案！