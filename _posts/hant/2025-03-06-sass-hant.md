---
audio: false
generated: true
lang: hant
layout: post
title: 使用 Sass 進行 CSS 預處理
translated: true
type: note
---

這是一份關於**如何在前端開發中使用 Sass** 的完整指南。Sass（語法超棒的樣式表）是一種 CSS 預處理器，它透過變數、嵌套、混合器等功能增強了 CSS，讓你的樣式表更易於編寫和維護。下面，我將逐步引導你在前端專案中設定和使用 Sass，涵蓋簡單的命令列方法以及與建置工具（如 Webpack）的整合。

---

### **什麼是 Sass？**
Sass 是一種工具，透過允許你使用類似程式設計的功能來擴展 CSS。它會編譯成瀏覽器能夠理解的常規 CSS。Sass 支援兩種語法：
- **.scss**：使用大括號和分號，類似 CSS（最受歡迎）。
- **.sass**：使用縮排而非大括號（較不常見）。

本指南將專注於 `.scss` 語法，因為它廣泛使用且與 CSS 相似。

---

### **在前端使用 Sass 的步驟**

#### **1. 安裝 Sass**
要使用 Sass，首先需要安裝它。你可以透過 npm（Node 套件管理器）進行安裝，這在前端開發中很常見。

- **選項 1：全域安裝（命令列使用）**  
  在終端機中執行以下命令，將 Sass 安裝到全域：
  ```bash
  npm install -g sass
  ```
  這讓你能在系統的任何地方使用 `sass` 命令。

- **選項 2：本地安裝（專案特定）**  
  為了在專案中更好地控制版本，將 Sass 安裝為開發依賴：
  ```bash
  npm install --save-dev sass
  ```
  然後你可以透過 `npx sass` 執行 Sass，或在 `package.json` 中加入指令碼。

#### **2. 編寫 Sass 程式碼**
建立一個 `.scss` 檔案（例如 `styles.scss`），並使用 Sass 功能編寫樣式。以下是一個範例：

```scss
// 變數
$primary-color: #333;
$font-size: 16px;

// 嵌套
nav {
  background-color: $primary-color;
  ul {
    list-style: none;
    li {
      font-size: $font-size;
    }
  }
}

// 混合器
@mixin border-radius($radius) {
  border-radius: $radius;
}

.button {
  @include border-radius(5px);
  padding: 10px;
}
```

主要的 Sass 功能包括：
- **變數**：儲存可重複使用的值，如顏色或尺寸。
- **嵌套**：更直覺地編寫層級式 CSS 規則。
- **混合器**：定義可重複使用的樣式區塊。
- **局部檔案**：使用像 `_variables.scss`（以 `_` 開頭）的檔案，並透過 `@import 'variables';` 匯入它們來組織程式碼。

#### **3. 將 Sass 編譯成 CSS**
Sass 檔案必須編譯成 CSS，瀏覽器才能使用。

- **命令列編譯**  
  使用 `sass` 命令編譯你的 `.scss` 檔案：
  ```bash
  sass input.scss output.css
  ```
  - `input.scss`：你的 Sass 檔案。
  - `output.css`：產生的 CSS 檔案。

- **自動編譯**  
  為避免手動編譯，使用 `--watch` 標記來監聽變更：
  ```bash
  sass --watch input.scss output.css
  ```
  這會在 `input.scss` 變更時重新編譯 `output.css`。

- **最佳化輸出**  
  為了生產環境，使用以下命令壓縮 CSS：
  ```bash
  sass input.scss output.css --style compressed
  ```

#### **4. 在 HTML 中包含 CSS**
像常規 CSS 一樣，將編譯後的 `output.css` 檔案連結到你的 HTML：
```html
<link rel="stylesheet" href="output.css">
```

#### **5. 組織你的 Sass 檔案**
對於較大的專案，使用局部檔案和匯入來組織你的 Sass 檔案：
- 建立局部檔案，如 `_variables.scss`、`_mixins.scss` 或 `_header.scss`。
- 將它們匯入到主檔案（例如 `main.scss`）中：
  ```scss
  @import 'variables';
  @import 'mixins';
  @import 'header';
  ```
- 將 `main.scss` 編譯成 `main.css`。

---

### **使用建置工具整合 Sass（可選）**
對於更複雜的專案，將 Sass 整合到建置工具（如 Webpack 或 Gulp）中，以自動化編譯並最佳化工作流程。

#### **Webpack 設定**
1. **安裝依賴**：
   ```bash
   npm install --save-dev sass sass-loader css-loader style-loader webpack webpack-cli
   ```
2. **配置 Webpack**（`webpack.config.js`）：
   ```javascript
   module.exports = {
     module: {
       rules: [
         {
           test: /\.scss$/,
           use: ['style-loader', 'css-loader', 'sass-loader'],
         },
       ],
     },
   };
   ```
3. **在 JavaScript 中匯入 Sass**：
   在你的入口檔案（例如 `index.js`）中，匯入你的 Sass：
   ```javascript
   import './styles/main.scss';
   ```
4. **執行 Webpack**：
   ```bash
   npx webpack
   ```
   這會編譯 Sass 並將其與你的 JavaScript 打包。

#### **Gulp 設定**
1. **安裝依賴**：
   ```bash
   npm install --save-dev gulp gulp-sass sass
   ```
2. **配置 Gulp**（`gulpfile.js`）：
   ```javascript
   const gulp = require('gulp');
   const sass = require('gulp-sass')(require('sass'));

   gulp.task('sass', function () {
     return gulp.src('src/*.scss')
       .pipe(sass().on('error', sass.logError))
       .pipe(gulp.dest('dist'));
   });

   gulp.task('watch', function () {
     gulp.watch('src/*.scss', gulp.series('sass'));
   });
   ```
3. **執行 Gulp**：
   ```bash
   gulp sass  # 編譯一次
   gulp watch # 監聽變更
   ```

---

### **額外提示**
- **Source Maps**：為了除錯，使用 `sass --sourcemap`（命令列）或在建置工具中配置來生成 source maps。
- **供應商前綴**：使用像 Autoprefixer 這樣的工具（例如在 Webpack 中使用 `postcss-loader`）自動加入瀏覽器前綴。
- **主題化**：在局部檔案（例如 `_variables.scss`）中定義變數，並為不同主題覆寫它們。
- **最佳實踐**：避免深度嵌套（以防止特異性問題），並確保編譯後的 CSS 是高效的。

---

### **總結**
要在前端開發中使用 Sass：
1. **安裝 Sass** 到全域（`npm install -g sass`）或本地。
2. **在 `.scss` 檔案中編寫 Sass 程式碼**，使用變數、嵌套等功能。
3. **使用 `sass` 命令或建置工具編譯成 CSS**。
4. **將 CSS 連結到你的 HTML**。
5. 可選地，使用 `--watch` 自動化編譯，或與 Webpack、Gulp 等工具整合。

Sass 讓你的 CSS 更易維護且功能更強大——非常適合小型實驗和大規模前端專案！