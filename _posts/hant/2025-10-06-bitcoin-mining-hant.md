---
audio: false
generated: true
image: false
lang: hant
layout: post
model: openai/gpt-5
title: 比特幣哈希計算與挖礦
translated: true
type: note
---

### 比特幣如何計算哈希值

比特幣使用一種稱為 **SHA-256**（安全哈希演算法 256 位元）的加密哈希函數來計算哈希值。這是一種單向函數，接收輸入資料（例如區塊頭）並產生固定 256 位元（32 位元組）的輸出，該輸出具有獨特性且不可預測。

- **哈希計算的對象？** 主要是區塊頭，其中包含：
  - 版本號
  - 前一個區塊的哈希值
  - Merkle 根（區塊內所有交易的摘要）
  - 時間戳記
  - 難度目標（位元）
  - Nonce（礦工調整的數字）

- **過程：**
  1. 礦工組裝區塊頭。
  2. 應用 SHA-256 兩次：`hash = SHA256(SHA256(header))`。
  3. 檢查結果哈希值是否低於當前目標（例如，是否以足夠多的前導零開頭，如 000000...）。
  4. 如果不是，則增加 nonce 並重複。這是工作量證明（PoW）中「試錯」的部分。

哈希值是確定性的——相同的輸入總是產生相同的輸出——但微小的變化（例如 nonce 加 1）會產生完全不同的輸出。這使得從輸出反向推導輸入在實際上是不可行的。

### 為什麼要挖比特幣？（以及它如何確保 2100 萬枚供應上限）

我想你的意思是「為什麼挖礦」而不是「為什麼鑄幣」——挖礦是驗證交易並將區塊添加到區塊鏈的過程，獎勵是新鑄造的比特幣。

- **為什麼要挖礦？**
  - **安全性：** 礦工通過競爭解決 PoW 難題來保護網絡，防止雙重支付（重複花費同一筆 BTC）等攻擊。
  - **去中心化：** 任何人都可以挖礦，分散控制權——沒有中央機構。
  - **激勵機制：** 礦工賺取**區塊獎勵**（新鑄造的 BTC）+ 交易手續費。這為網絡提供了啟動動力，並補償了能源成本。

- **確保供應上限（實際上是 2100 萬枚，不是 1000 萬枚）：**
  比特幣協議硬編碼了 **2100 萬枚 BTC** 的總供應量，這些 BTC 通過挖礦獎勵產生，且獎勵每 210,000 個區塊（約 4 年）**減半**一次。
  - 2009 年開始時每個區塊獎勵 50 BTC。
  - 2012 年減半至 25 BTC，2016 年減半至 12.5 BTC，2020 年減半至 6.25 BTC，2024 年減半至 3.125 BTC，依此類推。
  - 最後一枚比特幣將在 2140 年左右被挖出；之後，僅剩手續費。
  - 這是由代碼強制執行的：獎勵公式為 `reward = 50 * 0.5^(floor(block_height / 210000))`。除非獲得 95% 的網絡共識，否則無人能更改它，從而使通脹可預測且有上限。

這種稀缺性模仿了黃金，推動了價值。

### 工作量證明（PoW）如何運作

PoW 是比特幣的共識機制——一種計算難題，證明礦工投入了「工作量」（CPU/GPU/ASIC 算力）來添加一個區塊。

- **步驟詳解：**
  1. **收集交易：** 礦工將待處理交易收集到一個區塊中（最大約 1-4 MB，取決於 SegWit）。
  2. **構建區塊頭：** 包含交易的 Merkle 根、指向前一個區塊的連結等。
  3. **設定目標：** 網絡每 2016 個區塊調整一次難度，以保持平均出塊時間為 10 分鐘。目標 = 一個非常小的數字（例如，哈希值必須 < 0x00000000FFFF...）。
  4. **尋找 nonce：** 暴力猜測 nonce（0 到 2^32-1）。對於每個 nonce，對區塊頭進行哈希計算。如果哈希值 < 目標，則有效！
  5. **廣播區塊：** 其他節點進行驗證（很容易——只需重新哈希一次）。如果有效，則添加到鏈上；礦工開始下一個區塊的工作。
  6. **鏈規則：** 最長的有效鏈勝出（解決分叉）。

PoW 使得驗證區塊成本低廉，但創建區塊成本高昂，從而防範 51% 攻擊（控制 >50% 的哈希算力以重寫歷史）。

### 為什麼一筆交易需要如此多的計算？

交易本身並不直接要求用戶進行大量計算——只需使用你的私鑰進行簽名（橢圓曲線加密，速度快）。繁重的工作在於**挖礦**：

- **針對每個區塊，而非每筆交易：** 一個區塊打包約 2,000-3,000 筆交易。礦工為了解決 PoW，每個區塊需要進行數萬億次哈希計算。
- **難度調整：** 隨著更多礦工加入（總哈希率更高），難度呈指數級上升以維持 10 分鐘的出塊時間。當前全球哈希率約為 ~600 EH/s（每秒百萬兆次哈希）——即每秒 60 萬億億次哈希！
- **為什麼如此耗費？**
  - **安全成本：** 高計算量使得攻擊在經濟上不划算。重寫一個區塊需要重新完成所有後續的 PoW。
  - **女巫攻擊防範：** 防止用虛假身份淹沒網絡。
  - **權衡：** 能源密集（比特幣每年消耗約 150 TWh，相當於一個中等規模國家的用電量），但支持者認為這是實現無信任貨幣的必要特性。

用戶支付手續費以優先處理其交易進入區塊；低手續費的交易需要等待。

如果你的意思是特指某些方面（如挖礦硬件），請告訴我！

**參考資料：**  
[比特幣白皮書](https://bitcoin.org/bitcoin.pdf)  
[比特幣維基：工作量證明](https://en.bitcoin.it/wiki/Proof_of_work)  
[Blockchain.com：比特幣減半](https://www.blockchain.com/learning-crypto/bitcoin-halving)