---
audio: false
generated: true
lang: hant
layout: post
title: JDK 24 升級優勢詳解
translated: true
type: note
---

從 JDK 11 升級至 JDK 24 能帶來多方面的顯著優勢，包括效能提升、新功能與安全性強化。以下為詳細說明：

**1. 效能改進：**

* **虛擬執行緒（Project Loom）：** 雖然在 JDK 21 中首次引入，但 JDK 24 進一步完善了虛擬執行緒（JEP 491：無釘選同步虛擬執行緒）。這項革新能讓高併發應用程式以數百萬個輕量級執行緒運行，無需傳統平台執行緒的開銷，尤其對伺服器端應用程式而言，可大幅提升擴展性與回應速度。
* **更快啟動速度：** JDK 24 包含「預先類別載入與連結」（JEP 483），讓應用程式類別在 JVM 啟動時立即可用，有效縮短啟動時間。這對需要快速啟動的微服務與雲原生應用程式特別有益。
* **精簡物件標頭（實驗性功能）：** JEP 450 旨在縮小 64 位元架構下的物件標頭尺寸，預計可節省 10-20% 記憶體使用量，並改善快取區域性，尤其適合擁有大量小型物件的應用程式。
* **ZGC 世代模式（預設啟用）：** Z 垃圾收集器（ZGC）現預設採用世代模式（JEP 490），可針對短生命週期物件優化垃圾收集，在處理大型堆積時降低暫停時間並提升記憶體效率。
* **串流收集器（JEP 485）：** 此新 API 允許在串流管線中自訂中介操作，提供更靈活的資料轉換方式與潛在效能提升。
* **優化外部函數與記憶體 API 批量操作：** 批量記憶體操作現改以 Java 程式碼實作而非原生方法，在特定架構（如 Linux x64/AArch64）上能顯著提升較小資料量的處理效能。
* **字串串接啟動加速：** 字串串接的內部優化帶來更快的啟動速度與更少的程式碼生成開銷。

**2. 新語言功能與 API：**

* **模式匹配增強（JEP 488）：** 進一步強化模式匹配功能，允許在模式中使用基本型別，並擴充 `instanceof` 與 `switch` 對所有基本型別的支援，使程式碼更簡潔易讀。
* **作用域數值（JEP 487）：** 預覽 API，提供更安全高效的方式在執行緒內及子執行緒間共享不可變資料，尤其適合與虛擬執行緒搭配使用。
* **結構化併發（JEP 499）：** 預覽 API，透過將相關任務群組視為單一工作單元來簡化併發程式設計，改善錯誤處理、取消機制與可觀測性。
* **類別檔案 API（JEP 484）：** 用於解析、生成與轉換 Java 類別檔案的標準 API。
* **向量 API（JEP 489）：** （仍處於孵化階段）此 API 可表達向量運算，並編譯為支援 CPU 的最佳化向量指令，為特定數值運算帶來卓越效能。
* **金鑰衍生函數 API（JEP 478）：** 用於密碼學演算法的預覽 API，可從秘密金鑰衍生額外金鑰。

**3. 安全性強化：**

* **抗量子密碼學：** JDK 24 引入抗量子模組格基金鑰封裝機制（ML-KEM）（JEP 496）與模組格基數位簽章演算法（ML-DSA）（JEP 497）的實作，為 Java 應對未來密碼學挑戰做好準備。
* **TLS 改進：** 包含可設定的 TLSv1.3 新會話票證數量，以及透過模式匹配停用 TLS 加密套件的機制。為提升前向安全性，TLS_RSA 加密套件現已預設停用。
* **移除安全管理器（JEP 486）：** 舊版功能安全管理器已永久停用，這簡化了 JVM 安全模型，並鼓勵採用容器化沙箱等現代安全實踐。
* **`sun.misc.Unsafe` 警告機制：** 當使用 `sun.misc.Unsafe` 中的記憶體存取方法時，JDK 24 會發出執行階段警告，鼓勵開發者遷移至 VarHandle API 與外部函數及記憶體 API 等更安全的替代方案。

**4. 棄用與移除項目：**

* 雖然這些變更可能需要調整程式碼，但有助於打造更簡潔、安全且易維護的平台。永久停用安全管理器與 `sun.misc.Unsafe` 警告機制即為具體範例。

**5. 長期支援（LTS）考量：**

* JDK 11 屬 LTS 版本，Oracle 提供延伸支援至 2032 年 1 月。
* JDK 24 *並非* LTS 版本。繼 JDK 21 後的下個 LTS 版本預計為 2025 年 9 月發布的 JDK 25。
* 這意味著若升級至 JDK 24，需規劃在短期內再次升級至 JDK 25（或後續 LTS 版本），以確保持續獲得長期支援與安全更新。

**總結而言：**

從 JDK 11 升級至 JDK 24 可獲得豐富新功能、顯著效能提升（特別是虛擬執行緒與快速啟動），以及關鍵安全性強化。但需注意 JDK 24 屬非 LTS 版本，為確保長期穩定性與支援，後續必須規劃升級至 JDK 25（下個 LTS 版本）。