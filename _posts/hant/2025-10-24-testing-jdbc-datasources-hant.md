---
audio: false
generated: true
image: false
lang: hant
layout: post
model: x-ai/grok-4-fast
title: 測試 WebSphere 中的 JDBC 數據源
translated: true
type: note
---

### 在 IBM WebSphere Application Server (WAS) 管理控制台中測試 JDBC 資料來源

在 IBM WebSphere Application Server (WAS) 中，您可以使用 Integrated Solutions Console（管理控制台）中的「測試連線」功能，驗證 JDBC 資料來源是否正確配置並能連線至底層資料庫。這有助於在不部署應用程式的情況下排查連線問題。

以下是逐步指南（假設您使用 WAS Traditional 或具備完整控制台的 Liberty；版本可能略有差異，例如 v8.5、v9.x）：

#### 先決條件
- 確保您擁有 WAS 伺服器及控制台的管理員存取權限。
- 必須已配置資料來源（位於「資源 > JDBC > 資料來源」），包含 JNDI 名稱、JDBC 供應商、資料庫 URL、使用者名稱、密碼等詳細資訊。
- 資料庫伺服器應正在運行，且可從 WAS 伺服器存取（請檢查防火牆、網路等）。
- 若使用安全設定（例如 SSL），請確保證書已配置。

#### 測試連線步驟

1. **登入管理控制台**：
   - 開啟網頁瀏覽器，導覽至控制台 URL：`http://<was-host>:<admin-port>/ibm/console`（預設管理端口為 HTTP 9060 或 HTTPS 9043；請替換為實際主機和端口）。
   - 使用管理員憑證登入。

2. **導覽至 JDBC 資料來源**：
   - 在左側導覽窗格中，展開**資源** > **JDBC**。
   - 點擊**資料來源**。

3. **選擇適當的範圍**：
   - 若未設定範圍，控制台將提示您選擇範圍（例如 Cell、Node、Server 或 Cluster）。請選擇定義資料來源的範圍。
   - 點擊**確定**或**繼續**以繼續。

4. **找到您的資料來源**：
   - 在資料來源清單中，找到並選擇要測試的資料來源（例如透過 JNDI 名稱如 `jdbc/myDataSource`）。
   - 若未列出，請確保已建立並儲存。如需可透過**新增**建立。

5. **存取測試連線功能**：
   - 選擇資料來源後，點擊**測試連線**（此按鈕通常位於資料來源詳細資訊頁面頂部）。
   - 若按鈕呈灰色或不可用：
     - 檢查資料來源是否啟用（若停用，請尋找「啟用」選項）。
     - 確保已關聯 JDBC 供應商（位於「資源 > JDBC > JDBC 供應商」）。
     - 某些設定可能需要先停止/啟動伺服器或儲存配置。

6. **執行測試**：
   - 控制台將嘗試使用配置的設定（URL、驅動程式、憑證等）建立連線。
   - 等待結果（視網路/資料庫回應，可能需要幾秒鐘）。
   - **成功**：您將看到訊息，例如「資料來源 <名稱> 在伺服器 <伺服器名稱> 節點 <節點名稱> 的測試連線成功」。
   - **失敗**：您將收到包含詳細資訊的錯誤訊息，例如：
     - 連線被拒絕（網路問題）。
     - 無效憑證（使用者名稱/密碼錯誤）。
     - 找不到驅動程式（JDBC 供應商配置錯誤）。
     - 來自資料庫的 SQLException 詳細資訊。

7. **檢視與排查問題**：
   - 若失敗，請檢查控制台的**訊息**區域（頁面頂部）以取得更多詳細資訊。
   - 檢視伺服器記錄：前往**問題診斷** > **記錄與追蹤** > 選擇您的伺服器 > **JVM 記錄**或**應用程式記錄**以查看堆疊追蹤。
   - 常見修正方法：
     - 驗證資料庫 URL 格式（例如 Oracle 為 `jdbc:oracle:thin:@localhost:1521:orcl`）。
     - 使用資料庫工具（如 SQL*Plus 或 DBeaver）手動測試憑證。
     - 確保 JDBC 驅動程式 JAR 已部署至正確位置（例如透過 JDBC 供應商）。
     - 對於連線池，請檢查**連線池屬性**下的設定（如最小/最大連線數）。

#### 其他提示
- **安全性**：若資料來源使用容器管理的身份驗證，請確保在**安全性** > **全域安全性**或透過 JAAS 設定憑證。
- **自訂屬性**：在資料來源頁面上，檢閱**連線池**、**容器管理的身份驗證別名**和**自訂屬性**等標籤以排查問題。
- **多伺服器/叢集**：測試將針對所選的特定伺服器/節點執行。對於叢集，必要時請在每個成員上測試。
- **WAS Liberty Profile**：若使用 Liberty，流程類似但使用 `server.xml` 檔案或 Liberty Admin Center。啟用 `adminCenter-1.0` 功能並透過 `http://localhost:9080/adminCenter` 存取。測試位於**伺服器** > 您的伺服器 > **資源** > **資料來源**。
- **自動化**：對於指令碼編寫，請使用 wsadmin（Jython/Python）指令，例如 `AdminConfig.testConnection(dsId)`，其中 `dsId` 為資料來源配置 ID。

若您遇到特定錯誤訊息或 WAS 版本，請提供更多詳細資訊以獲得針對性協助！官方文件請參閱您 WAS 版本的 IBM Knowledge Center。