---
audio: false
date: 2025-09-11
generated: true
image: false
lang: hant
layout: post
model: mistralai/mistral-medium-3.1
title: LibreChat 對話分支實施詳情
translated: true
type: note
---

很好的問題！**LibreChat** (v0.8.0-rc3) 已經具備**對話分支**功能一段時間了，它的運作方式與 OpenAI 最近的實作有所不同。以下是它在 LibreChat 中的運作方式以及與 ChatGPT 方法的比較：

---

### **分支功能在 LibreChat 中的運作方式**
1. **手動建立分支**
   - LibreChat 允許您在任何時間點，透過點擊**「分支」**按鈕（通常位於您想要分支的訊息附近）來**明確地建立對話分支**。
   - 這會建立一個**新的對話**，該對話從選定的訊息開始，並保留到該點為止的所有先前上下文。

2. **獨立路徑**
   - 分支後，新分支中的更改**不會影響原始對話**。
   - 您可以探索不同的方向（例如，除錯方法、創意想法），而不會遺失原始對話線索。

3. **無自動分支（與 ChatGPT 不同）**
   - LibreChat **不會在您編輯訊息時自動建立分支**（不同於 ChatGPT 最近的「編輯時分支」功能）。
   - 您必須**手動**選擇何時建立分支。

4. **後端實作**
   - LibreChat 以結構化方式儲存對話歷史記錄（例如，在其資料庫中使用 `conversationId` 和 `parentMessageId`）。
   - 當您建立分支時，它會建立一個新的 `conversationId`，同時重用到分支點為止的父訊息。

---

### **與 ChatGPT 分支功能的比較**

| 功能                  | LibreChat (v0.8.0-rc3)       | ChatGPT (最近更新)           |
|-----------------------|-----------------------------|-------------------------------|
| **觸發方式**          | 手動（點擊「分支」）        | 自動（在訊息編輯時）         |
| **使用情境**          | 探索替代方案                | 從編輯中恢復                 |
| **UI 指示**           | 清晰的分支列表              | 不明顯的「檢視編輯後版本」   |
| **持久性**            | 儲存在資料庫中              | 暫時性（基於工作階段？）     |
| **多分支**            | 支援（多個分支）            | 有限（單一編輯分支）         |

---

### **為何 LibreChat 更早具備此功能**
1. **開源靈活性**
   - LibreChat 建基於 OpenAI 等 API 之上，但增加了自己的**對話管理層**。
   - 對於一個自託管的聊天平台，分支功能是一個自然的需求，因為使用者希望對對話歷史記錄擁有**完全控制權**。

2. **為工作流程設計**
   - LibreChat 針對**開發者、研究人員和團隊**的需求，他們需要：
     - 在不遺失上下文的情況下測試不同的提示。
     - 並排比較 AI 的回應。
     - 在分支討論上進行協作。

3. **無供應商鎖定**
   - 與 ChatGPT（將分支功能與 OpenAI 的後端綁定）不同，LibreChat 的分支功能**無論 AI 供應商為何**都能運作（例如，對於 Claude、Gemini 或本地模型的工作方式相同）。

---

### **如何在 LibreChat 中使用分支功能**
1. **建立對話分支**：
   - 將滑鼠懸停在訊息上 → 點擊**「分支」**（或使用對話選單）。
   - 一個包含到該點為止所有訊息的新聊天將會開啟。

2. **管理分支**：
   - 使用**側邊欄**在原始對話和分支對話之間切換。
   - 為分支重新命名以保持清晰（例如，「除錯方法 A」與「方法 B」）。

3. **合併上下文（進階）**：
   - 雖然 LibreChat 不會自動合併，但您可以在分支之間**複製貼上**關鍵訊息。

---

### **範例工作流程**
1. 您正在與 AI 一起為 Python 腳本除錯。
2. 在訊息 #5 處，您建立分支以嘗試**不同的方法**。
3. 在原始分支中，您繼續使用方法 A。
4. 在分支對話中，您測試方法 B。
5. 之後比較結果，無需重新輸入上下文。

---

### **限制**
- **無視覺化差異比較**：與 Git 分支不同，LibreChat 目前不顯示分支之間的差異。
- **儲存空間**：過多的分支可能會使您的資料庫膨脹（請定期清理舊分支）。

---
### **底層技術細節**
LibreChat 的分支功能依賴於：
- **MongoDB/PostgreSQL**：使用 `parentMessageId` 參照來儲存對話。
- **前端狀態**：React 在 UI 中管理活動分支。
- **API 抽象層**：在所有 AI 供應商（OpenAI、Anthropic 等）之間統一運作。

---
### **未來改進（可能在後續版本中）**
- **編輯時自動建立分支**（類似 ChatGPT）。
- **分支比較**（並排檢視）。
- **合併功能**（合併兩個分支）。

您想深入了解任何特定部分嗎（例如，資料庫結構描述、UI 技巧或自託管提示）？