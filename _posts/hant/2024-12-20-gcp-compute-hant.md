---
audio: true
lang: hant
layout: post
title: 设置Google云服务器
---

在Google Cloud中设置代理服务器可以让您通过云实例安全地路由互联网流量，从而增强隐私并绕过限制。在本指南中，我们将引导您完成在Google Cloud中设置基本代理服务器的过程，并配置必要的防火墙规则以允许流量通过。

## 目錄
1. [創建Google Cloud虛擬機實例](#創建google-cloud虛擬機實例)
2. [配置代理伺服器](#配置代理伺服器)
3. [設置防火牆規則](#設置防火牆規則)
4. [測試代理伺服器](#測試代理伺服器)
5. [結論](#結論)

---

## 创建Google云虚拟机实例

在设置代理服务器之前，您需要在Google Cloud中创建一个虚拟机（VM）实例。

1. 登錄Google雲端控制台：訪問[Google雲端控制台](https://console.cloud.google.com/)並登錄您的賬戶。
   
2. 創建新的虛擬機實例：
   - 導航至計算引擎 > VM實例。
   - 點擊創建實例。
   - 選擇所需的區域和機器類型。為簡化操作，您可以使用默認設置或選擇輕量級配置，如`e2-micro`實例。
   - 在防火牆部分，勾選允許HTTP流量和允許HTTPS流量，以啟用網絡訪問。
   
3. 設置SSH訪問：
   - 在SSH密鑰部分，添加您的SSH公鑰以便遠程訪問實例。這對於後續配置您的代理服務器至關重要。
   
4. 點擊創建以啟動您的虛擬機。

在虚拟机设置完成后，您可以通过Google Cloud Console使用SSH连接到它，或者通过终端使用以下命令：

```bash
gcloud compute ssh <你的虛擬機名稱>
```

---

## 配置代理服务器

一旦您的虚拟机设置完成，您就可以配置任何您选择的代理服务器软件。代理软件应被安装并配置为在所需端口（例如，常见代理设置中的`3128`端口）上接受连接。确保该软件允许来自远程客户端的连接。

（此处没有提供需要翻译的文本，请提供具体内容以便进行翻译。）

## 设置防火墙规则

为了允许流量到达您的代理服务器，您需要配置Google Cloud防火墙规则以开放必要的端口。

1. 導航至 Google Cloud Console 中的防火牆規則：
   - 前往 VPC 網絡 > 防火牆規則，在 Google Cloud Console 中。

2. 创建新的防火墙规则：
   - 点击“创建防火墙规则”。
   - 为规则命名，例如`allow-proxy-access`。
   - 将流量方向设置为“入站”（Ingress，即进入的流量）。
   - 将匹配时的操作设置为“允许”（Allow）。
   - 设置目标为“网络中的所有实例”或“指定的目标标签”（如果您希望有更多的控制权）。
   - 在“源IP范围”下，可以设置为`0.0.0.0/0`以允许所有IP地址访问，或者为了更好的安全性，限制为特定的IP或范围。
   - 在“协议和端口”下，选择“指定的协议和端口”，并输入您的代理服务器使用的端口（例如，`tcp:3128`）。

3. 保存防火墙规则：
   配置完规则后，点击“创建”以启用防火墙。

---

## 测试代理服务器

配置好防火墙后，接下来就是测试您的代理服务器了。

1. 从本地机器测试代理：

您可以配置本地计算机的浏览器或系统代理设置，以使用Google Cloud VM的外部IP地址以及您的代理服务器正在监听的端口（例如，`3128`）。

2. 使用命令行测试：
   
   你也可以通过设置代理环境变量，使用`curl`来测试代理：

```bash
export http_proxy=http://<你的虚拟机外部IP>:3128
export https_proxy=http://<你的虚拟机外部IP>:3128
curl -I http://example.com
```

如果连接成功，您应该会看到来自网站的响应。

---

## 结论

通过遵循本指南，您已学会如何在Google Cloud上设置代理服务器，并配置防火墙规则以允许入站流量。这一配置为您提供了一种简便的方法，能够安全地将互联网流量通过云端路由，绕过网络限制，同时增强隐私保护。