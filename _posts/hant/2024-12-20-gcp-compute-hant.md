---
audio: false
generated: false
lang: hant
layout: post
title: 建立一個Google雲端伺服器
translated: true
---

在Google Cloud上設置代理伺服器可以讓您通過雲端實例安全地路由您的互聯網流量，從而增強隱私並繞過限制。在本指南中，我們將逐步介紹如何在Google Cloud上設置基本代理伺服器，並配置必要的防火牆規則以允許流量通過。

## 目錄
1. [創建Google Cloud VM實例](#創建google-cloud-vm實例)
2. [配置代理伺服器](#配置代理伺服器)
3. [設置防火牆規則](#設置防火牆規則)
4. [測試代理伺服器](#測試代理伺服器)
5. [結論](#結論)

---

## 創建Google Cloud VM實例

在設置代理伺服器之前，您需要在Google Cloud中創建一個虛擬機（VM）實例。

1. 登錄Google Cloud控制台：前往[Google Cloud控制台](https://console.cloud.google.com/)並登錄您的帳戶。
   
2. 創建新的VM實例：
   - 導航到Compute Engine > VM實例。
   - 點擊創建實例。
   - 選擇所需的地區和機器類型。為了簡單起見，您可以使用默認設置或選擇輕量級配置，例如`e2-micro`實例。
   - 在防火牆部分，選擇允許HTTP流量和允許HTTPS流量以啟用網絡訪問。
   
3. 設置SSH訪問：
   - 在SSH密鑰部分，添加您的SSH公鑰以遠程訪問實例。這對於稍後配置代理伺服器至關重要。
   
4. 點擊創建以啟動您的VM。

VM設置完成後，您可以從Google Cloud控制台或通過終端使用以下命令連接到它：

```bash
gcloud compute ssh <您的VM名稱>
```

---

## 配置代理伺服器

VM設置完成後，您可以配置您選擇的任何代理伺服器軟件。代理軟件應安裝並配置為在所需端口（例如，常見代理設置的`3128`）上接受連接。確保該軟件允許來自遠程客戶端的連接。

---

## 設置防火牆規則

為了允許流量到達您的代理伺服器，您需要配置Google Cloud防火牆規則以打開必要的端口。

1. 在Google Cloud控制台中導航到防火牆規則：
   - 前往VPC網絡 > 防火牆規則。

2. 創建新的防火牆規則：
   - 點擊創建防火牆規則。
   - 輸入規則的名稱，例如`allow-proxy-access`。
   - 將流量方向設置為Ingress（入站流量）。
   - 將匹配操作設置為允許。
   - 將目標設置為網絡中的所有實例或指定的目標標籤（如果您希望更精細地控制）。
   - 在源IP範圍下，您可以將其設置為`0.0.0.0/0`以允許所有IP地址的訪問，或限制為特定IP或範圍以提高安全性。
   - 在協議和端口下，選擇指定的協議和端口並輸入代理伺服器使用的端口（例如，`tcp:3128`）。

3. 保存防火牆規則：
   配置完規則後，點擊創建以啟用防火牆。

---

## 測試代理伺服器

配置完防火牆後，是時候測試您的代理伺服器了。

1. 從本地機器測試代理：

   您可以配置本地機器的瀏覽器或系統代理設置，以使用Google Cloud VM的外部IP地址和代理伺服器正在監聽的端口（例如，`3128`）。

2. 使用命令行測試：
   
   您也可以通過設置代理環境變量來使用`curl`測試代理：

```bash
export http_proxy=http://<您的VM外部IP>:3128
export https_proxy=http://<您的VM外部IP>:3128
curl -I http://example.com
```

如果連接成功，您應該會看到來自網站的響應。

---

## 結論

通過遵循本指南，您已經學會了如何在Google Cloud上設置代理伺服器並配置防火牆規則以允許入站流量。此設置提供了一種簡單的方法，可以通過雲端安全地路由您的互聯網流量，繞過網絡限制並增強隱私。