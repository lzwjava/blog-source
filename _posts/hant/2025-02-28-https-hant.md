---
audio: false
generated: true
lang: hant
layout: post
title: HTTPS 運作原理
translated: true
---

讓我用清晰且分步的方式解釋 HTTPS 的運作方式，包括 SSL、證書、加密過程以及 TLS 1.2 和 TLS 1.3 之間的差異。

---

### **什麼是 HTTPS？**
HTTPS 代表 **超文本傳輸協議安全**。它是 HTTP 的安全版本，用於在您的瀏覽器和網站之間傳輸數據。「安全」部分來自於添加一層加密和驗證，由 **SSL（安全套接字層）** 或其現代替代品 **TLS（傳輸層安全）** 提供。因此，HTTPS 本質上是在 TLS（或歷史上的 SSL）上運行的 HTTP，以保護您的數據。

---

### **HTTPS 如何運作？ TLS 握手**
當您使用 HTTPS 訪問網站（例如 `https://example.com`）時，您的瀏覽器和網站的伺服器在交換任何數據之前建立一個安全連接。這個過程稱為 **TLS 握手**。以下是簡單的步驟：

1. **客戶端問候**：
   - 您的瀏覽器向伺服器發送一條消息，說：「你好！這是我支持的 TLS 版本（例如 TLS 1.3），我可以使用的加密算法（密碼套件）和一個隨機的字節串（客戶端隨機）。」

2. **伺服器問候**：
   - 伺服器回應：「你好！我將使用您列表中的這個 TLS 版本和這個密碼套件。這是我的隨機串（伺服器隨機）。」

3. **證書**：
   - 伺服器發送其 **SSL 證書**，其中包括其 **公鑰** 並由受信任的 **證書授權機構（CA）** 簽名。這個證書證明了伺服器的身份。

4. **客戶端密鑰交換**：
   - 您的瀏覽器檢查證書以確保其有效並由受信任的 CA 簽名。如果通過，瀏覽器生成一個 **預主密鑰**，用伺服器的公鑰加密，然後發送給伺服器。

5. **會話密鑰**：
   - 您的瀏覽器和伺服器使用客戶端隨機、伺服器隨機和預主密鑰獨立生成相同的 **會話密鑰**。這個密鑰用於在會話期間加密和解密所有數據。

6. **完成**：
   - 雙方發送一條用會話密鑰加密的「完成」消息，以確認安全連接已準備就緒。

握手完成後，所有數據（如網頁、表單或文件）都用會話密鑰加密，使其對任何可能攔截它的人無法閱讀。

---

### **什麼是 SSL 證書及其運作方式？**
**SSL 證書** 是一個數位文件，證明網站的身份並啟用加密。以下是您需要了解的內容：

- **內容**：證書包括網站的域名、其公鑰和來自 **證書授權機構（CA）** 的數位簽名。
- **用途**：它確保伺服器是合法的（例如，您真的連接到 `example.com`，而不是一個假網站），並提供用於加密的公鑰。
- **驗證**：您的瀏覽器檢查：
  1. 證書是否有效（未過期或未撤銷）？
  2. 是否由受信任的 CA 簽名？（瀏覽器內建一個受信任的 CA 列表，如 DigiCert 或 Let’s Encrypt。）

如果檢查通過，瀏覽器信任伺服器並繼續進行握手。

CA 就像一個受信任的第三方，為網站背書。沒有這個，攻擊者可以冒充任何網站並窃取您的數據。

---

### **加密算法**
HTTPS 中的加密依賴於 **非對稱** 和 **對稱** 加密的組合：

1. **非對稱加密**（在握手期間）：
   - 使用一個 **公鑰**（公開共享）和一個 **私鑰**（由伺服器保密）。
   - 您的瀏覽器用伺服器的公鑰加密預主密鑰。只有伺服器，用其私鑰，才能解密它。
   - 示例算法：RSA 或椭圓曲線密碼學（ECC）。

2. **對稱加密**（用於會話）：
   - 一旦生成會話密鑰，雙方都使用它來加密和解密數據。
   - 這比非對稱加密快，適合大數據傳輸。
   - 示例算法：AES（高級加密標準）。

握手使用非對稱加密來安全地共享會話密鑰，然後對稱加密接管以提高效率。

---

### **TLS 1.2 和 TLS 1.3 的差異**
**TLS 1.2** 和 **TLS 1.3** 是 TLS 協議的版本，TLS 1.3 是更新、改進的版本。以下是主要差異：

| **特性**              | **TLS 1.2**                              | **TLS 1.3**                              |
|---------------------------|------------------------------------------|------------------------------------------|
| **握手速度**       | 客戶端和伺服器之間的多次往返，增加延遲。 | 更少的往返，通常只有一次，連接更快。可以在重新連接時立即發送數據（“0-RTT”）。 |
| **密碼套件**         | 支持較舊、較不安全的加密算法（例如 SHA-1）。 | 移除過時的密碼套件，僅使用現代、安全的算法（例如 AES-GCM）。 |
| **隱私**               | 一些握手數據（如證書）以明文發送。 | 幾乎整個握手都加密，隱藏更多細節，不讓窺探者看到。 |
| **0-RTT 重新建立**      | 不可用。                           | 允許在重新連接時立即發送數據，但如果未正確保護，可能會面臨重放攻擊。 |
| **安全性**              | 由於較舊的功能，容易受到某些攻擊。 | 設計上更強，移除弱選項。 |

簡而言之，TLS 1.3 比 TLS 1.2 **更快**、**更安全** 和 **更隱私**，成為現代 HTTPS 的標準。

---

### **將所有內容整合在一起**
HTTPS 通過以下方式保護網絡通信：
1. 使用 **TLS 握手** 設置加密連接。
2. 依賴來自受信任 CA 的 **SSL 證書** 驗證伺服器的身份。
3. 結合 **非對稱加密**（用於握手）和 **對稱加密**（用於數據傳輸）來保護您的數據。
4. 通過協議如 **TLS 1.3** 進化，這些協議在速度、安全性和隱私方面改進了 TLS 1.2。

這就是 HTTPS 保護您的瀏覽安全的核心！如果您想讓我深入探討任何部分，請告訴我。