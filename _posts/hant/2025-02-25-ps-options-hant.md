---
audio: false
generated: true
lang: hant
layout: post
title: ps 指令及其選項
translated: true
type: note
---

讓我來解析 `ps -ef | grep java` 這個指令，並解釋 `ps` 指令的一些常用選項，幫助你理解其運作原理及如何自訂使用。

### `ps -ef | grep java` 指令解析
`ps -ef | grep java` 這個指令用於列出類Unix系統上所有正在執行的行程，並篩選輸出結果僅顯示與Java相關的行程。以下是各部分的說明：

- **`ps`**：這是行程狀態指令，用於顯示活動行程的相關資訊。
- **`-e`**：此選項會選取所有行程，包含其他使用者執行的行程，不僅限於您自己的行程。
- **`-f`**：代表「完整格式」列表，提供詳細輸出資訊，例如使用者ID（UID）、行程ID（PID）、父行程ID（PPID）、啟動時間及正在執行的指令。
- **`|`**：這個管道符號會將 `ps -ef` 的輸出傳送給下一個指令。
- **`grep java`**：此指令會篩選輸出結果，僅顯示包含「java」字詞的列，讓您能輕鬆找出與Java相關的行程（例如Java應用程式或伺服器）。

因此，當您需要尋找並監控系統上運作中的Java行程時，這個指令特別實用。

### `ps` 指令的常用選項
`ps` 指令具有高度自訂性，提供多種選項讓您根據需求調整輸出內容。以下是一些最常使用的選項：

- **`-e`**：選取系統上所有正在執行的行程，不限使用者。適合用於全面掌握系統狀況。
- **`-f`**：以完整格式顯示額外細節，包含UID、PID、PPID、CPU使用率及完整指令列。
- **`-u username`**：顯示特定使用者擁有的行程。例如 `ps -u alice` 會列出使用者「alice」執行的所有行程。
- **`-p pid`**：透過行程ID（PID）顯示特定行程的資訊。例如 `ps -p 5678` 會顯示PID為5678的行程詳細資料。
- **`--forest`**：以樹狀結構顯示行程，突顯行程之間的父子關係，有助理解行程階層架構。
- **`-a`**：選取所有行程，但不包含工作階段領導者及未與終端機連結的行程。
- **`-l`**：提供長格式列表，包含優先級、nice值及記憶體使用量等額外欄位。
- **`-o format`**：讓您自訂輸出欄位。例如 `ps -o pid,comm` 僅顯示PID與指令名稱。
- **`aux`**：這是常見的BSD風格組合選項，顯示所有行程（`a`）、包含使用者導向細節（`u`），並涵蓋無控制終端的行程（`x`）。

### 如何使用這些選項
您可以根據需求混合搭配這些選項。例如：
- `ps -ef` 提供所有行程的詳細列表
- `ps -u john` 顯示使用者「john」正在執行的行程
- `ps aux`（注意：此為BSD風格，不需連字號）是查看所有行程及使用者細節的常用方式
- `ps --forest -e` 以樹狀結構顯示所有行程

這些選項讓 `ps` 成為監控和管理系統行程的強大工具！如果您需要針對特定使用情境的範例，歡迎隨時告訴我。