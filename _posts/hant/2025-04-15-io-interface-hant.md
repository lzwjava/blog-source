---
audio: false
generated: true
lang: hant
layout: post
title: 輸入輸出與介面技術
translated: true
type: note
---

太好了！這是一份針對**第四部分：I/O與介面技術**的**全面教學指南**，根據您的課程大綱編寫。本教程結構清晰，旨在解釋概念、提供實用範例，並展示如8255A、8253/8254和8251A等元件如何在微電腦系統中協同工作。

---

## 📘 第四部分：I/O與介面技術

---

### **1. I/O介面基礎**

#### ✅ 連接埠定址

I/O介面允許微處理器與外部裝置通訊。主要有**兩種定址方案**：

- **記憶體映射I/O**：
  - I/O裝置被視為記憶體位置。
  - 使用與記憶體存取相同的指令（例如 `MOV`）。
  - 優點：定址空間大，可使用所有CPU指令。
  - 缺點：佔用記憶體位址空間。

- **獨立I/O（連接埠映射I/O）**：
  - 使用特殊指令，如 `IN` 和 `OUT`。
  - 定址空間有限（通常為256個連接埠）。
  - 與記憶體分離的位址空間。

| 類型             | 使用的指令集        | 位址空間          |
|------------------|---------------------|-------------------|
| 記憶體映射       | `MOV` 等            | 記憶體的一部分    |
| 獨立I/O          | `IN`, `OUT`         | 獨立的I/O空間     |

---

#### ✅ 資料傳輸模式

1. **程式控制I/O**：
   - CPU檢查裝置狀態並直接讀寫資料。
   - 簡單但效率低（忙碌等待）。

2. **中斷驅動I/O**：
   - 裝置準備好時透過**中斷**通知CPU。
   - CPU執行中斷服務常式。
   - 提升效率。

3. **DMA（直接記憶體存取）**：
   - 裝置直接與記憶體進行資料傳輸。
   - 對於大型/快速資料傳輸，可繞過CPU。
   - 用於高速裝置，如磁碟。

---

### **2. 中斷系統**

#### ✅ 中斷向量表

- 儲存**中斷服務常式的位址**。
- 每個中斷類型有**唯一的向量**（例如，計時器使用 INT 0x08）。
- CPU查詢該表以跳轉至正確的ISR。

#### ✅ 優先順序處理

- 當多個中斷同時發生時，**優先順序**決定哪個先被處理。
- 優先順序可以是**固定**或**可程式設計**的。

#### ✅ 8259A 可程式設計中斷控制器

- 管理多個中斷來源（最多8個）。
- 可**串接**以支援64個中斷輸入。
- 主要功能：
  - 中斷遮罩。
  - 設定優先順序。
  - 傳送中斷向量給CPU。

**暫存器**：
- IMR（中斷遮罩暫存器）
- ISR（服務中暫存器）
- IRR（中斷請求暫存器）

**範例**：鍵盤和計時器同時觸發中斷 — 8259A根據設定的優先順序來處理。

---

### **3. 常見介面晶片**

---

#### ✅ 8255A 可程式周邊介面

用於與外部並列裝置（如開關、LED等）介接。

- 具有3個連接埠：**連接埠A**、**連接埠B** 和 **連接埠C**。
- 透過**控制字元**進行控制。

**操作模式**：

- **模式 0** – 簡單I/O
  - 每個連接埠可設定為輸入/輸出。
- **模式 1** – 交握I/O
  - 支援與周邊裝置的同步。
- **模式 2** – 雙向I/O（僅限連接埠A）
  - 具有交握功能的雙向資料傳輸。

**範例**：
- 連接埠A：輸出至LED顯示器
- 連接埠B：從DIP開關輸入
- 連接埠C：用於控制訊號

---

#### ✅ 8253 / 8254 可程式間隔計時器

用於產生延遲、鮑率等。

- 具有3個獨立的16位元計數器。
- 每個計數器有多種模式（0–5），例如：

| 模式 | 描述               |
|------|---------------------|
| 0    | 終端計數中斷       |
| 2    | 速率產生器（例如用於時鐘） |
| 3    | 方波產生器         |

**應用**：
- 延遲產生
- 即時時鐘
- 序列埠的鮑率產生

**典型用途**：
- 計數器0：作業系統計時器中斷
- 計數器1：DRAM刷新
- 計數器2：揚聲器音調

---

#### ✅ 8251A USART（通用同步/非同步收發器）

用於**序列通訊**。

- 在並列與序列資料之間進行轉換。
- 同時支援：
  - **同步**：需要時鐘訊號
  - **非同步**：使用起始/停止位元

**主要特性**：
- 鮑率控制（透過8253/8254）
- 可設定的字元長度、停止位元、同位元
- 支援傳輸與接收緩衝

**應用**：與PC或微控制器的序列埠通訊。

---

## ✅ 總結表格

| 晶片    | 功能                     | 主要特性                          |
|---------|--------------------------|-----------------------------------|
| 8255A   | 並列I/O                  | 3個連接埠，3種模式，交握功能      |
| 8253/54 | 計時/計數                | 3個計數器，多種模式               |
| 8251A   | 序列通訊                 | 同步/非同步，鮑率控制             |
| 8259A   | 中斷控制                 | 優先順序，遮罩，ISR向量導向       |

---

## 🧠 實際應用場景

您想設計一個簡單的微電腦系統來實現：

- 透過連接埠A（8255A 模式0）控制LED矩陣
- 透過中斷（8259A）接收鍵盤輸入
- 每1毫秒產生一次系統週期性時基（8253 模式2）
- 透過序列埠（8251A 非同步模式）傳送感測器資料至PC

每個晶片將透過位址解碼和控制訊號進行配置並連接到CPU，同時編寫相應的軟體來管理通訊。

---

如果您需要此章節的範例程式碼、模擬圖或測驗，請告訴我！