---
audio: false
generated: true
image: false
lang: hant
layout: post
model: x-ai/grok-code-fast-1
title: 互動式 Git 從根變基
translated: true
type: note
---

### 拆解 `git rebase -i --root`

`git rebase -i --root` 是一個 Git 指令，用於從儲存庫歷史中的第一個（根）提交開始進行互動式 rebase。讓我們逐步拆解這個指令。

#### 指令的關鍵部分
- **`git rebase`**：透過將提交移動到新的基礎上來重寫提交歷史。這對於清理混亂的歷史、合併提交或編輯訊息非常有用。
- **`-i`（或 `--interactive`）**：以互動模式執行 rebase，開啟文字編輯器讓您為每個提交指定操作（例如：pick、squash、edit 或 drop）。
- **`--root`**：這個標記告訴 Git 從根提交開始 rebase——即儲存庫中的初始提交。若沒有此標記，`git rebase -i` 通常會從指定基礎後的第一個提交或歷史中的某個點開始。

#### 這裡的「根」是什麼意思？
- 在 Git 中，「根」指的是最早的祖先提交，即沒有父提交的提交（例如：透過 `git commit --allow-empty --allow-empty-message` 或類似指令建立的第一個提交）。這可能是儲存庫中的第一個提交。
- 使用 `--root` 意味著從頭開始重新應用整個歷史，讓您能夠修改每個提交，包括根提交。這就像是對儲存庫中所有曾經的提交進行完整的 rebase。

#### 何時以及為何使用它？
- **使用情境**：非常適合需要清理或重寫整個提交歷史的儲存庫（例如：在 fork 專案時需要移除混亂的早期歷史）。您可能會合併早期提交、變更提交訊息或重新排序。
- **範例工作流程**：
  1. 執行 `git rebase -i --root`。
  2. 編輯器會開啟，顯示從根提交開始的所有提交列表。
  3. 編輯檔案以指定操作（例如：將多個早期提交合併為一個）。
  4. 儲存並退出；Git 會重新應用歷史。

這個指令功能強大但具有破壞性——它會重寫歷史，因此請避免在共享分支上使用（僅在本地分支使用，或與協作者協調後使用）。若出現衝突，您需要手動解決。

如需更多詳細資訊，請查閱官方 Git 文件：`git help rebase`。如果您有特定使用情境，請提供更多背景資訊！