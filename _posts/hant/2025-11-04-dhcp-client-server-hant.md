---
audio: false
generated: true
image: false
lang: hant
layout: post
model: x-ai/grok-4-fast
title: DHCP 用戶端與伺服器角色
translated: true
type: note
---

不，這是常見的混淆點，但 DHCP 並不需要在客戶端和路由器上「運行」相同的東西——它是一種客戶端-伺服器協議，雙方各有明確角色。讓我簡單解釋一下。

### DHCP 快速概覽
DHCP（動態主機設定協議）能自動為網路上的裝置分配 IP 位址及其他網路設定（如子網路遮罩、閘道、DNS）。它消除了手動設定的需求。

### 典型設定中的角色
- **路由器（或 DHCP 伺服器）**：運行 **DHCP 伺服器**軟體。這是「主管」，負責從其管理的位址池中分配 IP 位址。大多數家用/SOHO 路由器（例如 TP-Link、Netgear 的產品）都內建此功能並預設啟用。
- **客戶端（例如你的筆記型電腦、手機、PC）**：運行 **DHCP 客戶端**（內建於作業系統中，如 Linux 的 `dhclient` 或 Windows 的自動 IP 設定）。它向伺服器請求 IP，但不會向其他裝置提供 IP。

雙方對於交握過程都至關重要，但它們運行的並非相同的「DHCP」流程——一方提供服務，一方發出請求。

### 運作方式（基本流程）
1. **客戶端廣播「DISCOVER」**：新裝置加入網路並大喊：「嘿，有人能給我 IP 嗎？」
2. **伺服器（路由器）提供「OFFER」**：「當然，這裡有個可用的 IP 和設定。」
3. **客戶端請求「REQUEST」**：「我要這個，麻煩了。」
4. **伺服器確認「ACK」**：「搞定——使用它吧。」

如果路由器的 DHCP 伺服器關閉，客戶端可能需要設定靜態 IP 或依賴其他伺服器（例如 Pi-hole 或企業設定中的伺服器）。

### 常見情境

| 設定 | DHCP 伺服器位置 | 客戶端行為 |
|-------|----------------------|-----------------|
| **家用網路** | 路由器（已啟用） | 自動設定所有項目 |
| **無路由器 DHCP** | 手動/靜態 IP 或外部伺服器 | 若無回應，客戶端會退回 APIPA（169.254.x.x） |
| **企業環境** | 專用 DHCP 伺服器（非路由器） | 相同的客戶端請求流程 |

如果你正在排查特定問題（例如「我的裝置無法取得 IP」），請提供更多細節——我可以協助除錯！若想深入閱讀，請查閱官方 RFC：[RFC 2131: Dynamic Host Configuration Protocol](https://datatracker.ietf.org/doc/html/rfc2131)。