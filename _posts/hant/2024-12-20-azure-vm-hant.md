---
audio: false
generated: false
image: false
lang: hant
layout: post
title: 設置Azure伺服器
translated: true
---

在Microsoft Azure上設置服務器並配置其以打開特定端口對於各種應用程序（包括託管服務、代理等）至關重要。本指南將引導您完成創建Azure虛擬機（VM）並配置防火牆以打開端口1080的過程。

## 目錄

1. [先決條件](#先決條件)
2. [創建Azure虛擬機](#創建azure虛擬機)
3. [配置防火牆以打開端口1080](#配置防火牆以打開端口1080)
4. [測試配置](#測試配置)
5. [結論](#結論)

## 先決條件

在開始之前，請確保您具備以下條件：

- 一個有效的[Microsoft Azure](https://azure.microsoft.com/)帳戶。
- 使用Azure Portal的基本知識。
- 用於訪問VM的SSH客戶端（如macOS/Linux上的Terminal或Windows上的PuTTY）。

## 創建Azure虛擬機

1. 登錄Azure Portal：
   導航至[Azure Portal](https://portal.azure.com/)並使用您的憑據登錄。

2. 創建新的虛擬機：
   - 點擊左上角的“創建資源”。
   - 從可用資源列表中選擇“虛擬機”。

3. 配置VM基礎設置：
   - 訂閱：選擇您的Azure訂閱。
   - 資源組：創建新的資源組或選擇現有的資源組。
   - 虛擬機名稱：為您的VM輸入名稱（例如`AzureServer`）。
   - 區域：選擇最接近目標受眾的區域。
   - 映像：選擇操作系統映像（例如Ubuntu 22.04 LTS）。
   - 大小：根據您的性能需求選擇VM大小。
   - 身份驗證：選擇SSH公鑰以進行安全訪問。上傳您的SSH公鑰。

4. 配置網絡：
   - 確保VM放置在適當的虛擬網絡和子網中。
   - 啟用公共IP以允許外部訪問。

5. 審查並創建：
   - 審查您的配置。
   - 點擊“創建”以部署VM。部署可能需要幾分鐘。

## 配置防火牆以打開端口1080

一旦您的VM啟動並運行，您需要配置Azure的網絡安全組（NSG）以允許端口1080上的流量。

1. 導航至您的VM的網絡設置：
   - 在Azure Portal中，轉到“虛擬機”。
   - 選擇您的VM（`AzureServer`）。
   - 點擊左側邊欄中的“網絡”。

2. 識別網絡安全組（NSG）：
   - 在“網絡接口”下，找到相關的NSG。
   - 點擊NSG以管理其規則。

3. 添加入站安全規則：
   - 在NSG設置中，轉到“入站安全規則”。
   - 點擊“添加”以創建新規則。

4. 配置規則：
   - 源：任何（或指定範圍以增強安全性）。
   - 源端口範圍：`*`
   - 目標：任何
   - 目標端口範圍：`1080`
   - 協議：TCP
   - 操作：允許
   - 優先級：`1000`（確保它不與現有規則衝突）。
   - 名稱：`Allow-1080-TCP`

5. 保存規則：
   - 點擊“添加”以應用新規則。

## 測試配置

配置防火牆後，必須驗證端口1080是否打開並可訪問。

1. 使用Telnet驗證端口可訪問性：
   從本地機器運行：

   ```bash
   telnet <您的VM_IP> 1080
   ```

   - 將`<您的VM_IP>`替換為您的VM的公共IP地址。
   - 如果連接成功，則端口已打開並可訪問。

2. 替代端口檢查工具：
   - Netcat（`nc`）：
     ```bash
     nc -zv <您的VM_IP> 1080
     ```
   - 在線端口檢查器：
     使用在線服務如[canyouseeme.org](https://canyouseeme.org/)檢查端口1080是否打開。

3. 故障排除：
   - 連接問題：驗證NSG規則是否正確設置，並且VM上的任何本地防火牆都配置為允許端口1080上的流量。
   - 錯誤的IP：確保您使用的是VM的正確公共IP地址。

## 結論

通過遵循本指南，您已成功設置了Azure虛擬機並配置了防火牆以打開端口1080。此設置為部署需要特定端口訪問的各種應用程序或服務奠定了基礎。

如需進一步配置，例如在端口1080上設置代理服務或其他應用程序，請參閱我們關於[V2Ray代理設置](#)和[生成自定義vmess URL](#)的專用文章。