---
lang: hant
layout: post
title: 设置Azure服务器
---

在Microsoft Azure上设置服务器并配置以开放特定端口，对于托管服务、代理等多种应用至关重要。本指南将引导您完成创建Azure虚拟机（VM）并配置防火墙以开放1080端口的过程。

## 目录

1. [先决条件](#prerequisites)
2. [创建 Azure 虚拟机](#creating-an-azure-virtual-machine)
3. [配置防火墙以打开端口 1080](#configuring-the-firewall-to-open-port-1080)
4. [测试配置](#testing-the-configuration)
5. [结论](#conclusion)

## 先决条件

在开始之前，请确保您具备以下条件：

- 一个有效的 [Microsoft Azure](https://azure.microsoft.com/) 账户。
- 使用 Azure 门户的基本知识。
- 用于访问虚拟机的 SSH 客户端（如 macOS/Linux 上的 Terminal 或 Windows 上的 PuTTY）。

## 创建 Azure 虚拟机

1. 登录Azure门户：
   访问[Azure门户](https://portal.azure.com/)，并使用您的凭据登录。

2. 创建新虚拟机：
   - 点击左上角的“创建资源”。
   - 从可用资源列表中选择“虚拟机”。

3. 配置虚拟机基础设置：
   - 订阅：选择您的Azure订阅。
   - 资源组：创建新的资源组或选择一个现有的。
   - 虚拟机名称：为您的虚拟机输入名称（例如，`AzureServer`）。
   - 区域：选择最接近您目标用户的区域。
   - 镜像：选择一个操作系统镜像（例如，Ubuntu 22.04 LTS）。
   - 大小：根据您的性能需求选择一个虚拟机大小。
   - 认证：选择SSH公钥以确保安全访问。上传您的SSH公钥。

4. 配置网络：
   - 确保虚拟机放置在适当的虚拟网络和子网中。
   - 保持公共IP启用，以允许外部访问。

5. 检查与创建：
   - 仔细检查您的配置设置。
   - 点击“创建”以部署虚拟机。部署过程可能需要几分钟时间。

## 配置防火墙以开放1080端口

一旦您的虚拟机启动并运行，您需要配置Azure的网络安全性组（NSG），以允许1080端口的流量通过。

1. 导航至您的虚拟机网络设置：
   - 在Azure门户中，前往“虚拟机”。
   - 选择您的虚拟机（`AzureServer`）。
   - 点击左侧边栏中的“网络”。

2. 识别网络安全组（NSG）：
   - 在“网络接口”下，找到关联的NSG。
   - 点击该NSG以管理其规则。

3. 添加入站安全规则：
   - 在NSG设置中，导航至“入站安全规则”。
   - 点击“添加”以创建新规则。

4. 配置规则：
   - 来源：任意（或指定一个范围以增强安全性）。
   - 来源端口范围：`*`
   - 目标：任意
   - 目标端口范围：`1080`
   - 协议：TCP
   - 操作：允许
   - 优先级：`1000`（确保不与现有规则冲突）。
   - 名称：`Allow-1080-TCP`

5. 保存规则：
   - 点击“添加”以应用新规则。

## 测试配置

配置防火墙后，必须确认端口1080已开放并可访问。

1. 使用Telnet驗證端口可達性：
   從您的本地機器運行：

   ```bash
   telnet <你的虛擬機IP> 1080
   ```

   - 将 `<YOUR_VM_IP>` 替换为您的虚拟机公网IP地址。
   - 如果连接成功，说明端口是开放且可访问的。

2. 替代的端口检查工具：
   - Netcat (`nc`)：
     ```bash
     nc -zv <你的虚拟机IP> 1080
     ```
   - 在线端口检查器：
     使用如 [canyouseeme.org](https://canyouseeme.org/) 等在线服务来检查1080端口是否开放。

3. 故障排除：
   - 连接问题：确认NSG规则设置正确，并且虚拟机上的任何本地防火墙已配置为允许端口1080上的流量。
   - IP地址错误：确保您使用的是虚拟机的正确公共IP地址。

## 结论

遵循本指南，您已成功设置了一台Azure虚拟机，并配置防火墙以开放1080端口。这一配置为部署需要特定端口访问的各种应用程序或服务奠定了基础。

如需进一步配置，例如在1080端口设置代理服务或其他应用程序，请参阅我们关于[V2Ray代理设置](#)和[生成自定义vmess链接](#)的专门文章。