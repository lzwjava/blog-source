---
audio: false
generated: true
image: false
lang: hant
layout: post
model: x-ai/grok-4-fast
title: 解讀IPv4路由表輸出
translated: true
type: note
---

### 解讀你的 `ip route` 輸出

這是來自你 Linux 系統的 IPv4 路由表（很可能使用 iproute2 中的 `ip` 命令）。它顯示了你的機器如何根據目標 IP 來決定封包的傳送路徑。路由會依最長前綴（最具體的優先）進行匹配，而預設路由則負責處理所有其他情況。

我將逐條拆解並以表格說明，然後總結整體意義。這與我們之前的對話相關：它是一個真實世界中簡單路由表的範例，包含直連路由（本地子網路）和通往網際網路的預設閘道。

| 目的地            | 閘道（下一跳）     | 裝置      | 協定     | 作用域 | 來源 IP      | 度量值 | 備註 |
|-------------------|--------------------|-----------|----------|-------|---------------|--------|-------|
| **0.0.0.0/0** (預設) | 192.168.1.1       | enp4s0   | dhcp    | global| （無）       | 100   | 所有未匹配其他路由的流量都會導向此處。指向乙太網路介面 enp4s0 上的你的路由器（很可能是你的家用閘道）。透過 DHCP 發現。 |
| **169.254.0.0/16** | （直接）          | enp4s0   | kernel  | link  | （無）       | 1000  | 當 DHCP 失敗時用於自動設定的鏈路本地（APIPA）範圍。高度量值意味著它是後備方案——僅在沒有更好路由時使用。 |
| **172.17.0.0/16** | （直接）          | docker0  | kernel  | link  | 172.17.0.1   | （無）| Docker 的預設橋接網路。"linkdown" 表示介面已關閉（沒有活躍的容器？）。你的主機充當此子網路的閘道。 |
| **172.18.0.0/16** | （直接）          | br-c33e38e216df | kernel | link  | 172.18.0.1   | （無）| 另一個 Docker 橋接（使用者定義的網路？）。處於活動狀態，因此在此橋接上的容器可以透過 172.18.0.1 連接到主機。 |
| **192.168.1.0/24** | （直接）         | enp4s0   | kernel  | link  | 192.168.1.35 | 100   | 你的本地 LAN 子網路。透過 enp4s0 直接連接——發往 192.168.1.x 上其他裝置的封包會保持在本地（例如，發往位於 .1 的路由器）。你的機器 IP 是 192.168.1.35。 |

#### 關鍵洞察
- **本地/直連路由**：172.x.x.x 和 192.168.1.0/24 條目是針對直接連接網路的 "kernel" 路由（無需下一跳閘道）。這與你描述的簡單迭代過程相符——你的系統檢查目標 IP 是否落在這些範圍內，並透過匹配的裝置（例如，用於 LAN 的 enp4s0）送出。
- **Docker 的影響**：你安裝/運行了 Docker，它建立了虛擬橋接（docker0 和 br-...）。這些橋接讓容器可以擁有自己隔離的網路。docker0 上的 "linkdown" 表示目前沒有容器使用預設橋接。
- **預設路由**：其他所有流量（例如，google.com）都透過 enp4s0 上的 192.168.1.1 傳送。度量值 100 較低（優先）；鏈路本地的度量值為 1000，表示其優先級較低。
- **沒有遠端路由**：此路由表很基礎——沒有動態路由協定（如 OSPF）為遠端網路添加條目。如果你 ping 192.168.1.0/24 之外的東西，它會使用預設路由。

#### 驗證的快速測試
- `ping 192.168.1.1` → 應使用 enp4s0 上的本地路由。
- `ping 8.8.8.8` → 使用預設路由；用 `traceroute 8.8.8.8` 追蹤路徑。
- `ip addr show enp4s0` → 確認你的介面 IP。
- 如果涉及 Docker：`docker network ls` 列出橋接。

如果這來自你的設定且某些功能無法運作（例如，無法上網？），常見修復方法：檢查線材/DHCP 續約（`dhclient enp4s0`），或清除路由快取（`ip route flush cache`）。目前是什麼情況——是在進行連線問題排查，還是只是對特定條目感到好奇？