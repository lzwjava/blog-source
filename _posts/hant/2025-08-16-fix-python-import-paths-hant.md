---
audio: false
generated: true
image: false
lang: hant
layout: post
title: ä¿®æ­£ Python æ¨¡çµ„å°å…¥è·¯å¾‘
translated: true
type: note
---

ç°¡çŸ­å›ç­”ï¼šä½ éœ€è¦åœ¨é€™è£¡ä½¿ç”¨ `sys`ï¼Œä»¥ä¾¿åœ¨åŸ·è¡Œ `from scripts.create.delete import delete_md` å‰ä¿®æ”¹ Python æ¨¡çµ„æœå°‹è·¯å¾‘ (`sys.path`)ã€‚

---

### ç‚ºä½•éœ€è¦ `sys`

* Python æœƒåœ¨å„²å­˜æ–¼ `sys.path` çš„ç›®éŒ„æ¸…å–®ä¸­å°‹æ‰¾è¦åŒ¯å…¥çš„æ¨¡çµ„/å¥—ä»¶ã€‚
* é è¨­æƒ…æ³ä¸‹ï¼Œå®ƒåŒ…å«ï¼š

  * ç•¶å‰è…³æœ¬çš„ç›®éŒ„ã€‚
  * æ¨™æº–å‡½å¼åº«ç›®éŒ„ã€‚
  * å·²å®‰è£çš„ site-packagesã€‚
* å¦‚æœä½ çš„ `scripts/create/delete.py` æª”æ¡ˆä¸åœ¨é€™äº›é è¨­ä½ç½®ä¹‹ä¸€ï¼ŒåŒ¯å…¥å°‡æœƒå¤±æ•—ä¸¦å‡ºç¾ `ModuleNotFoundError`ã€‚

å› æ­¤ç¨‹å¼ç¢¼é€™æ¨£åšï¼š

```python
sys.path.append(
    os.path.dirname(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))
)
```

é€™è¡¨ç¤ºï¼š

* å–å¾—ç•¶å‰æª”æ¡ˆçš„çµ•å°è·¯å¾‘ (`__file__`)ã€‚
* å‘ä¸Šç§»å‹•ä¸‰å±¤ç›®éŒ„ã€‚
* å°‡è©²ç›®éŒ„åŠ å…¥ `sys.path`ã€‚

ä¹‹å¾Œï¼ŒPython å°±èƒ½è§£æ `scripts.create.delete`ï¼Œå°±åƒå®ƒå·²è¢«å®‰è£æˆ–åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„ä¸­ä¸€æ¨£ã€‚

---

### ä¸ä½¿ç”¨ `sys` çš„æƒ…æ³

å¦‚æœä½ çš„å°ˆæ¡ˆçµæ§‹å¦‚ä¸‹ï¼š

```
project/
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ create/
â”‚       â””â”€â”€ delete.py
â””â”€â”€ tools/
    â””â”€â”€ myscript.py   <-- ä½ æ­£åœ¨åŸ·è¡Œé€™å€‹æª”æ¡ˆ
```

ä¸¦ä¸”ä½ ç›´æ¥åŸ·è¡Œ `myscript.py`ï¼ŒPython ä¸æœƒè‡ªå‹•çŸ¥é“ `project/` æ˜¯æ ¹ç›®éŒ„ã€‚é™¤éä½ æ¡å–ä»¥ä¸‹ä»»ä¸€æ–¹å¼ï¼Œå¦å‰‡åŒ¯å…¥å°‡æœƒå¤±æ•—ï¼š

* ä½¿ç”¨ `PYTHONPATH=...` åŸ·è¡Œï¼ˆä¾‹å¦‚ `PYTHONPATH=.. python myscript.py`ï¼‰ï¼Œæˆ–
* å°‡å°ˆæ¡ˆæ‰“åŒ…ä¸¦å®‰è£ï¼ˆ`pip install -e .`ï¼‰ï¼Œæˆ–
* åœ¨ç¨‹å¼ç¢¼ä¸­ä½¿ç”¨ `sys.path.append(...)` å‹•æ…‹åŠ å…¥è·¯å¾‘ï¼ˆå¦‚æ­¤è™•æ‰€åšï¼‰ã€‚

---

ğŸ‘‰ å› æ­¤ï¼Œéœ€è¦ `sys` ç´”ç²¹æ˜¯ç‚ºäº†**åœ¨åŸ·è¡Œæ™‚æ“ä½œåŒ¯å…¥è·¯å¾‘**ï¼Œè®“ä½ èƒ½å¤ åŒ¯å…¥ç›¸å°æ–¼å°ˆæ¡ˆæ ¹ç›®éŒ„çš„æ¨¡çµ„ã€‚

ä½ æƒ³è®“æˆ‘å±•ç¤ºä¸€äº›**æ›´ç°¡æ½”çš„æ›¿ä»£æ–¹æ¡ˆ**ä¾†é¿å…æ‰‹å‹•ä¿®æ”¹ `sys.path` å—ï¼Ÿ