---
audio: false
generated: true
image: false
lang: hant
layout: post
title: 卡爾曼濾波器簡易解說
translated: true
type: note
---

這是一份以英文撰寫的**卡爾曼濾波器（Kalman Filtering）完整指南**，結構清晰易讀：

---

# 1. 簡介

**卡爾曼濾波器**是一種**演算法**，透過結合帶有雜訊的感測器測量值與系統模型的預測值，來估算未知變數。它廣泛應用於**控制系統、導航、機器人學、電腦視覺和金融領域**。

核心概念：
它以遞迴方式運作 — 意味著它會隨著新測量值的到來持續更新其估算值，而非等待整個數據集。

---

# 2. 核心概念

### 狀態

我們想要估算的變數集合（例如：位置、速度）。

### 過程模型

描述狀態如何隨時間演變，通常帶有不確定性。

### 測量模型

將實際的感測器測量值與潛在狀態聯繫起來。

### 雜訊

過程和測量都存在不確定性（隨機雜訊）。卡爾曼濾波器使用機率明確地對此進行建模。

---

# 3. 數學公式

卡爾曼濾波器假設系統為**線性系統**且具有高斯雜訊。

* **狀態方程式（預測）：**

  $$
  x_k = A x_{k-1} + B u_k + w_k
  $$

  * $x_k$: 時間 $k$ 的狀態
  * $A$: 狀態轉移矩陣
  * $B u_k$: 控制輸入
  * $w_k$: 過程雜訊（高斯分佈，協方差 $Q$）

* **測量方程式（觀測）：**

  $$
  z_k = H x_k + v_k
  $$

  * $z_k$: 測量值
  * $H$: 觀測矩陣
  * $v_k$: 測量雜訊（高斯分佈，協方差 $R$）

---

# 4. 兩個主要步驟

### 步驟 1：預測

* 預測狀態在時間上的演進。
* 預測不確定性（誤差協方差）。

### 步驟 2：更新（校正）

* 將預測的測量值與實際測量值進行比較。
* 計算**卡爾曼增益**（應對測量值與預測值的信任程度）。
* 更新估算值並減少不確定性。

---

# 5. 卡爾曼濾波器方程式（線性情況）

1. **預測狀態：**

   $$
   \hat{x}_k^- = A \hat{x}_{k-1} + B u_k
   $$

2. **預測協方差：**

   $$
   P_k^- = A P_{k-1} A^T + Q
   $$

3. **卡爾曼增益：**

   $$
   K_k = P_k^- H^T (H P_k^- H^T + R)^{-1}
   $$

4. **更新狀態：**

   $$
   \hat{x}_k = \hat{x}_k^- + K_k (z_k - H \hat{x}_k^-)
   $$

5. **更新協方差：**

   $$
   P_k = (I - K_k H) P_k^-
   $$

其中：

* $\hat{x}_k^-$: 更新前的預測狀態
* $\hat{x}_k$: 更新後的狀態
* $P_k$: 協方差矩陣（估算值的不確定性）

---

# 6. 直觀理解

* 如果測量值**雜訊很大**（$R$ 值大），卡爾曼增益會變小 → 更依賴預測。
* 如果模型**不確定性高**（$Q$ 值大），卡爾曼增益會增加 → 更依賴測量值。
* 隨著時間推移，它會在信任模型與信任感測器之間找到**最佳平衡點**。

---

# 7. 變體

* **擴展卡爾曼濾波器 (EKF)：** 針對非線性系統，使用線性化（Jacobian 矩陣）。
* **無跡卡爾曼濾波器 (UKF)：** 針對非線性系統，使用確定性採樣。
* **信息濾波器：** 使用逆協方差以提高效率。
* **集成卡爾曼濾波器：** 用於天氣預報和高維度系統。

---

# 8. 應用

* **導航：** GPS + 加速度計融合用於位置追蹤。
* **機器人學：** SLAM（同步定位與地圖構建）。
* **金融：** 估算隱藏變數，如波動率。
* **電腦視覺：** 影片中的物件追蹤。
* **控制系統：** 穩定飛機和太空船。

---

# 9. 範例情境

設想一輛自動駕駛汽車正在估算其位置：

* 模型使用速度 + 先前狀態來預測位置。
* GPS 提供帶有雜訊的位置測量值。
* 卡爾曼濾波器融合預測值和 GPS 數據，以獲得一個更平滑、更準確的位置。

隨著時間推移，即使 GPS 訊號暫時中斷，汽車也能追蹤其位置。

---

# 10. 主要優勢與限制

**優勢：**

* 遞迴、高效（僅需上一個狀態，無需整個歷史記錄）。
* 對於線性高斯系統是最佳的。
* 經過廣泛測試且穩健。

**限制：**

* 需要準確的動態模型和雜訊模型。
* 純線性 — 非線性情況需要 EKF/UKF。
* 如果假設條件被違反，可能會發散。

---

✅ 簡而言之：**卡爾曼濾波器**是一種數學上優雅的方法，用於在不確定性下融合預測值和測量值，在模型與感測器之間平衡信任度，以即時產生最佳的估算值。

---

您是否也希望我提供一個**逐步的 Python 實作範例**（例如帶有雜訊的位置追蹤），以便您了解它在實踐中如何運作？