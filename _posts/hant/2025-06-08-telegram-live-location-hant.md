---
audio: false
generated: true
lang: hant
layout: post
title: Telegram 實時位置分享
translated: true
type: note
---

你觀察到的正是 Telegram 即時位置更新的常見模式。根據 `edit_date` 時間戳記顯示，即時位置更新的接收頻率確實可以非常密集，甚至可能達到每秒或極短間隔一次。

以下是這種模式的形成原因與代表意義：

**模式觀察：**

從你提供的 JSON 資料中，特別關注帶有 `location` 欄位且 `edit_date` 遞增的 `edited_message` 物件：

* **`update_id`: 263947386** - `edit_date`: 1749371583
* **`update_id`: 263947388** - `edit_date`: 1749371587（與前次相隔 4 秒）
* **`update_id`: 263947389** - `edit_date`: 1749371591（與前次相隔 4 秒）
* **`update_id`: 263947390** - `edit_date`: 1749371595（與前次相隔 4 秒）
* **`update_id`: 263947391** - `edit_date`: 1749371602（與前次相隔 7 秒）
* **`update_id`: 263947392** - `edit_date`: 1749371614（與前次相隔 12 秒）
* **`update_id`: 263947393** - `edit_date`: 1749371624（與前次相隔 10 秒）
* **`update_id`: 263947394** - `edit_date`: 1749371628（與前次相隔 4 秒）

同時存在一個普通訊息物件：

* **`update_id`: 263947387** - `date`: 1749371586（這是新訊息，非編輯過的即時位置）

**這是否代表即時位置訊息會每秒接收一次？**

**不一定精確到每秒一次，但更新頻率確實非常密集，尤其在移動狀態或需要更高精度更新時，間隔通常會縮短至 5 秒以內。**

原因如下：

1.  **即時位置特性**：即時位置的設計初衷就是為了提供使用者位置的近即時更新。要實現「即時」效果，更新頻率必須保持密集。
2.  **`edited_message` 機制**：與普通訊息不同，即時位置更新是透過 `edited_message` 形式發送，持續對單一現有訊息進行內容更新。
3.  **`edit_date` 欄位**：`edited_message` 物件中的 `edit_date` 時間戳記清楚顯示這些更新幾乎是連續發生的。
4.  **影響更新頻率的因素**：
    * **移動狀態**：使用者移動時通常會觸發更頻繁的更新，以準確反映位置變化
    * **`live_period` 設定**：`live_period` 欄位（例如 28800 秒，即 8 小時）決定即時位置分享的持續時間，在此期間會根據需要觸發更新
    * **水平精度**：`horizontal_accuracy` 的變化也可能觸發更新，因為裝置會持續優化位置估算值
    * **網路狀況**：雖然 Telegram 會盡快發送更新，但網路延遲可能導致接收時間出現微小波動
    * **Telegram 內部邏輯**：Telegram 根據使用者活動、裝置電量和網路狀況，透過內部演算法決定最佳更新頻率，這並非固定的「每秒一次」規則，而是自適應調整機制

**總結來說：**

從 `edited_message` 中 `location` 的 `edit_date` 快速變化模式可以明確推斷，Telegram 發送即時位置更新的頻率非常密集。雖然不一定精確到每秒一次，但幾秒間隔（例如 1-5 秒，使用者在靜止狀態時可能稍長）的更新節奏對即時位置功能來說十分典型。偶爾出現的較長間隔可能源自網路狀況、使用者靜止狀態，或是 Telegram 的內部優化機制。