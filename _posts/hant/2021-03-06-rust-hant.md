---
audio: false
generated: false
image: false
lang: hant
layout: post
title: è©¦ç”¨ Rust ç·¨ç¨‹
translated: true
---

Rust æ˜¯é€™å¹¾å¹´æ¯”è¼ƒç†±é–€çš„ç¨‹å¼èªè¨€ã€‚2006å¹´æ™‚ï¼ŒMozillaçš„ä¸€åå“¡å·¥é–‹å§‹åšä¸€å€‹å€‹äººé …ç›®ï¼Œå¾Œä¾†å¾—åˆ°äº†å…¬å¸çš„æ”¯æŒï¼Œæ–¼2010å¹´ç™¼ä½ˆäº†é€™å€‹é …ç›®ã€‚é€™å€‹é …ç›®å°±å«Rustã€‚

æ¥ä¸‹ä¾†ï¼Œè®“æˆ‘å€‘ä¾†é‹è¡Œç¬¬ä¸€å€‹Rustç¨‹å¼å§ã€‚æ‰“é–‹å®˜ç¶²ï¼Œä¾†çœ‹çœ‹å¦‚ä½•æŠŠç¨‹å¼è·‘èµ·ä¾†ã€‚

å®˜ç¶²æä¾›äº†ä¸€å€‹è…³æœ¬ï¼š

```shell
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
```

åœ¨ Mac ä¸Šä¹Ÿå¯ä»¥ç”¨ Mac ç³»çµ±çš„å¥—ä»¶ç®¡ç†å·¥å…· Homebrew ä¾†å®‰è£ã€‚å¯é‹è¡Œå‘½ä»¤ï¼š

```shell
brew install rust
```

æˆ‘é€™è£¡ç”¨ Homebrew ä¾†å®‰è£ rustã€‚å®‰è£çš„æ™‚åˆ»ï¼Œè®“æˆ‘å€‘ç¹¼çºŒçœ‹å®˜ç¶²ã€‚

æ¥è‘—æˆ‘å€‘çœ‹å®˜ç¶²å‡ºç¾äº† Cargo é€™å€‹æ±è¥¿ï¼ŒRust çš„æ§‹å»ºå·¥å…·å’Œå¥—ä»¶ç®¡ç†å·¥å…·ã€‚

å®˜æ–¹ç¶²ç«™ä¸Šèªªï¼š

- ç”¨ `cargo build` ä¾†æ§‹å»ºä½ çš„é …ç›®
- ç”¨ `cargo run` ä¾†é‹è¡Œä½ çš„é …ç›®
- ç”¨ `cargo test` ä¾†æ¸¬è©¦ä½ çš„é …ç›®

å‘Šè¨´æˆ‘å€‘å¦‚ä½•æ§‹å»ºã€é‹è¡Œå’Œæ¸¬è©¦ Cargo ç¨‹å¼ã€‚

é‹è¡Œï¼š

```shell
brew install rust
```

è¼¸å‡ºï¼š

```shell
==> Downloading https://homebrew.bintray.com/bottles/rust-1.49.0_1.big_sur.bottle.tar.gz
==> Downloading from https://d29vzk4ow07wi7.cloudfront.net/5a238d58c3fa775fed4e12ad74109deff54a82a06cb6a3a4f51b5d37587fb319?response-content-disposition=a
######################################################################## 100.0%
==> Pouring rust-1.49.0_1.big_sur.bottle.tar.gz
==> Caveats
Bash completion has been installed to:
  /usr/local/etc/bash_completion.d
==> Summary
ğŸº  /usr/local/Cellar/rust/1.49.0_1: 15,736 files, 606.2MB
```

é€™ä¾¿å®‰è£æˆåŠŸäº†ã€‚

ç•¶åœ¨çµ‚ç«¯é‹è¡Œ `cargo` æ™‚ï¼Œè¼¸å‡ºå¦‚ä¸‹ï¼š

```shell
Rust's package manager

USAGE:
    cargo [OPTIONS] [SUBCOMMAND]

OPTIONS:
    -V, --version           Print version info and exit
        --list              List installed commands
        --explain <CODE>    Run `rustc --explain CODE`
    -v, --verbose           Use verbose output (-vv very verbose/build.rs output)
    -q, --quiet             No output printed to stdout
        --color <WHEN>      Coloring: auto, always, never
        --frozen            Require Cargo.lock and cache are up to date
        --locked            Require Cargo.lock is up to date
        --offline           Run without accessing the network
    -Z <FLAG>...            Unstable (nightly-only) flags to Cargo, see 'cargo -Z help' for details
    -h, --help              Prints help information

Some common cargo commands are (see all commands with --list):
    build, b    Compile the current package
    check, c    Analyze the current package and report errors, but don't build object files
    clean       Remove the target directory
    doc         Build this package's and its dependencies' documentation
    new         Create a new cargo package
    init        Create a new cargo package in an existing directory
    run, r      Run a binary or example of the local package
    test, t     Run the tests
    bench       Run the benchmarks
    update      Update dependencies listed in Cargo.lock
    search      Search registry for crates
    publish     Package and upload this package to the registry
    install     Install a Rust binary. Default location is $HOME/.cargo/bin
    uninstall   Uninstall a Rust binary

See 'cargo help <command>' for more information on a specific command.
```

ç„¡éœ€å¼„æ‡‚æ‰€æœ‰çš„å‘½ä»¤ã€‚åªéœ€è¦çŸ¥é“å¸¸ç”¨çš„å‘½ä»¤å³å¯ã€‚build å’Œ run å‘½ä»¤å¾ˆé‡è¦ã€‚

ç¹¼çºŒçœ‹å®˜ç¶²æ–‡æª”ï¼š

```c
Letâ€™s write a small application with our new Rust development environment. To start, weâ€™ll use Cargo to make a new project for us. In your terminal of choice run:

cargo new hello-rust

This will generate a new directory called hello-rust with the following files:

hello-rust
|- Cargo.toml
|- src
  |- main.rs
Cargo.toml is the manifest file for Rust. Itâ€™s where you keep metadata for your project, as well as dependencies.

src/main.rs is where weâ€™ll write our application code.
```

é€™è¬›è¿°äº†å¦‚ä½•å‰µå»ºé …ç›®ã€‚æ¥ä¸‹ä¾†ä¾¿å‰µå»ºã€‚

```shell
$ cargo new hello-rust

Created binary (application) `hello-rust` package
```

æˆ‘å€‘ç”¨ VSCode ä¾†æ‰“é–‹é …ç›®ã€‚

main.rs:

```rust
fn main() {
    println!("Hello, world!");
}
```

æ¥ä¸‹ä¾†ï¼Œå¾ˆè‡ªç„¶æƒ³åˆ°è¦ build ä»¥åŠ run ç¨‹å¼ã€‚

```shell
$ cargo build

error: could not find `Cargo.toml` in `/Users/lzw/ideas/curious-courses/program/run/rust` or any parent directory
```

å‡ºéŒ¯äº†ã€‚ç‚ºä»€éº¼ã€‚é€™è¡¨æ˜ cargo åªèƒ½åœ¨é …ç›®ä¸‹çš„ç›®éŒ„é‹è¡Œã€‚æ¥ä¸‹ä¾†é€²å…¥å­ç›®éŒ„ï¼Œé‹è¡Œäº† `cd hello-rust`ã€‚

é€™æ™‚ï¼Œæƒ³å¦‚æœç›´æ¥é‹è¡Œï¼Œæœƒæ€éº¼æ¨£ã€‚

```shell
$ cargo run
   
   Compiling hello-rust v0.1.0 (/Users/lzw/ideas/curious-courses/program/run/rust/hello-rust)
    Finished dev [unoptimized + debuginfo] target(s) in 4.43s
     Running `target/debug/hello-rust`
Hello, world!
```

å¥½äº†ï¼ŒæˆåŠŸäº†ã€‚è¼¸å‡ºäº†å­—ç¬¦ä¸²ï¼Œç¨‹å¼é–‹å§‹å·¥ä½œå•¦ã€‚

è©¦è‘—æ”¹å‹•ç¨‹å¼ã€‚

```rust
fn main() {
    println!(2+3);
}
```

`cargo run` ä¹‹å¾Œï¼Œå‡ºç¾äº†ï¼š

```shell
   Compiling hello-rust v0.1.0 (/Users/lzw/ideas/curious-courses/program/run/rust/hello-rust)
error: format argument must be a string literal
 --> src/main.rs:2:14
  |
2 |     println!(2+3);
  |              ^^^
  |
help: you might be missing a string literal to format with
  |
2 |     println!("{}", 2+3);
  |              ^^^^^

error: aborting due to previous error

error: could not compile `hello-rust`

To learn more, run the command again with --verbose.
```

é‚„æ²’å­¸ç¿’ä»»ä½• Rust èªæ³•ã€‚æ†‘è‘—æˆ‘å€‘çš„ç›´è¦ºä¾†æ”¹å‹•ç¨‹å¼å‡ºéŒ¯äº†ã€‚é€™å€‹å‡ºéŒ¯æç¤ºå¾ˆå¥½ï¼Œå·²ç¶“å‘Šè¨´æˆ‘å€‘æ€éº¼æ”¹äº†ã€‚

```rust
fn main() {
    println!("{}", 2+3);
}
```

é€™æ¬¡æ”¹å°äº†ï¼Œæœç„¶è¼¸å‡ºäº†5ã€‚

å°äº†ï¼Œbuild æœƒæ€éº¼æ¨£ã€‚

```shell
$ cargo build
    Finished dev [unoptimized + debuginfo] target(s) in 0.00s
```

ç‚ºä»€éº¼è¦æœ‰ build å‘¢ã€‚å› ç‚ºæœ‰å¯èƒ½æˆ‘å€‘åªæ˜¯æƒ³ç”Ÿæˆå¯åŸ·è¡Œç¨‹å¼ï¼Œè€Œä¸¦ä¸æƒ³åŸ·è¡Œã€‚ä¹Ÿè¨±å°æ–¼ä¸€äº›é¾å¤§çš„ç¨‹å¼ï¼ŒåŸ·è¡Œæ˜¯è²»æ™‚çš„ã€‚ä¹Ÿè¨±æˆ‘å€‘æƒ³æœ¬åœ°ç”Ÿæˆï¼Œç„¶å¾Œå‚³è¼¸åˆ°é ç«¯ä¼ºæœå™¨å»åŸ·è¡Œã€‚

æˆ‘å€‘å·²ç¶“æŠŠ Rust ç¨‹å¼è·‘èµ·ä¾†äº†ã€‚å¾Œé¢ä¾¿æ˜¯ç†Ÿæ‚‰æ›´å¤šçš„ Rust èªè¨€èªæ³•ï¼Œä¾†åœ¨ Rust ä¸­æ‰¾åˆ°æˆ‘å€‘åœ¨ã€Œè§£è¬è¨ˆç®—æ©Ÿç§‘å­¸ã€ä¸Šè¬›è¿°çš„è®Šé‡ã€å‡½æ•¸ã€å‡½æ•¸èª¿ç”¨å’Œè¡¨é”å¼ç­‰æ¦‚å¿µæ‰€å°æ‡‰çš„ç¬¦è™Ÿè¡¨ç¤ºã€‚

***

##### å°ç·´ç¿’

* è©¦è‘—åƒä¸Šé¢çš„ä¸€æ¨£ï¼Œå­¸ç”Ÿåœ¨è‡ªå·±é›»è…¦ä¸Šè©¦ç”¨ Rust ç·¨ç¨‹ã€‚
* ç·´ç¿’å®Œå¾Œï¼Œå¯æäº¤ä¸€ç™¾å­—ä»¥å…§çš„ç¸½çµæˆ–å°æœ¬æ–‡çš„è£œå……ã€‚

***