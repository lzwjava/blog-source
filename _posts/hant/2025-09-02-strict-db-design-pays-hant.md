---
audio: false
generated: true
image: false
lang: hant
layout: post
title: 嚴謹數據庫設計的回報
translated: true
type: note
---

是的——你的直覺是對的。在數據庫設計中，**前期盡可能嚴格**通常能在後期帶來回報。讓我詳細說明：

---

### 為何嚴格性有助

* **數據一致性：**
  唯一約束、`NOT NULL` 和嚴格的數據類型可防止不良或重複數據滲入。
* **引用完整性：**
  外鍵確保表之間的關係保持有效——沒有孤立的行，沒有「懸空引用」。
* **數據可信度：**
  有了約束，開發人員和分析師可以依賴數據庫本身來強制執行正確性，而不必在每個應用層編寫額外檢查。
* **減少維護麻煩：**
  由不一致或無效數據引起的錯誤在後期修復成本極高。約束能讓這些問題立即顯現，而不是數月後才發現。

---

### 嚴格性可能帶來問題的情況

* **為變更的業務規則過度約束：** 如果業務邏輯仍在演變，*過於*僵化可能導致頻繁的結構變更。
* **性能權衡：** 在極高寫入環境中（如分析管道或日誌系統），嚴格的外鍵和唯一約束可能引入開銷。
* **遷移複雜性：** 有時需要暫時的「寬鬆」（例如在數據導入、與外部 API 集成或遺留系統遷移期間）。

---

### 實用指南

1. **默認嚴格：** 默認使用 `PRIMARY KEY`、`UNIQUE`、`NOT NULL` 和 `CHECK` 約束。
2. **始終使用外鍵**，除非有充分理由不這樣做（例如在引用檢查於其他地方進行的批量攝入場景中）。
3. **使用適當的數據類型：** 例如，日期使用 `DATE` 而非 `VARCHAR`，布林值使用 `BOOLEAN` 而非 `INT(1)`。
4. **考慮未來查詢：** 確保索引與約束和訪問模式對齊。
5. **記錄例外情況：** 如果放寬某個約束（例如允許 `NULL`），請記錄原因。

---

✅ 通用規則：*在業務規則允許的範圍內盡可能嚴格。*
僅在有具體理由時放寬——並在設計註釋中明確記錄放寬的原因。

---

你想讓我為你展示一份**逐步檢查清單**，列出嚴格的數據庫設計實踐嗎（就像一份可用於新結構的藍圖）？