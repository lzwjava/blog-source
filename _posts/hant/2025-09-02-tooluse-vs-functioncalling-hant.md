---
audio: false
generated: true
image: false
lang: hant
layout: post
title: 工具使用與函數呼叫詳解
translated: true
type: note
---

讓我們來剖析 LLM API 中**工具使用**與**函數調用**的區別：

---

## 1. 工具使用

* **概念**：工具使用是一個廣泛概念，指 LLM 透過外部擴充能力實現的功能。它不僅能生成文字，更能「使用工具」來獲取資訊、執行程式碼、查詢資料庫或生成圖像。
* **實現方式**：實踐中，「工具」是指在 LLM 運行環境中註冊的外部 API 或系統（例如搜尋 API、Python 執行環境或日曆 API）。
* **LLM 的角色**：模型決定何時調用工具、使用哪些參數，並將執行結果整合回對話流程。
* **範例**：

  * 用戶：「廣州天氣如何？」
  * LLM：調用 `weather` 工具並傳入 `{city: "Guangzhou"}` → 獲得 `28°C, sunny`
  * LLM：回覆：「目前氣溫 28°C，天氣晴朗。」

可將**工具使用**視為一種總體協調框架——LLM 不再僅限於文字回覆，而是能協調外部系統執行操作。

---

## 2. 函數調用

* **概念**：函數調用是某些 LLM API（如 OpenAI、Anthropic 等）提供的*結構化*機制，可預先定義函數（包含名稱、參數、結構描述），由 LLM 返回 JSON 格式的參數來觸發調用。
* **實現方式**：向模型提供描述函數的 JSON schema，模型輸出結果可以是文字或結構化函數調用物件。
* **LLM 的角色**：模型不再自行「臆造」API 用法，而是為預定義函數輸出有效的結構化參數。
* **範例**：

  * 預先定義函數：

    ```json
    {
      "name": "getWeather",
      "description": "獲取當前天氣資料",
      "parameters": {
        "type": "object",
        "properties": {
          "city": {"type": "string"}
        },
        "required": ["city"]
      }
    }
    ```
  * 用戶：「廣州天氣如何？」
  * LLM：輸出 → `{ "name": "getWeather", "arguments": {"city": "Guangzhou"} }`
  * 您的系統執行該函數並回傳結果

這使得**函數調用**成為實現**工具使用**的一種特定、安全且結構驅動的方法。

---

## 3. 關鍵差異

* **範圍**：

  * 工具使用 = 通用概念（LLM 透過外部系統擴充功能）
  * 函數調用 = 針對結構化調用的標準化 API 設計
* **控制度**：

  * 工具使用可能更自由（由 LLM 決定格式與時機）
  * 函數調用強制採用嚴格結構描述，減少歧義與幻覺現象
* **互通性**：

  * 工具使用可涵蓋多種外部系統（搜尋、程式執行、圖像生成）
  * 函數調用最適用於需要精確結構化參數的場景（如 API 或資料庫查詢）

---

## 4. 心智模型

* 函數調用是工具使用的**子集**
* 若將工具使用視為*總體策略*，函數調用便是多數 API 提供的*安全結構化方案*

---

需要我進一步展示**並排對照的工作流程範例**（如：用戶輸入 → LLM 輸出 → 執行過程）來更具體說明兩者差異嗎？