---
audio: false
generated: true
lang: de
layout: post
title: Mit Jetty einen Webserver einbetten
translated: true
---

Um `org.eclipse.jetty` in einem Java-Projekt zu verwenden, möchten Sie in der Regel die Jetty-Bibliotheken nutzen, um einen leichten Webserver oder einen Servlet-Container in Ihre Anwendung zu integrieren. Jetty, das unter der Eclipse Foundation gepflegt wird, ist ein Open-Source-Projekt, das es Ihnen ermöglicht, Webinhalte zu servieren, HTTP-Anfragen zu verarbeiten und Funktionen wie Servlets und Webanwendungen zu unterstützen. Hier ist eine Schritt-für-Schritt-Anleitung, um Ihnen den Einstieg mit `org.eclipse.jetty` zu erleichtern, um einen grundlegenden Webserver in einer Java-Anwendung mit Maven als Build-Tool einzurichten.

---

### **Schritt 1: Jetty-Abhängigkeiten zum Projekt hinzufügen**
Um Jetty zu verwenden, müssen Sie dessen Bibliotheken in Ihrem Projekt einbinden. Wenn Sie Maven verwenden, fügen Sie die erforderlichen Abhängigkeiten zu Ihrer `pom.xml`-Datei hinzu. Für eine grundlegende Webserver-Einrichtung mit Servlet-Unterstützung, fügen Sie `jetty-server` und `jetty-servlet` hinzu. Hier ist ein Beispiel:

```xml
<project>
    <dependencies>
        <!-- Jetty Server -->
        <dependency>
            <groupId>org.eclipse.jetty</groupId>
            <artifactId>jetty-server</artifactId>
            <version>9.4.31.v20200723</version>
        </dependency>
        <!-- Jetty Servlet Unterstützung -->
        <dependency>
            <groupId>org.eclipse.jetty</groupId>
            <artifactId>jetty-servlet</artifactId>
            <version>9.4.31.v20200723</version>
        </dependency>
        <!-- Servlet API (optional, oft transitiv enthalten) -->
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>javax.servlet-api</artifactId>
            <version>3.1.0</version>
            <scope>provided</scope>
        </dependency>
    </dependencies>
</project>
```

- **`jetty-server`**: Bietet die Kernserverfunktionalität zur Verarbeitung von HTTP-Anfragen.
- **`jetty-servlet`**: Fügt Unterstützung für Servlets hinzu, sodass Sie die Java Servlet API verwenden können.
- **`javax.servlet-api`**: Definiert die Servlet-Schnittstellen; wird hier explizit für Klarheit hinzugefügt, obwohl es oft transitiv durch `jetty-servlet` eingebunden wird.

**Hinweis**: Überprüfen Sie das [Maven Central Repository](https://mvnrepository.com/artifact/org.eclipse.jetty) auf die neueste Jetty-Version und aktualisieren Sie das `<version>`-Tag entsprechend.

---

### **Schritt 2: Einfacher Jetty-Server erstellen**
Sie können Jetty programmgesteuert verwenden, indem Sie eine Instanz der `Server`-Klasse aus dem Paket `org.eclipse.jetty.server` erstellen. Hier sind zwei gängige Ansätze: Verwenden eines grundlegenden Handlers für statische Antworten oder Verwenden eines Servlets für dynamischen Inhalt.

#### **Option 1: Verwenden eines grundlegenden Handlers**
Dieses Beispiel richtet einen Server ein, der auf alle Anfragen mit "Hello, World!" antwortet.

```java
import org.eclipse.jetty.server.Server;
import org.eclipse.jetty.server.Request;
import org.eclipse.jetty.server.handler.AbstractHandler;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;

public class SimpleJettyServer {
    public static void main(String[] args) throws Exception {
        // Erstellen Sie eine Serverinstanz, die auf Port 8080 hört
        Server server = new Server(8080);

        // Setzen Sie einen Handler, um Anfragen zu verarbeiten
        server.setHandler(new AbstractHandler() {
            @Override
            public void handle(String target, Request baseRequest, HttpServletRequest request, HttpServletResponse response)
                    throws IOException {
                // Setzen Sie die Antwort-Eigenschaften
                response.setContentType("text/plain");
                response.setStatus(HttpServletResponse.SC_OK);
                response.getWriter().println("Hello, World!");

                // Markieren Sie die Anfrage als verarbeitet
                baseRequest.setHandled(true);
            }
        });

        // Starten Sie den Server
        server.start();
        server.join(); // Hält den Server am Laufen, bis er gestoppt wird
    }
}
```

- **`Server server = new Server(8080)`**: Erstellt einen Jetty-Server auf Port 8080.
- **`AbstractHandler`**: Ein einfacher Handler, in dem Sie definieren, wie Anfragen verarbeitet werden sollen.
- **`baseRequest.setHandled(true)`**: Gibt an, dass dieser Handler die Anfrage verarbeitet hat, wodurch weitere Verarbeitungen verhindert werden.

Führen Sie diesen Code aus, öffnen Sie dann einen Browser und navigieren Sie zu `http://localhost:8080/`, um "Hello, World!" zu sehen.

#### **Option 2: Verwenden eines Servlets**
Für komplexere Anwendungen können Sie Servlets mit einem `ServletContextHandler` verwenden.

```java
import org.eclipse.jetty.server.Server;
import org.eclipse.jetty.servlet.ServletContextHandler;
import org.eclipse.jetty.servlet.ServletHolder;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;

public class ServletJettyServer {
    public static void main(String[] args) throws Exception {
        // Erstellen Sie eine Serverinstanz auf Port 8080
        Server server = new Server(8080);

        // Erstellen Sie einen Servlet-Kontext-Handler
        ServletContextHandler context = new ServletContextHandler();
        context.setContextPath("/"); // Root-Kontextpfad

        // Setzen Sie den Handler für den Server
        server.setHandler(context);

        // Fügen Sie ein Servlet hinzu, um Anfragen zu verarbeiten
        context.addServlet(new ServletHolder(new HelloServlet()), "/*");

        // Starten Sie den Server
        server.start();
        server.join();
    }
}

// Definieren Sie ein einfaches Servlet
class HelloServlet extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws IOException {
        response.setContentType("text/plain");
        response.setStatus(HttpServletResponse.SC_OK);
        response.getWriter().println("Hello from Jetty Servlet!");
    }
}
```

- **`ServletContextHandler`**: Verwalten Sie Servlet-Kontexte und Zuordnungen.
- **`context.addServlet`**: Registriert das `HelloServlet`, um alle Anfragen (`/*`) zu verarbeiten.
- **`doGet`**: Definiert das Verhalten des Servlets für GET-Anfragen.

Führen Sie diesen Code aus und besuchen Sie `http://localhost:8080/`, um "Hello from Jetty Servlet!" zu sehen.

---

### **Schritt 3: Kompilieren und Ausführen**
1. Stellen Sie sicher, dass Ihr Projekt mit Maven eingerichtet ist (z. B. führen Sie `mvn compile` aus, um Abhängigkeiten herunterzuladen).
2. Kompilieren und führen Sie die Java-Klasse aus (z. B. `java SimpleJettyServer` oder verwenden Sie die Ausführungsfunktion Ihrer IDE).
3. Testen Sie den Server, indem Sie `http://localhost:8080/` in einem Browser oder mit einem Tool wie `curl` aufrufen.

---

### **Zusätzliche Anwendungsfälle**
- **Bereitstellen einer WAR-Datei**: Verwenden Sie `WebAppContext`, um eine Webanwendungsarchivdatei (WAR) oder ein Verzeichnis bereitzustellen:
  ```java
  import org.eclipse.jetty.server.Server;
  import org.eclipse.jetty.webapp.WebAppContext;

  public class WarJettyServer {
      public static void main(String[] args) throws Exception {
          Server server = new Server(8080);
          WebAppContext webapp = new WebAppContext();
          webapp.setContextPath("/");
          webapp.setWar("path/to/your.war"); // Pfad zu Ihrer WAR-Datei
          server.setHandler(webapp);
          server.start();
          server.join();
      }
  }
  ```
  Fügen Sie die `jetty-webapp`-Abhängigkeit zu Ihrer `pom.xml` für dieses Feature hinzu.

- **Konfigurieren von Jetty**: Passen Sie Einstellungen wie Port, Thread-Pools oder HTTPS programmgesteuert oder über XML-Konfigurationsdateien an (siehe Jetty-Dokumentation für erweiterte Einstellungen).

---

### **Wichtige Punkte**
- **Imports**: Verwenden Sie Klassen aus `org.eclipse.jetty.server`, `org.eclipse.jetty.servlet` usw., indem Sie sie nach Bedarf importieren.
- **Flexibilität**: Jetty kann statischen Inhalt servieren, Servlets verarbeiten, WAR-Dateien bereitstellen oder sogar WebSockets und HTTP/2 mit zusätzlichen Modulen unterstützen.
- **Dokumentation**: Für weitere Details, besuchen Sie die [offizielle Jetty-Dokumentation](https://www.eclipse.org/jetty/documentation/).

Durch das Befolgen dieser Schritte können Sie `org.eclipse.jetty` effektiv verwenden, um einen Webserver in Ihre Java-Anwendung zu integrieren, der auf Ihre spezifischen Bedürfnisse zugeschnitten ist!