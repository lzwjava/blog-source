---
audio: false
generated: true
lang: de
layout: post
title: Einbetten eines Webservers mit Jetty
translated: true
type: note
---

Um `org.eclipse.jetty` in einem Java-Projekt zu verwenden, möchten Sie in der Regel die Jetty-Bibliotheken nutzen, um einen leichtgewichtigen Webserver oder Servlet-Container in Ihrer Anwendung einzubetten. Jetty, das unter der Eclipse Foundation gewartet wird, ist ein Open-Source-Projekt, das es Ihnen ermöglicht, Webinhalte bereitzustellen, HTTP-Anfragen zu verarbeiten und Funktionen wie Servlets und Webanwendungen zu unterstützen. Im Folgenden finden Sie eine Schritt-für-Schritt-Anleitung, um mit der Verwendung von `org.eclipse.jetty` zu beginnen und einen grundlegenden Webserver in einer Java-Anwendung mit Maven als Build-Tool einzurichten.

---

### **Schritt 1: Jetty-Abhängigkeiten zu Ihrem Projekt hinzufügen**
Um Jetty zu verwenden, müssen Sie seine Bibliotheken in Ihr Projekt einbinden. Wenn Sie Maven verwenden, fügen Sie die notwendigen Abhängigkeiten zu Ihrer `pom.xml`-Datei hinzu. Für einen grundlegenden Webserver mit Servlet-Unterstützung schließen Sie `jetty-server` und `jetty-servlet` ein. Hier ist ein Beispiel:

```xml
<project>
    <dependencies>
        <!-- Jetty Server -->
        <dependency>
            <groupId>org.eclipse.jetty</groupId>
            <artifactId>jetty-server</artifactId>
            <version>9.4.31.v20200723</version>
        </dependency>
        <!-- Jetty Servlet Support -->
        <dependency>
            <groupId>org.eclipse.jetty</groupId>
            <artifactId>jetty-servlet</artifactId>
            <version>9.4.31.v20200723</version>
        </dependency>
        <!-- Servlet API (optional, oft transitiv enthalten) -->
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>javax.servlet-api</artifactId>
            <version>3.1.0</version>
            <scope>provided</scope>
        </dependency>
    </dependencies>
</project>
```

- **`jetty-server`**: Bietet die Kern-Server-Funktionalität zur Verarbeitung von HTTP-Anfragen.
- **`jetty-servlet`**: Fügt Unterstützung für Servlets hinzu, sodass Sie die Java Servlet API verwenden können.
- **`javax.servlet-api`**: Definiert die Servlet-Schnittstellen; hier explizit für Klarheit eingefügt, obwohl es oft transitiv von `jetty-servlet` mitgebracht wird.

**Hinweis**: Überprüfen Sie das [Maven Central Repository](https://mvnrepository.com/artifact/org.eclipse.jetty) auf die neueste Jetty-Version und aktualisieren Sie das `<version>`-Tag entsprechend.

---

### **Schritt 2: Einen einfachen Jetty-Server erstellen**
Sie können Jetty programmatisch verwenden, indem Sie eine Instanz der `Server`-Klasse aus dem Paket `org.eclipse.jetty.server` erstellen. Im Folgenden finden Sie zwei gängige Ansätze: Verwendung eines einfachen Handlers für statische Antworten oder Verwendung eines Servlets für dynamische Inhalte.

#### **Option 1: Einen einfachen Handler verwenden**
Dieses Beispiel richtet einen Server ein, der auf alle Anfragen mit "Hello, World!" antwortet.

```java
import org.eclipse.jetty.server.Server;
import org.eclipse.jetty.server.Request;
import org.eclipse.jetty.server.handler.AbstractHandler;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;

public class SimpleJettyServer {
    public static void main(String[] args) throws Exception {
        // Erstellen Sie eine Server-Instanz, die auf Port 8080 lauscht
        Server server = new Server(8080);

        // Setzen Sie einen Handler zur Verarbeitung von Anfragen
        server.setHandler(new AbstractHandler() {
            @Override
            public void handle(String target, Request baseRequest, HttpServletRequest request, HttpServletResponse response)
                    throws IOException {
                // Setzen Sie die Antwort-Eigenschaften
                response.setContentType("text/plain");
                response.setStatus(HttpServletResponse.SC_OK);
                response.getWriter().println("Hello, World!");

                // Markieren Sie die Anfrage als bearbeitet
                baseRequest.setHandled(true);
            }
        });

        // Starten Sie den Server
        server.start();
        server.join(); // Hält den Server am Laufen, bis er gestoppt wird
    }
}
```

- **`Server server = new Server(8080)`**: Erstellt einen Jetty-Server auf Port 8080.
- **`AbstractHandler`**: Ein einfacher Handler, bei dem Sie definieren, wie Anfragen in der `handle`-Methode verarbeitet werden.
- **`baseRequest.setHandled(true)`**: Zeigt an, dass dieser Handler die Anfrage verarbeitet hat und verhindert eine weitere Verarbeitung.

Führen Sie diesen Code aus und navigieren Sie dann in einem Browser zu `http://localhost:8080/`, um "Hello, World!" zu sehen.

#### **Option 2: Ein Servlet verwenden**
Für komplexere Anwendungen können Sie Servlets mit einem `ServletContextHandler` verwenden.

```java
import org.eclipse.jetty.server.Server;
import org.eclipse.jetty.servlet.ServletContextHandler;
import org.eclipse.jetty.servlet.ServletHolder;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;

public class ServletJettyServer {
    public static void main(String[] args) throws Exception {
        // Erstellen Sie eine Server-Instanz auf Port 8080
        Server server = new Server(8080);

        // Erstellen Sie einen Servlet-Kontext-Handler
        ServletContextHandler context = new ServletContextHandler();
        context.setContextPath("/"); // Root-Kontextpfad

        // Setzen Sie den Handler für den Server
        server.setHandler(context);

        // Fügen Sie ein Servlet hinzu, um Anfragen zu bearbeiten
        context.addServlet(new ServletHolder(new HelloServlet()), "/*");

        // Starten Sie den Server
        server.start();
        server.join();
    }
}

// Definieren Sie ein einfaches Servlet
class HelloServlet extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws IOException {
        response.setContentType("text/plain");
        response.setStatus(HttpServletResponse.SC_OK);
        response.getWriter().println("Hello from Jetty Servlet!");
    }
}
```

- **`ServletContextHandler`**: Verwaltet Servlet-Kontexte und Zuordnungen.
- **`context.addServlet`**: Registriert das `HelloServlet`, um alle Anfragen (`/*`) zu bearbeiten.
- **`doGet`**: Definiert das Verhalten des Servlets für GET-Anfragen.

Führen Sie diesen Code aus und besuchen Sie `http://localhost:8080/`, um "Hello from Jetty Servlet!" zu sehen.

---

### **Schritt 3: Kompilieren und Ausführen**
1. Stellen Sie sicher, dass Ihr Projekt mit Maven eingerichtet ist (führen Sie z.B. `mvn compile` aus, um Abhängigkeiten herunterzuladen).
2. Kompilieren und führen Sie die Java-Klasse aus (z.B. `java SimpleJettyServer` oder verwenden Sie die Lauffunktion Ihrer IDE).
3. Testen Sie den Server, indem Sie in einem Browser auf `http://localhost:8080/` zugreifen oder ein Tool wie `curl` verwenden.

---

### **Zusätzliche Anwendungsfälle**
- **Bereitstellen einer WAR-Datei**: Verwenden Sie `WebAppContext`, um eine Web Application Archive (WAR)-Datei oder ein Verzeichnis bereitzustellen:
  ```java
  import org.eclipse.jetty.server.Server;
  import org.eclipse.jetty.webapp.WebAppContext;

  public class WarJettyServer {
      public static void main(String[] args) throws Exception {
          Server server = new Server(8080);
          WebAppContext webapp = new WebAppContext();
          webapp.setContextPath("/");
          webapp.setWar("path/to/your.war"); // Pfad zu Ihrer WAR-Datei
          server.setHandler(webapp);
          server.start();
          server.join();
      }
  }
  ```
  Fügen Sie für diese Funktion die `jetty-webapp`-Abhängigkeit zu Ihrer `pom.xml` hinzu.

- **Konfigurieren von Jetty**: Passen Sie Einstellungen wie Port, Thread-Pools oder HTTPS programmatisch oder über XML-Konfigurationsdateien an (siehe Jetty-Dokumentation für erweiterte Setups).

---

### **Wichtige Punkte**
- **Imports**: Verwenden Sie Klassen aus `org.eclipse.jetty.server`, `org.eclipse.jetty.servlet` usw., indem Sie sie nach Bedarf importieren.
- **Flexibilität**: Jetty kann statische Inhalte bereitstellen, Servlets verarbeiten, WAR-Dateien bereitstellen oder sogar WebSockets und HTTP/2 mit zusätzlichen Modulen unterstützen.
- **Dokumentation**: Weitere Details finden Sie in der [offiziellen Jetty-Dokumentation](https://www.eclipse.org/jetty/documentation/).

Indem Sie diese Schritte befolgen, können Sie `org.eclipse.jetty` effektiv verwenden, um einen Webserver in Ihrer Java-Anwendung einzubetten, der auf Ihre spezifischen Bedürfnisse zugeschnitten ist!