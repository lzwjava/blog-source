---
audio: false
generated: true
lang: de
layout: post
title: Umfassender Leitfaden zu Cron
translated: true
type: note
---

Cron ist ein leistungsstarker zeitbasierter Job-Scheduler in Unix-ähnlichen Betriebssystemen, der es Benutzern ermöglicht, Befehle oder Skripte automatisch zu festgelegten Zeiten oder Intervallen auszuführen. Hier ist eine vollständige Anleitung zum Verständnis und zur effektiven Nutzung von Cron.

## Was ist Cron?

Cron ist ein Daemon (Hintergrunddienst), der geplante Befehle ausführt. Er liest Konfigurationsdateien, sogenannte "Crontabs" (Cron-Tabellen), um zu bestimmen, wann bestimmte Befehle ausgeführt werden sollen. Cron ist ideal für:
- Routinemäßige Systemwartung
- Automatisierte Backups
- Planung periodischer Datenverarbeitung
- Ausführung von Skripten zu bestimmten Zeiten
- Jede Aufgabe, die regelmäßig ohne manuelles Eingreifen ausgeführt werden muss

## Cron-Komponenten

### Die Crontab-Datei

Die Crontab (Cron-Tabelle) ist eine Konfigurationsdatei, die Shell-Befehle für die periodische Ausführung festlegt. Jeder Benutzer kann eine eigene Crontab haben, und es gibt auch eine systemweite Crontab.

Um Ihre persönliche Crontab zu bearbeiten:
```bash
crontab -e
```

Um Ihre aktuelle Crontab anzuzeigen:
```bash
crontab -l
```

Um Ihre Crontab zu entfernen:
```bash
crontab -r
```

### Crontab-Syntax

Jede Zeile in einer Crontab-Datei stellt einen geplanten Job dar und folgt diesem Format:

```
* * * * * command-to-execute
│ │ │ │ │
│ │ │ │ └─── Wochentag (0-6, Sonntag=0)
│ │ │ └───── Monat (1-12)
│ │ └─────── Tag des Monats (1-31)
│ └───────── Stunde (0-23)
└─────────── Minute (0-59)
```

Jede Position kann enthalten:
- Eine bestimmte Zahl
- Einen Bereich (z.B. `1-5`)
- Eine Liste von Werten (z.B. `1,3,5`)
- Ein Sternchen (`*`) für "jede"
- Einen Schrittwert (`*/n`) für "jede n"

Nach den fünf Zeit-/Datumsfeldern folgt der auszuführende Befehl.

## Häufige Cron-Zeitplanbeispiele

# Häufige Cron-Zeitplanbeispiele

## Grundlegende Zeitintervalle

| Cron-Ausdruck | Beschreibung | Beispiel |
|----------------|-------------|---------|
| `* * * * *` | Jede Minute ausführen | `* * * * * date >> /tmp/date_log.txt` |
| `*/5 * * * *` | Alle 5 Minuten ausführen | `*/5 * * * * /scripts/check_server.sh` |
| `0 * * * *` | Zu Beginn jeder Stunde ausführen | `0 * * * * /scripts/hourly_backup.sh` |
| `0 0 * * *` | Täglich um Mitternacht ausführen | `0 0 * * * /scripts/daily_backup.sh` |
| `0 0 * * 0` | Sonntags um Mitternacht ausführen | `0 0 * * 0 /scripts/weekly_maintenance.sh` |
| `0 0 1 * *` | Am ersten Tag jedes Monats um Mitternacht ausführen | `0 0 1 * * /scripts/monthly_report.sh` |
| `0 0 1 1 *` | Am 1. Januar um Mitternacht ausführen (jährlich) | `0 0 1 1 * /scripts/yearly_cleanup.sh` |

## Bestimmte Zeiten

| Cron-Ausdruck | Beschreibung | Beispiel |
|----------------|-------------|---------|
| `30 8 * * 1-5` | Montags bis freitags um 8:30 Uhr ausführen | `30 8 * * 1-5 /scripts/workday_start.sh` |
| `0 18 * * 1-5` | Montags bis freitags um 18:00 Uhr ausführen | `0 18 * * 1-5 /scripts/workday_end.sh` |
| `0 9-17 * * *` | Zu Beginn jeder Stunde während der Geschäftszeiten (9-17 Uhr) ausführen | `0 9-17 * * * /scripts/hourly_check.sh` |
| `0 0,12 * * *` | Um Mitternacht und Mittag ausführen | `0 0,12 * * * /scripts/twice_daily.sh` |

## Mehrfache Zeitangaben

| Cron-Ausdruck | Beschreibung | Beispiel |
|----------------|-------------|---------|
| `0 */4 * * *` | Alle 4 Stunden ausführen | `0 */4 * * * /scripts/periodic_task.sh` |
| `0 4,16 * * *` | Um 4:00 Uhr und 16:00 Uhr ausführen | `0 4,16 * * * /scripts/twice_daily_at_4.sh` |
| `15,45 * * * *` | Um 15 und 45 Minuten nach jeder vollen Stunde ausführen | `15,45 * * * * /scripts/quarter_hourly.sh` |

## Besondere Zeitangaben

| Cron-Ausdruck | Beschreibung | Beispiel |
|----------------|-------------|---------|
| `@reboot` | Einmal beim Start ausführen | `@reboot /scripts/startup_task.sh` |
| `@yearly` oder `@annually` | Einmal pro Jahr ausführen (`0 0 1 1 *`) | `@yearly /scripts/annual_task.sh` |
| `@monthly` | Einmal pro Monat ausführen (`0 0 1 * *`) | `@monthly /scripts/monthly_task.sh` |
| `@weekly` | Einmal pro Woche ausführen (`0 0 * * 0`) | `@weekly /scripts/weekly_task.sh` |
| `@daily` oder `@midnight` | Einmal pro Tag ausführen (`0 0 * * *`) | `@daily /scripts/daily_task.sh` |
| `@hourly` | Einmal pro Stunde ausführen (`0 * * * *`) | `@hourly /scripts/hourly_task.sh` |

## Komplexe Beispiele

| Cron-Ausdruck | Beschreibung | Beispiel |
|----------------|-------------|---------|
| `0 0 */2 * *` | Alle zwei Tage um Mitternacht ausführen | `0 0 */2 * * /scripts/every_other_day.sh` |
| `0 3 * * 1,3,5` | Montags, mittwochs und freitags um 3:00 Uhr ausführen | `0 3 * * 1,3,5 /scripts/mwf_task.sh` |
| `30 23 * * 2,4` | Dienstags und donnerstags um 23:30 Uhr ausführen | `30 23 * * 2,4 /scripts/tue_thu_night.sh` |
| `45 11 1-7 * *` | In der ersten Woche jedes Monats um 11:45 Uhr ausführen | `45 11 1-7 * * /scripts/first_week_task.sh` |
| `0 20 * 10,11,12 *` | Während Oktober, November und Dezember um 20:00 Uhr ausführen | `0 20 * 10,11,12 * /scripts/q4_evening_task.sh` |
| `0 9-17/2 * * 1-5` | Alle zwei Stunden während der Geschäftszeiten an Wochentagen ausführen | `0 9-17/2 * * 1-5 /scripts/biweekly_workday.sh` |


## Besondere Cron-Strings

Cron unterstützt auch mehrere spezielle Strings für häufige Zeitangaben:

- `@reboot`: Einmal beim Start ausführen
- `@yearly` oder `@annually`: Einmal pro Jahr ausführen (entspricht `0 0 1 1 *`)
- `@monthly`: Einmal pro Monat ausführen (entspricht `0 0 1 * *`)
- `@weekly`: Einmal pro Woche ausführen (entspricht `0 0 * * 0`)
- `@daily` oder `@midnight`: Einmal pro Tag ausführen (entspricht `0 0 * * *`)
- `@hourly`: Einmal pro Stunde ausführen (entspricht `0 0 * * *`)

## Umgang mit Ausgabe und Fehlern

Standardmäßig sendet Cron die Ausgabe von Befehlen per E-Mail an den Benutzer, dem die Crontab gehört. Sie können die Ausgabe in eine Datei umleiten oder verwerfen:

```bash
# Ausgabe an eine Log-Datei anhängen
30 5 * * * /path/to/script.sh >> /path/to/logfile.log 2>&1

# Alle Ausgaben verwerfen
0 12 * * * /path/to/script.sh > /dev/null 2>&1
```

## Umgebungsvariablen in Cron

Cron-Jobs werden mit einer minimalen Umgebung ausgeführt, was dazu führen kann, dass Skripte fehlschlagen. Sie können Variablen in der Crontab-Datei setzen:

```bash
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
SHELL=/bin/bash
MAILTO=your-email@example.com

# Jobs verwenden jetzt diese Umgebungsvariablen
0 5 * * * /path/to/script.sh
```

## Sicherheitsüberlegungen zu Cron

1. Verwenden Sie absolute Pfade für alle Befehle und Skripte
2. Beschränken Sie die Berechtigungen der Crontab-Datei
3. Verwenden Sie das Prinzip der geringsten Rechte beim Einrichten von Cron-Jobs
4. Protokollieren und überwachen Sie die Ausgabe von Cron-Jobs zur Fehlerbehebung
5. Erwägen Sie, einen dedizierten Benutzer für sensible Cron-Jobs zu verwenden

## Fehlerbehebung bei Cron-Jobs

Häufige Probleme mit Cron-Jobs sind:

1. **Job läuft nicht**: Überprüfen Sie Berechtigungen und Pfade
2. **Zeitprobleme**: Stellen Sie sicher, dass das Zeitformat korrekt ist
3. **Umgebungsprobleme**: Stellen Sie sicher, dass notwendige Variablen gesetzt sind
4. **Skriptfehler**: Testen Sie das Skript zuerst manuell

Überprüfen Sie Systemprotokolle auf Cron-bezogene Meldungen:
```bash
grep CRON /var/log/syslog
```

## Cron-Alternativen

Während Cron weit verbreitet ist, gibt es Alternativen:

- **Anacron**: Besser für Systeme, die nicht 24/7 laufen
- **Systemd Timers**: Moderne Alternative auf systemd-basierten Systemen
- **Fcron**: Erweiterte Cron-Version mit Anacron-ähnlichen Funktionen
- **Schedule**: Höhere Job-Scheduler, die oft in Webanwendungen verwendet werden

## Erweiterte Cron-Nutzung

### Ausführung von Jobs als andere Benutzer

Um die Crontab für einen anderen Benutzer zu bearbeiten (erfordert root):
```bash
sudo crontab -u username -e
```

### Systemweite Crontabs

Systemweite Cron-Jobs können hinzugefügt werden zu:
- `/etc/crontab`
- Dateien in `/etc/cron.d/`
- Verzeichnissen wie `/etc/cron.daily/`, `/etc/cron.hourly/`, etc.

Die Syntax für systemweite Crontabs enthält ein zusätzliches Benutzerfeld:
```
* * * * * user command-to-execute
```

### Ausführung von Cron-Jobs mit spezifischer Umgebung

Erstellen Sie ein Wrapper-Skript, um die Umgebung einzurichten, bevor Sie Ihren eigentlichen Befehl ausführen:

```bash
#!/bin/bash
source /home/user/.profile
cd /path/to/working/directory
/path/to/actual/command
```

Rufen Sie dann dieses Wrapper-Skript aus Cron auf.

## Best Practices für Cron-Jobs

1. **Dokumentieren Sie Ihre Cron-Jobs**: Fügen Sie Kommentare hinzu, um zu erklären, was jeder Job macht
2. **Verwenden Sie beschreibende Skriptnamen**: Erleichtert die Wartung
3. **Protokollieren Sie Ausgaben**: Speichern Sie Job-Ausgaben zur Fehlerbehebung
4. **Überwachen Sie die Job-Ausführung**: Implementieren Sie Monitoring für kritische Jobs
5. **Behandeln Sie Fehler angemessen**: Fügen Sie Ihren Skripten Fehlerbehandlung hinzu
6. **Verwenden Sie Lockfiles**: Verhindern Sie überlappende Ausführung, wenn Jobs länger als erwartet dauern
7. **Beachten Sie Zeitzonen**: Seien Sie sich der Systemzeitzoneneinstellungen bewusst

Indem Sie dieser Anleitung folgen, sollten Sie in der Lage sein, Cron-Jobs auf Ihrem Unix-ähnlichen System effektiv einzurichten, zu verwalten und Fehler zu beheben.