---
audio: false
generated: true
lang: de
layout: post
title: JavaCC-Grammatikdefinition und Kompilierung
translated: true
type: note
---

Ich erstelle ein umfassendes Artefakt, das JavaCC (Java Compiler Compiler) mit Beispielen für Grammatikdefinition, Variablendeklarationen und Kompilierung demonstriert.

```java
/* Grundlegendes JavaCC-Grammatikbeispiel */

// Optionen und Parser-Klassendeklaration
options {
    STATIC = false;  // Mehrere Parser-Instanzen erlauben
    LOOKAHEAD = 2;   // Lookahead auf 2 Tokens setzen
}

PARSER_BEGIN(SimpleParser)
public class SimpleParser {
    public static void main(String[] args) throws ParseException {
        SimpleParser parser = new SimpleParser(System.in);
        parser.Start();
    }
}
PARSER_END(SimpleParser)

// Lexikalische Spezifikationen (Tokens)
TOKEN : {
    // Schlüsselwörter
    < VAR: "var" >
    < INT: "int" >
    < BOOLEAN: "boolean" >
    < STRING: "string" >

    // Literale und Bezeichner
    < NUMBER: (["0"-"9"])+ >
    < IDENTIFIER: ["a"-"z","A"-"Z","_"] (["a"-"z","A"-"Z","0"-"9","_"])* >

    // Operatoren und Interpunktion
    < ASSIGN: "=" >
    < SEMICOLON: ";" >
    < PLUS: "+" >
    < MINUS: "-" >
    < MULTIPLY: "*" >
    < DIVIDE: "/" >
    < LPAREN: "(" >
    < RPAREN: ")" >
}

// Leerzeichen und Kommentare überspringen
SKIP : {
    " " | "\t" | "\n" | "\r"
    | <SINGLE_LINE_COMMENT: "//" (~["\n","\r"])* ("\n"|"\r"|"\r\n")>
    | <MULTI_LINE_COMMENT: "/*" (~["*"])* "*" ("*" | (~["*","/"] (~["*"])* "*"))* "/">
}

// Grammatikregeln
void Start() : {} {
    (Statement())* <EOF>
}

void Statement() : {} {
    VariableDeclaration()
    | Expression()
    | AssignmentStatement()
}

void VariableDeclaration() : {} {
    // Syntax: var [type] [identifier] (= [expression])?;
    <VAR> Type() <IDENTIFIER> 
    ( <ASSIGN> Expression() )? 
    <SEMICOLON>
}

void Type() : {} {
    <INT> | <BOOLEAN> | <STRING>
}

void Expression() : {} {
    AdditiveExpression()
}

void AdditiveExpression() : {} {
    MultiplicativeExpression() 
    (
        <PLUS> MultiplicativeExpression()
        | <MINUS> MultiplicativeExpression()
    )*
}

void MultiplicativeExpression() : {} {
    PrimaryExpression() 
    (
        <MULTIPLY> PrimaryExpression()
        | <DIVIDE> PrimaryExpression()
    )*
}

void PrimaryExpression() : {} {
    <NUMBER>
    | <IDENTIFIER>
    | <LPAREN> Expression() <RPAREN>
}

void AssignmentStatement() : {} {
    <IDENTIFIER> <ASSIGN> Expression() <SEMICOLON>
}

```

Nun liefere ich eine umfassende Erklärung von JavaCC und der Arbeit mit dieser Grammatik:

### JavaCC-Überblick
JavaCC (Java Compiler Compiler) ist ein Parser-Generator, der bei der Erstellung von Parsern und Tokenizern für benutzerdefinierte Sprachen oder domänenspezifische Sprachen hilft.

### Wichtige Komponenten im Beispiel:

1. **Options-Block**
   - `STATIC = false`: Ermöglicht die Erstellung mehrerer Parser-Instanzen
   - `LOOKAHEAD = 2`: Setzt den Parser auf 2 Tokens Lookahead für Disambiguierung

2. **Token-Definitionen**
   - Definiert Tokens wie Schlüsselwörter, Bezeichner, Zahlen und Operatoren
   - Verwendet reguläre Ausdrücke zum Abgleichen von Token-Mustern
   - Beispiel-Tokens:
     - `< NUMBER: (["0"-"9"])+ >` gleicht eine oder mehrere Ziffern ab
     - `< IDENTIFIER: ["a"-"z","A"-"Z","_"] (["a"-"z","A"-"Z","0"-"9","_"])* >` gleicht Variablennamen ab

3. **Skip-Spezifikationen**
   - Definiert, was beim Parsen ignoriert werden soll (Leerzeichen, Kommentare)
   - Beinhaltet Behandlung von einzeiligen und mehrzeiligen Kommentaren

4. **Grammatikregeln**
   - Definieren die Syntax und Struktur der Sprache
   - Verwenden rekursiven Abstieg
   - Regeln wie `VariableDeclaration()`, `Expression()` definieren Sprachkonstrukte

### Kompilierungs- und Verwendungsschritte

1. **Parser generieren**
   ```bash
   javacc SimpleParser.jj
   ```
   Dieser Befehl generiert:
   - `SimpleParserConstants.java`
   - `SimpleParserTokenManager.java`
   - `ParseException.java`
   - `SimpleParser.java`

2. **Generierte Dateien kompilieren**
   ```bash
   javac *.java
   ```

3. **Parser ausführen**
   ```bash
   java SimpleParser
   ```

### Beispiel-Eingabe
```
var int x = 10;
var int y = 20;
x = x + y;
```

### Demonstrierte Funktionen
- Variablendeklaration mit optionaler Initialisierung
- Grundlegende arithmetische Ausdrücke
- Typsystem (int, boolean, string)
- Zuweisungsanweisungen
- Arithmetische Operationen (+, -, *, /)

### Einschränkungen dieses Beispiels
- Grundlegende Fehlerbehandlung
- Eingeschränkte Typüberprüfung
- Vereinfachte Grammatik

### Tipps für erweiterte Verwendung
- Verwenden Sie semantische Aktionen (Java-Code in `{}`) für komplexeres Parsing
- Implementieren Sie benutzerdefinierte Fehlerwiederherstellung
- Fügen Sie Typüberprüfung und semantische Analyse hinzu

Möchten Sie, dass ich einen bestimmten Aspekt von JavaCC oder dieses Grammatikbeispiels näher erläutere?