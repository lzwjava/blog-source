---
audio: false
generated: true
lang: de
layout: post
title: FTP-Server
translated: true
type: note
---

Um einen FTP-Server auf Ubuntu einzurichten, damit du von deinem iPad oder anderen Geräten auf deine Dateien (wie diese `.mkv`-Dateien in `/var/www/movies/`) zugreifen kannst, kannst du **vsftpd** (Very Secure FTP Daemon) verwenden, eine leichtgewichtige und sichere Option. Hier ist eine Schritt-für-Schritt-Anleitung, die auf dein Setup zugeschnitten ist:

### Voraussetzungen
- Du verwendest Ubuntu (z.B. 22.04 oder 24.04 Stand 15. März 2025).
- Du hast sudo-Berechtigungen.
- Dein Nginx-Server ist unter `192.168.1.27` und die Dateien befinden sich in `/var/www/movies/`.

### Schritt 1: vsftpd installieren
1. **Paketliste aktualisieren**:
   ```bash
   sudo apt update
   ```
2. **vsftpd installieren**:
   ```bash
   sudo apt install vsftpd -y
   ```
3. **Installation überprüfen**:
   ```bash
   sudo systemctl status vsftpd
   ```
   - Es sollte `active (running)` angezeigt werden. Falls nicht, starte den Dienst:
     ```bash
     sudo systemctl start vsftpd
     sudo systemctl enable vsftpd  # Startet beim Booten
     ```

### Schritt 2: vsftpd konfigurieren
Die Standard-Konfigurationsdatei ist `/etc/vsftpd.conf`. Wir passen sie für den grundlegenden Zugriff an.

1. **Originalkonfiguration sichern**:
   ```bash
   sudo cp /etc/vsftpd.conf /etc/vsftpd.conf.bak
   ```

2. **Konfiguration bearbeiten**:
   ```bash
   sudo nano /etc/vsftpd.conf
   ```
   Nimm diese Änderungen vor:
   - Lokale Benutzer aktivieren:
     ```bash
     local_enable=YES
     ```
   - Datei-Uploads erlauben (optional, falls du Dateien hochladen möchtest):
     ```bash
     write_enable=YES
     ```
   - Benutzer auf ihre Home-Verzeichnisse beschränken (optional, für mehr Sicherheit):
     ```bash
     chroot_local_user=YES
     ```
   - Auf dein Movies-Verzeichnis verweisen (optional, siehe Schritt 3 für Benutzereinrichtung):
     - Standardmäßig greifen Benutzer auf ihre Home-Verzeichnisse zu. Wir passen dies später an.

   Speichern (`Strg + O`, Enter, `Strg + X`).

3. **vsftpd neu starten**:
   ```bash
   sudo systemctl restart vsftpd
   ```

### Schritt 3: Einen FTP-Benutzer einrichten
Du kannst einen vorhandenen Benutzer verwenden oder einen neuen erstellen, um auf `/var/www/movies/` zuzugreifen.

#### Option 1: Einen vorhandenen Benutzer verwenden
Wenn du deinen aktuellen Ubuntu-Benutzer (z.B. `user`) verwenden möchtest:
1. **Deinen Benutzernamen überprüfen**:
   ```bash
   whoami
   ```
2. **Passwort setzen (falls benötigt)**:
   ```bash
   sudo passwd user  # Ersetze "user" mit deinem Benutzernamen
   ```
3. **Mit Movies-Verzeichnis verknüpfen**:
   - Standardmäßig ist das Home-Verzeichnis dieses Benutzers (z.B. `/home/user/`) das FTP-Root. Um auf `/var/www/movies/` zuzugreifen, erstelle einen Symlink:
     ```bash
     ln -s /var/www/movies/ /home/user/movies
     ```
   - Oder passe die Berechtigungen an (weniger sicher):
     ```bash
     sudo chown -R user:user /var/www/movies
     ```

#### Option 2: Einen dedizierten FTP-Benutzer erstellen
Für mehr Sicherheit:
1. **Benutzer hinzufügen**:
   ```bash
   sudo adduser ftpuser
   ```
   - Folge den Anweisungen, um ein Passwort und Details festzulegen.
2. **Home-Verzeichnis auf Movies setzen**:
   ```bash
   sudo usermod -d /var/www/movies ftpuser
   sudo chown -R ftpuser:ftpuser /var/www/movies
   ```

3. **Zugriff beschränken** (falls `chroot_local_user=YES`):
   - Stelle sicher, dass `/var/www/movies` für `ftpuser` beschreibbar ist:
     ```bash
     sudo chmod -R 755 /var/www/movies
     ```

### Schritt 4: Firewall-Ports öffnen
FTP verwendet standardmäßig die Ports 20 und 21.
1. **FTP in UFW erlauben**:
   ```bash
   sudo ufw allow 21/tcp
   sudo ufw allow 20/tcp
   sudo ufw status
   ```
   - Sollte `20/tcp ALLOW` und `21/tcp ALLOW` anzeigen.

2. **vsftpd neu starten**:
   ```bash
   sudo systemctl restart vsftpd
   ```

### Schritt 5: FTP vom iPad testen
Du benötigst eine FTP-Client-App auf deinem iPad.

#### Empfohlene iPad-App: FileZilla oder FE File Explorer
- **FileZilla** (Kostenlos):
  1. Installiere sie aus dem App Store (suche nach "FileZilla").
  2. Öffne FileZilla.
  3. Tippe auf **New Site** oder **Connect**.
  4. Gib ein:
     - Host: `192.168.1.27`
     - Username: `ftpuser` (oder dein Benutzername)
     - Password: [dein Passwort]
     - Port: 21 (Standard)
  5. Tippe auf **Connect**.
- **FE File Explorer** (Kostenlos mit In-App-Käufen):
  1. Installiere sie aus dem App Store.
  2. Tippe auf **+** > **FTP**.
  3. Gib die gleichen Daten wie oben ein.
  4. Verbinde.

#### Streaming von FTP
- Die meisten FTP-Apps ermöglichen das Durchsuchen von Dateien. Um `.mkv`-Dateien zu streamen:
  - Tippe auf die `.mkv`-Datei in der App.
  - Wenn sie nicht direkt abgespielt wird, lade eine Streaming-App wie **VLC for Mobile** herunter (siehe vorherige Antwort), dann verwende deren **Network Stream**-Option mit einer FTP-URL:
    ```
    ftp://ftpuser:password@192.168.1.27/yourfile.mkv
    ```

### Schritt 6: Zugriff überprüfen
- Verbinde dich von deinem iPad aus über die FTP-App mit `192.168.1.27`.
- Du solltest den Inhalt von `/var/www/movies/` sehen (z.B. `yourfile.mkv`).
- Tippe zur Vorschau oder zum Streamen (abhängig von der App).

### Problembehandlung
- **Verbindung abgelehnt**: Überprüfe `sudo ufw status` und stelle sicher, dass die Ports 20/21 offen sind. Verifiziere, dass vsftpd läuft (`sudo systemctl status vsftpd`).
- **Berechtigung verweigert**: Bestätige, dass der Benutzer `/var/www/movies/` besitzt oder lesen kann (`ls -l /var/www/movies/`).
- **404 oder keine Dateien**: Stelle sicher, dass der Verzeichnispfad mit dem Home des Benutzers oder dem Symlink-Setup übereinstimmt.

### Abschließende Hinweise
- **Sicherheit**: Für ein lokales Netzwerk ist dieses Setup in Ordnung. Für externen Zugriff ziehe FTPS (verschlüsseltes FTP) in Betracht, indem du SSL in `vsftpd.conf` aktivierst.
- **Nginx vs. FTP**: Du streamst bereits über HTTP mit Nginx – FTP fügt Dateiverwaltung hinzu. Verwende VLC auf deinem iPad für HTTP-Streaming, wenn dir das FTP-Setup redundant erscheint.

Dein iPad hat jetzt den FTP-"Zauber", um auf die Dateien deines Ubuntu-Servers zuzugreifen! Lass mich wissen, wenn du auf Probleme stößt.