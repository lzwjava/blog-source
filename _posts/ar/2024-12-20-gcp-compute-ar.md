---
audio: false
generated: false
lang: ar
layout: post
title: إعداد خادم Google Cloud
translated: true
---

إعداد خادم وكيل (Proxy Server) في Google Cloud يتيح لك توجيه حركة مرور الإنترنت الخاصة بك بشكل آمن من خلال مثيل سحابي، مما يعزز الخصوصية ويتيح تجاوز القيود. في هذا الدليل، سنرشدك خلال عملية إعداد خادم وكيل أساسي في Google Cloud وتهيئة قواعد جدار الحماية اللازمة للسماح بحركة المرور.

## جدول المحتويات
1. [إنشاء مثيل VM على Google Cloud](#creating-a-google-cloud-vm-instance)
2. [تكوين خادم الوكيل](#configuring-the-proxy-server)
3. [إعداد قواعد جدار الحماية](#setting-up-firewall-rules)
4. [اختبار خادم الوكيل](#testing-the-proxy-server)
5. [الخاتمة](#conclusion)

---

## إنشاء مثيل VM على Google Cloud

قبل إعداد خادم الوكيل، ستحتاج إلى إنشاء مثيل لجهاز ظاهري (VM) في Google Cloud.

1. تسجيل الدخول إلى Google Cloud Console: انتقل إلى [Google Cloud Console](https://console.cloud.google/) وقم بتسجيل الدخول إلى حسابك.

2. إنشاء مثيل VM جديد:
   - انتقل إلى Compute Engine > VM instances.
   - انقر على Create Instance.
   - اختر المنطقة ونوع الجهاز المطلوب. للتبسيط، يمكنك استخدام الإعدادات الافتراضية أو اختيار تكوين خفيف الوزن مثل مثيل `e2-micro`.
   - ضمن قسم الجدار الناري، حدد كل من Allow HTTP traffic و Allow HTTPS traffic لتمكين الوصول إلى الويب.

3. إعداد الوصول عبر SSH:
   - ضمن قسم SSH Keys، أضف مفتاح SSH العام الخاص بك للوصول إلى المثيل عن بُعد. هذا أمر بالغ الأهمية لتكوين خادم الوكيل الخاص بك لاحقًا.

4. انقر على Create لبدء تشغيل VM الخاص بك.

بعد إعداد الجهاز الظاهري (VM)، يمكنك الاتصال به باستخدام SSH من خلال وحدة تحكم Google Cloud أو عبر الطرفية باستخدام الأمر التالي:

```bash
gcloud compute ssh <اسم-جهازك-الافتراضي>
```

---

## تكوين خادم الوكيل (Proxy Server)

بمجرد إعداد الجهاز الظاهري (VM)، يمكنك تكوين أي برنامج خادم وكيل تختاره. يجب تثبيت برنامج الوكيل وتكوينه لقبول الاتصالات على المنفذ المطلوب (على سبيل المثال، `3128` لإعدادات الوكيل الشائعة). تأكد من أن البرنامج يسمح بالاتصالات من العملاء البعيدين.

---

## إعداد قواعد جدار الحماية

لتمكين حركة المرور إلى خادم الوكيل الخاص بك، ستحتاج إلى تكوين قواعد جدار الحماية في Google Cloud لفتح المنفذ الضروري.

1. انتقل إلى قواعد جدار الحماية في Google Cloud Console:
   - انتقل إلى VPC Network > Firewall Rules في Google Cloud Console.

2. إنشاء قاعدة جدار حماية جديدة:
   - انقر على "إنشاء قاعدة جدار حماية".
   - أدخل اسمًا للقاعدة، مثل `allow-proxy-access`.
   - اضبط اتجاه حركة المرور على "Ingress" (حركة المرور الواردة).
   - اضبط الإجراء عند التطابق على "السماح".
   - اضبط الأهداف على "كل الحالات في الشبكة" أو "علامات الأهداف المحددة" (إذا كنت تفضل مزيدًا من التحكم).
   - ضمن "نطاقات IP المصدر"، يمكنك تعيينها إلى `0.0.0.0/0` للسماح بالوصول من جميع عناوين IP، أو قصرها على عناوين IP أو نطاقات محددة لتحسين الأمان.
   - ضمن "البروتوكولات والمنافذ"، اختر "البروتوكولات والمنافذ المحددة" وأدخل المنفذ المستخدم بواسطة خادم الوكيل الخاص بك (على سبيل المثال، `tcp:3128`).

3. حفظ قاعدة الجدار الناري:
   بعد تكوين القاعدة، انقر فوق إنشاء لتمكين الجدار الناري.

---

## اختبار خادم الوكيل (Proxy Server)

بعد تكوين جدار الحماية، حان الوقت لاختبار خادم الوكيل الخاص بك.

1. اختبار الوكيل من جهازك المحلي:

يمكنك تكوين إعدادات المتصفح أو إعدادات البروكسي على جهازك المحلي لاستخدام عنوان IP الخارجي لجهاز VM الخاص بك على Google Cloud والمنفذ الذي يستمع إليه خادم البروكسي الخاص بك (على سبيل المثال، `3128`).

2. الاختبار باستخدام سطر الأوامر:

   يمكنك أيضًا اختبار الوكيل باستخدام `curl` عن طريق تعيين متغيرات البيئة للوكيل:

```bash
export http_proxy=http://<your-vm-external-ip>:3128
export https_proxy=http://<your-vm-external-ip>:3128
curl -I http://example.com
```

**ترجمة:**

```bash
export http_proxy=http://<your-vm-external-ip>:3128
export https_proxy=http://<your-vm-external-ip>:3128
curl -I http://example.com
```

**ملاحظة:** الأوامر البرمجية لا تُترجم، لذا تم تركها كما هي.

إذا كان الاتصال ناجحًا، يجب أن ترى استجابة من الموقع.

---

## الخلاصة

باتباع هذا الدليل، تعلمت كيفية إعداد خادم وكيل (Proxy Server) على Google Cloud وتكوين قواعد جدار الحماية للسماح بحركة المرور الواردة. يوفر هذا الإعداد طريقة سهلة لتوجيه حركة مرور الإنترنت الخاصة بك بشكل آمن عبر السحابة، وتجاوز قيود الشبكة، وتعزيز الخصوصية.