---
audio: false
generated: true
image: false
lang: ar
layout: post
title: إصلاح إعداد مشروع Rust
translated: true
type: note
---

يبدو أنك تحاول إعداد وتشغيل مشروع Rust بسيط استنادًا إلى مقتطف `Cargo.toml` المقدم وبنية الملف (دليل فرعي `rust` يحتوي على `example.rs`). ومع ذلك، هناك بعض المشكلات التي تمنع هذا من العمل مباشرة:

*   دليل `/Users/lzwjava/projects/lzwjava.github.io` (جذر GitHub Pages الخاص بك) لا يبدو مهيأ بعد كمساحة عمل Rust صالحة، وهذا هو سبب فشل rust-analyzer سابقًا.
*   `edition = "2025"` في `Cargo.toml` غير صالحة — إصدارات Rust الحالية هي 2015 و 2018 و 2021 و 2024 (تم إصدارها في أوائل 2025). لا يوجد إصدار 2025 متاح.
*   تتوقع المشاريع التي تديرها Cargo بنية قياسية: `Cargo.toml` في الجذر، مع ملفات المصدر في دليل فرعي `src/` (على سبيل المثال، `src/main.rs` لتنفيذي ثنائي). ملف `example.rs` الخاص بك موجود في دليل فرعي `rust/`، والذي لا يتم التعرف عليه افتراضيًا.
*   بافتراض أن `example.rs` يحتوي على برنامج تنفيذي بسيط (على سبيل المثال، "Hello, World!" مع `fn main()`)، لديك خياران رئيسيان: تشغيله كنص برمجي بملف واحد (لا حاجة لـ Cargo) أو إعداده كمشروع Cargo صحيح.

سأرشدك خلال كلا النهجين خطوة بخطوة. استخدم طرفية في دليل الجذر لمشروعك (`lzwjava.github.io`).

### الخيار 1: التشغيل كنص برمجي بملف واحد (الأسرع، لا حاجة لـ Cargo)
هذا يقوم بتجميع وتشغيل `example.rs` مباشرة باستخدام مترجم Rust (`rustc`). إنه مثالي إذا كنت لا تحتاج إلى تبعيات أو إعداد مشروع كامل.

1.  انتقل إلى الدليل الذي يحتوي على الملف:
    ```
    cd rust
    ```

2.  قم بتجميع الملف:
    ```
    rustc example.rs
    ```
    *   يولد هذا ملفًا تنفيذيًا باسم `example` (على macOS/Linux) أو `example.exe` (على Windows).
    *   إذا فشل التجميع (على سبيل المثال، بسبب أخطاء في بناء الجملة في `example.rs`)، أصلح الكود وأعد المحاولة.

3.  شغل الملف التنفيذي:
    ```
    ./example
    ```
    *   سيعتمد الناتج على ما يوجد في `example.rs` (على سبيل المثال، "Hello, World!").

إذا كان `example.rs` عبارة عن مكتبة (لا يحتوي على `fn main()`)، فإن هذا لن ينجح — استخدم `cargo test` بدلاً من ذلك في إعداد المشروع.

### الخيار 2: الإعداد والتشغيل كمشروع Cargo (موصى به لـ rust-analyzer وقابلية التوسع)
هذا يصحح خطأ rust-analyzer عن طريق إنشاء مساحة عمل صالحة. كما يسمح باستخدام `cargo run` لسهولة البناء/التشغيل.

1.  أنشئ دليل مشروع مخصص أو انتقل إليه (لتجنب تشويش جذر GitHub Pages الخاص بك):
    ```
    mkdir rust_project
    cd rust_project
    ```
    *   إذا كنت مصرًا على استخدام دليل `rust` الحالي، فانتقل إليه باستخدام `cd rust` بدلاً من ذلك واستمر.

2.  أنشئ `Cargo.toml` بالمحتوى المقدم لديك، ولكن صحح الإصدار:
    ```
    [package]
    name = "example"
    version = "0.1.0"
    edition = "2024"  # تم تغييره من "2025" غير الصالح
    authors = ["lzwjava@gmail.com"]
    description = "A simple Rust example project"

    [dependencies]
    ```
    *   احفظ هذا كملف `Cargo.toml` في الدليل الحالي.

3.  قم بإعداد دليل المصدر وانقل ملفك:
    ```
    mkdir src
    mv ../rust/example.rs src/main.rs  # اضبط المسار إذا لزم الأمر؛ يعيد تسميته إلى main.rs للتنفيذ الثنائي
    ```
    *   إذا لم يكن `example.rs` مقصودًا أن يكون نقطة الدخول الرئيسية، فقم بإعادة تسميته إلى `lib.rs` بدلاً من ذلك وأضف `[lib]` إلى `Cargo.toml` لمكتبة.

4.  ابنِ المشروع:
    ```
    cargo build
    ```
    *   يقوم هذا بتنزيل أي صناديق مطلوبة (لا يوجد هنا) وتجميعها. إذا فشل، تحقق من الأخطاء في `src/main.rs`.

5.  شغل المشروع:
    ```
    cargo run
    ```
    *   يقوم هذا بالبناء إذا لزم الأمر وتنفيذ `src/main.rs`.

6.  لحل خطأ rust-analyzer في VS Code (أو محرر مشابه):
    *   افتح مجلد `rust_project` كجذر مساحة العمل الخاص بك (**File > Open Folder**).
    *   أعد تحميل النافذة (**Cmd+Shift+P** > **Developer: Reload Window**).
    *   يجب أن يكتشف rust-analyzer المشروع الآن عبر `Cargo.toml`.

### نصائح استكشاف الأخطاء وإصلاحها
*   **إذا لم يكن `cargo` مثبتًا**: شغل `rustup update` (بافتراض أنك قمت بتثبيت Rust عبر rustup). إذا لم يكن كذلك، قم بتثبيت Rust من https://rustup.rs/.
*   **خطأ في الإصدار**: إذا حافظت على "2025"، سيشكو Cargo: "error: invalid edition: '2025'". التزم بـ "2024".
*   **لا يوجد `fn main()` في `example.rs`**: أضف واحدة، على سبيل المثال:
    ```
    fn main() {
        println!("Hello, World!");
    }
    ```
*   **هل تحتاج تبعيات؟**: أضفها تحت `[dependencies]` في `Cargo.toml`، على سبيل المثال، `rand = "0.8"`، ثم `cargo build`.
*   **لا يزال rust-analyzer يفشل؟**: تأكد من أن إضافة Rust في محررك محدثة، وأضف `"rust-analyzer.linkedProjects": ["./Cargo.toml"]` إلى `settings.json` لمساحة العمل الخاصة بك إذا كان المشروع في دليل فرعي.
*   للإعدادات الأكثر تعقيدًا (على سبيل المثال، صناديق متعددة)، استخدم `cargo new --bin example` لإنشاء قالب.

إذا كان هذا لا يتطابق مع إعدادك (على سبيل المثال، قدم محتوى `example.rs` أو المزيد من التفاصيل)، دعني أعرف للحصول على خطوات مكررة.

[Announcing Rust 1.88.0](https://blog.rust-lang.org/2025/06/26/Rust-1.88.0/)  
[Rust | endoflife.date](https://endoflife.date/rust)