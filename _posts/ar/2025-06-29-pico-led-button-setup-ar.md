---
audio: false
generated: true
lang: ar
layout: post
title: إعداد زر LED لـ Raspberry Pi Pico
translated: true
type: note
---

لإعداد Raspberry Pi Pico لتشغيل كود MicroPython المقدم، والذي يتحكم في LED بناءً على الضغط على زر، اتبع الخطوات التالية:

### المتطلبات المادية
- **Raspberry Pi Pico** (أو Pico W)
- **LED** (مع مقاومة محددة للتيار مناسبة، مثلاً 220–330 أوم)
- **مفتاح ضغط زرّي**
- **أسلاك توصيل**
- **لوحة تجارب** (اختياري، لسهولة التوصيلات)
- **كابل USB** (لتوصيل الـ Pico بالحاسوب)

### الإعداد المادي
1. **توصيل الـ LED**:
   - وصل الطرف الموجب (الرجل الأطول) للـ LED إلى **GPIO 25** (الطرف المادي 30) على الـ Pico.
   - وصل الطرف السالب (الرجل الأقصر) للـ LED إلى طرف **الأرضي (GND)** (مثلاً الطرف المادي 3) عبر مقاومة 220–330 أوم للحد من التيار.

2. **توصيل الزر**:
   - وصل أحد جانبي الزر إلى **GPIO 14** (الطرف المادي 19).
   - وصل الجانب الآخر من الزر إلى طرف **3.3 فولت** (مثلاً الطرف المادي 36، 3V3(OUT)).
   - يستخدم الكود مقاوم سحب داخلي لأسفل (`Pin.PULL_DOWN`)، لذا لا حاجة لمقاومة سحب خارجية. عند الضغط على الزر، سيقرأ GPIO 14 قيمة HIGH (1)؛ وعند عدم الضغط، سيقرأ قيمة LOW (0).

3. **التحقق من التوصيلات**:
   - تأكد من أن جميع التوصيلات آمنة. استخدم لوحة تجارب أو توصيل مباشر، وراجع مرة أخرى أن قطبية LED صحيحة وأن المقاومة موضوعة بشكل صحيح.
   - راجع مخطط توزيع أطراف الـ Pico (متوفر على الإنترنت أو في ورقة بيانات الـ Pico) لتأكيد تعيينات الأطراف.

### الإعداد البرمجي
1. **تثبيت MicroPython على الـ Pico**:
   - حمّل أحدث نسخة من برنامج MicroPython الثابت (UF2) لـ Raspberry Pi Pico من [الموقع الرسمي لـ MicroPython](https://micropython.org/download/rp2-pico/).
   - صل الـ Pico بحاسوبك عبر كابل USB مع الاستمرار في الضغط على زر **BOOTSEL**.
   - سيظهر الـ Pico كقرص USB (RPI-RP2). اسحب ملف الـ `.uf2` الذي تم تحميله وأسقطه على هذا القرص.
   - سيعيد الـ Pico التشغيل تلقائياً مع تثبيت MicroPython.

2. **إعداد بيئة التطوير**:
   - ثبّت بيئة تطوير متوافقة مع MicroPython، مثل **Thonny** (موصى به للمبتدئين):
     - حمّل Thonny وثبّته من [thonny.org](https://thonny.org).
     - في Thonny، انتقل إلى **Tools > Options > Interpreter**، واختر **MicroPython (Raspberry Pi Pico)**، واختر المنفذ المناسب (مثلاً `COMx` على Windows أو `/dev/ttyACM0` على Linux/macOS).
   - بدلاً من ذلك، يمكنك استخدام أدوات مثل `rshell`، أو `ampy`، أو Visual Studio Code مع إضافة MicroPython.

3. **رفع الكود وتشغيله**:
   - انسخ الكود المقدم إلى ملف باسم `main.py`:
     ```python
     from machine import Pin
     import time

     led = Pin(25, Pin.OUT)
     button = Pin(14, Pin.IN, Pin.PULL_DOWN)

     while True:
         if button.value():
             led.on()
         else:
             led.off()
         time.sleep(0.05)
     ```
   - في Thonny:
     - افتح ملفاً جديداً، الصق الكود، واحفظه على الـ Pico باسم `main.py` (يقوم MicroPython تلقائياً بتشغيل `main.py` عند الإقلاع).
     - انقر على زر **Run** أو اضغط على **F5** لرفع وتنفيذ الكود.
   - بدلاً من ذلك، استخدم `ampy` لرفع الملف:
     ```bash
     ampy --port /dev/ttyACM0 put main.py
     ```
     استبدل `/dev/ttyACM0` بالمنفذ الخاص بـ Pico الخاص بك.

4. **اختبار البرنامج**:
   - بمجرد رفع الكود، يجب أن يضيء الـ LED عند الضغط على الزر وينطفيء عند إطلاقه. تضيف `time.sleep(0.05)` تأخيراً قدره 50 مللي ثانية لإزالة ارتداد الزر وتقليل حمل المعالج.

### استكشاف الأخطاء وإصلاحها
- **الـ LED لا يضيء**:
  - تحقق من قطبية الـ LED (الطرف الموجب إلى GPIO 25، والطرف السالب إلى GND عبر المقاومة).
  - تأكد من أن طرف GPIO (25) يطابق الكود والتوصيل المادي.
  - تأكد من أن الـ LED والمقاومة يعملان (اختبر باستخدام مقياس متعدد أو دائرة أخرى).
- **الزر لا يعمل**:
  - تأكد من أن GPIO 14 موصل بشكل صحيح وأن الزر يوصل إلى 3.3 فولت عند الضغط.
  - تحقق من أن `Pin.PULL_DOWN` مناسب؛ إذا كان الزر موصولاً بشكل مختلف (مثلاً إلى GND)، فاضبط الكود لاستخدام `Pin.PULL_UP` وعكس المنطق (`if not button.value()`).
- **الكود لا يعمل**:
  - تأكد من تثبيت MicroPython بشكل صحيح.
  - تحقق من أن الملف محفوظ باسم `main.py` على الـ Pico.
  - تحقق من توصيل USB وإعدادات المنفذ في بيئة التطوير الخاصة بك.

### ملاحظات
- يفترض الكود أن الزر يوصّل GPIO 14 إلى 3.3 فولت عند الضغط. إذا كان الزر يوصّل إلى GND بدلاً من ذلك، فعدّل الكود لاستخدام `Pin.PULL_UP` وعكس المنطق:
  ```python
  button = Pin(14, Pin.IN, Pin.PULL_UP)
  while True:
      if not button.value():  # الزر مضغوط = LOW
          led.on()
      else:
          led.off()
      time.sleep(0.05)
  ```
- إذا واجهت ارتداداً في الزر (LED يومض)، فزِد قيمة `time.sleep` أو نفّذ تقنية إزالة الارتداد برمجياً.
- بالنسبة لـ Pico W، فإن الإعداد مطابق، ولكن تأكد من استخدام أطراف GPIO الصحيحة، حيث أن توزيعها هو نفسه.

إذا كنت بحاجة إلى توضيح إضافي أو مساعدة في مشاكل محددة، فأعلمني!