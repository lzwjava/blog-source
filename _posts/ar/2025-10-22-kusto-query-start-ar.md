---
audio: false
generated: true
image: false
lang: ar
layout: post
model: x-ai/grok-4-fast
title: بدء العمل مع لغة استعلام كوستو
translated: true
type: note
---

### البدء مع لغة استعلام كيستو (KQL) في Azure

لغة استعلام كيستو (KQL) هي لغة استعلام قوية للقراءة فقط مصممة لتحليل كميات كبيرة من البيانات المنظمة وشبه المنظمة وغير المنظمة في خدمات Azure مثل Azure Data Explorer وAzure Monitor (Log Analytics) وMicrosoft Sentinel. إنها بديهية، تعتمد على الأنابيب (باستخدام `|` لتدفق البيانات)، ومحسنة لسيناريوهات البيانات الضخمة مثل تحليل السجلات والقياسات عن بُعد وكشف التهديدات. فيما يلي دليل خطوة بخطوة لاستخدامها.

#### المتطلبات الأساسية
- اشتراك Azure نشط مع حق الوصول إلى خدمة ذات صلة (مثل مجموعة Azure Data Explorer، أو مساحة عمل Log Analytics، أو مثيل Sentinel).
- الأذونات المناسبة: على الأقل، حق الوصول للقراءة إلى قواعد البيانات أو الجداول أو مساحات العمل.
- الإلمام الأساسي بمفاهيم البيانات (مثل الجداول والتصفية) مفيد، لكن لغة KQL مناسبة للمبتدئين.
- اختياري: تثبيت تطبيق Azure Data Explorer أو استخدام واجهة المستخدم الويب للبدء السريع — لا حاجة لبيئة برمجة في البداية.

#### الخطوة 1: اختر مكان تنفيذ استعلاماتك
تعمل لغة KQL في عدة خدمات Azure. ابدأ بالخدمة التي تناسب مصدر بياناتك:
- **Azure Data Explorer**: مثالي لاستكشاف البيانات الضخمة. الوصول إلى واجهة المستخدم الويب على [dataexplorer.azure.com](https://dataexplorer.azure.com/). حدد مجموعة وقاعدة بيانات، ثم افتح محرر الاستعلام.
- **Azure Monitor / Log Analytics**: للسجلات والمقاييس. في بوابة Azure (portal.azure.com)، انتقل إلى **Monitor > Logs**، حدد مساحة عمل، واستخدم محرر الاستعلام.
- **Microsoft Sentinel**: لتحليلات الأمان. في بوابة Azure، انتقل إلى **Microsoft Sentinel > Logs** داخل مساحة العمل الخاصة بك.
- **خيارات أخرى**: Microsoft Fabric (عبر محرر استعلام KQL) أو التكامل مع أدوات مثل Power BI للتصور.

يتم تنظيم البيانات في تسلسل هرمي: قواعد البيانات > الجداول > الأعمدة. استعلامات القراءة فقط؛ استخدم أوامر الإدارة (التي تبدأ بـ `.`) لإجراء تغييرات على المخطط.

#### الخطوة 2: فهم الصيغة الأساسية
استعلامات KQL هي عبارات نصية عادية مفصولة بفواصل منقوطة (`;`). تستخدم نموذج تدفق البيانات:
- ابدأ باسم الجدول (مثل `StormEvents`).
- مرر البيانات (`|`) عبر عوامل التشغيل للتصفية والتجميع، إلخ.
- انتهي بمخرج مثل `count` أو `summarize`.
- حساسة لحالة الأحرف للأسماء/عوامل التشغيل؛ ضع الكلمات الأساسية بين `['keyword']` إذا لزم الأمر.

هيكل استعلام بسيط:
```
اسم_الجدول
| where الشرط
| summarize Count = count() by GroupByColumn
```

أوامر الإدارة (وليست استعلامات) تبدأ بـ `.` (مثل `.show tables` لعرض الجداول).

#### الخطوة 3: اكتب وشغل استعلامك الأول
1. افتح محرر الاستعلام في الخدمة التي اخترتها (مثل واجهة المستخدم الويب لـ Azure Data Explorer).
2. أدخل استعلامًا أساسيًا. مثال باستخدام بيانات نموذجية (جدول StormEvents، متوفر في معظم البيئات):
   ```
   StormEvents
   | where StartTime between (datetime(2007-11-01) .. datetime(2007-12-01))
   | where State == "FLORIDA"
   | count
   ```
   - يقوم هذا بتصفية العواصم في فلوريدا لشهر نوفمبر 2007 وإرجاع العدد (مثال: 28).
3. انقر فوق **Run** للتنفيذ. تظهر النتائج كجدول؛ استخدم واجهة المستخدم لتصورها كرسوم بيانية أو تصديرها.
4. كرر التحسين: أضف عوامل تشغيل مثل `project` (تحديد الأعمدة)، أو `summarize` (تجميع)، أو `extend` (إضافة أعمدة محسوبة).

عوامل التشغيل الشائعة للتعلم أولاً:
- `where`: تصفية الصفوف (مثال: `| where Level == "Error"`).
- `summarize`: تجميع (مثال: `| summarize avg(Duration) by User`).
- `join`: دمج الجداول.
- `search`: بحث نصي كامل عبر الجداول.

#### الخطوة 4: استكشف الميزات المتقدمة وأفضل الممارسات
- **السلاسل الزمنية والتحليلات**: استخدم دوال مثل `make-series` للاتجاهات أو `detect-anomalies` للقيم الشاذة.
- **التصور**: في المحرر، انتقل إلى طرق عرض الشبكة/الرسوم البيانية. قم بالتصدير إلى Power BI للوحات المعلومات.
- **نصائح الأداء**: رتب عوامل التشغيل منطقيًا (قم بالتصفية مبكرًا)، وقلل النتائج باستخدام `take 100`، واختبر على مجموعات بيانات صغيرة.
- **حالات الاستخدام الشائعة**:
  - **تحليل السجلات**: استعلام الأخطاء في التطبيقات (`| where Level == "Error" | take 50`).
  - **مطاردة الأمان**: في Sentinel، ابحث عن التهديدات (`search "suspicious login"`).
  - **استكشاف البيانات**: لخص المقاييس (`| summarize count() by bin(TimeGenerated, 1h)`).

#### استكشاف الأخطاء وإصلاحها
- أخطاء؟ تحقق من الصيغة في المحرر (يتم تمييز المشكلات). تأكد من تطابق أسماء الجداول/الأعمدة تمامًا.
- لا توجد بيانات؟ تحقق من أن مساحة العمل قد استوعبت السجلات أو استخدم مجموعات البيانات النموذجية.
- تعلم المزيد عبر البرامج التعليمية التفاعلية في بوابة Azure أو الوثائق.

للتدريب العملي، قم بتحميل بيانات نموذجية في Azure Data Explorer وجرب.

[المراجع]  
[نظرة عامة على لغة استعلام كيستو (KQL)](https://learn.microsoft.com/en-us/azure/data-explorer/kusto/query/)  
[اكتب وشغل أول استعلام KQL لك](https://learn.microsoft.com/en-us/azure/data-explorer/kusto/query/tutorial?pivots=azuredataexplorer-cluster)  
[عوامل تشغيل KQL الشائعة](https://learn.microsoft.com/en-us/azure/data-explorer/kusto/query/tutorial?pivots=azuredataexplorer-cluster&tabs=beginner)