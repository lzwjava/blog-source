---
audio: false
generated: false
lang: ar
layout: post
title: توافق Node.js مع OpenSSL
translated: true
type: note
---

عند تشغيل `ng build` باستخدام **Node.js 22.9.0** و **npm 10.8.3**، تواجه الخطأ:

```
error 0308010C digital envelope routines::unsupported
```

يحدث هذا الخطأ عادةً بسبب مشكلة توافق بين الإصدارات الأحدث من Node.js (مثل 22.9.0، الذي يستخدم OpenSSL 3.0 أو أحدث) وبعض الخوارزميات التشفيرية التي تعتمد عليها أدوات مثل Webpack، الذي يستخدمه Angular في الخلفية. فيما يلي دليل خطوة بخطوة لإصلاح هذه المشكلة.

---

### الحل

#### الخطوة 1: تمكين موفر OpenSSL القديم (Legacy Provider)
أبسط حل وأسرعه هو تمكين موفر OpenSSL القديم عن طريق تعيين متغير البيئة `NODE_OPTIONS`. هذا يسمح لـ Node.js باستخدام خوارزميات التشفير القديمة التي قد لا تكون مدعومة افتراضيًا في OpenSSL 3.0+.

- **لأنظمة macOS/Linux**:
  افتح طرفيتك وقم بتشغيل:
  ```bash
  export NODE_OPTIONS=--openssl-legacy-provider
  ng build
  ```

- **لـ Windows (موجه الأوامر Command Prompt)**:
  افتح موجه الأوامر وقم بتشغيل:
  ```cmd
  set NODE_OPTIONS=--openssl-legacy-provider
  ng build
  ```

- **لـ Windows (PowerShell)**:
  افتح PowerShell وقم بتشغيل:
  ```powershell
  $env:NODE_OPTIONS="--openssl-legacy-provider"
  ng build
  ```

بعد تعيين متغير البيئة، قم بتشغيل `ng build` مرة أخرى. يجب أن يحل هذا الخطأ في معظم الحالات من خلال السماح لـ Node.js بمعالجة الإجراءات (routines) غير المدعومة.

---

#### الخطوة 2: التحقق من إصدار Angular CLI وتحديثه (إذا لزم الأمر)
إذا استمر الخطأ بعد الخطوة 1، فقد يكون إصدار Angular CLI الذي تستخدمه غير متوافق تمامًا مع Node.js 22.9.0. يمكن أن يساعد تحديثه إلى أحدث إصدار.

- تحقق من إصدار Angular CLI الحالي:
  ```bash
  ng --version
  ```

- قم بتحديث Angular CLI بشكل عام (عالمي):
  ```bash
  npm install -g @angular/cli
  ```

- بعد ذلك، حاول تشغيل `ng build` مرة أخرى.

---

#### الخطوة 3: التحقق من تبعيات المشروع وتحديثها (اختياري)
إذا لم يتم حل المشكلة بعد، فقد تكون التبعيات القديمة في مشروعك هي السبب. لمعالجة هذا:

- افتح ملف `package.json` الخاص بك وراجع إصدارات التبعيات الخاصة بك (مثل `@angular/core`، `@angular/cli`، إلخ).
- قم بتحديثها بعناية إلى أحدث إصدارات متوافقة:
  ```bash
  npm install
  ```
  أو، إذا كنت تريد تحديث جميع التبعيات:
  ```bash
  npm update
  ```

- قم بتشغيل `ng build` مرة أخرى للاختبار.

*ملاحظة*: كن حذرًا مع التحديثات، لأنها قد تُحدث تغييرات غير متوافقة (breaking changes). اختبر تطبيقك بدقة بعد ذلك.

---

#### الخطوة 4: العودة إلى إصدار أقدم من Node.js (ملاذ أخير)
إذا لم تنجح أي من الحلول أعلاه، فقد لا يكون إصدار Node.js 22.9.0 مدعومًا بالكامل من خلال التكوين الحالي لمشروعك. يمكن أن يحل العودة إلى إصدار دعم طويل المدى (LTS) من Node.js، مثل **20.x** أو **18.x**، المشكلة.

- قم بإلغاء تثبيت إصدار Node.js الحالي.
- قم بتنزيل وتثبيت إصدار LTS من [موقع Node.js الرسمي](https://nodejs.org/).
- تحقق من الإصدار المثبت:
  ```bash
  node -v
  ```
- أعد تثبيت تبعيات مشروعك:
  ```bash
  npm install
  ```
- قم بتشغيل `ng build` مرة أخرى.

---

### النهج الموصى به
ابدأ بالخطوة 1 (تعيين `NODE_OPTIONS`)، لأنها أسرع حل وتسمح لك بالاستمرار في استخدام Node.js 22.9.0. إذا لم ينجح ذلك، انتقل إلى الخطوة 2 ثم الخطوة 3. استخدم الخطوة 4 فقط إذا لزم الأمر، لأن العودة إلى إصدار أقدم من Node.js قد يحد من الوصول إلى الميزات الأحدث.

يجب أن يحل هذا خطأ "error 0308010C digital envelope routines::unsupported" ويعيد عمل أمر `ng build` الخاص بك مرة أخرى!