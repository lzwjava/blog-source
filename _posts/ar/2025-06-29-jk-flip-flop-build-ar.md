---
audio: false
generated: true
lang: ar
layout: post
title: بناء واختبار قلابة جيه كيه
translated: true
type: note
---

في فيديو سابق، استكشفنا flip-flop من نوع JK وتشغيله، ولاحظنا تشابهه مع flip-flop من نوع SR ولكن مع إضافة آلية التغذية الراجعة. هذه التغذية الراجعة تسمح للمخرج بأن يتبادل عندما يكون كلا المدخلين مرتفعين على حافة الساعة الصاعدة، بدلاً من الدخول في حالة غير محددة. في هذا الفيديو، أهدف إلى بناء وملاحظة وظيفته العملية.

لقد قمت ببناء flip-flop من نوع JK وفقاً لمخطط الدائرة المقدم. أثناء البناء، أدركت وجود خطأ في وضع العلامات في المخطط: هذا هو في الواقع مدخل K، وهذا هو مدخل J. J يتوافق مع الضبط، مما يعني أنه عندما يصبح مرتفعاً، يجب أن يصبح المخرج Q مرتفعاً أيضاً. على العكس من ذلك، K يتوافق مع إعادة الضبط، لذا عندما يصبح مرتفعاً، يجب أن يصبح المخرج Q منخفضاً. باستثناء هذا التصحيح البسيط للعلامات، بقية الدائرة دقيقة.

لبوابات NOR، أستخدم شريحة 74LS02، وتحديداً بوابتي NOR في جانبها العلوي. الشريحة الأخرى، 74LS11، هي بوابة AND ثلاثية ذات ثلاث مداخل. أنا أستخدم اثنتين من بوابات AND ثلاثية المداخل هذه للدائرة.

عند توصيل الطاقة، تستقر الدائرة في حالة، ويبدو أن المخرج Q "مشغول". ثم قمت بتوصيل دائرة الساعة الخاصة بي. المفتاحان اللذان تراهما يتم سحبهما للأسفل عبر مقاومات سحب؛ الضغط على الزر يجعل المدخل مرتفعاً. هذه المفاتيح موصولة بأسلاك خضراء إلى بوابتي AND، وتعمل كمدخلي K و J.

إشارة الساعة تتغذى أيضاً على بوابات AND. تمر عبر دائرة RC، مكونة من مكثف سعة 0.0001 ميكروفاراد ومقاوم 1000 أوم. خرج دائرة RC هذا، المنقول بواسطة سلكين أبيضين، يذهب إلى مدخل آخر على كلا بوابتي AND. مخرجات بوابات AND هذه ممثلة بأسلاك زرقاء، والتي تتصل بمدخلين من مداخل بوابات NOR. المداخل الأخرى لبوابات NOR تستقبل التغذية الراجعة من مخرجاتها الخاصة عبر أسلاك صفراء. هذه الأسلاك الصفراء تعود أيضاً إلى بوابات AND. أخيراً، مخرجات بوابات NOR تشغل مصباحي LED: أحدهما لـ Q والآخر لمتمم Q.

عندما يتم جعل مدخل K مرتفعاً، يجب أن تعيد القفل الضبط، ويجب أن ينطفئ المخرج Q، وهو ما يحدث. وبالمثل، جعل مدخل J مرتفعاً يجب أن يضبط القفل، مشغلاً المخرج Q، وهو ما يحدث أيضاً. المهم أن تلاحظ أن التغيير ليس فورياً عند الضغط على الزر؛ بل يحدث مع إشارة الساعة التالية، حيث أن هذه العملية مقيدة بالحافة الصاعدة للساعة.

الآن، بما أن هذا flip-flop من نوع JK، إذا تم ضبط كلا مدخلي J و K على وضع مرتفع، نتوقع أن يتبادل المخرج مع كل نبضة ساعة. ومع ذلك، إنه لا يتبادل بشكل متسق. في بعض الأحيان يفعل ذلك، خاصة إذا قمت بتعديل الدائرة قليلاً، لكنه غير متسق جداً. للتأكد من أنني أضغط كلا الزرين، سأقوم بإدخال وصلات عابرة عليهما، مما يوفر بشكل فعال مدخلاً مرتفعاً مستمراً لكل من J و K. هذا *يجب* أن يجعله يتبادل مع كل حافة ساعة صاعدة. بينما يعمل بشكل أفضل الآن، إلا أنه لا يزال غير متسق.

هذا السلوك غير المتسق له تفسير واضح، وأفضل طريقة لفهمه هي باستخدام راسم الذبذبات لفحص الإشارات.

أولاً، دعنا ننظر إلى مدخل الساعة كمرجع. يظهر راسم الذبذبات إشارة الساعة تتبدل بين التشغيل والإيقاف، تقريباً مرتين في الثانية. كل قسم على الشاشة يمثل 100 مللي ثانية، لذا على مدى 10 أقسام، فإنه ينبض مرتين في الثانية.

بعد ذلك، أريد مراقبة المخرج، لأن هذا هو ما نتوقع أن يتبادل مع كل نبضة ساعة. الساعة تنبض بالفعل بحوالي نبضتين في الثانية. حالياً، المخرج لا يتبادل، ولكن مع بعض التعديل الطفيف، فإنه يتبادل، وإن كان بشكل غير متسق. عندما *يتبادل*، فإنه يفعل ذلك على الحواف الصاعدة للساعة، كما هو مطلوب.

الجزء المثير للاهتمام يظهر عندما نقوم بالتكبير على الحافة الصاعدة للساعة. نرى بعض النشاط هناك. بالتكبير أكثر، يصبح الأمر واضحاً تماماً: عندما تصبح الساعة مرتفعة، فإن المخرج *يتبادل* بالفعل، لكنه يتبادل ذهاباً وإياباً عدة مرات قبل أن يستقر أخيراً في حالة مستقرة. هذا هو بالضبط سبب عدم اتساق السلوك. يتبادل المخرج كما هو مطلوب على الحافة الصاعدة للساعة، ولكن بعد ذلك يتبادل بسرعة مرة أخرى بعد فترة وجيزة. فترة هذه التبادلات السريعة هي حوالي 82 نانو ثانية.

هذه الظاهرة، المعروفة باسم "السباق"، تكون منطقية عندما نعيد فحص مخطط الدائرة. نبضة الساعة، على الرغم من أننا ننوي استخدام حافتها الأمامية فقط، تبقى مرتفعة لمدة طويلة نسبياً (250 مللي ثانية في هذه الحالة). إذا تحول المخرج *قبل* أن تعود هذه النبضة إلى الصفر، فإن حلقة التغذية الراجعة تسبب له التحول مرة أخرى، ومرة أخرى، مما يؤدي إلى تبادلات متعددة. لذا، عندما تصبح نبضة الساعة مرتفعة، يتحول المخرج إلى التشغيل، ولكن بعد ذلك يتحول فوراً إلى الإيقاف والتشغيل بشكل متكرر. إنه محض صدفة أن يستقر في الحالة المطلوبة في بعض الأحيان.

السبب الجذري لحالة السباق هذه يكمن في دائرة RC المستخدمة للكشف عن الحافة الصاعدة. لقد ذكرت أن المكثف هو 0.0001 ميكروفاراد والمقاوم هو 1000 أوم. ضرب هذه القيم يعطي ثابت الزمن لدائرة RC، والذي يشير إلى عرض النبضة. ثابت الزمن هذا هو حوالي 100 نانو ثانية.

دعنا نقيس النبضة المدخلة للدائرة. في البداية، تبدو رائعة عند التصغير – نبضة سريعة على الحافة الصاعدة للساعة، كما هو مطلوب. المشكلة هي أن هذه النبضة ليست سريعة *بما فيه الكفاية*. إنها نبضة بمدة 1 ميكرو ثانية، وخلال تلك المدة 1 ميكرو ثانية، يتبادل المخرج تشغيلاً وإيقافاً بشكل متكرر قبل أن يستقر أخيراً عندما تهبط النبضة إلى منطق صفر.

ماذا يمكن أن نفعل حيال هذا؟ أحد الخيارات هو جعل النبضة أقصر. نظراً لأن فترة التبادل هي حوالي 80 نانو ثانية، نحتاج إلى نبضة أقصر بكثير من 1 ميكرو ثانية. يمكننا محاولة تغيير المقاوم 1000 أوم إلى مقاوم 100 أوم، مما يجب أن يقلل ثابت الزمن إلى 100 نانو ثانية.

بعد استبدال المقاوم، نلاحظ نبضة أصغر بكثير. ومع ذلك، لا تزال لا تعمل بشكل متسق. في هذه المرحلة، نواجه قيود لوحات التجارب. الإشارات عالية السرعة في نطاق عشرات النانو ثانية تمثل تحدياً على لوحات التجارب بسبب السعات الطفيلة، المحاثات، والتأثيرات الطفيلية الأخرى. هذا يفسر سبب أن مجرد تحريك يدي بالقرب من الدائرة يمكن أن يغير سلوكها، حيث أن يدي تغير السعة من خلال التصرف كجسم مؤرض.

يمكنك أن ترى أن المخرج يصبح الآن مرتفعاً، ثم منخفضاً، ويبقى منخفضاً. ولكن مرة أخرى، إذا قمت بتعديل وضع يدي، فقد يبدأ في التبادل. أنا لا أغير أي توصيلات، فقط أحرك يدي، مما يؤثر على السعة.

حتى الحافة الصاعدة لساعتنا ليست حادة تماماً على هذا المقياس الزمني، مرة أخرى بسبب قيود لوحة التجارب. النبضة التي نولدها ليست نظيفة كما كانت مع المقاوم الأكبر. في النهاية، كل هذا يشير إلى حقيقة أننا ندفع حدود ما هو ممكن على لوحة تجارب. هذه الطريقة الخاصة للكشف عن الحافة الصاعدة باستخدام دائرة RC هي إشكالية بطبيعتها في flip-flop من نوع JK بسبب حالة السباق. إذا لم تكن النبضة ضيقة بما فيه الكفاية (من الناحية المثالية بضع نانو ثوان فقط)، فإن المخرج سيتغذى راجعاً ويتبادل أكثر من مرة لكل حافة ساعة صاعدة.

إذن، ما هو الحل؟ في الفيديو التالي، سأعرض طريقة أفضل بكثير لبناء flip-flop من نوع JK تزيل مشكلة السباق هذه تماماً: flip-flop JK الرئيسي-التابع. إنه تصميم أكثر متانة بكثير ويجب أن يعمل دون أي مشاكل على لوحة التجارب.