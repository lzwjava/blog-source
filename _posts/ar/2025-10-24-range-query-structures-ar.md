---
audio: false
generated: true
image: false
lang: ar
layout: post
model: x-ai/grok-4-fast
title: هياكل البيانات الفعالة لاستعلامات النطاق
translated: true
type: note
---

### أشجار المقاطع وأشجار فينويك: نظرة عامة

أشجار المقاطع وأشجار فينويك (وتُسمى أيضًا أشجار الفهرس الثنائي) هي هياكل بيانات فعالة تُستخدم في البرمجة التنافسية والخوارزميات للتعامل مع الاستعلامات النطاقية والتحديثات على المصفوفات. فهي تتيح عمليات مثل استعلامات المجموع عبر نطاق أو تحديثات النقاط في وقت لوغاريتمي، وهو أسرع بكثير من الطرق الساذجة O(n) لمجموعات البيانات الكبيرة.

#### أشجار المقاطع
**شجرة المقطع** هي هيكل قائم على الشجرة الثنائية يمثل مصفوفة عن طريق تقسيمها إلى مقاطع (فترات). كل عقدة في الشجرة تتوافق مع نطاق من المصفوفة:
- العقد الورقية تمثل عناصر فردية.
- العقد الأصلية تمثل اتحاد نطاقات أطفالها (مثل المجموع، الحد الأدنى، الحد الأقصى للنطاقات الفرعية).
- يتم بناء الشجرة بشكل متكرر، عادةً بارتفاع O(log n) لمصفوفة بحجم n.

**العمليات الرئيسية:**
- **البناء:** وقت O(n) لبناء الشجرة.
- **التحديث:** تعديل عنصر واحد ونشر التغييرات لأعلى الشجرة في O(log n).
- **الاستعلام:** حساب التجميع (مثل المجموع) عبر نطاق عن طريق اجتياز العقد ذات الصلة في O(log n).

**حالات الاستخدام:** استعلامات نطاق المجموع/الحد الأدنى/الحد الأقصى، عد التكرارات، أو أي عملية ترابطية. إنها أكثر مرونة ولكنها تستخدم مساحة O(4n).

**مثال بسيط (نطاق المجموع):**
تخيل مصفوفة [1, 3, 5, 7]. قد تبدو شجرة المقطع كالتالي:
- الجذر: مجموع [1-7] = 16
- الطفل الأيسر: مجموع [1-3] = 4
- الطفل الأيمن: مجموع [5-7] = 12
- وهكذا، وصولاً إلى الأوراق.

#### أشجار فينويك
**شجرة فينويك** (قدمها بيتر فينويك في عام 1994) هي هيكل قائم على المصفوفة أكثر إحكاما لمجموع البادئات والعمليات المماثلة. تستخدم عمليات bitwise لفهرسة العناصر بكفاءة، وتتعقب المجاميع التراكمية بطريقة ذكية:
- يخزن كل فهرس مجموع نطاق ينتهي عند ذلك الفهرس.
- تستخدم التحديثات والاستعلامات معالجة low-bit (مثل `index & -index` للعثور على البت الأقل أهمية).

**العمليات الرئيسية:**
- **البناء:** O(n log n) أو محسن إلى O(n).
- **التحديث:** إضافة/طرح قيمة عند فهرس في O(log n).
- **الاستعلام:** الحصول على مجموع البادئة حتى فهرس في O(log n)؛ مجموع النطاق عبر فروق البادئة.

**حالات الاستخدام:** مشابهة لأشجار المقاطع ولكنها مُحسنة لمجموع البادئات أحادية البعد، إحصائيات الترتيب، أو عد الانعكاسات. تستخدم مساحة O(n)، مما يجعلها أخف.

**مثال بسيط (نطاق المجموع):**
للمصفوفة [1, 3, 5, 7]، قد تكون مصفوفة فينويك [1, 4, 5, 16] (تعديلات تراكمية). لاستعلام مجموع [1-3]: البادئة(3) - البادئة(0) = 9.

#### المقارنة

| الجانب          | شجرة المقطع                  | شجرة فينويك                   |
|-----------------|-------------------------------|-------------------------------|
| **المساحة**     | O(4n)                         | O(n)                          |
| **وقت البناء**  | O(n)                          | O(n log n)                    |
| **المرونة**     | تدعم أي تجميع نطاقي           | الأفضل لمجموع/تحديث البادئات  |
| **التعقيد**     | كود أكثر تعقيدًا قليلاً       | تنفيذ أبسط                    |

كلاهما ركيزتان أساسيتان في الخوارزميات (مثلًا على LeetCode أو Codeforces). إذا كنت تنفذها، ابدأ بشجرة فينويك من أجل البساطة!

للتعمق أكثر:  
[Segment Tree Tutorial - GeeksforGeeks](https://www.geeksforgeeks.org/segment-tree-data-structure/)  
[Fenwick Tree Explained - CP-Algorithms](https://cp-algorithms.com/data_structures/fenwick.html)