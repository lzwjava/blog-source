---
audio: false
generated: true
lang: ar
layout: post
title: النظام النوعي لجافا
translated: true
type: note
---

حسنًا، دعنا نتعمق في نظام الأنواع في جافا! هذا البرنامج التعليمي سوف يغطي المفاهيم الأساسية لتبدأ.

**ما هو نظام الأنواع؟**

في البرمجة، يُعرِّف نظام الأنواع أنواع القيم التي يمكن استخدامها وكيفية معالجتها. فهو يساعد على ضمان أن البرامج آمنة من حيث النوع، مما يعني إجراء العمليات على أنواع البيانات الصحيحة، مما يمنع الأخطاء غير المتوقعة ويحسن موثوقية الكود.

تمتلك جافا **نظام أنواع قوي وثابت**.

* **الكتابة القوية:** جافا ذات كتابة قوية، مما يعني أن نوع المتغير يتم فرضه بدقة في وقت الترجمة وفي وقت التشغيل. لا يمكنك عمومًا تنفيذ عمليات على أنواع غير متوافقة دون تحويل صريح (التحويل). هذا يساعد في اكتشاف الأخطاء مبكرًا في عملية التطوير.
* **الكتابة الثابتة:** جافا ذات كتابة ثابتة، مما يعني أن أنواع المتغيرات يتم التصريح عنها (أو استنتاجها في بعض الحالات باستخدام `var`) قبل تشغيل البرنامج. يقوم المترجم بفحص هذه الأنواع للتأكد من توافقها قبل التنفيذ.

**المكونات الرئيسية لنظام أنواع جافا:**

ينقسم نظام أنواع جافا على نطاق واسع إلى فئتين رئيسيتين:

1.  **الأنواع البدائية:** هذه هي أنواع البيانات الأساسية الأكثر في جافا. إنها تمثل قيمًا فردية مباشرة في الذاكرة.
2.  **أنواع المرجع:** تمثل هذه الأنواع الكائنات، وهي نماذج من الفئات أو الواجهات. تخزن متغيرات المرجع عنوان الذاكرة (المرجع) للكائن.

دعنا نستكشف كلًا من هذه بالتفصيل.

**1. الأنواع البدائية:**

تمتلك جافا ثمانية أنواع بيانات بدائية:

| النوع    | الحجم (بت) | الوصف                                      | المدى                                                                 | مثال         |
| ------- | ----------- | ------------------------------------------------ | --------------------------------------------------------------------- | --------------- |
| `byte`  | 8           | عدد صحيح موقَّع                                   | -128 إلى 127                                                           | `byte age = 30;` |
| `short` | 16          | عدد صحيح موقَّع                                   | -32,768 إلى 32,767                                                     | `short count = 1000;` |
| `int`   | 32          | عدد صحيح موقَّع                                   | -2,147,483,648 إلى 2,147,483,647                                     | `int score = 95;` |
| `long`  | 64          | عدد صحيح موقَّع                                   | -9,223,372,036,854,775,808 إلى 9,223,372,036,854,775,807             | `long population = 1000000000L;` (لاحظ اللاحقة 'L') |
| `float` | 32          | رقم فاصلة عائمة بدقة فردية (IEEE 754) | تقريبًا ±3.40282347E+38F                                        | `float price = 19.99F;` (لاحظ اللاحقة 'F') |
| `double`| 64          | رقم فاصلة عائمة بدقة مزدوجة (IEEE 754) | تقريبًا ±1.79769313486231570E+308                               | `double pi = 3.14159;` |
| `char`  | 16          | حرف Unicode مفرد                         | '\u0000' (0) إلى '\uffff' (65,535)                                   | `char initial = 'J';` |
| `boolean`| يختلف      | يمثل قيمة منطقية                       | `true` أو `false`                                                     | `boolean isVisible = true;` |

**نقاط رئيسية حول الأنواع البدائية:**

* يتم تخزينها مباشرة في الذاكرة.
* لديها أحجام ونطاقات محددة مسبقًا.
* ليست كائنات وليس لديها طرق مرتبطة بها (على الرغم من أن فئات الغلاف مثل `Integer`، `Double`، إلخ، توفر تمثيلات كائن).
* يتم تعيين قيم افتراضية لحقول الأنواع البدائية إذا لم تتم تهيئتها صراحةً (على سبيل المثال، `int` defaults إلى 0، `boolean` defaults إلى `false`).

**2. أنواع المرجع:**

تمثل أنواع المرجع الكائنات، وهي نماذج من الفئات أو الواجهات. تحتفظ متغيرات أنواع المرجع بعنوان الذاكرة (المرجع) للكائن في الكومة.

**أنواع المرجع الشائعة:**

* **الفئات:** الفئات هي مخططات لإنشاء كائنات. تُعرِّف البيانات (الحقول/السمات) والسلوك (الطرق) للكائنات من ذلك النوع.
    ```java
    class Dog {
        String name;
        int age;

        public void bark() {
            System.out.println("Woof!");
        }
    }

    public class Main {
        public static void main(String[] args) {
            Dog myDog = new Dog(); // 'Dog' هو نوع المرجع
            myDog.name = "Buddy";
            myDog.age = 3;
            myDog.bark();
        }
    }
    ```
* **الواجهات:** تُعرِّف الواجهات عقدًا من الطرق التي يمكن للفئة تنفيذها. إنها تمثل مجموعة من السلوكيات.
    ```java
    interface Animal {
        void makeSound();
    }

    class Cat implements Animal {
        public void makeSound() {
            System.out.println("Meow!");
        }
    }

    public class Main {
        public static void main(String[] args) {
            Animal myCat = new Cat(); // 'Animal' هو نوع المرجع
            myCat.makeSound();
        }
    }
    ```
* **المصفوفات:** المصفوفات هي مجموعات من العناصر من نفس النوع. يتم تحديد نوع المصفوفة بناءً على نوع عناصرها.
    ```java
    int[] numbers = new int[5]; // 'int[]' هو نوع المرجع
    numbers[0] = 10;

    String[] names = {"Alice", "Bob", "Charlie"}; // 'String[]' هو نوع المرجع
    ```
* **التعدادات:** تمثل التعدادات مجموعة ثابتة من الثوابت المسماة.
    ```java
    enum Day {
        MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY, SATURDAY, SUNDAY
    }

    public class Main {
        public static void main(String[] args) {
            Day today = Day.MONDAY; // 'Day' هو نوع المرجع
            System.out.println("Today is " + today);
        }
    }
    ```
* **فئات الغلاف:** لكل نوع بدائي، توفر جافا فئة غلاف مقابلة (على سبيل المثال، `Integer` لـ `int`، `Double` لـ `double`). تتيح لك هذه التعامل مع القيم البدائية ككائنات.
    ```java
    Integer num = 10; // 'Integer' هو نوع المرجع
    Double piValue = 3.14; // 'Double' هو نوع المرجع
    ```

**نقاط رئيسية حول أنواع المرجع:**

* تخزن مراجع (عناوين الذاكرة) للكائنات في الكومة.
* يمكن أن تكون `null`، مما يعني أن المرجع لا يشير إلى أي كائن.
* لديها طرق وحقول مرتبطة بها (يتم تعريفها بواسطة فئتها أو واجهتها).
* القيمة الافتراضية لحقول أنواع المرجع غير المهيأة هي `null`.

**3. استنتاج النوع باستخدام `var` (جافا 10 والإصدارات الأحدث):**

أدخلت جافا 10 الكلمة المفتاحية `var`، التي تسمح باستنتاج نوع المتغير المحلي. بدلاً من التصريح عن النوع صراحةً، يمكن للمترجم استنتاج النوع بناءً على تعبير المُهيئ.

```java
var message = "Hello"; // يستنتج المترجم أن 'message' من النوع String
var count = 100;      // يستنتج المترجم أن 'count' من النوع int
var prices = new double[]{10.5, 20.3}; // يستنتج المترجم أن 'prices' من النوع double[]
```

**ملاحظات مهمة حول `var`:**

* يمكن استخدام `var` فقط للمتغيرات المحلية داخل الطرق أو المنشئات أو المهيئات.
* يجب توفير مُهيئ عند استخدام `var` لأن المترجم يحتاجه لاستنتاج النوع.
* `var` لا يغير الكتابة الثابتة لجافا. لا يزال النوع يُحدد في وقت الترجمة.

**4. الأنواع العامة (Generics):**

تسمح لك الأنواع العامة بتحديد أنواع المعاملات. هذا يعني أنه يمكنك تعريف الفئات والواجهات والطرق التي يمكنها العمل مع أنواع مختلفة مع توفير أمان النوع في وقت الترجمة.

```java
import java.util.ArrayList;
import java.util.List;

public class Main {
    public static void main(String[] args) {
        List<String> names = new ArrayList<>(); // قائمة من Strings
        names.add("Alice");
        names.add("Bob");

        // names.add(123); // هذا سيسبب خطأ في وقت الترجمة

        List<Integer> numbers = new ArrayList<>(); // قائمة من Integers
        numbers.add(10);
        numbers.add(20);
    }
}
```

هنا، `<String>` و `<Integer>` هما معامِلا النوع. تساعد الأنواع العامة في منع `ClassCastException` في وقت التشغيل من خلال فرض قيود النوع في وقت الترجمة.

**5. فحص النوع:**

تقوم جافا بإجراء فحص النوع في مرحلتين رئيسيتين:

* **فحص النوع في وقت الترجمة:** يتحقق مترجم جافا من الكود بحثًا عن أخطاء النوع قبل تنفيذه. إذا كانت هناك أي عدم تطابق في النوع (على سبيل المثال، محاولة تعيين `String` إلى متغير `int` دون تحويل صريح)، سيقوم المترجم بالإبلاغ عن خطأ ويمنع تجميع البرنامج.
* **فحص النوع في وقت التشغيل:** يتم إجراء بعض فحوصات النوع أثناء تنفيذ البرنامج. على سبيل المثال، عندما تقوم بتحويل نوع مرجع إلى نوع آخر، تتحقق JVM مما إذا كان الكائن هو بالفعل نموذج من النوع المستهدف. إذا لم يكن كذلك، يتم طرح `ClassCastException`.

**6. تحويل النوع (التحويل):**

في بعض الأحيان تحتاج إلى تحويل قيمة من نوع إلى آخر. تدعم جافا نوعين من التحويل:

* **التحويل الضمني (تحويل التوسيع):** يحدث هذا تلقائيًا عندما تعين قيمة من نوع بدائي أصغر إلى متغير من نوع بدائي أكبر. لا يحدث فقدان للبيانات.
    ```java
    int myInt = 10;
    long myLong = myInt; // تحويل ضمني من int إلى long
    double myDouble = myLong; // تحويل ضمني من long إلى double
    ```
* **التحويل الصريح (تحويل التضييق):** يجب القيام بهذا يدويًا باستخدام عامل التحويل `(targetType)` عندما تعين قيمة من نوع بدائي أكبر إلى متغير من نوع بدائي أصغر. قد يحدث فقدان للبيانات.
    ```java
    double myDouble = 10.99;
    int myInt = (int) myDouble; // تحويل صريح من double إلى int (سيصبح myInt 10)
    ```
* **تحويل نوع المرجع:** يمكنك أيضًا التحويل بين أنواع المرجع، لكنه أكثر تعقيدًا ويتضمن الوراثة والواجهات.
    * **التحويل للأعلى:** تحويل كائن من فئة فرعية إلى نوع فئته الأصلية. هذا مسموح دائمًا ضمنيًا.
    * **التحويل للأسفل:** تحويل كائن من نوع فئة أصلية إلى نوع فئته الفرعية. هذا يتطلب تحويلًا صريحًا ويمكن أن يؤدي إلى `ClassCastException` في وقت التشغيل إذا لم يكن الكائن بالفعل نموذجًا من الفئة الفرعية.

**مثال على تحويل نوع المرجع:**

```java
class Animal {}
class Dog extends Animal {
    public void bark() {
        System.out.println("Woof!");
    }
}

public class Main {
    public static void main(String[] args) {
        Animal myAnimal = new Dog(); // تحويل للأعلى (ضمني)

        // Dog myDog = myAnimal; // خطأ في وقت الترجمة: لا يمكن التحويل ضمنيًا من Animal إلى Dog
        Dog myDog = (Dog) myAnimal; // تحويل للأسفل (صريح)
        myDog.bark(); // هذا سيعمل

        Animal anotherAnimal = new Animal();
        // Dog anotherDog = (Dog) anotherAnimal; // هذا سيطرد ClassCastException في وقت التشغيل
    }
}
```

**الخلاصة:**

إن فهم نظام أنواع جافا أمر بالغ الأهمية لكتابة كود صحيح وقوي. من خلال معرفة الفرق بين الأنواع البدائية وأنواع المرجع، وكيف تعمل الأنواع العامة، وقواعد فحص النوع والتحويل، يمكنك تجنب أخطاء البرمجة الشائعة وبناء تطبيقات أكثر موثوقية.

يوفر هذا البرنامج التعليمي فهمًا أساسيًا. بينما تواصل تعلم جافا، ستواجه مفاهيم أكثر تقدمًا تتعلق بالأنواع، مثل الوراثة، وتعدد الأشكال، وسيناريوهات الأنواع العامة الأكثر تعقيدًا. استمر في الممارسة والتجربة مع أنواع مختلفة لترسيخ فهمك!