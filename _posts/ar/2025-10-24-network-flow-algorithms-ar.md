---
audio: false
generated: true
image: false
lang: ar
layout: post
model: x-ai/grok-4-fast
title: خوارزميات تدفق الشبكة موضحة
translated: true
type: note
---

### فهم خوارزميات تدفق الشبكة

خوارزميات تدفق الشبكة هي موضوع أساسي في نظرية المخططات وعلوم الكمبيوتر، تُستخدم لنمذجة وحل المشكلات التي تتضمن تدفق الموارد عبر شبكة (مثل الأنابيب، الطرق، أو تدفقات البيانات). إنها ضرورية لمهام التحسين مثل التدفق الأقصى (مثال: كم يمكن أن يتدفق الماء عبر نظام من الأنابيب)، القطع الأدنى (مثال: إيجاد الاختناقات)، والتطبيقات في النقل، الجدولة، والمطابقة.

سأقوم بشرح هذا خطوة بخطوة: المفاهيم الأساسية، مثال بسيط، الخوارزميات الرئيسية، ونصائح للتعلم المتعمق. سنركز على مشكلة التدفق الأقصى، لأنها الأساس.

#### ١. المفاهيم الأساسية
- **تمثيل المخطط**: الشبكة هي مخطط موجه \\( G = (V, E) \\) مع رؤوس \\( V \\) (عُقَد) وحواف \\( E \\) (اتصالات). كل حافة لها **سعة** \\( c(u, v) \\)، وهي أقصى تدفق يمكن أن تحمله من العقدة \\( u \\) إلى \\( v \\).
- **المصدر والمصب**: عقدة واحدة هي **المصدر** \\( s \\) (حيث يبدأ التدفق) وعقدة واحدة هي **المصب** \\( t \\) (حيث ينتهي).
- **التدفق**: دالة \\( f(u, v) \\) تُحدد مقدار التدفق الذي يمر عبر كل حافة، مستوفيةً:
  - **قيود السعة**: \\( 0 \leq f(u, v) \leq c(u, v) \\).
  - **الحفظ**: لأي عقدة ليست \\( s \\) أو \\( t \\)، التدفق الداخل = التدفق الخارج (لا تراكم).
- **التدفق الصافي**: التدفق غير متماثل: \\( f(u, v) = -f(v, u) \\).
- **الرسم البياني المتبقي**: يتتبع السعة المتبقية بعد إرسال التدفق. إذا أرسلت \\( f \\) على حافة ذات سعة \\( c \\)، فإن السعة المتبقية للأمام هي \\( c - f \\)، وللخلف هي \\( f \\) (لـ"تراجع" التدفق).
- **الأهداف**:
  - **التدفق الأقصى**: تعظيم إجمالي التدفق من \\( s \\) إلى \\( t \\).
  - **القطع الأدنى**: تقسيم العُقَد إلى \\( S \\) (تحتوي على \\( s \\)) و \\( T \\) (تحتوي على \\( t \\)); تصغير مجموع السعات من \\( S \\) إلى \\( T \\). وفقًا لنظرية التدفق الأقصى-القطع الأدنى، التدفق الأقصى = سعة القطع الأدنى.

#### ٢. مثال بسيط
تخيل شبكة صغيرة لشحن البضائع:

- العُقَد: \\( s \\) (المصدر)، A، B، \\( t \\) (المصب).
- الحواف:
  - \\( s \to A \\): سعة ١٠
  - \\( s \to B \\): سعة ١٠
  - \\( A \to B \\): سعة ٢
  - \\( A \to t \\): سعة ٨
  - \\( B \to t \\): سعة ٩

تصوير نصي:
```
  s
 / \
10  10
A   B
| \ / |
8  2  9
 \ /  
  t
```

ما هو أقصى تدفق؟ بشكل بديهي، أرسل ١٠ إلى A و ١٠ إلى B، لكن A يمكنها دفع ٨ فقط إلى t (٢ تذهب إلى B، مما يساعد B على دفع ١١ = ٩ + ٢، لكن حد B هو ٩؟ انتظر، دعنا نحسب بشكل صحيح.

باستخدام خوارزمية (أدناه)، أقصى تدفق هو ١٧:
- المسار ١: s→A→t (تدفق ٨)، تحديثات السعة المتبقية.
- المسار ٢: s→B→t (تدفق ٩)، تحديثات السعة المتبقية.
- المسار ٣: s→A→B→t (تدفق ٠؟ انتظر، بعد الأول، تبقى لـ A ٢ إلى B، لكن B إلى t لم يتبق لها شيء — في الواقع، اضبط.

الأفضل: الإجمالي من s هو ٢٠، لكن الاختناقات تحدّه إلى ١٧ (٨ مباشرة من A + ٩ من B، مع إعادة توجيه ٢؟ لا — شغّل الخوارزمية للحصول على الدقة.

#### ٣. الخوارزميات الرئيسية
ابدأ بالأساسيات؛ تدرج إلى الخوارزميات الفعالة. جميعها تزيد التدفق على طول المسارات في الرسم البياني المتبقي حتى لا يتبقى المزيد من المسارات المعززة.

- **طريقة فورد-فولكرسون** (١٩٥٦، أساسية):
  - ابحث بشكل متكرر عن أي مسار من s إلى t في الرسم البياني المتبقي (مثلاً، عبر DFS/BFS).
  - زِد التدفق بأقل سعة متبقية على ذلك المسار.
  - كرر حتى لا يوجد مسار.
  - **الوقت**: يعتمد على التنفيذ؛ يمكن أن يكون بطيئًا إذا كانت السعات غير نسبية (لكن للأعداد الصحيحة: O(|E| * max_flow)).
  - **الإيجابيات**: بسيطة. **السلبيات**: غير فعالة للمخططات الكبيرة.
  - شبه الكود:
    ```
    بينما يوجد مسار P من s إلى t في الرسم البياني المتبقي:
        bottleneck = أقل سعة متبقية على P
        زِد التدفق على طول P بمقدار bottleneck
        حدّث السعات المتبقية
    أرجع إجمالي التدفق
    ```

- **إدموندز-كارب** (١٩٧٢، متغير BFS لـ فورد-فولكرسون):
  - استخدم BFS للعثور على أقصر مسار معزز (يتجنب المسارات الطويلة).
  - **الوقت**: O(|V| * |E|^2) — متعدد الحدود، عملي للمخططات الصغيرة.
  - رائع للتعلم؛ يمكن تنفيذه في حوالي ٥٠ سطرًا من الكود.

- **خوارزمية دينيك** (١٩٧٠، أسرع):
  - تبني **رسم بياني مستوي** عبر BFS (طبقات حسب المسافة من s).
  - تستخدم DFS للعثور على تدفقات عازلة (مسارات متعددة لكل مستوى).
  - **الوقت**: O(|V|^2 * |E|) أسوأ حالة، لكن O(|V| * |E|) للسعات الواحدة؛ سريع جدًا في الممارسة العملية.
  - **متى تستخدم**: المخططات متوسطة-كبيرة الحجم.

- **دفع-إعادة التسمية (أو دفع-ما قبل التدفق)** (ثمانينيات القرن العشرين، غولدبيرغ-تارجان):
  - "يدفع" التدفق الفائض من العُقَد نحو المصدر باستخدام إرشادات.
  - **الوقت**: O(|V|^3) أو أفضل باستخدام إرشادات FIFO/الفجوة.
  - **الإيجابيات**: يتعامل مع المخططات الضخمة (مثال: توجيه الإنترنت).

للقطع الأدنى: بعد إيجاد التدفق الأقصى، القطع هو العُقَد التي يمكن الوصول إليها من s في الرسم البياني المتبقي النهائي مقابل الأخرى.

#### ٤. نصائح للتنفيذ
- استخدم قوائم المجاورة للمخططات.
- في الكود (مشابه لـ Python): مثّل السعات المتبقية كقاموس من القواميس.
- المكتبات: NetworkX (بايثون) بها دوال مدمجة مثل `maximum_flow`.
- اختبر على أمثلة صغيرة؛ صوّر باستخدام أدوات مثل Graphviz.

#### ٥. الأخطاء الشائعة والامتدادات
- **الحلقات**: السعات المتبقية تتعامل مع "التدفق العكسي" للتعديل.
- **مصادر/مصبات متعددة**: أضف مصدر-فائق/مصب-فائق.
- **التكاليف**: لتدفق الحد الأدنى للتكلفة، أضف تكاليف الحواف واستخدم مسارات أقصر متتالية.
- **التطبيقات**: جدولة شركات الطيران، تجزئة الصور (الرؤية الحاسوبية)، المطابقة الثنائية (اضبط التدفق=١).

#### مسار التعلم
- اقرأ CLRS (كورمن وآخرون) الفصل ٢٦.
- تدرب على LeetCode/HackerRank (مثال: "Minimum Cost to Make at Least One Valid Path").
- صوّر: ارسم السعات المتبقية بعد كل زيادة.

[مقدمة إلى تدفقات الشبكة](https://www.geeksforgeeks.org/maximum-bipartite-matching/)  
[نظرية التدفق الأقصى-القطع الأدنى](https://en.wikipedia.org/wiki/Max-flow_min-cut_theorem)  
[برنامج تعليمي لـ NetworkX](https://networkx.org/documentation/stable/tutorial.html)