---
audio: false
generated: true
lang: ar
layout: post
title: دليل ويب جي إل
translated: true
type: note
---

دعنا نتعمق في دليل شامل حول WebGL (مكتبة رسومات الويب). سيغطي هذا ما هو، وكيف يعمل، ولماذا هو مفيد، وكيف تبدأ باستخدامه، وسياقه الأوسع—مثالي لفهم دوره في أدوات مثل Figma أو ما بعدها. استعد!

---

### **1. ما هو WebGL؟**
WebGL هو واجهة برمجة تطبيقات (API) بلغة JavaScript تجلب الرسومات ثنائية وثلاثية الأبعاد المعجلة بالأجهزة إلى الويب. وهو مبني على OpenGL ES (الأنظمة المدمجة)، وهو مجموعة فرعية من معيار OpenGL المستخدم في التطبيقات الأصلية، والمكيف للمتصفحات. باستخدام WebGL، يمكنك تقديم الرسومات مباشرة إلى عنصر `<canvas>` باستخدام وحدة معالجة الرسومات (GPU)، متجاوزًا التقديم الأبطأ المعتمد على وحدة المعالجة المركزية (CPU) في HTML/CSS التقليدية.

- **الميزات الرئيسية:**
  - **التسريع بالأجهزة:** يستفيد من وحدة معالجة الرسومات (GPU) لتقديم سريع.
  - **عبر المنصات:** يعمل في جميع المتصفحات الرئيسية (Chrome, Firefox, Safari, Edge).
  - **قابل للبرمجة:** يستخدم الظلال (Shaders) (برامج صغيرة) لتحديد كيفية ظهور الأشياء وحركتها.
  - **لا يلزم إضافات:** أصلي في المتصفح، على عكس Flash أو التقنيات القديمة.

- **التاريخ:**
  - أُدخل في عام 2011 من قبل مجموعة Khronos (المسؤولة عن OpenGL).
  - WebGL 1.0 مبني على OpenGL ES 2.0؛ WebGL 2.0 (2017) مبني على OpenGL ES 3.0.

- **حالات الاستخدام:**
  - الألعاب (مثل ألعاب 3D القائمة على المتصفح).
  - تصور البيانات (مثل المخططات التفاعلية أو الخرائط).
  - الأدوات الإبداعية (مثل تقديم المتجهات في Figma).
  - المحاكاة (مثل محركات الفيزياء أو النمذجة ثلاثية الأبعاد).

---

### **2. كيف يعمل WebGL؟**
يعمل WebGL من خلال منحك وصولاً منخفض المستوى إلى وحدة معالجة الرسومات (GPU) عبر واجهة برمجة تطبيقات JavaScript. وهو مبني حول **خط أنابيب التقديم (rendering pipeline)**—سلسلة من الخطوات تحول الكود إلى بكسلات على الشاشة.

1. **الإعداد:**
   - تقوم بإنشاء عنصر `<canvas>` في HTML.
   - تحصل على سياق WebGL: `canvas.getContext('webgl')` (أو `'webgl2'` للإصدار 2.0).

2. **الظلال (Shaders):**
   - **ظل الرأس (Vertex Shader):** يحدد موضع النقاط (الرؤوس) في الفضاء ثلاثي الأبعاد.
   - **ظل القطعة (Fragment Shader):** يلون كل بكسل بين الرؤوس.
   - يُكتب بلغة GLSL، ويُترجم في وقت التشغيل.

3. **المخازن المؤقتة (Buffers):**
   - يتم تخزين البيانات (مثل مواقع الرؤوس، الألوان) في ذاكرة وحدة معالجة الرسومات عبر مخازن مؤقتة.
   - مثال: يتم إرسال زوايا المثلث الثلاث كمصفوفة من الإحداثيات.

4. **التقديم (Rendering):**
   - تقوم بربط المخازن المؤقتة، وإعداد الظلال، وإصدار أمر رسم (مثل `gl.drawArrays()`).
   - تقوم وحدة معالجة الرسومات بمعالجة هذا بالتوازي، وتخرج النتيجة إلى عنصر canvas.

- **نظام الإحداثيات:** يستخدم WebGL فضاءً طبيعيًا ثلاثي الأبعاد (من -1 إلى 1 على المحاور س، ص، ع)، والذي تقوم بتحويله باستخدام المصفوفات (مثل المنظور أو الدوران).

- **آلة الحالة (State Machine):** WebGL عديم الحالة—تقوم بتعيين المعاملات (مثل القوام، المزج) قبل كل أمر رسم.

---

### **3. لماذا تستخدم WebGL؟**
- **الأداء:** التسريع بوحدة معالجة الرسومات يتفوق على التقديم بوحدة المعالجة المركزية للرسومات المعقدة.
- **المرونة:** تتيح لك الظلال تخصيص المرئيات وصولاً إلى مستوى البكسل.
- **التكامل مع الويب:** يعمل بسلاسة مع JavaScript، وأحداث DOM، وواجهات برمجة التطبيقات الأخرى.
- **لا يلزم تثبيت:** يعمل في أي مكان يعمل فيه المتصفح.

**المفاضلات:**
- منحنى تعلم حاد—منخفض المستوى مقارنة بـ HTML5 Canvas 2D.
- تصحيح الأخطاء صعب (أخطاء GLSL غامضة).
- قد تختلف توافقية المتصفح (خاصة WebGL 2.0).

---

### **4. البدء مع WebGL**
لنرسم مثلثًا ملونًا بسيطًا لرؤية WebGL في العمل.

#### **الخطوة 1: إعداد HTML**
```html
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
</head>
<body>
    <canvas id="glCanvas" width="400" height="400"></canvas>
    <script>
        // JavaScript goes here
    </script>
</body>
</html>
```

#### **الخطوة 2: أساسيات JavaScript**
أضف هذا داخل وسم `<script>`:
```javascript
// Get canvas and context
const canvas = document.getElementById('glCanvas');
const gl = canvas.getContext('webgl');
if (!gl) {
    alert('WebGL not supported!');
}

// Vertex shader source (GLSL)
const vsSource = `
    attribute vec2 a_position;
    void main() {
        gl_Position = vec4(a_position, 0.0, 1.0);
    }
`;

// Fragment shader source (GLSL)
const fsSource = `
    void main() {
        gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0); // Red
    }
`;

// Compile shaders
function createShader(gl, type, source) {
    const shader = gl.createShader(type);
    gl.shaderSource(shader, source);
    gl.compileShader(shader);
    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
        console.error(gl.getShaderInfoLog(shader));
        gl.deleteShader(shader);
        return null;
    }
    return shader;
}

const vertexShader = createShader(gl, gl.VERTEX_SHADER, vsSource);
const fragmentShader = createShader(gl, gl.FRAGMENT_SHADER, fsSource);

// Link into a program
const program = gl.createProgram();
gl.attachShader(program, vertexShader);
gl.attachShader(program, fragmentShader);
gl.linkProgram(program);
if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {
    console.error(gl.getProgramInfoLog(program));
}

// Vertex data (a triangle)
const positions = new Float32Array([
    0.0,  0.5,  // Top
   -0.5, -0.5,  // Bottom-left
    0.5, -0.5   // Bottom-right
]);

// Buffer setup
const positionBuffer = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);
gl.bufferData(gl.ARRAY_BUFFER, positions, gl.STATIC_DRAW);

// Tell WebGL how to read the buffer
const positionLocation = gl.getAttribLocation(program, 'a_position');
gl.enableVertexAttribArray(positionLocation);
gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, 0, 0);

// Clear and draw
gl.clearColor(0.0, 0.0, 0.0, 1.0); // Black background
gl.clear(gl.COLOR_BUFFER_BIT);
gl.useProgram(program);
gl.drawArrays(gl.TRIANGLES, 0, 3); // Draw 3 vertices
```

#### **الخطوة 3: اختبره**
- احفظ الملف كـ `index.html`، وقم بتشغيل خادم محلي (مثل `python -m http.server 8080`)، وافتحه في متصفح.
- سترى مثلثًا أحمر على خلفية سوداء.

---

### **5. المفاهيم الأساسية**
- **الظلال (Shaders):** تقوم ظلال الرأس بتحديد موقع الهندسة؛ تقوم ظلال القطعة بتلوينها. لغة GLSL تشبه لغة C ولكنها مخصصة لوحدة معالجة الرسومات.
- **المخازن المؤقتة (Buffers):** تخزن بيانات الرؤوس (المواقع، المتجهات العمودية، الألوان) في ذاكرة وحدة معالجة الرسومات.
- **القوام (Textures):** صور ثنائية الأبعاد تُطبق على الكائنات ثلاثية الأبعاد (مثل `gl.texImage2D()`).
- **المصفوفات (Matrices):** تُستخدم للتحويلات (النقل، الدوران، التحجيم) عبر مكتبات مثل `glMatrix`.
- **أوامر الرسم (Draw Calls):** `gl.drawArrays()` للأشكال البسيطة؛ `gl.drawElements()` للهندسة المفهرسة.

**إضافات WebGL 2.0:**
- قوام أفضل (مثل القوام ثلاثي الأبعاد).
- أهداف تقديم متعددة.
- ميزات محسنة للظلال (مثل كائنات المخزن المؤقت المنتظم).

---

### **6. النظام البيئي والأدوات**
- **المكتبات:**
  - **Three.js:** إطار عمل عالي المستوى للرسومات ثلاثية الأبعاد (يخفي تعقيد WebGL الخام).
  - **Babylon.js:** محرك رسومات ثلاثية الأبعاد مركز على الألعاب.
  - **PixiJS:** تقديم ثنائي الأبعاد مع استرجاع WebGL.
  - **glMatrix:** أدوات رياضية للتحويلات.

- **دعم المتصفح:**
  - WebGL 1.0: شبه عالمي.
  - WebGL 2.0: معظم المتصفحات الحديثة (تحقق من caniuse.com).

- **تصحيح الأخطاء:**
  - أدوات المطور في المتصفح (مثل WebGL Inspector في Chrome).
  - إضافات مثل Spector.js.

---

### **7. WebGL في الاستخدام الفعلي**
- **Figma:** يستخدم WebGL لتقديم الرسومات المتجهة، مقترنًا بـ WebAssembly للحساب.
- **الألعاب:** يمكن لـ Unity و Unreal Engine التصدير إلى WebGL للعب في المتصفح.
- **الخرائط:** تستخدمه Google Maps و Mapbox للتكبير/التصغير السلس والتضاريس ثلاثية الأبعاد.

---

### **8. المستقبل**
- **WebGPU:** واجهة برمجة التطبيقات من الجيل التالي (المبنية على Vulkan/Metal) آخذة في الظهور، وتعد بأداء أفضل وميزات حديثة. إنها ليست بديلاً بعد ولكنها مكمل.
- **اعتماد أوسع:** يبقى WebGL مهيمنًا حاليًا، خاصة مع ترقيات WebGL 2.0.

---

### **9. الموارد**
- **الرسمي:** [webglfundamentals.org](https://webglfundamentals.org/)—دروس ممتازة للمبتدئين.
- **MDN:** [WebGL Docs](https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API).
- **الكتب:** “WebGL Programming Guide” by Kouichi Matsuda.
- **منشورات X:** ابحث عن #WebGL للحصول على أمثلة ونصائح من المجتمع.

---

### **ملخص**
WebGL هو بوابتك إلى الرسومات المدعومة بوحدة معالجة الرسومات في المتصفح. إنه منخفض المستوى، قوي، ومخيف بعض الشيء—ولكن مع الممارسة (والمكتبات)، يمكنك بناء أي شيء من الرسوم المتحركة البسيطة إلى العوالم ثلاثية الأبعاد الكاملة. هل تريد تجربة مشروع محدد أو التعمق في الظلال؟ دعني أعرف!