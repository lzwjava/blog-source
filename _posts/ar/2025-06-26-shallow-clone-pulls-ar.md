---
audio: false
generated: true
lang: ar
layout: post
title: استخدام أمرَي Git Pull وPush مع النسخ الضحلة
translated: true
type: note
---

نعم، يمكنك استخدام `git pull` أو `git push` بعد استنساخ مستودع بتاريخ محدود باستخدام `--depth=20`. ومع ذلك، هناك بعض الاعتبارات المهمة التي يجب وضعها في الاعتبار:

### 1. **ما يفعله `--depth=20`**
   - يقوم خيار `--depth=20` بإنشاء *استنساخ سطحي*، حيث يجلب فقط آخر 20 commit (أو العدد المحدد) من الفرع الافتراضي (أو الفرع المحدد إذا استخدمت `--branch`).
   - يقلل هذا من كمية التاريخ التي يتم تنزيلها، مما يجعل عملية الاستنساخ أسرع وأصغر حجمًا، لكن المستودع لن يحتوي على تاريخ الـ commits الكامل.

### 2. **استخدام `git pull` مع استنساخ سطحي**
   - **نعم، يمكنك استخدام `git pull`** في استنساخ سطحي لجلب ودمج commits جديدة من المستودع البعيد.
   - بشكل افتراضي، سيقوم `git pull` بجلب commits جديدة وتحديث التاريخ السطحي، مع الحفاظ على اتساقه مع الفرع البعيد.
   - إذا تمت إضافة commits جديدة إلى الفرع البعيد، فسيقوم `git pull` بجلبها وتوسيع التاريخ في مستودعك المحلي، مع الاستمرار في احترام الطبيعة السطحية للاستنساخ.

   **ملاحظة**: إذا تغير تاريخ الفرع بطريقة تؤثر على commits أقدم من تاريخك السطحي (مثل force push أو rebase على المستودع البعيد)، فقد تواجه مشاكل. في مثل هذه الحالات، قد تحتاج إلى تعميق التاريخ (باستخدام `git fetch --deepen=<n>` أو `git fetch --unshallow` لجلب التاريخ الكامل) لحل التعارضات أو متابعة العمل.

### 3. **استخدام `git push` مع استنساخ سطحي**
   - **نعم، يمكنك استخدام `git push`** لدفع commits المحلية الخاصة بك إلى المستودع البعيد.
   - لا يمنع الاستنساخ السطحي قدرتك على إنشاء commits جديدة ودفعها إلى المستودع البعيد، طالما أن المستودع البعيد يقبل تغييراتك.
   - ومع ذلك، إذا تطلّب المستودع البعيد عمليات تعتمد على التاريخ الكامل (مثل دمج أو rebase يتضمن commits أقدم)، فقد تحتاج إلى جلب المزيد من التاريخ لإكمال عملية الدفع بنجاح.

### 4. **قيود الاستنساخ السطحي**
   - **تاريخ محدود**: بعض عمليات Git، مثل `git log` أو `git blame` أو `git rebase`، قد تكون محدودة لأن commits الأقدم غير متوفرة محليًا.
   - **الدمج وإعادة التأسيس**: إذا كنت بحاجة إلى دمج أو إعادة تأسيس مع commits خارج نطاق تاريخك السطحي، فقد تحتاج إلى جلب المزيد من التاريخ باستخدام `git fetch --deepen=<n>` أو `git fetch --unshallow`.
   - **عمليات الدفع القسرية**: إذا تمت إعادة كتابة الفرع البعيد (مثلاً باستخدام `git push --force`)، فقد لا يحتوي استنساخك السطحي على السياق الكافي للتعامل مع التغييرات، مما يتطلب منك تعميق التاريخ أو إعادة الاستنساخ.

### 5. **كيفية تعميق استنساخ سطحي (إذا لزم الأمر)**
   إذا واجهت مشاكل مع `git pull` أو `git push` بسبب التاريخ المحدود، يمكنك جلب تاريخ إضافي:
   - **التعميق بعدد محدد من الـ commits**:
     ```bash
     git fetch --deepen=20
     ```
     هذا يجلب 20 commit إضافية من التاريخ.
   - **جلب التاريخ الكامل**:
     ```bash
     git fetch --unshallow
     ```
     يحول هذا استنساخك السطحي إلى استنساخ كامل مع التاريخ الكامل.

### 6. **نصيحة عملية**
   - عادةً ما يكون الاستنساخ السطحي باستخدام `--depth=20` كافيًا لمعظم سير العمل، خاصة إذا كنت تعمل فقط على التغييرات الحديثة أو تساهم بتحديثات صغيرة.
   - إذا كنت تتوقع الحاجة إلى التاريخ الكامل (مثل عمليات الدمج المعقدة، أو إعادة التأسيس، أو التصحيح)، ففكر في استنساخ المستودع الكامل بدون خيار `--depth` أو تعميق التاريخ لاحقًا حسب الحاجة.
   - تأكد دائمًا من أن لديك صلاحية كتابة للمستودع البعيد (مثل `git@github.com:cisco/ChezScheme.git`) قبل محاولة الدفع.

### مثال على سير العمل
```bash
# استنساخ بتاريخ محدود
git clone git@github.com:cisco/ChezScheme.git --depth=20
cd ChezScheme

# إجراء تغييرات وحفظها
git commit -m "تغييراتي"

# سحب أحدث التغييرات
git pull origin main

# دفع تغييراتك
git push origin main
```

إذا واجهت مشاكل بسبب الاستنساخ السطحي، قم بتعميق التاريخ كما هو موضح أعلاه.

### الملخص
نعم، يمكنك استخدام `git pull` و `git push` مع استنساخ سطحي تم إنشاؤه باستخدام `--depth=20`. ومع ذلك، قد تحتاج إلى جلب تاريخ إضافي لعمليات معينة إذا كان التاريخ السطحي غير كافٍ. استخدم `git fetch --deepen` أو `git fetch --unshallow` لمعالجة أي قيود.