---
audio: false
generated: true
lang: ar
layout: post
title: فهم الامتثال الكامل لـ ACID في قواعد البيانات
translated: true
type: note
---

تمثل الامتثال لـ ACID أحد الأطر الأساسية لضمان موثوقية قاعدة البيانات وسلامة البيانات، خاصة في أنظمة معالجة المعاملات. دعنا نستكشف ما تعنيه ACID بعمق ولماذا هي مهمة.

## ما هي ACID؟

ACID هو اختصار يشير إلى:

- **الذرية (Atomicity)**
- **الاتساق (Consistency)**
- **العزل (Isolation)**
- **المداومة (Durability)**

هذه الخصائص الأربع معًا تضمن معالجة معاملات قاعدة البيانات بشكل موثوق، حتى في مواجهة الأخطاء، وانقطاعات التيار الكهربائي، والمشكلات الأخرى. دعنا نفحص كل خاصية بالتفصيل.

## الذرية (Atomicity)

تضمن الذرية أن المعاملة تُعامل كوحدة عمل واحدة غير قابلة للتجزئة. هذا يعني:

- إما أن تكتمل جميع العمليات داخل المعاملة بنجاح (commit)
- أو لا يحدث أي منها (rollback)

### الغوص العميق:
عندما تتضمن معاملة عمليات متعددة (مثل خصم حساب واحد وإيداع حساب آخر)، تضمن الذرية أن تنجح كلتا العمليتين أو لا تنجح أي منهما. تحافظ قاعدة البيانات على هذه الخاصية من خلال آليات مثل write-ahead logging (WAL) وأجزاء التراجع (rollback segments)، التي تسجل الحالة قبل التغييرات حتى يتمكن النظام من التراجع عن المعاملات الجزئية.

## الاتساق (Consistency)

يضمن الاتساق أن تنقل المعاملة قاعدة البيانات من حالة صالحة إلى حالة صالحة أخرى، مع الحفاظ على جميع القواعد والقيود والمشغلات المحددة مسبقًا.

### الغوص العميق:
يعمل الاتساق على مستويات متعددة:
- **اتساق قاعدة البيانات**: فرض قيود سلامة البيانات، والمفاتيح الخارجية، وقيود التفرد، وقيود الفحص
- **اتساق التطبيق**: ضمان الحفاظ على قواعد العمل
- **اتساق المعاملة**: ضمان الحفاظ على الثوابت قبل وبين تنفيذ المعاملة

المعاملة المتسقة تحافظ على السلامة الدلالية لقاعدة البيانات - لا يمكنها انتهاك أي قواعد محددة. على سبيل المثال، إذا كانت القاعدة تنص على أن رصيد الحساب لا يمكن أن يكون سالبًا، فلا يمكن للمعاملة المتسقة أن تؤدي إلى رصيد سالب.

## العزل (Isolation)

يضمن العزل أن التنفيذ المتزامن للمعاملات يترك قاعدة البيانات في نفس الحالة كما لو تم تنفيذ المعاملات بشكل تسلسلي.

### الغوص العميق:
يمنع العزل مشاكل مثل:
- **القراءات غير النظيفة (Dirty reads)**: قراءة البيانات غير الملتزمة من معاملة أخرى
- **القراءات غير القابلة للتكرار (Non-repeatable reads)**: الحصول على نتائج مختلفة عند قراءة نفس البيانات مرتين في نفس المعاملة
- **القراءات الوهمية (Phantom reads)**: عندما تظهر صفوف جديدة في فحص نطاق due لإدراج معاملة أخرى

تطبق قواعد البيانات مستويات عزل مختلفة من خلال تقنيات مثل:
- **التحكم في التزامن التشاؤمي (Pessimistic concurrency control)**: قفل الموارد لمنع التعارضات
- **التحكم في التزامن التفاؤلي (Optimistic concurrency control)**: السماح بالوصول المتزامن ولكن التحقق قبل الالتزام
- **التحكم في التزامن متعدد الإصدارات (MVCC)**: الحفاظ على إصدارات متعددة من البيانات للسماح بقراءات متزامنة دون حظر

## المداومة (Durability)

تضمن المداومة أنه بمجرد الالتزام بمعاملة، تظل ملتزمة حتى في حالة فشل النظام.

### الغوص العميق:
يتم تحقيق المداومة عادةً من خلال:
- **التسجيل المسبق (Write-ahead logging)**: يتم تسجيل التغييرات أولاً في السجلات قبل تطبيقها على البيانات الفعلية
- **التخزين الزائد عن الحاجة (Redundant storage)**: تخزين نسخ متعددة من البيانات في مواقع مختلفة
- **آليات نقاط التفتيش (Checkpoint mechanisms)**: ضمان نقل التغييرات بشكل دوري من الذاكرة إلى التخزين المستمر

من الناحية العملية، هذا يعني أن المعاملات الملتزمة تنجو من انقطاعات التيار الكهربائي، وتعطل النظام، أو فشل الأجهزة، حيث تم تخزينها بشكل دائم في الذاكرة غير المتطايرة.

## تحديات التطبيق والاعتبارات

يتضمن تحقيق الامتثال الكامل لـ ACID مقايضات كبيرة:

1. **تأثير الأداء**: يمكن أن تقلل خصائص ACID الصارمة من الإنتاجية وتزيد من زمن الوصول
2. **قيود قابلية التوسع**: تصبح بعض ضمانات ACID أكثر صعوبة في الحفاظ عليها في الأنظمة الموزعة
3. **تعقيد التطبيق**: يتطلب الحفاظ على هذه الخصائص خوارزميات وآليات متطورة
4. **استخدام الموارد**: قد تكون هناك حاجة إلى تخزين وذاكرة إضافية للسجلات وجداول الأقفال وإصدارات البيانات المتعددة

## التطبيقات في العالم الحقيقي

توفر أنظمة قواعد البيانات المختلفة مستويات متفاوتة من الامتثال لـ ACID:

- **أنظمة RDBMS التقليدية** (Oracle, SQL Server, PostgreSQL, MySQL مع InnoDB): امتثال كامل لـ ACID
- **قواعد بيانات NoSQL**: غالبًا ما تضحي ببعض خصائص ACID من أجل قابلية التوسع والأداء (تتبع عادةً مبادئ BASE بدلاً من ذلك)
- **قواعد بيانات NewSQL**: تحاول توفير كل من قابلية التوسع وخصائص ACID

## ما بعد ACID: التطورات الحديثة

بينما يظل ACID أساسيًا، أدخلت الأنظمة الموزعة مفاهيم إضافية:

- **نظرية CAP**: تنص على أن الأنظمة الموزعة يمكنها توفير اثنين فقط من ثلاثة ضمانات: الاتساق، والتوافر، وتحمل التقسيم
- **BASE** (Basically Available, Soft state, Eventually consistent): نهج بديل للأنظمة الموزعة
- **نمط Saga**: سلسلة من المعاملات المحلية التي تحافظ على الاتساق النهائي في الأنظمة الموزعة

يبقى الامتثال الكامل لـ ACID أمرًا بالغ الأهمية للتطبيقات التي تكون فيها سلامة البيانات ذات أهمية قصوى، مثل الأنظمة المالية، وتطبيقات الرعاية الصحية، وأنظمة حفظ السجلات الحرجة.