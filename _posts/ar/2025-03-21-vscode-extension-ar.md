---
audio: false
generated: true
lang: ar
layout: post
title: استكشاف أخطاء تثبيت امتداد VSCode مع مشكلات الوكيل
translated: true
type: note
---

للتحقق من سجل تثبيت الامتداد في Visual Studio Code (VSCode) أو استخدام سطر الأوامر لتثبيت امتداد باستخدام `code --install-extension` وعرض السجل — خاصة إذا كنت تشك في وجود مشكلة في الوكيل — إليك كيف يمكنك المتابعة:

---

### استخدام سطر الأوامر مع `code --install-extension`
يمكنك تثبيت الامتدادات عبر سطر الأوامر والحصول على بعض الرؤية في العملية، مما قد يساعد في تشخيص مشاكل الوكيل.

1. **التثبيت مع إخراج مفصل**  
   قم بتشغيل الأمر التالي لتثبيت امتداد ورؤية إخراج أكثر تفصيلاً:
   ```bash
   code --install-extension <معرف-الامتداد> --verbose
   ```
   - استبدل `<معرف-الامتداد>` بمعرف الامتداد (مثال: `vscodevim.vim`).
   - علم `--verbose` يزيد من تفاصيل الإخراج، مع إظهار التقدم والأخطاء المحتملة، مثل مشاكل الوكيل أو الشبكة.

2. **معالجة مشاكل الوكيل**  
   إذا كنت خلف وكيل، فقد يتعارض مع التثبيت. جرب هذه الطرق:
   - **تعيين متغيرات بيئة الوكيل**:  
     قبل تشغيل الأمر، قم بتكوين إعدادات الوكيل:
     ```bash
     export HTTP_PROXY=http://خادم-الوكيل-الخاص-بك:المنفذ
     export HTTPS_PROXY=http://خادم-الوكيل-الخاص-بك:المنفذ
     code --install-extension <معرف-الامتداد>
     ```
     - على Windows، استخدم `set` بدلاً من `export`:
       ```cmd
       set HTTP_PROXY=http://خادم-الوكيل-الخاص-بك:المنفذ
       set HTTPS_PROXY=http://خادم-الوكيل-الخاص-بك:المنفذ
       code --install-extension <معرف-الامتداد>
       ```
   - **تحديد الوكيل مباشرة**:  
     استخدم علم `--proxy-server`:
     ```bash
     code --install-extension <معرف-الامتداد> --proxy-server=http://خادم-الوكيل-الخاص-بك:المنفذ
     ```

3. **تحقق من الإخراج**  
   - سيظهر إخراج وحدة التحكم من علم `--verbose` تقدم التثبيت وأي أخطاء (مثل انتهاء وقت الاتصال أو فشل مصادقة الوكيل).
   - ملاحظة: واجهة سطر الأوامر (`code`) لها دعم محدود للوكيل مقارنة بواجهة VSCode الرسومية، لذا قد لا تكون السجلات مفصلة كما هو متوقع.

---

### التحقق من السجلات في VSCode
للحصول على سجلات أكثر تفصيلاً — خاصة بعد محاولة تثبيت — استخدم ميزات التسجيل المضمنة في VSCode:

1. **فتح مجلد السجلات**  
   - افتح VSCode واذهب إلى لوحة الأوامر:
     - اضغط على `Ctrl+Shift+P` (أو `Cmd+Shift+P` على macOS).
     - اكتب واختر **Developer: Open Logs Folder**.
   - هذا يفتح مجلدًا يحتوي على ملفات سجل مختلفة. ابحث عن:
     - **`exthost.log`**: سجلات متعلقة بعمليات مضيف الامتداد، بما في ذلك محاولات التثبيت.
     - **`sharedprocess.log`**: سجلات للعمليات المشتركة التي قد تتضمن أحداثًا متعلقة بالامتدادات.
   - افتح هذه الملفات في محرر نصوص وابحث عن أخطاء تذكر معرف الامتداد، أو مشاكل الشبكة، أو مشاكل الوكيل.

2. **عرض لوحة الإخراج**  
   - في VSCode، اذهب إلى `View > Output` لفتح لوحة **Output**.
   - في القائمة المنسدلة على اليمين، اختر **Extensions**.
   - يظهر هذا السجلات في الوقت الفعلي لأنشطة الامتداد عند التثبيت من داخل VSCode (وليس مباشرة عبر CLI). إذا أعدت محاولة التثبيت عبر واجهة VSCode، فقد ترى أخطاء متعلقة بالوكيل هنا.

---

### خطوات إضافية لاستكشاف مشاكل الوكيل وإصلاحها
نظرًا لأنك تشك في وجود مشكلة في الوكيل، إليك نصائح إضافية لضمان التكوين الصحيح:

- **تكوين الوكيل في VSCode**  
  - افتح إعدادات VSCode (`File > Preferences > Settings` أو `Ctrl+,`).
  - ابحث عن `proxy` وعيّن:
    ```json
    "http.proxy": "http://خادم-الوكيل-الخاص-بك:المنفذ"
    ```
  - اختياريًا، اضبط `"http.proxyStrictSSL"` (عيّنه على `false` إذا لزم الأمر) أو `"http.proxyAuthorization"` (لوكلاء المصادقة).
  - تنطبق هذه الإعدادات على عمليات التثبيت داخل VSCode، وليس بالضرورة على CLI.

- **اختبار وصول الشبكة**  
  - اختبر يدويًا ما إذا كان الوكيل يسمح بالوصول إلى VSCode Marketplace:
    - ابحث عن عنوان URL لملف VSIX الخاص بالامتداد (مثال: من موقع Marketplace).
    - استخدم أداة مثل `curl`:
      ```bash
      curl -x http://خادم-الوكيل-الخاص-بك:المنفذ <رابط-vsix>
      ```
    - إذا فشل هذا، فقد يكون وكيلك يحظر الاتصال.

---

### النهج الموصى به
- **لتثبيت CLI**: استخدم `code --install-extension <معرف-الامتداد> --verbose` مع متغيرات بيئة الوكيل أو `--proxy-server` لرؤية الإخراج الفوري. تحقق من الأخطاء في الطرفية.
- **للسجلات المفصلة**: قم بتثبيت الامتداد عبر واجهة VSCode (Marketplace) وتحقق من لوحة **Output > Extensions** أو مجلد السجلات (`exthost.log`).
- **فحص الوكيل**: تأكد من صحة إعدادات الوكيل في كل من نظامك و VSCode.

هذا المزيج يسمح لك بمراقبة التقدم وتشخيص مشاكل الوكيل بفعالية. إذا كان إخراج CLI غير كافٍ، فستوفر سجلات VSCode نظرة أعمق حول ما يحدث خطأ.