---
audio: false
generated: true
lang: ar
layout: post
title: استخدام أدوات الذكاء الاصطناعي موضح
translated: true
type: note
---

نعم، فهمك صحيح تمامًا فيما يتعلق باستخدام الأدوات واستدعاءات الوظائف في واجهات برمجة التطبيقات (APIs) للدردشة بالذكاء الاصطناعي مثل Mistral (أو غيرها المشابهة من OpenAI، Anthropic، إلخ). دعني أوضح الأمر خطوة بخطوة للتأكيد والتوضيح، حيث أنه بالفعل يتضمن انعكاسًا للتحكم (IoC) بطريقة تنقل عملية اتخاذ القرار من الكود الخاص بك إلى نموذج الذكاء الاصطناعي.

### آلية العمل
١. **تحديد الأدوات**:  
   - تقوم (كمطور) بتقديم قائمة من "الأدوات" المخصصة (وهي في الأساس تعريفات للوظائف) في طلب API الأولي. تتضمن كل أداة تفاصيل مثل اسم الوظيفة، والمعاملات (مع أنواعها ووصفها)، وما الذي تقوم به. يتم ذلك عبر مخطط، غالبًا بتنسيق JSON (على سبيل المثال، استنادًا إلى مخطط أدوات OpenAI، والذي تدعمه Mistral أيضًا).  
   - مثال: قد تحدد أداة تسمى `get_weather` تأخذ معامل `location` وتُرجع بيانات الطقس الحالية.

٢. **قرار النموذج (انعكاس التحكم)**:  
   - يعالج نموذج الذكاء الاصطناعي استفسارك/طلبك ويقرر ما إذا كان يحتاج إلى مساعدة خارجية من إحدى أدواتك للرد بدقة. هذا هو جزء انعكاس التحكم: بدلاً من أن يستدعي الكود الخاص بك الوظائف مباشرة في تدفق خطي، فإن النموذج "يعكس" التحكم من خلال طلب استدعاء أداة عندما يرى ذلك ضروريًا. الأمر يشبه أن النموذج هو الذي يدير سير العمل.  
   - إذا لم تكن هناك حاجة إلى أداة، فإن النموذج يولد ردًا مباشرًا فقط.

٣. **رد استدعاء الأداة من API**:  
   - إذا كانت هناك حاجة إلى أداة، فإن API لا يعطي إجابة نهائية على الفور. بدلاً من ذلك، يستجيب بكائن "استدعاء أداة". يتضمن هذا:  
     - اسم الأداة/الوظيفة.  
     - الوسائط (على سبيل المثال، JSON بقيم مثل `{"location": "New York"}`).  
   - في هذه المرحلة، تتوقف المحادثة — النموذج ينتظر منك أن تتصرف.

٤. **تنفيذ الأداة (على جانبك)**:  
   - يستقبل الكود الخاص بك رد استدعاء الأداة هذا، ويحلله، وينفذ الوظيفة/الأداة المقابلة بالوسائط المقدمة.  
   - تتعامل مع المنطق الفعلي (على سبيل المثال، استدعاء واجهة برمجة تطبيقات الطقس، أو الاستعلام من قاعدة بيانات، أو تشغيل بعض الحسابات).  
   - المهم أن النموذج لا ينفذ الأداة بنفسه؛ إنه يحدد فقط ما يجب استدعاؤه. هذا يحافظ على أمان الأمور ومرونتها.

٥. **إرسال النتائج مرة أخرى**:  
   - بعد تنفيذ الأداة، تقوم بإلحاق النتيجة (على سبيل المثال، كرسالة "استجابة أداة") بسجل المحادثة وتقدم طلب API آخر، وتمرر سجل المحادثة المحدث مرة أخرى إلى النموذج.  
   - يتم صياغة هذه النتيجة كرسالة نظام أو ناتج أداة، حتى يتمكن النموذج من دمجها.

٦. **الرد النهائي من API**:  
   - يستقبل النموذج نتيجة الأداة، ويعالجها جنبًا إلى جنب مع الاستفسار الأصلي وسجل المحادثة، ويولد الرد الكامل النهائي.  
   - إذا لزم الأمر، قد يطلب استدعاءات أدوات إضافية في حلقة (على سبيل المثال، للمهام متعددة الخطوات)، ولكن في النهاية، يُخرج الإجابة دون مزيد من الاستدعاءات.

### لماذا يعتبر انعكاسًا للتحكم
- في البرمجة التقليدية، يتحكم الكود الخاص بك في التدفق: "إذا تحقق الشرط X، فاستدع الوظيفة Y."  
- هنا، يأخذ نموذج الذكاء الاصطناعي زمام التحكم: يحلل الاستفسار ويقرر "أحتاج إلى استدعاء Y بهذه الوسائط — أخبرني بالنتيجة، ثم سأمضي قدمًا." يصبح الكود الخاص بك تفاعليًا، يتعامل مع الاستدعاءات حسب الطلب. هذا يجعل النظام أكثر ديناميكية ويسمح للنموذج بالتعامل مع سير العمل المعقدة القائمة على الاستدلال.

### حالات خاصة ونصائح
- **استدعاءات أدوات متوازية**: بعض واجهات برمجة التطبيقات (مثل Mistral) تدعم استدعاء أدوات متعددة في رد واحد إذا تطلب الاستفسار ذلك.  
- **معالجة الأخطاء**: إذا فشل تنفيذ الأداة الخاصة بك، يمكنك إرسال رسالة خطأ مرة أخرى، وقد يحاول النموذج مرة أخرى أو يتكيف.  
- **سجل المحادثة**: حافظ دائمًا على خيط المحادثة الكامل عبر الطلبات للحفاظ على السياق.  
- **التوافق**: تتبع واجهة برمجة تطبيقات Mistral هيكلًا مشابهًا لنقطة نهاية أدوات OpenAI، لذا فإن أمثلة الأكواد من أحدهما غالبًا ما تعمل مع الآخر مع تعديلات طفيفة.

هذا النمط قوي لبناء وكلاء أو تطبيقات تدمج الذكاء الاصطناعي مع إجراءات العالم الحقيقي (مثل حجز الرحلات، جلب البيانات). إذا كنت تنفذ هذا، تحقق من وثائق Mistral للحصول على تفاصيل المخطط الدقيقة.

[Mistral AI Documentation - Tools](https://docs.mistral.ai/capabilities/tool-calling/)