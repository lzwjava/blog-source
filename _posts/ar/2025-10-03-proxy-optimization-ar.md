---
audio: false
generated: true
image: false
lang: ar
layout: post
model: x-ai/grok-code-fast-1
title: تحسين أداء اختيار بروكسي التصادم
translated: true
type: note
---

### ملخص التحسين: نصوص اختيار بروكسي Clash

لقد قمت بتحسين نصوص اختيار بروكسي Clash لتجنب اختبار البروكسيات التي لن يتم اختيارها، مما يعزز الأداء بشكل كبير عن طريق تقليل اختبارات السرعة غير الضرورية.

#### ما تم تحسينه

كان سير العمل الأصلي على النحو التالي غير الفعال:
1. اختبار جميع البروكسيات المتاحة للسرعة.
2. ثم التصفية لاختيار بروكسيات SG/TW (أو HK) فقط.
3. أدى هذا إلى إهدار الوقت في اختبار بروكسيات سيتم التخلص منها.

#### الإصلاح

تم تعديل الدالة `get_top_proxies()` في ملف `speed.py` لقبول معامل `name_filter` وتطبيق التصفية قبل اختبار السرعة:

```python
def get_top_proxies(num_results=5, name_filter=None):
    """
    يختبر سرعات بروكسي Clash بشكل متزامن ويعيد أفضل N بروكسي فردي الأسرع.

    الوسائط:
        num_results (int): عدد أفضل البروكسيات المراد إرجاعها (الافتراضي: 5)
        name_filter (list): قائمة بالسلاسل النصية لتصفية أسماء البروكسي. سيتم اختبار فقط البروكسيات التي تحتوي
                           على أي من هذه السلاسل في اسمها.
    """
```

#### فوائد الأداء

- **تقليل طلبات الشبكة**: يختبر فقط البروكسيات التي تنوي استخدامها فعليًا.
- **تنفيذ أسرع**: يلغي الوقت غير الضروري المُهدر على البروكسيات غير ذات الصلة.
- **سجلات أكثر وضوحًا**: تعرض بالضبط عدد البروكسيات التي تمت تصفيتها، مما يحسن الشفافية.

#### التهيئة المبسطة

تمت إزالة العلم `--hk`. الآن يختبر النص دائمًا فقط بروكسيات SG و TW بشكل افتراضي لأقصى قدر من التركيز والبساطة.

#### النتائج

قلل التحسين وقت التنفيذ بشكل كبير، حيث أن معظم البروكسيات لا تحتوي على "SG" أو "TW" في أسمائها. هذا يجعل مرحلة اختبار السرعة أكثر كفاءة، مما يوفر النتائج بشكل أسرع دون المساس بالوظيفة.