---
audio: false
generated: true
image: false
lang: ar
layout: post
model: x-ai/grok-4-fast
title: تثبيت آي بي إم دي بي 2 على أوبونتو
translated: true
type: note
---

### تثبيت IBM Db2 12.1.2 على Ubuntu 22.04 أو 24.04 من `ibm_db2_v12.1.2_linuxx64_server_dec.tar.gz`

إصدار IBM Db2 12.1.2 (Fix Pack 2) مدعوم على إصدارات Ubuntu الحديثة، بما في ذلك 22.04 (Jammy) و 24.04 (Noble)، طالما أن نظامك يستوفي المتطلبات الأساسية للأجهزة والبرمجيات. يستخدم هذا التثبيت برنامج التثبيت الرسومي أو الصامت من ملف tar.gz. أوصي بمراجعة الوثائق الرسمية من IBM الخاصة بـ Db2 12.1 (على سبيل المثال، على IBM Knowledge Center أو صفحة تنزيلات Db2) للحصول على أحدث التفاصيل، حيث يمكن أن تختلف المتطلبات حسب الإصدار (إصدار الخادم هنا).

**ملاحظات مهمة قبل البدء:**
- **متطلبات النظام**:
  - بنية 64-bit x86_64 (Intel/AMD).
  - على الأقل 4 غيغابايت من ذاكرة الوصول العشوائي (يُوصى بـ 8 غيغابايت) و 2 غيغابايت من مساحة المبادلة.
  - 10 غيغابايت مساحة قرص حرة للتثبيت الأساسي (أكثر للبيانات).
  - صلاحيات root أو sudo.
  - إصدار النواة: يجب أن يعمل Ubuntu 22.04/24.04، ولكن تأكد من أن نواتك هي 3.10 على الأقل (تحقق باستخدام `uname -r`).
  - الجدار الناري: قم بتعطيله مؤقتًا أو فتح المنافذ (الافتراضي لـ Db2: 50000 لـ TCP/IP).
- **المشكلات المحتملة على Ubuntu**:
  - يتم اختبار Db2 بشكل أساسي على RHEL/SUSE، لكن Ubuntu مدعوم عبر حزم Debian. قد تحتاج إلى حل تبعيات المكتبات.
  - إذا كنت تستخدم Ubuntu 24.04، فهو جديد جدًا — اختبره في جهاز ظاهري أولاً، حيث قد يتأخر الاعتماد الكامل.
  - هذا يثبت إصدار الخادم. للإصدارات الأخرى (مثل Express-C)، قم بتنزيل ملف tar.gz المناسب.
- **النسخ الاحتياطي**: قم بعمل نسخة احتياطية من نظامك قبل المتابعة.
- قم بتنزيل الملف من الموقع الرسمي IBM Passport Advantage أو موقع تنزيلات Db2 (يتطلب IBM ID).

#### الخطوة 1: تثبيت المتطلبات الأساسية
قم بتحديث نظامك وتثبيت المكتبات المطلوبة. يحتاج Db2 إلى I/O غير متزامن و PAM ومكتبات وقت التشغيل الأخرى.

```bash
sudo apt update
sudo apt upgrade -y

# تثبيت الحزم الأساسية (شائعة لـ Db2 على Ubuntu/Debian)
sudo apt install -y libaio1 libpam0g:i386 libncurses5 libstdc++6:i386 \
    unixodbc unixodbc-dev libxml2 libxslt1.1 wget curl

# بالنسبة لـ Ubuntu 24.04، قد تحتاج أيضًا إلى:
sudo apt install -y libc6:i386 libgcc-s1:i386

# التحقق من توافق glibc (يتطلب Db2 12.1 glibc 2.17+)
ldd --version  # يجب أن يُظهر glibc 2.35+ على Ubuntu 22.04/24.04
```

إذا واجهت مكتبات 32-bit مفقودة (على سبيل المثال، لمكونات Java)، قم بتمكين multiarch:
```bash
sudo dpkg --add-architecture i386
sudo apt update
sudo apt install -y libc6:i386 libncurses5:i386 libstdc++6:i386
```

#### الخطوة 2: تحضير ملفات التثبيت
1. إنشاء دليل مؤقت للاستخراج (مثال: `/tmp/db2_install`):
   ```bash
   sudo mkdir -p /tmp/db2_install
   cd /tmp/db2_install
   ```

2. انسخ ملف tar.gz إلى هذا الدليل (بافتراض أنك قمت بتنزيله، مثلاً في `~/Downloads`):
   ```bash
   cp ~/Downloads/ibm_db2_v12.1.2_linuxx64_server_dec.tar.gz .
   ```

3. استخرج الأرشيف:
   ```bash
   tar -xzf ibm_db2_v12.1.2_linuxx64_server_dec.tar.gz
   ```
   - يؤدي هذا إلى إنشاء دليل مثل `db2` أو `sqllib` يحتوي على ملفات المثبت (مثل `db2setup`).

4. انتقل إلى الدليل المستخرج:
   ```bash
   cd db2  # أو أيًا كان اسم الدليل الرئيسي — تحقق باستخدام `ls`
   ```

#### الخطوة 3: تشغيل المثبت
يوفر Db2 مثبتًا رسوميًا (`db2setup`) أو ملف استجابة للتثبيت الصامت. شغّله كـ root/sudo.

**الخيار أ: المثبت الرسومي (مُوصى به للإعداد لأول مرة)**
1. تأكد من وجود شاشة عرض (إذا كنت على خادم بدون واجهة رسومية، استخدم X forwarding مع SSH: `ssh -X user@host`).
2. شغّل المثبت:
   ```bash
   sudo ./db2setup
   ```
   - سيرشدك المعالج:
     - قَبول الترخيص.
     - اختر التثبيت "النموذجي" لإصدار الخادم.
     - حدد مسار التثبيت (الافتراضي: `/opt/ibm/db2/V12.1` — تأكد من وجود `/opt/ibm` وقابل للكتابة؛ أنشئه باستخدام `sudo mkdir -p /opt/ibm` إذا لزم الأمر).
     - إنشاء مثيل Db2 (مثال: "db2inst1") — هذا يُنشئ مستخدم مسؤول قاعدة البيانات.
     - تعيين المصادقة (مثال: محلي أو LDAP).
     - تمكين الميزات مثل SQL Procedural Language إذا لزم الأمر.
   - سيقوم المثبت بتجميع المثيل وإعداده.

**الخيار ب: التثبيت الصامت (غير التفاعلي)**
إذا كنت تفضل استخدام البرامج النصية:
1. إنشاء ملف استجابة أثناء تشغيل تجريبي:
   ```bash
   sudo ./db2setup -g  # يُنشئ ملف `db2setup.rsp` في الدليل الحالي
   ```
   قم بتحرير `db2setup.rsp` (مثال: عيّن `LIC_AGREEMENT=ACCEPT`، `INSTALL_TYPE=TYPICAL`، `CREATE_DB2_INSTANCE=YES`، إلخ.).

2. تشغيل التثبيت الصامت:
   ```bash
   sudo ./db2setup -u db2setup.rsp
   ```

- يستغرق التثبيت من 10 إلى 30 دقيقة. راقب الأخطاء في `/tmp/db2setup.log`.

#### الخطوة 4: الإعداد بعد التثبيت
1. **التحقق من التثبيت**:
   - سجّل الدخول كمالك المثيل (مثال: `db2inst1` — الذي تم إنشاؤه أثناء التثبيت):
     ```bash
     su - db2inst1
     ```
   - تحقق من إصدار Db2:
     ```bash
     db2level
     ```
   - ابدأ المثيل:
     ```bash
     db2start
     ```
   - اختبر الاتصال:
     ```bash
     db2 connect to sample  # ينشئ قاعدة بيانات نموذجية إذا لم تكن موجودة
     db2 "select * from sysibm.sysdummy1"
     db2 disconnect all
     db2stop  # عند الانتهاء
     ```

2. **إنشاء قاعدة بيانات (إذا لم يتم أثناء التثبيت)**:
   ```bash
   su - db2inst1
   db2sampl  # اختياري: ينشئ قاعدة بيانات نموذجية
   # أو إنشاء قاعدة بيانات مخصصة:
   db2 "create database MYDB"
   db2 connect to MYDB
   ```

3. **إعداد البيئة**:
   - أضف Db2 إلى PATH لمستخدم المثيل (أضف إلى `~/.bashrc`):
     ```bash
     export PATH=/opt/ibm/db2/V12.1/bin:$PATH
     export DB2INSTANCE=db2inst1
     ```
   - أعد التحميل: `source ~/.bashrc`.

4. **تمكين الوصول عن بُعد (اختياري)**:
   - تحديث الخدمات:
     ```bash
     su - db2inst1
     db2 update dbm cfg using SVCENAME db2i  # أو المنفذ الخاص بك
     db2set DB2COMM=TCPIP
     db2start
     ```
   - تحرير `/etc/services` (كـ root) لإضافة:
     ```
     db2i          50000/tcp
     ```
   - أعد تشغيل المثيل.

5. **تكوين الجدار الناري**:
   ```bash
   sudo ufw allow 50000/tcp  # لمنفذ Db2 الافتراضي
   sudo ufw reload
   ```

#### الخطوة 5: تطبيق التحديثات (مُوصى به)
- قم بتنزيل وتطبيق أحدث Fix Pack إذا لزم الأمر (12.1.2 هو FP2؛ تحقق من FP3+):
  - استخدم أداة `db2iupdt` أو أداة تحديث IBM.
- راقب السجلات: `/tmp/db2` أو `/opt/ibm/db2/V12.1/instance/db2inst1/sqllib/db2dump`.

#### استكشاف الأخطاء وإصلاحها الشائعة
- **"No suitable Java runtime"**: ثبّت OpenJDK: `sudo apt install openjdk-11-jre-headless`.
- **أخطاء المكتبات (مثال: libaio.so)**: تأكد من تثبيت `libaio1` وشغّل `sudo ldconfig`.
- **تم رفض الإذن**: شغّل المثبت كـ root؛ تأكد من ملكية `/opt/ibm`: `sudo chown -R db2inst1:db2iadm1 /opt/ibm/db2`.
- **عدم توافق Glibc**: غير مرجح على Ubuntu 22.04/24.04، ولكن إذا ظهرت مشاكل، ففكر في تثبيت حاوية (Docker).
- **فشل التثبيت الصامت**: تحقق من `db2setup.log` للحصول على أدلة.
- **خاص بـ Ubuntu 24.04**: إذا فشلت تبعيات المكتبات، قد تحتاج إلى إضافة PPAs أو تجميع المكتبات المفقودة. اختبر على 22.04 أولاً.
- أخطاء؟ ابحث في منتديات دعم IBM أو شغّل `db2diag` كمستخدم المثيل.

إذا واجهت أخطاء محددة، قدم التفاصيل للحصول على مساعدة مستهدفة. للاستخدام في بيئة الإنتاج، فكر في بيئات IBM المعتمدة أو استشارة الدعم. نجاح! يجب أن يكون مثيل Db2 الخاص بك جاهزًا الآن لإنشاء قاعدة البيانات واستخدامها.