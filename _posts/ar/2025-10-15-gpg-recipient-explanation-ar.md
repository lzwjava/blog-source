---
audio: false
generated: true
image: false
lang: ar
layout: post
model: x-ai/grok-4-fast
title: شرح مستقبل تشفير GPG
translated: true
type: note
---

### فهم أمر GPG ومطالبة "المستلم"

الأمر الذي تشغله هو لتشفير ملف (`inputfile.txt`) باستخدام GnuPG (GPG):

```
gpg --homedir /path/to/custom/dir -e -r recipient@example.com --encrypt inputfile.txt
```

- `--homedir /path/to/custom/dir`: يستخدم دليلاً مخصصًا لحلقة مفاتيح GPG وإعداداته (بدلاً من الإعداد الافتراضي `~/.gnupg`).
- `-e` (أو `--encrypt`): يخبر GPG بتشفير الملف.
- `-r recipient@example.com`: يحدد **المستلم** (الشخص أو الكيان الذي تقوم بالتشفير *من أجله*). يجب أن يكون هذا بريده الإلكتروني، أو اسمه، أو معرف مفتاحه من مفتاحه العام.
- `--encrypt inputfile.txt`: الملف المراد تشفيره (سيكون الناتج `inputfile.txt.gpg`).

#### ماذا يعني "المستلم" هنا؟
في تشفير GPG:
- **المستلم** هو الشخص الذي *سيستلم الملف ويفك تشفيره*. أنت تقوم بتشفير الملف باستخدام *مفتاحهم العام*، لذا فقط هم (باستخدام مفتاحهم الخاص) يمكنهم فك تشفيره.
- ليس "المرسل" (أنت) لأن التشفير يحمي البيانات *لصالح المستلم*. دورك كمرسل يتعلق أكثر بالتوقيع (إذا أضفت `-s` للتوقيع)، ولكن هنا الأمر يتعلق بالتشفير فقط.

أنت محق في أن هذا مخصص "لإرسال" بيانات آمنة، لكن المصطلحات تركز على المستلم لأن مفتاحه هو الذي يؤمنها. فكر في الأمر كقفل صندوق بقفل شخص آخر – هم الوحيدون الذين يمكنهم فتحه.

#### لماذا الخطأ: "You did not specify a user ID. (you may use '-r')" والمطالبة التفاعلية؟
تحدث هذه المطالبة التفاعلية لأن:
1. لم يتمكن GPG من العثور على مفتاح عام يطابق `recipient@example.com` في حلقة المفاتيح الخاصة بك (في الدليل المخصص `homedir`).
2. العلم `-r` مرفق، لكنه لا يحل إلى مفتاح صالح، لذا يتراجع GPG إلى طلب منك إدخال معرف المستخدم يدويًا.

المطالبة هي:
```
Current recipients:
Enter the user ID.  End with an empty line:
```

- **معرف المستخدم** يعني المعرف الكامل للمستلم، مثل `John Doe <recipient@example.com>` أو بصمة/معرف مفتاحهم (مثل `ABCDEF123456`).
- أدخله سطرًا بسطر إذا لزم الأمر (مثلًا، الاسم، البريد الإلكتروني، تعليق)، ثم اضغط على Enter مرتين (سطر فارغ) لإنهاء الإدخال.

#### كيفية إصلاح هذا
1. **استيراد المفتاح العام للمستلم أولاً** (المشكلة الأكثر شيوعًا):
   - اطلب من المستلم إرسال مفتاحه العام لك (مصدر عبر `gpg --export -a their@email.com`).
   - قم باستيراده: `gpg --homedir /path/to/custom/dir --import their-public-key.asc`.
   - ثم أعد تشغيل الأمر الخاص بك.

2. **إذا كان المفتاح مستوردًا بالفعل لكنه غير متطابق**:
   - اعرض المفاتيح: `gpg --homedir /path/to/custom/dir --list-keys`.
   - استخدم معرف المستخدم المحدد من هناك في `-r` (مثل `-r "John Doe <recipient@example.com>"`).

3. **عند المطالبة** (كحل سريع):
   - اكتب معرف المستخدم الكامل، مثل:
     ```
     John Doe
     recipient@example.com
     
     ```
     (السطر الفارغ ينهي الإدخال.)

#### لماذا "المستلم" بدلاً من "المرسل"؟
- التشفير *غير متناظر*: المفتاح العام (أي شخص يمكنه التشفير) → المفتاح الخاص (المالك فقط هو من يمكنه فك التشفير).
- المرسل (أنت) يقوم بالتشفير باستخدام مفتاح **العام** للمستلم.
- إذا أردت إثبات أنك المرسل، أضف التوقيع: `gpg ... -e -r recipient@example.com -s --encrypt inputfile.txt` (يستخدم مفتاحك **الخاص** للتوقيع).
- "المستلم" هو مصطلح قياسي في GPG – لا يتعلق الأمر بمن يرسل، بل بمن يستلم/يفك التشفير. تسميته "مرسل" ستسبب الارتباك، لأن المرسلين لا يحتاجون إلى مفتاح للتشفير (بل يحتاجونه للتوقيع فقط).

إذا لم يحل هذا المشكلة، شارك ناتج أمر `--list-keys` (مع إخفاء المعلومات الحساسة)، وسأكون سعيدًا للمساعدة في التصحيح!

#### المراجع
- [أساسيات تشفير GPG](https://www.gnupg.org/documentation/manuals/gnupg/Encrypting-and-Decrypting.html)
- [صفحة الدليل Manual Page لـ GPG](https://www.gnupg.org/documentation/manuals/gnupg/gpg.html)