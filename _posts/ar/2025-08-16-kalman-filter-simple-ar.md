---
audio: false
generated: true
image: false
lang: ar
layout: post
title: مرشح كالمان موضح ببساطة
translated: true
type: note
---

إليك **دليل شامل لتصفية كالمان (Kalman Filtering)** باللغة الإنجليزية، مُنظم للوضوح:

---

# 1. المقدمة

**مرشح كالمان** هو **خوارزمية** تقدم تقديرات لمتغيرات مجهولة من خلال الجمع بين قياسات أجهزة الاستشعار الضوضائية وتوقعات من نموذج النظام. يتم استخدامه على نطاق واسع في **أنظمة التحكم، والملاحة، والروبوتات، ورؤية الكمبيوتر، والتمويل**.

الفكرة الأساسية:
يعمل بشكل متكرر — مما يعني أنه يقوم بتحديث تقديره باستمرار مع وصول قياسات جديدة، بدلاً من انتظار مجموعة البيانات بأكملها.

---

# 2. المفاهيم الأساسية

### الحالة State

مجموعة المتغيرات التي نريد تقديرها (مثل الموضع، السرعة).

### نموذج العملية Process Model

يصف كيف تتطور الحالة بمرور الوقت، عادة مع بعض عدم اليقين.

### نموذج القياس Measurement Model

يربط قياسات أجهزة الاستشعار الفعلية بالحالة الأساسية.

### الضوضاء Noise

كل من العملية والقياسات بها عدم يقين (ضوضاء عشوائية). يقوم مرشح كالمان بوضع نموذج صريح لهذا باستخدام الاحتمالات.

---

# 3. الصياغة الرياضية

يفترض مرشح كالمان **نظامًا خطيًا** مع ضوضاء غاوسية.

* **معادلة الحالة (التنبؤ):**

  $$
  x_k = A x_{k-1} + B u_k + w_k
  $$

  * $x_k$: الحالة في الوقت $k$
  * $A$: مصفوفة انتقال الحالة
  * $B u_k$: إدخال التحكم
  * $w_k$: ضوضاء العملية (غاوسية، التغاير $Q$)

* **معادلة القياس (الملاحظة):**

  $$
  z_k = H x_k + v_k
  $$

  * $z_k$: القياس
  * $H$: مصفوفة الملاحظة
  * $v_k$: ضوضاء القياس (غاوسية، التغاير $R$)

---

# 4. الخطوتان الرئيسيتان

### الخطوة 1: التنبؤ Prediction

* التنبؤ بالحالة للأمام في الزمن.
* التنبؤ بعدم اليقين (تباين الخطأ).

### الخطوة 2: التحديث (التصحيح) Update (Correction)

* مقارنة القياس المتوقع بالقياس الفعلي.
* حساب **كسب كالمان** (كمية الثقة الموضوعة في القياس مقابل التنبؤ).
* تحديث التقدير وتقليل عدم اليقين.

---

# 5. معادلات مرشح كالمان (الحالة الخطية)

1. **تنبؤ الحالة:**

   $$
   \hat{x}_k^- = A \hat{x}_{k-1} + B u_k
   $$

2. **تنبؤ التغاير:**

   $$
   P_k^- = A P_{k-1} A^T + Q
   $$

3. **كسب كالمان:**

   $$
   K_k = P_k^- H^T (H P_k^- H^T + R)^{-1}
   $$

4. **تحديث الحالة:**

   $$
   \hat{x}_k = \hat{x}_k^- + K_k (z_k - H \hat{x}_k^-)
   $$

5. **تحديث التغاير:**

   $$
   P_k = (I - K_k H) P_k^-
   $$

حيث:

* $\hat{x}_k^-$: الحالة المتوقعة قبل التحديث
* $\hat{x}_k$: الحالة المحدثة
* $P_k$: مصفوفة التغاير (عدم اليقين في التقدير)

---

# 6. الحدس Intuition

* إذا كان القياس **ضوضائيًا جدًا** (كبير $R$)، يصبح كسب كالمان صغيرًا → الاعتماد أكثر على التنبؤ.
* إذا كان النموذج **غير مؤكد** (كبير $Q$)، يزداد كسب كالمان → الاعتماد أكثر على القياسات.
* مع مرور الوقت، يجد **التوازن الأمثل** بين الوثوق بالنموذج والوثوق بأجهزة الاستشعار.

---

# 7. المتغيرات Variants

* **مرشح كالمان الموسع (EKF):** للأنظمة غير الخطية، يستخدم الخطي (مصفوفة جاكوبي).
* **مرشح كالمان غير المعتمد على الشكل (UKF):** للأنظمة غير الخطية، يستخدم أخذ العينات الحتمي.
* **مرشح المعلومات Information Filter:** يعمل مع معكوس التغاير للكفاءة.
* **مرشح كالمان المجموعي Ensemble Kalman Filter:** يُستخدم في التنبؤ بالطقس والأنظمة عالية الأبعاد.

---

# 8. التطبيقات

* **الملاحة:** دمج GPS ومقياس التسارع لتتبع الموضع.
* **الروبوتات:** SLAM (التوطين ورسم الخرائط في وقت واحد).
* **التمويل:** تقدير متغيرات خفية مثل التقلب.
* **رؤية الكمبيوتر:** تتبع الكائن في مقاطع الفيديو.
* **أنظمة التحكم:** تثبيت الطائرات والمركبات الفضائية.

---

# 9. مثال على سيناريو

تخيل سيارة ذاتية القيادة تقدر موقعها:

* النموذج يتنبأ بالموضع باستخدام السرعة + الحالة السابقة.
* GPS يوفر قياسًا ضوضائيًا للموضع.
* مرشح كالمان يمزج التنبؤ و GPS للحصول على موضع أكثر سلاسة ودقة.

مع مرور الوقت، يمكن للسيارة تتبع موقعها حتى لو انقطع GPS لفترة وجيزة.

---

# 10. نقاط القوة والقيود الرئيسية

**نقاط القوة:**

* متكرر، وفعال (يحتاج فقط إلى الحالة الأخيرة، وليس التاريخ بأكمله).
* أمثل للأنظمة الغاوسية الخطية.
* تم اختباره على نطاق واسع وقوي.

**القيود:**

* يتطلب نماذج دقيقة للديناميكيات والضوضاء.
* خطي بحت — الحالات غير الخطية تحتاج إلى EKF/UKF.
* يمكن أن يتباعد إذا تم انتهاك الافتراضات.

---

✅ باختصار: **مرشح كالمان** هو طريقة رياضية أنيقة لدمج التنبؤات والقياسات في ظل عدم اليقين، موازنة الثقة بين النماذج وأجهزة الاستشعار لإنتاج أفضل تقدير ممكن في الوقت الفعلي.

---

هل تريد مني أيضًا أن أعطيك **مثالًا على تنفيذ Python خطوة بخطوة** (مثل تتبع الموضع مع الضوضاء)، حتى تتمكن من رؤية كيف يعمل في الممارسة العملية؟