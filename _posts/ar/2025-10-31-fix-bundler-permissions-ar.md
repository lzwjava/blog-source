---
audio: false
generated: true
image: false
lang: ar
layout: post
model: x-ai/grok-4-fast
title: إصلاح أخطاء أذونات باوندلر
translated: true
type: note
---

### فهم الخطأ

هذه مشكلة أذونات شائعة عند استخدام Bundler (مدير تبعيات Ruby) مع إصدار Ruby المثبت على مستوى النظام (الإصدار 3.2.0 هنا). يحدث الخطأ لأن Bundler يحاول تنزيل وتخزين أداة `rake` (وربما غيرها) مؤقتًا في دليل gems على مستوى النظام في `/var/lib/gems/3.2.0/cache/`، الأمر الذي يتطلب صلاحية كتابة على مستوى المستخدم المتميز (root). إن Bundler نفسه مثبت محليًا للمستخدم (في `~/.local/share/gem/`)، لكنه يستخدم مسارات gems الخاصة بالنظام بشكل افتراضي للعمليات.

هذه السلسلة في ملفك `Gemfile` (Jekyll + التبعيات مثل `minima`، `jekyll-feed`، إلخ) هي التي تسبب تثبيت `rake` كتبعية عميقة—لا يوجد خطأ في إعدادك، إنها مجرد مشكلة في الأذونات.

### الحلول السريعة (مرتبة حسب التوصية)

1. **تثبيت Gems محليًا (موصى به - لا حاجة لـ Sudo)**
   هذا يحافظ على كل شيء في دليل المستخدم الرئيسي، متجنبًا تمامًا مسارات النظام. شغّل:
   ```
   bundle config set --local path 'vendor/bundle'
   bundle install
   ```
   - ينشئ هذا مجلد `vendor/bundle` في مشروعك لاحتواء gems.
   - لتشغيل موقع Jekyll لاحقًا، استخدم `bundle exec jekyll serve` (حيث أن `exec` تضمن استخدام gems المحلية).
   - إذا أردت جعل هذا إعدادًا عامًا لجميع المشاريع: استبدل `--local` بـ `--global` واستخدم `~/.bundle` كمسار.

2. **استخدام Sudo (سريع لكنه غير مثالي)**
   إذا كنت بحاجة إلى تثبيت لمرة واحدة ولا تمانع في تثبيت gems على مستوى النظام:
   ```
   sudo bundle install
   ```
   - **تحذير**: هذا يثبت gems على مستوى النظام كـ root، مما قد يؤدي إلى مشاكل ملكية لاحقًا (على سبيل المثال، ستحتاج إلى `sudo` للتحديثات المستقبلية). تجنب هذا إن أمكن.

3. **إصلاح أذونات النظام (متقدم - استخدم بحذر)**
   إذا كنت ترغب في الاستمرار في استخدام دليل gems الخاص بالنظام دون sudo:
   ```
   sudo chown -R $USER:$USER /var/lib/gems/3.2.0/
   ```
   - ثم أعد محاولة `bundle install`.
   - **تحذير**: هذا يغير ملكية gems النظام، مما قد يكسر الحزم التي يديرها توزيعتك (مثل Ubuntu). افعل هذا فقط إذا كنت مرتاحًا لاستكشاف الأخطاء وإصلاحها.

### التوصية طويلة المدى
لتطوير Ruby/Jekyll، انتقل إلى أداة تثبيت Ruby يديرها المستخدم مثل [rbenv](https://github.com/rbenv/rbenv) أو [RVM](https://rvm.io/). هذا يتجنب كل صداع مشاكل الأذونات عن طريق تثبيت Ruby و gems بالكامل في دليل المستخدم الرئيسي:
- ثبّت rbenv: اتبع [الدليل الرسمي](https://github.com/rbenv/rbenv#installation).
- ثم: `rbenv install 3.2.0 && rbenv global 3.2.0 && gem install bundler`.
- أعد محاولة `bundle install` — ستعمل بسلاسة.

إذا لم يحل أي من هذه الحلول المشكلة أو واجهت خطأ آخر، شارك ناتج أوامر `ruby -v`، `gem env`، وملف `Gemfile.lock` الخاص بك (إذا كان موجودًا) للحصول على مساعدة أكثر تخصيصًا!