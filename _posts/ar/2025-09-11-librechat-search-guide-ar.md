---
audio: false
date: 2025-09-11
generated: true
image: false
lang: ar
layout: post
model: mistralai/mistral-medium-3.1
title: دليل وظيفة البحث في LibreChat
translated: true
type: note
---

إليك كيفية عمل **وظيفة البحث** في **LibreChat v0.8.0-rc3** (بما في ذلك البحث في المحادثات وكيف يختلف عن التفرع):

---

### **1. البحث في LibreChat**
يوفر LibreChat **طريقتين رئيسيتين للبحث**:
#### **أ. البحث الشامل (عبر جميع المحادثات)**
- **المكان**: شريط البحث العلوي في الشريط الجانبي.
- **ما يبحث فيه**:
  - **عناوين** المحادثات (المولدة تلقائياً أو المخصصة).
  - **محتويات الرسائل** (طلباتك + ردود الذكاء الاصطناعي).
  - **البيانات الوصفية** (مثل النموذج المستخدم، الطوابع الزمنية).
- **كيفية عمله**:
  - يستخدم **بحث النص الكامل في MongoDB/PostgreSQL** (يعتمد على الخلفية التي تستخدمها).
  - يُرجع قائمة بالمحادثات/الرسائل المطابقة مع **مقتطفات**.
  - النقر على نتيجة يقفز إلى تلك المحادثة/الرسالة.

#### **ب. البحث داخل المحادثة (بديل لـ Ctrl+F)**
- **المكان**: داخل دردشة مفتوحة (بعض الإصدارات تحتوي على **أيقونة عدسة مكبرة** أو اختصار `Ctrl+F`).
- **ما يبحث فيه**:
  - فقط **رسائل المحادثة الحالية**.
  - يسلط الضوء على النتائج المتطابقة في نافذة الدردشة.

---

### **2. كيف يختلف البحث عن التفرع**

| الميزة                  | **البحث**                               | **التفرع**                             |
|-------------------------|----------------------------------------|---------------------------------------|
| **الغرض**               | العثور على الرسائل/المحادثات السابقة.  | إنشاء مسارات بديلة من نقطة معينة.     |
| **المخرجات**            | قائمة بالنتائج المطابقة.              | محادثة جديدة متفرعة.                  |
| **حالة الاستخدام**      | "أين سألت عن React hooks؟"             | "لنجرب نهجاً مختلفاً في التصحيح."     |
| **الثبات**              | مؤقت (مرشح في واجهة المستخدم).         | دائم (محادثة جديدة في قاعدة البيانات).|

---
### **3. التفاصيل التقنية (للمضيفين الذاتيين)**
#### **الخادم (بحث قاعدة البيانات)**
- **MongoDB**:
  - يستخدم البحث النصي `$text` على `messages.content` و `conversations.title`.
  - يتطلب [فهرس نصي](https://www.mongodb.com/docs/manual/core/index-text/) (يقوم LibreChat بإعداده تلقائياً).
  - مثال على الاستعلام:
    ```javascript
    db.messages.find({ $text: { $search: "React hooks" } })
    ```
- **PostgreSQL**:
  - يستخدم البحث النصي الكامل `tsvector`.
  - مثال:
    ```sql
    SELECT * FROM messages
    WHERE to_tsvector('english', content) @@ to_tsquery('React & hooks');
    ```

#### **واجهة المستخدم (بحث واجهة المستخدم)**
- يعمل بواسطة **حالة React** + مكالمات API متأخرة إلى الخادم.
- يتم عرض النتائج كقائمة منسدلة/قائمة (مشابه للبحث في Slack أو Discord).

---
### **4. القيود وطرق الالتفاف**
#### **المشاكل المعروفة**
- **لا يوجد بحث ضبابي (fuzzy)**: الأخطاء الإملائية قد تفوت النتائج (مطابقة كلمات رئيسية صارمة).
- **لا يوجد regex/بناء جملة**: لا يمكن استخدام عوامل التشغيل `AND/OR` في واجهة المستخدم (حتى الآن).
- **بطيء على قواعد البيانات الكبيرة**: البحث النصي الكامل قد يتأخر مع وجود 10,000+ رسالة.

#### **طرق الالتفاف**
- **استخدم كلمات رئيسية**: ابحث عن مصطلحات فريدة (مثال: `"error: ENOENT"` بدلاً من `"help"`).
- **رَشِّح حسب النموذج**: بعض الإصدارات تتيح لك تصفية عمليات البحث حسب نموذج الذكاء الاصطناعي (مثال: محادثات GPT-4 فقط).
- **صدّر واستخدم grep**: للمستخدمين المتقدمين:
  ```bash
  mongodump --db librechat --collection messages --query '{"userId": "YOUR_ID"}' --out=- | jq '.' | grep "React"
  ```

---
### **5. مقارنة مع بحث ChatGPT**

| الميزة                  | LibreChat                            | ChatGPT (الويب)                    |
|-------------------------|--------------------------------------|------------------------------------|
| **النطاق**              | جميع المحادثات + الرسائل.           | فقط سجل الدردشة الحالي.            |
| **عوامل التشغيل**       | أساسي (كلمات رئيسية فقط).           | يدعم `AND`، `OR`، علامات الاقتباس. |
| **السرعة**              | تعتمد على قاعدة البيانات (قد تكون أبطأ). | مُحسَّن (أسرع للمحادثات الحديثة).  |
| **واجهة المستخدم**      | الشريط الجانبي + داخل الدردشة.      | الشريط العلوي فقط.                 |
| **استضافة ذاتية**       | نعم (أنت تتحكم في الفهرسة).         | لا (نظام مغلق).                    |

---
### **6. كيفية تحسين البحث في LibreChat**
#### **للمستخدمين**
- **استخدم عناوين وصفيّة**: أعد تسمية المحادثات (مثال: "تصحيح أخطاء Python Async 2024-05" بدلاً من "محادثة جديدة").
- **علِّم على الرسائل المهمة**: بعض الإصدارات تدعم تثبيت الرسائل المهمة.

#### **للمطورين/المضيفين الذاتيين**
- **أضف أوزاناً للفهارس**: رجّح كفة `title` على `content` في MongoDB:
  ```javascript
  db.conversations.createIndex(
    { title: "text", "messages.content": "text" },
    { weights: { title: 10, "messages.content": 1 } }
  );
  ```
- **ادمج Meilisearch/Typesense**: للحصول على بحث أسرع وضبابي (توجد إضافات مجتمعية).
- **مكّن ترقيم الصفحات**: لمجموعات النتائج الكبيرة (طلبات السحب مرحب بها!).

---
### **7. مثال على سير العمل**
1. **ابحث عن جلسة تصحيح أخطاء سابقة**:
   - ابحث عن `"TypeError: cannot read property"` → يعرض LibreChat جميع الدردشات التي تحتوي على ذلك الخطأ.
   - انقر على نتيجة → تقفز إلى الرسالة الدقيقة.

2. **انشئ فرعاً من حل**:
   - في المحادثة التي وجدتها، أنشئ فرعاً عند الرسالة التي اقترح فيها الذكاء الاصطناعي حلاً.
   - جرب نهجاً جديداً في الفرع دون أن تفقد المحادثة الأصلية.

---
### **8. الخطط المستقبلية (محتمل في إصدارات لاحقة)**
- **بحث دلالي**: استخدم التضمينات (embeddings) (مثال: عبر `sentence-transformers`) للعثور على محتوى ذي صلة.
- **عمليات بحث محفوظة**: علّق على الاستعلامات المتكررة (مثال: "جميع أخطاء Python").
- **رؤى عبر المحادثات**: "أرني جميع المرات التي سألت فيها عن Docker networking."

---
### **هل تحتاج المزيد؟**
- **هل تواجه مشكلة في عدم عمل البحث؟**
  تحقق من سجلات قاعدة البيانات الخاصة بك بحثاً عن أخطاء في الفهرس أو شغّل:
  ```bash
  # لـ MongoDB
  db.messages.getIndexes();
  db.conversations.getIndexes();
  ```
- **هل تريد المساهمة؟**
  منطق البحث موجود في:
  - الخادم: [`src/server/db`](https://github.com/danny-avila/LibreChat/tree/dev/src/server/db)
  - واجهة المستخدم: [`src/components/Chat/Sidebar`](https://github.com/danny-avila/LibreChat/tree/dev/src/components/Chat/Sidebar)