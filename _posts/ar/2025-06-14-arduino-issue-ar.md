---
audio: false
generated: true
lang: ar
layout: post
title: مشكلة أردوينو
translated: true
type: note
---

رسائل الخطأ التي تراها تشير إلى أن Arduino IDE (عبر `avrdude`) غير قادر على التواصل مع لوحة Arduino الخاصة بك لتحميل السكتش. أخطاء `stk500_recv(): programmer is not responding` و `stk500_getsync(): not in sync: resp=0x00` تشير عادةً إلى مشكلة في الاتصال بين جهاز الكمبيوتر الخاص بك و Arduino. نظرًا لأنك تستخدم `/dev/ttyUSB0` (كما هو موضح في استفسارك السابق)، فهذا يشير إلى اتصال USB-to-serial، على الأرجح لوحة Arduino Uno أو لوحة متوافقة تحتوي على شريحة USB-to-serial منفصلة (مثل CH340 أو FT232R).

إليك دليلًا خطوة بخطوة لاستكشاف الأخطاء وإصلاحها، بالإضافة إلى كيفية التحقق من السجلات ومراقبتها بمجرد نجاح التحميل.

### فهم الخطأ
- **حجم السكتش**: يستخدم السكتش 2678 بايت (8% من 32,256 بايت) و 314 بايت من الذاكرة العشوائية (15% من 2048 بايت)، وهو ما يقع ضمن حدود لوحة Arduino، لذا فإن الكود نفسه ليس هو المشكلة.
- **سبب الخطأ**: تعني أخطاء `stk500` أن `avrdude` (الأداة التي ترفع السكتش) لا يمكنها إنشاء اتصال مع bootloader لوحة Arduino. قد يكون هذا بسبب:
  - إعدادات المنفذ أو اللوحة غير صحيحة.
  - مشاكل في الاتصال المادي (الكابل، منفذ USB، أو اللوحة).
  - أذونات للملف `/dev/ttyUSB0`.
  - مشاكل في برنامج التشغيل لشريحة USB-to-serial.
  - خلل في الـ bootloader أو اللوحة.

### خطوات استكشاف الأخطاء وإصلاحها
اتبع هذه الخطوات لحل المشكلة:

1. **التحقق من إعدادات اللوحة والمنفذ**
   - في Arduino IDE:
     - انتقل إلى `Tools > Board` وتأكد من اختيار اللوحة الصحيحة (مثل "Arduino Uno" للوحة Uno أو لوحة متوافقة).
     - انتقل إلى `Tools > Port` وتأكد من اختيار `/dev/ttyUSB0`. إذا لم يكن مدرجًا، فقد لا يتم اكتشاف Arduino.
   - قم بتشغيل `ls /dev/ttyUSB*` في الطرفية لتأكيد وجود المنفذ. إذا كان مفقودًا، فهذا يعني أن النظام لم يكتشف Arduino.
   - إذا ظهرت منافذ متعددة (مثل `/dev/ttyUSB1`)، جرب كل منها.

2. **التحقق من أذونات `/dev/ttyUSB0`**
   - الناتج السابق لـ `ls -alrt /dev/ttyUSB0` أظهر `crw-rw---- 1 root dialout`، مما يعني أن فقط `root` ومجموعة `dialout` يمكنهم الوصول إلى المنفذ.
   - تأكد من أن المستخدم الخاص بك موجود في مجموعة `dialout`:
     ```bash
     groups
     ```
     إذا لم تكن `dialout` مدرجة، أضف مستخدمك:
     ```bash
     sudo usermod -a -G dialout $USER
     ```
     سجل الخروج ثم ادخل مرة أخرى (أ أعد تشغيل الجهاز) لتفعيل التغيير.
   - بدلاً من ذلك، قم بتشغيل Arduino IDE كـ root (غير موصى به على المدى الطويل):
     ```bash
     sudo arduino
     ```
   - إذا كانت الأذونات صحيحة ولكن المشكلة مستمرة، انتقل إلى الخطوات التالية.

3. **فحص الاتصالات المادية**
   - **كابل USB**: تأكد من أنك تستخدم **كابل USB بيانات**، وليس كابل شحن فقط. بعض الكابلات الرخيصة لا تدعم نقل البيانات.
   - **منفذ USB**: جرب منفذ USB مختلف على جهاز الكمبيوتر الخاص بك أو جهاز كمبيوتر مختلف.
   - **لوحة Arduino**: ابحث عن علامات الحياة (مثل مؤشر الطاقة مضاء، أو مؤشر وامض إذا كان هناك سكتش سابق يعمل). إذا كانت اللوحة لا تستجيب، فقد تكون تالفة أو غير موصولة بالطاقة.
   - **إعادة ضبط اللوحة**: اضغط على زر إعادة الضبط على لوحة Arduino لفترة وجيزة أثناء التحميل. هذا يجبر الـ bootloader على إعادة التشغيل، مما يمكن أن يساعد في المزامنة مع `avrdude`.

4. **التحقق من برامج تشغيل USB-to-Serial**
   - نظرًا لأنك تستخدم Linux و `/dev/ttyUSB0`، فمن المرجح أن لوحتك تستخدم شريحة USB-to-serial مثل CH340/CH341 أو FT232R أو ATmega16U2.
   - تحقق من تثبيت برنامج التشغيل:
     ```bash
     lsmod | grep usbserial
     ```
     يجب أن ترى وحدات مثل `ch341` أو `ftdi_sio` أو ما شابه.
   - إذا لم يتم اكتشاف المنفذ، قم بتثبيت برامج التشغيل للشرائح الشائعة:
     ```bash
     sudo apt-get install linux-modules-extra-$(uname -r)
     ```
   - لشرائح CH340/CH341، قد تحتاج إلى برنامج تشغيل محدد. تحقق مما إذا تم التعرف على الجهاز:
     ```bash
     dmesg | grep usb
     ```
     ابحث عن أسطر تذكر `ch341` أو `ftdi` أو جهاز USB. إذا لم يظهر شيء، فقد لا تكون الشريحة مدعومة أو أن اللوحة/الكابل معطلة.

5. **إجبار وضع Bootloader**
   - تدخل بعض لوحات Arduino وضع bootloader عند الضغط على زر إعادة الضبط مرتين بسرعة. جرب هذا:
     1. اضغط على زر إعادة الضبط مرتين (قد ترى مؤشر LED الموجود على اللوحة يومض بسرعة).
     2. ابدأ التحميل في Arduino IDE فورًا.
   - يضمن هذا أن الـ bootloader نشط أثناء محاولة التحميل.

6. **اختبار بسكتش بسيط جدًا**
   - لاستبعاد المشاكل المتعلقة بالسكتش السابق، حاول تحميل سكتش بسيط جدًا:
     ```cpp
     void setup() {
       Serial.begin(9600);
       pinMode(LED_BUILTIN, OUTPUT);
     }
     void loop() {
       Serial.println("Test");
       digitalWrite(LED_BUILTIN, HIGH);
       delay(1000);
       digitalWrite(LED_BUILTIN, LOW);
       delay(1000);
     }
     ```
   - إذا تم تحميل هذا بنجاح، فقد تكون المشكلة خاصة بالسكتش السابق (غير مرجح نظرًا لأن الحجم مقبول).

7. **التحقق من مشاكل العتاد**
   - إذا فشلت الخطوات أعلاه، فقد يكون bootloader Arduino أو شريحة USB-to-serial تالفة أو أن اللوحة قد تكون معطلة.
   - اختبر بلوحة Arduino أخرى إذا كانت متوفرة.
   - إذا كنت تشك في وجود مشكلة في الـ bootloader، فقد تحتاج إلى إعادة flash الـ bootloader باستخدام مبرمج ISP أو لوحة Arduino أخرى كـ ISP.

### عرض السجلات بعد التحميل الناجح
بمجرد حل مشكلة التحميل وتحويل سكتش Fibonacci المعدل (من الرد السابق)، يمكنك عرض السجلات:

1. **Arduino IDE Serial Monitor**:
   - بعد التحميل، انتقل إلى `Tools > Serial Monitor` أو اضغط على `Ctrl+Shift+M`.
   - عيّن معدل الباود إلى **9600** (ليطابق `Serial.begin(9600)` في الكود).
   - يجب أن ترى ناتجًا مشابهًا لما يلي:
     ```
     Starting Fibonacci LED Blink...
     Index: 0, Delay: 0s, Direction: Forward
     Index: 1, Delay: 1s, Direction: Forward
     ...
     ```

2. **برنامج الطرفية (minicom أو screen)**:
   - استخدم `minicom`:
     ```bash
     minicom -D /dev/ttyUSB0 -b 9600
     ```
     اخرج باستخدام `Ctrl+A`، ثم `X`.
   - أو استخدم `screen`:
     ```bash
     screen /dev/ttyUSB0 9600
     ```
     اخرج باستخدام `Ctrl+A`، ثم `\`.
   - تأكد من أن المستخدم الخاص بك في مجموعة `dialout` لتجنب مشاكل الأذونات.

3. **التحقق من المنفذ**:
   - إذا لم يعمل `/dev/ttyUSB0`، تحقق من `dmesg` للعثور على المنفذ الصحيح:
     ```bash
     dmesg | grep tty
     ```
     ابحث عن أسطر مثل `[1234.567890] usb 1-1: ch341-uart converter now attached to ttyUSB0`.

### مثال على ناتج السجلات
إذا نجح التحميل، سترى سجلات مثل:
```
Starting Fibonacci LED Blink...
Index: 0, Delay: 0s, Direction: Forward
Index: 1, Delay: 1s, Direction: Forward
Index: 2, Delay: 1s, Direction: Forward
Index: 3, Delay: 2s, Direction: Forward
...
Switching to Backward
Index: 7, Delay: 13s, Direction: Backward
...
```

### نصائح إضافية
- **ناتج التحميل المفصل**: في Arduino IDE، انتقل إلى `File > Preferences`، حدد "Show verbose output during: Upload"، وحاول التحميل مرة أخرى. قد يقدم هذا أدلة أكثر حول سبب الفشل.
- **لوحة مستنسخة أو شريحة غير قياسية**: إذا كنت تستخدم Arduino غير رسمي (مثل لوحة تحتوي على شريحة CH340)، فتأكد من تثبيت برامج التشغيل وأن نوع اللوحة مطابق (مثل اختيار "Arduino Uno" حتى للوحات المستنسخة في بعض الحالات).
- **توقيت إعادة الضبط**: إذا كانت اللوحة تعاني من مشكلة في الإعادة التلقائية للضبط، اضغط على زر إعادة الضبط يدويًا عندما تظهر IDE "Uploading…" في شريط الحالة.

### إذا استمرت المشكلة
إذا لم تنجح أي من هذه الخطوات، يرجى تقديم:
- طراز لوحة Arduino الدقيق (مثل Uno، Mega، أو لوحة مستنسخة).
- ناتج الأمر `dmesg | grep usb` بعد توصيل Arduino.
- ما إذا كان مؤشر الطاقة على اللوحة أو أي مؤشرات LED أخرى مضاءة.
- نتائج تجربة كابل USB أو جهاز كمبيوتر مختلف.

هذا سيساعد في تحديد ما إذا كانت المشكلة متعلقة بالعتاد، أو برنامج التشغيل، أو التكوين. في الوقت الحالي، ابدأ بالتحقق من المنفذ، والأذونات، والكابل، لأن هذه هي الأسباب الأكثر شيوعًا.

---

استنادًا إلى السجلات التي قدمتها، يبدو أنك تواجه مشاكل في تصحيح الأخطاء وتحويل السكتشات إلى لوحة Arduino الخاصة بك باستخدام Arduino IDE على Linux. إليك دليلًا خطوة بخطوة لاستكشاف هذه المشكلات وإصلاحها:

---

### **1. معالجة أخطاء التصحيح**
- **المشكلة**: تظهر السجلات بشكل متكرر "Debugging is not supported" للوحة `arduino:avr:uno`.
- **الشرح**: لوحة Arduino Uno لا تدعم ميزات التصحيح في Arduino IDE. يتوفر التصحيح فقط على لوحات محددة مثل Arduino Zero أو سلسلة MKR.
- **الحل**:
  - إذا كنت تحاول تصحيح السكتش الخاص بك، فستحتاج إلى التبديل إلى لوحة تدعم التصحيح (مثل Arduino Zero أو سلسلة MKR).
  - إذا لم تكن تحاول التصحيح عمدًا وتريد فقط تحميل سكتشك، فإن هذا الخطأ لن يمنع التحميل. يمكنك تجاهله والتركيز على مشاكل التحميل أدناه. تأكد من أنك لا تضغط عن طريق الخطأ على خيار "Start Debugging" في IDE.

---

### **2. حل مشاكل اكتشاف منفذ التحميل**
- **المشكلة**: تظهر السجلات "Upload port detection failed" وأخطاء "User abort"، مما يشير إلى أن IDE لا يمكنه اكتشاف أو الوصول إلى المنفذ التسلسلي (`/dev/ttyUSB0`) بشكل موثوق.
- **الشرح**: قد يكون هذا بسبب مشاكل في الأذونات، أو إعدادات غير صحيحة، أو مشاكل في الاتصال المادي، وهي شائعة على أنظمة Linux.
- **الحلول**:

#### **التحقق من أذونات `/dev/ttyUSB0`**
- على Linux، تحتاج Arduino IDE إلى إذن للوصول إلى المنافذ التسلسلية، التي تكون مملوكة عادةً لمجموعة `dialout`.
- **الخطوات**:
  1. تحقق مما إذا كان المستخدم الخاص بك في مجموعة `dialout`:
     ```bash
     groups
     ```
     ابحث عن `dialout` في الناتج.
  2. إذا لم تكن مدرجة، أضف مستخدمك إلى المجموعة:
     ```bash
     sudo usermod -a -G dialout $USER
     ```
  3. سجل الخروج ثم ادخل مرة أخرى (أو أعد التشغيل) لتفعيل التغيير.
  4. أعد توصيل Arduino وتحقق مما إذا ظهر `/dev/ttyUSB0` في IDE تحت `Tools > Port`.

#### **التحقق من إعدادات اللوحة والمنفذ**
- تأكد من تكوين IDE بشكل صحيح:
  - انتقل إلى `Tools > Board` وحدد **Arduino Uno** (أو اللوحة الصحيحة إذا كنت تستخدم لوحة مختلفة).
  - انتقل إلى `Tools > Port` وحدد **/dev/ttyUSB0**. إذا لم تكن مدرجة، انتقل إلى الخطوة التالية.

#### **فحص الاتصالات المادية**
- **الخطوات**:
  1. تأكد من أن Arduino متصل عبر **كابل USB بيانات** (وليس كابل شحن فقط). بعض الكابلات توفر الطاقة فقط ولن تعمل للتحميل.
  2. جرب منفذ USB مختلف على جهاز الكمبيوتر الخاص بك أو كابل مختلف لاستبعاد مشاكل العتاد.
  3. تأكد من أن Arduino موصول بالطاقة (يجب أن يكون مؤشر الطاقة مضاءًا).
  4. قم بتشغيل هذا الأمر للتحقق من اكتشاف المنفذ:
     ```bash
     ls /dev/ttyUSB*
     ```
     إذا لم يظهر `/dev/ttyUSB0`، فهذا يعني أن النظام لا يتعرف على اللوحة (انظر "التحقق من مشاكل برنامج التشغيل" أدناه).

---

### **3. استكشاف أخطاء فشل التحميل وإصلاحها**
- **المشكلة**: تشير رسائل "User abort" إلى أن عملية التحميل يتم مقاطعتها أو فشلها في المزامنة مع اللوحة.
- **الحلول**:

#### **إعادة الضبط اليدوي أثناء التحميل**
- في بعض الأحيان يحتاج bootloader الخاص بـ Arduino إلى إعادة ضبط يدوية للمزامنة مع IDE.
- **الخطوات**:
  1. في IDE، انقر على زر **Upload** (أيقونة السهم الأيمن).
  2. تمامًا عندما تتغير رسالة "Compiling sketch..." إلى "Uploading..."، اضغط على زر **إعادة الضبط** على لوحة Arduino ثم اتركه.
  3. هذا يضمن أن اللوحة جاهزة لاستقبال السكتش.

#### **التحقق من مشاكل برنامج التشغيل**
- إذا لم يتم اكتشاف `/dev/ttyUSB0`، فقد تكون هناك مشكلة في برنامج التشغيل، خاصة مع اللوحات المستنسخة التي تستخدم شرائح مثل CH340/CH341 بدلاً من الشريحة القياسية FTDI أو ATmega16U2.
- **الخطوات**:
  1. بعد توصيل Arduino، قم بتشغيل:
     ```bash
     dmesg | grep usb
     ```
     ابحث عن أسطر تذكر `ch341` أو `ftdi` أو برامج تشغيل USB-to-serial مشابهة.
  2. إذا لم يظهر شيء، أو إذا كان هناك خطأ، قد تحتاج إلى تثبيت برامج التشغيل:
     - لشرائح CH340/CH341 (شائعة في اللوحات المستنسخة):
       ```bash
       sudo apt-get install linux-modules-extra-$(uname -r)
       ```
     - أعد توصيل Arduino وتحقق مرة أخرى باستخدام `ls /dev/ttyUSB*`.
  3. إذا لم يتم اكتشاف المنفذ بعد، فقد تكون لوحتك أو كابل USB معطلاً.

#### **جرب سكتشًا بسيطًا جدًا**
- اختبر بسكتش بسيط لعزل المشكلة:
  - افتح IDE، انتقل إلى `File > Examples > 01.Basics > Blink`.
  - حمّل هذا السكتش. إذا عمل، فقد تكون المشكلة في السكتش الأصلي الخاص بك.

---

### **4. نصائح إضافية لاستكشاف الأخطاء وإصلاحها**
- **تفعيل الناتج المفصل**:
  - انتقل إلى `File > Preferences` في IDE، وحدد **Show verbose output during: Upload**.
  - هذا يوفر رسائل خطأ أكثر تفصيلاً عند محاولة التحميل، مما يمكن أن يساعد في تحديد المشكلة بدقة.
- **مراقبة الناتج التسلسلي**:
  - بعد التحميل الناجح، استخدم Serial Monitor (`Tools > Serial Monitor`) للتحقق من ناتج السكتش الخاص بك (مثل جمل `Serial.println`).
  - بدلاً من ذلك، استخدم برنامج طرفية:
    ```bash
    minicom -D /dev/ttyUSB0 -b 9600
    ```
    طابق معدل الباود (مثل 9600) مع الموجود في `Serial.begin()` في سكتشك.

---

### **ملخص للإصلاحات**
- **التصحيح**: Arduino Uno لا يدعم التصحيح. استخدم لوحة مدعومة إذا كنت بحاجة إلى التصحيح، أو تجاهل هذا الخطأ للتحميل.
- **الأذونات**: أضف المستخدم الخاص بك إلى مجموعة `dialout` للوصول إلى `/dev/ttyUSB0`.
- **اكتشاف المنفذ**: تأكد من إدراج `/dev/ttyUSB0` تحت `Tools > Port` وأن اللوحة متصلة ماديًا.
- **مزامنة التحميل**: اضغط على زر إعادة الضبط أثناء التحميل لمساعدة الـ bootloader على المزامنة.

إذا اتبعت هذه الخطوات ولا تزال تواجه مشاكل، جرب لوحة Arduino مختلفة أو كابل USB مختلف، أو اطلب المساعدة في منتديات Arduino مع تفاصيل عن إعدادك (مثل نوع اللوحة، توزيعة Linux، والأخطاء الدقيقة). دعني أعرف كيف تسير الأمور