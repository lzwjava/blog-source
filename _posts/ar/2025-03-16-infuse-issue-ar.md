---
audio: false
generated: true
lang: ar
layout: post
title: قضية الحقن
translated: true
type: note
---

يشير خطأ "فشل فتح تيار الإدخال في demuxing stream" في تطبيق Infuse عادةً إلى أن التطبيق لا يمكنه الوصول إلى ملف الفيديو الذي تحاول تشغيله أو معالجته بشكل صحيح. نظرًا لأنك تبث ملفات `.mkv` من خادم Nginx الخاص بك (مثل `http://192.168.1.27/movies/yourfile.mkv`) وهي تعمل مع VLC ولكن ليس مع Infuse، فقد يكون السبب في المشكلة هو مشاكل في الشبكة، أو توافق الملف، أو خصوصيات متعلقة بـ Infuse. إليك كيفية استكشاف الأخطاء وإصلاحها:

### 1. التحقق من اتصال الشبكة
غالبًا ما يظهر تطبيق Infuse هذا الخطأ بسبب انقطاعات في الشبكة أو أخطاء في التكوين.
- **اختبار إمكانية الوصول**: من جهاز iPad الخاص بك (أو حيثما يعمل Infuse)، تأكد من أن الرابط يعمل:
  - افتح Safari وانتقل إلى `http://192.168.1.27/movies/`. يجب أن ترى قائمة الملفات.
  - انقر على `yourfile.mkv` — قد لا يعمل التشغيل، ولكن تأكد من أن الرابط يمكن الوصول إليه.
- **اختبار Ping للخادم**: على جهاز iPad، استخدم تطبيقًا مثل **Network Ping Lite** (مجاني في متجر التطبيقات) لاختبار ping للعنوان `192.168.1.27`. إذا فشل، تحقق من اتصال Wi-Fi أو جدار الحماية للخادم.
- **فحص جدار الحماية**: على خادم Ubuntu الخاص بك:
  ```bash
  sudo ufw status
  ```
  تأكد من أن المنفذ 80 مفتوح (`80/tcp ALLOW`). إذا لم يكن كذلك:
  ```bash
  sudo ufw allow 80
  sudo systemctl restart nginx
  ```

### 2. إعادة تشغيل Infuse والجهاز
يمكن أن تسبب الأعطال المؤقتة هذا الخطأ.
- **أغلق Infuse**: اضغط مرتين على زر الصفحة الرئيسية (أي اسحب من أسفل على أجهزة iPad الأحدث) وأغلق تطبيق Infse.
- **أعد فتحه**: شغّل تطبيق Infse وحاول البث مرة أخرى.
- **أعد تشغيل iPad**: اضغط مع الاستمرار على زر الطاقة، ثم اسحب لإيقاف التشغيل، ثم أعد التشغيل. اختبر مرة أخرى.

### 3. التحقق من توافق الملف
على الرغم من أن Infse يدعم `.mkv`، إلا أن الخطأ قد يكون مرتبطًا بـ codecs الملف أو هيكله.
- **اختبر ملفًا آخر**: انقل ملف `.mkv` صغيرًا يعمل بشكل معروف (مشفر بفيديو H.264 وصوت AAC) إلى `/var/www/movies/`:
  ```bash
  sudo mv /path/to/testfile.mkv /var/www/movies/
  sudo chown www-data:www-data /var/www/movies/testfile.mkv
  sudo chmod 644 /var/www/movies/testfile.mkv
  ```
  حاول بث `http://192.168.1.27/movies/testfile.mkv` في Infuse.
- **فحص الـ Codec**: نظرًا لأن VLC يشغله، فمن المرجح أن الملف قابل للبث، ولكن قد يواجه Infuse صعوبة مع بعض الـ codecs النادرة (مثل VP9، Opus). استخدم VLC على جهاز Mac للفحص:
  - افتح ملف `.mkv`، اضغط على `Cmd + I` (من Tools > Codec Information)، ولاحظ video/audio codecs.
  - إذا لم يكن H.264/AAC، أعد التشفير باستخدام HandBrake (مجاني، handbrake.fr):
    - حمّل ملف `.mkv`، واختر فيديو "H.264 (x264)" وصوت "AAC"، ثم قم بالتحويل.

### 4. ضبط إعدادات Nginx
قد يحتاج Infuse إلى رؤوس أو إعدادات محددة لضمان بث سلس.
- **تحديث التكوين**: حرر ملف Nginx الخاص بك (مثل `/etc/nginx/sites-enabled/default`):
  ```nginx
  server {
      listen 80;
      server_name 192.168.1.27 localhost;

      location /movies/ {
          alias /var/www/movies/;
          autoindex on;
          add_header Accept-Ranges bytes;  # يضمن عمل طلبات النطاق
          add_header Content-Disposition "inline";  # يساعد في البث
      }
  }
  ```
- **إعادة التحميل**:
  ```bash
  sudo nginx -t
  sudo systemctl reload nginx
  ```
- **السبب**: يضمن `Accept-Ranges` أن Infuse يمكنه طلب أجزاء من الملف (أمر بالغ الأهمية للبث).

### 5. إرسال تقرير تشخيصي
يقترح مطورو Infuse ذلك للمشاكل المستمرة.
- **الخطوات**:
  1. في Infuse، انتقل إلى **Settings > General**.
  2. انقر على **Submit Diagnostic Report**.
  3. لاحظ الرمز الذي يعطيك إياه.
  4. قم بزيارة [منتدى Firecore المجتمعي](https://community.firecore.com/)، وانشر الرمز، وصف إعداداتك (Nginx، `.mkv`، البث عبر HTTP).
- **السبب**: يمكنهم تحديد ما إذا كانت المشكلة بسبب خطأ أو مشكلة في التكوين.

### 6. حل بديل
إذا استمر فشل Infuse:
- **استخدم VLC**: التزم باستخدام VLC for Mobile على جهاز iPad (لأنه يعمل بموثوقية).
- **غيّر التطبيق**: جرب **nPlayer** أو **PlayerXtreme** (من متجر التطبيقات) مع نفس الرابط.

### السبب المحتمل
نظرًا لأن VLC يبث الملف بشكل جيد، فمن المحتمل أن السبب هو عطل بسيط في الشبكة أو المعالجة الأكثر صرامة من قبل Infuse لتيار HTTP. عادةً ما يحل تعديل Nginx (الخطوة 4) واختبار ملف (الخطوة 3) هذه المشكلة. إذا لم يحل، فإن التقرير التشخيصي سيوضح الأمر.

أخبرني بما تراه بعد تجربة هذه الحلول — خاصة أي أخطاء في السجلات أو رمز التقرير التشخيصي!