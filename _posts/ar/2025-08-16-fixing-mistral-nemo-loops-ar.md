---
audio: false
generated: true
image: false
lang: ar
layout: post
title: إصلاح حلقات التكرار في ميسترال نيمو
translated: true
type: note
---

عندما يُكرر نموذج مثل **Mistral-Nemo** نفسه باستمرار، يكون ذلك عادةً عرضًا على وجود **حلقة توليد** — وهي دورة تغذية مرتدة في مخرجات النموذج.
يمكن أن يحدث هذا لعدة أسباب تقنية:

---

**1. إشارات "توقف" ضعيفة في السياق**
إذا لم يُعطِ المحفز أو المحادثة إشارة واضحة للنموذج حول موعد التوقف أو تغيير الموضوع، فقد يستمر في إنتاج رموز مماثلة لأن هذا هو الاستمرار الإحصائي الأكثر ترجيحًا الذي "يراه".

---

**2. حلقات التغذية المرتدة على مستوى الرمز**
تتنبأ نماذج اللغة برمز واحد في كل مرة، حيث يعتمد كل تنبؤ على الرموز السابقة.
إذا كان التسلسل الأخير يحتمل تكرار نفسه بشدة (مثل `"educational educational"`)، فقد يقع النموذج في حلقة تكرار عالية الثقة لأن كل تكرار يزيد من احتمالية القيام بذلك مرة أخرى.

---

**3. تنوع منخفض في إعدادات فك الترميز**
إذا كانت **درجة الحرارة** منخفضة (مثال: 0–0.2) وكان أخذ العينات **top-k/top-p** مقيدًا للغاية، فسيختار النموذج الرمز الأكثر ترجيحًا في كل مرة، مما يعزز الحلقات بدلاً من الخروج منها.
من ناحية أخرى، يمكن لدرجة الحرارة المرتفعة جدًا أن تسبب أيضًا ضوضاء عشوائية ولكنها لا تزال متكررة.

---

**4. عناصر صناعية في المحفز**
إذا كان النص المدخل يحتوي بالفعل على تكرار جزئي، يمكن للنموذج أن "يتمسك به"، معتقدًا أنه خيار أسلوبي أو تأكيد مهم — لذا يعكسه ويوسعه.

---

**5. قيود النموذج أو تحيز الضبط الدقيق**
بعض النماذج المفتوحة، خاصة إذا تم ضبطها على بيانات محادثة أو بيانات اصطناعية، قد تكون تعلمت أنماطًا حيث يكون التكرار مُمَثَّلًا بشكل مفرط (للتأكيد أو التعزيز)، مما يجعلها أكثر عرضة لهذا في الحالات المتطرفة.

---

**6. عدم تطبيق عقوبة التكرار**
بعض الأطر (مثل Hugging Face `transformers`) تسمح بعقوبة التكرار `repetition_penalty` أو `frequency_penalty` لثني النموذج عن إعادة استخدام نفس الرموز.
إذا تم ضبط هذه على `1.0` (بدون عقوبة)، فلا توجد "تكلفة" على النموذج للتكرار.

---

**كيفية تقليل هذا السلوك في Mistral-Nemo**

* أضف **عقوبة تكرار** (1.1–1.3)
* زِد **top-k** (مثال: 50–100) أو اضبط **top-p** (0.9–0.95)
* ارفع **درجة الحرارة** قليلاً إذا كانت منخفضة جدًا (0.7–0.9)
* تجنب إعطائه عبارات مكررة في المحفز ما لم يكن ذلك ضروريًا
* قدّم **تعليمات واضحة** أو تسلسل توقف صريح

---

إذا كنت ترغب، يمكنني أن أعطيك **مثال تكوين خطوة بخطوة** لـ Mistral-Nemo يقلل من هذه الحلقات.
بهذه الطريقة، يمكنك الاختبار مباشرة وملاحظة الفرق.