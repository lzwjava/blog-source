---
audio: false
generated: true
image: false
lang: ar
layout: post
model: x-ai/grok-4-fast
title: إصلاح عدم تطابق إصدار برنامج تشغيل إنفيديا
translated: true
type: note
---

### فهم الخطأ
أمر `nvidia-smi` يفشل بسبب عدم تطابق الإصدار بين مشغل kernel الخاص بـ NVIDIA (المحمّل في نواة نظام التشغيل) ومكونات مساحة المستخدم NVML (مكتبة إدارة NVIDIA). يحدث هذا غالبًا بعد تحديث النواة، أو تثبيت جزئي للمشغل، أو ترقية النظام دون إعادة تثبيت كاملة للمشغل. إصدار NVML المبلغ عنه (535.274) يشير إلى أنك تستخدم فرع مشغل NVIDIA حديث نسبيًا (على الأرجح من السلسلة 535)، لكن وحدة kernel غير متوافقة.

لا تقلق—يمكن إصلاح هذا دون فقدان البيانات. فيما يلي خطوات استكشاف الأخطاء وإصلاحها خطوة بخطوة، بدءًا من أبسطها.

### الإصلاحات السريعة (جرب هذه أولاً)
1. **أعد تشغيل نظامك**
   السبب الأكثر شيوعًا هو وجود وحدة kernel قديمة. إعادة التشغيل تعيد تحميل كل شيء بشكل نظيف.
   ```
   sudo reboot
   ```
   بعد إعادة التشغيل، شغّل `nvidia-smi` مرة أخرى. إذا عمل، فقد انتهيت!

2. **تحقق من إصدارات المشغل والنواة الحالية**
   تحقق مما هو مثبت:
   ```
   # تحقق من إصدار مشغل kernel
   cat /proc/driver/nvidia/version

   # تحقق من وحدات kernel المحملة
   lsmod | grep nvidia

   # تحقق من إصدار kernel الحالي
   uname -r
   ```
   قارن إصدار المشغل هنا مع 535.274. إذا لم يتطابقا (مثلاً، kernel يظهر 535.x ولكن x ≠ 274)، تابع لإعادة التثبيت.

### الحل الكامل: إعادة تثبيت مشغلات NVIDIA
إذا لم تساعد إعادة التشغيل، أعد تثبيت المشغلات لمزامنة كل شيء. هذا يفترض أنك على Ubuntu/Debian (شائع في إعدادات nanoGPT؛ عدّل للتوزيعات الأخرى مثل Fedora).

#### الخيار 1: عبر مدير الحزم (موصى به للاستقرار)
1. **إزالة المشغلات الحالية** (يزيل حالات عدم التطابق):
   ```
   sudo apt update
   sudo apt purge 'nvidia*'
   sudo apt autoremove
   sudo rm -rf /usr/lib/nvidia*  # اختياري: نظف البقايا
   ```

2. **أعد التشغيل لمسح الوحدات**:
   ```
   sudo reboot
   ```

3. **ثبّت المشغلات المطابقة**:
   بما أن NVML الخاص بك هو 535.274، ثبّت السلسلة 535 (أو أحدث إذا كان متاحًا). تحقق من موقع NVIDIA لبطاقتك الرسومية، ولكن للسلسلة 535:
   ```
   sudo apt install nvidia-driver-535 nvidia-utils-535
   ```
   (استبدل باسم الحزمة في توزيعك إذا لزم الأمر، مثلاً `dnf` على Fedora.)

4. **أعد التشغيل وتحقق**:
   ```
   sudo reboot
   nvidia-smi  # يجب أن يعمل الآن
   ```

#### الخيار 2: مباشرة من NVIDIA (للإصدارات الأحدث/المخصصة)
1. حمّل ملف التثبيت 535.274 من [أرشيف NVIDIA](https://www.nvidia.com/Download/driverResults.aspx/227xxx/en-us/) (ابحث عن بطاقتك الرسومية و 535.274).
   ```
   wget https://us.download.nvidia.com/XFree86/Linux-x86_64/535.274.05/NVIDIA-Linux-x86_64-535.274.05.run
   chmod +x NVIDIA-Linux-x86_64-535.274.05.run
   ```

2. **أوقف مدير العرض** (التبديل إلى وحدة التحكم):
   ```
   sudo systemctl stop gdm  # أو lightdm/sddm
   sudo telinit 3  # أو Ctrl+Alt+F3 للتبديل إلى TTY
   ```

3. **ثبّت**:
   ```
   sudo ./NVIDIA-Linux-x86_64-535.274.05.run --no-questions
   ```
   اتبع التعليمات؛ قد يحذرك من عدم التطابق—تابع.

4. **أعد التشغيل**:
   ```
   sudo reboot
   ```

### إذا استمرت المشاكل
- **هل التمهيد الآمن مفعل؟** عطّله في BIOS/UEFI، لأنه يمنع وحدات kernel غير الموقعة.
- **هل هناك عدم تطابق في kernel؟** إذا قمت بتحديث kernel مؤخرًا، شغّل النظام باستخدام الإصدار القديم عبر GRUB (اضغط على Shift أثناء التمهيد) وأعد تثبيت المشغلات.
- **سجلات للبحث عن أدلة**: تحقق من `dmesg | grep nvidia` أو `/var/log/Xorg.0.log` للبحث عن أخطاء.
- **مشكلة متعلقة ببطاقة الرسوميات؟** شغّل `lspci | grep -i nvidia` لتأكيد اكتشاف بطاقتك الرسومية.

بعد الإصلاح، يجب أن ترى ناتجًا مثل استخدام الذاكرة ووحدة المعالجة الرسومية، إلخ، في `nvidia-smi`. إذا كنت تقوم بتدريب نماذج في nanoGPT، فهذا سيزيل العائق عن CUDA. إذا شاركت المزيد من التفاصيل (مثل التوزيعة، طراز بطاقة الرسوميات، أو ناتج فحوصات الإصدار)، يمكنني تحسين هذا!