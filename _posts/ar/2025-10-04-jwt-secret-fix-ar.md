---
audio: false
generated: true
image: false
lang: ar
layout: post
model: x-ai/grok-4-fast
title: إصلاح خطأ سر JWT
translated: true
type: note
---

### إصلاح خطأ JWT Secret في LibreChat

تشير السجلات إلى أن واجهة البرمجة التبدأ في التشغيل ولكنها تتعطل بسبب فقدان سر JWT: `JWTStrategy تتطلب سرًا أو مفتاحًا`. هذه مشكلة إعداد شائعة في LibreChat—حيث تستخدم الواجهة الخلفية JWT (رموز الويب JSON) للمصادقة، وبدون مفتاح سري، لا يمكنها تهيئة الإستراتيجية. واجهة برمجة تطبيقات RAG، والأذونات، والخدمات الأخرى تعمل بشكل جيد، لكن هذا الخطأ يمنع واجهة البرمجة الرئيسية من البدء بالكامل، مما يمنع الوصول إلى http://localhost:3080.

#### الإصلاح السريع: تعيين JWT_SECRET
1. **إنشاء سر آمن**:
   - شغّل هذا الأمر لإنشاء سلسلة عشوائية مكونة من 32 حرفًا أو أكثر (استخدمها كـ JWT_SECRET الخاص بك):
     ```
     openssl rand -base64 32
     ```
     مثال على الناتج: `a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6`

2. **تحديث ملف `.env` الخاص بك**:
   - افتح `.env` (في المجلد الجذري لمشروع LibreChat الخاص بك).
   - أضف أو أزل التعليق عن هذا السطر (استبدل بالسر الذي أنشأته):
     ```
     JWT_SECRET=your_generated_secret_here
     ```
   - إذا كان موجودًا بالفعل لكنه فارغ/معلق، فقط املأه.
   - احفظ الملف.

3. **إعادة تشغيل الخدمات**:
   ```
   docker compose down
   docker compose up -d
   ```
   - راقب السجلات: `docker logs -f api` (أو `docker logs -f librechat_api` إذا كان الاسم مختلفًا).
   - ابحث عن بدء تشغيل ناجح بدون خطأ JWT. يجب أن يسجل شيئًا مثل "Server running on port 3080".

#### التحقق من العمل
- بعد إعادة التشغيل، تحقق من الحاويات قيد التشغيل:
  ```
  docker ps
  ```
  - حاوية `api` يجب أن تكون حالة "مرفوعة" وتعرض المنفذ 3080.
- اختبر الوصول: افتح http://localhost:3080 في متصفحك. يجب أن ترى صفحة تسجيل الدخول/الإعداد الخاصة بـ LibreChat.
- إذا كانت لا تزال هناك مشاكل، تتبع السجلات للبحث عن أخطاء جديدة: `docker logs api`.

#### ملاحظات أخرى من السجلات
- **تكوين قديم**: أنت تستخدم الإصدار v1.2.1، لكن الإصدار v1.3.0 متاح. بعد إصلاح JWT، راجع [سجل التغييرات](https://www.librechat.ai/changelog) للاطلاع على الميزات الجديدة (مثل خيارات المصادقة الأفضل). قم بالتحديث عن طريق سحب أحدث الصور: `docker compose pull`.
- **Turnstile معطل**: جيد للتطوير المحلي؛ قم بتشغيله لاحقًا لـ CAPTCHA في بيئة الإنتاج.
- **تحذيرات UID/GID**: إذا استمرت، عيّنها كما ذكرت سابقًا لتجنب مشكلات الأذونات المستقبلية.

هذا يجب أن يجعلك تعمل — JWT_SECRET مطلوب لنقاط نهاية المصادقة. إذا أظهرت السجلات خطأً مختلفًا بعد الإصلاح، الصقها هنا.

[متغيرات بيئة LibreChat](https://www.librechat.ai/docs/configuration/dotenv#jwt_secret)  
[مشاكل Docker الشائعة](https://github.com/danny-avila/LibreChat/issues?q=is%3Aissue+is%3Aopen+label%3Adocker)