---
audio: false
generated: true
lang: ar
layout: post
title: لماذا تختار نيتي
translated: true
type: note
---

نتي هو إطار عمل شبكي قوي ومفتوح المصدر يعمل بالأحداث غير المتزامنة لتطبيقات الجافا. يُستخدم على نطاق واسع لبناء تطبيقات شبكية عالية الأداء وقابلة للتوسع وسهلة الصيانة. دعني أوضح لك ما يمكنك استخدام نيتي من أجله وكيف يُطبق:

### ما الذي يمكنك استخدام نيتي من أجله؟
يُبسط نيتي تطوير التطبيقات الشبكية من خلال توفير أساس قوي لمعالجة مهام الشبكات منخفضة المستوى. إليك بعض حالات الاستخدام الرئيسية:

1. **بناء الخوادم والعملاء**:
   - يمكن استخدام نيتي لإنشاء خوادم مخصصة (مثل خوادم HTTP أو WebSocket أو TCP أو UDP) وعملاء يتواصلون عبر الشبكة.
   - مثال: خادم ويب عالي الأداء أو خادم دردشة فورية.

2. **تنفيذ البروتوكولات**:
   - يدعم تنفيذ البروتوكولات القياسية (مثل HTTP و HTTPS و FTP و SMTP) والبروتوكولات المخصصة المصممة لتلبية احتياجات محددة.
   - مثال: خادم لعبة يستخدم بروتوكولًا ثنائيًا مخصصًا للتواصل السريع بين الخادم والعميل.

3. **التطبيقات الفورية**:
   - طبيعة نيتي غير المتزامنة تجعلها مثالية للتطبيقات التي تتطلب زمن انتقال منخفض وإنتاجية عالية، مثل أنظمة المراسلة وخدمات البث المباشر أو تدفقات البيانات الحية.
   - مثال: منصة تداول أسهم تدفع التحديثات الفورية للعملاء.

4. **الخوادم الوسيطة (Proxy Servers)**:
   - يمكنك بناء خدمات وسيطة مثل موازنات الحمل (load balancers) أو الخوادم الوسيطة العكسية (reverse proxies) أو خوادم التخزين المؤقت الوسيطة (caching proxies).
   - مثال: خادم وسيط عكسي لتوزيع الحركة الواردة على عدة خوادم خلفية.

5. **إنترنت الأشياء (IoT) والأنظمة المضمنة**:
   - تصميم نيتي خفيف الوزن وفعال يناسب البيئات محدودة الموارد، مما يتيح التواصل بين أجهزة إنترنت الأشياء والخوادم.
   - مثال: نظام أتمتة منزلي حيث تبلغ الأجهزة عن بيانات المستشعرات.

6. **نقل الملفات**:
   - يمكنه التعامل مع نقل الملفات الكبيرة بكفاءة عبر الشبكة.
   - مثال: تطبيق مشاركة ملفات من نظير إلى نظير (peer-to-peer).

7. **البرمجيات الوسيطة (Middleware) وأُطُر العمل**:
   - غالبًا ما يتم تضمين نيتي في أُطُر عمل أو برمجيات وسيطة أكبر (مثل JBoss أو Vert.x أو Apache Cassandra) للتعامل مع مهام الشبكات.

### كيف يعمل نيتي في التطبيقات؟
ينحي نيتي تعقيدات الإدخال/الإخراج غير المُعيق (NIO) في جافا جانبًا ويوفر واجهة برمجة تطبيقات (API) عالية المستوى أسهل في الاستخدام. إليك كيفية تطبيقه عادةً:

1. **المكونات الأساسية**:
   - **القناة (Channel)**: تمثل اتصالاً (مثل مقبس). يستخدم نيتي القنوات لإدارة الاتصال.
   - **حلقة الأحداث (EventLoop)**: تتعامل مع عمليات الإدخال/الإخراج بشكل غير متزامن، مما يضمن سلوكًا غير معيق.
   - **خط أنابيب المعالج (Handler Pipeline)**: سلسلة من المعالجات تعالج البيانات الواردة والصادرة (مثل ترميز/فك رموز الرسائل، ومعالجة منطق الأعمال).
   - **الإقلاع (Bootstrap)**: يُنشئ الخادم أو العميل (مثل الربط بمنفذ أو الاتصال بخادم بعيد).

2. **سير العمل النموذجي**:
   - تقوم بتعريف `ServerBootstrap` (للخوادم) أو `Bootstrap` (للعملاء) لتكوين التطبيق.
   - تقوم بإعداد `EventLoopGroup` لإدارة الخيوط (threads) والتعامل مع الأحداث.
   - تقوم بإنشاء خط أنابيب من `ChannelHandlers` لمعالجة البيانات (مثل تحويل البايتات الخام إلى كائنات ذات معنى).
   - تربط الخادم بمنفذ أو تصل العميل بعنوان بعيد.

3. **تطبيق مثال**:
   لنفترض أنك تريد بناء خادم صدى بسيط (حيث يرد الخادم نفس ما يرسله العميل):
   - استخدم `ServerBootstrap` للربط بمنفذ (مثل 8080).
   - أضف `ChannelInboundHandler` إلى خط الأنابيب لقراءة الرسائل الواردة وكتابتها مرة أخرى إلى العميل.
   - ابدأ تشغيل الخادم وتعامل مع عدة عملاء في وقت واحد بأقل حد من النفقات العامة للموارد.

   إليك مقتطف كود مبسط (جافا):
   ```java
   import io.netty.bootstrap.ServerBootstrap;
   import io.netty.channel.*;
   import io.netty.channel.nio.NioEventLoopGroup;
   import io.netty.channel.socket.nio.NioServerSocketChannel;
   import io.netty.handler.codec.string.StringDecoder;
   import io.netty.handler.codec.string.StringEncoder;

   public class EchoServer {
       public static void main(String[] args) throws Exception {
           EventLoopGroup bossGroup = new NioEventLoopGroup();
           EventLoopGroup workerGroup = new NioEventLoopGroup();
           try {
               ServerBootstrap b = new ServerBootstrap();
               b.group(bossGroup, workerGroup)
                   .channel(NioServerSocketChannel.class)
                   .childHandler(new ChannelInitializer<Channel>() {
                       @Override
                       protected void initChannel(Channel ch) {
                           ch.pipeline()
                               .addLast(new StringDecoder())
                               .addLast(new StringEncoder())
                               .addLast(new SimpleChannelInboundHandler<String>() {
                                   @Override
                                   protected void channelRead0(ChannelHandlerContext ctx, String msg) {
                                       ctx.writeAndFlush(msg); // إعادة الرسالة
                                   }
                               });
                       }
                   });
               ChannelFuture f = b.bind(8080).sync();
               f.channel().closeFuture().sync();
           } finally {
               bossGroup.shutdownGracefully();
               workerGroup.shutdownGracefully();
           }
       }
   }
   ```

4. **الميزات الرئيسية أثناء العمل**:
   - **الإدخال/الإخراج غير المتزامن**: يتعامل مع آلاف الاتصالات بعدد قليل من الخيوط.
   - **القدرة على التوسع**: أضف برامج الترميز (codecs) أو المعالجات المخصصة لدعم أي بروتوكول.
   - **الأداء**: مُحسّن للسرعة واستخدام الذاكرة المنخفض، ويتفوق على الإدخال/الإخراج المُعيق التقليدي في العديد من السيناريوهات.

### التطبيقات في العالم الحقيقي
- **Apache Cassandra**: يستخدم نيتي في طبقة الشبكات الخاصة به للتعامل مع اتصالات قواعد البيانات الموزعة.
- **Twitter**: يستفيد من نيتي (عبر Finagle) للخدمات عالية الإنتاجية.
- **خوادم ماينكرافت (Minecraft)**: العديد من الخوادم المخصصة تستخدم نيتي للشبكات متعددة اللاعبين الفعالة.

### لماذا تختار نيتي؟
- **القابلية للتوسع**: يتعامل مع آلاف الاتصالات المتزامنة دون جهد.
- **المرونة**: يعمل مع أي بروتوكول أو تنسيق بيانات تحدده.
- **المجتمع**: نظام بيئي كبير مع توثيق ودعم واسع النطاق.

باختصار، نيتي هو أداتك المفضلة إذا كنت بحاجة إلى بناء تطبيقات شبكية سريعة وموثوقة وقابلة للتوسع. سواء كان تطبيق دردشة بسيط أو نظام موزع معقد، يوفر نيتي اللبنات الأساسية لتحقيق ذلك بكفاءة.