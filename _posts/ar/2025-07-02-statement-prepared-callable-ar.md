---
audio: false
generated: true
lang: ar
layout: post
title: أنواع أوامر SQL في جافا مقارنة
translated: true
type: note
---

في حزمة `java.sql` الخاصة بلغة Java، تُعتبر `Statement` و`PreparedStatement` و`CallableStatement` واجهات تُستخدم لتنفيذ استعلامات SQL، لكنها تخدم أغراضًا مختلفة ولها خصائص مميزة. إليك مقارنة موجزة:

1. **Statement**:
   - **الغرض**: يُستخدم لتنفيذ استعلامات SQL ثابتة بدون معاملات.
   - **آلية العمل**: تقوم بتمرير استعلام SQL كامل كسلسلة نصية إلى الدالة `executeQuery()` أو `executeUpdate()`.
   - **الخصائص الرئيسية**:
     - مناسب للاستعلامات البسيطة لمرة واحدة.
     - لا يوجد ربط للمعاملات، لذا تقوم بتوصيل القيم يدويًا داخل سلسلة SQL، مما قد يؤدي إلى مخاطر حقن SQL.
     - أقل كفاءة للاستعلامات المتكررة، لأن قاعدة البيانات تعيد تحليل SQL في كل مرة.
   - **مثال**:
     ```java
     Statement stmt = conn.createStatement();
     ResultSet rs = stmt.executeQuery("SELECT * FROM users WHERE id = 1");
     ```

2. **PreparedStatement**:
   - **الغرض**: يُستخدم لاستعلامات SQL المترجمة مسبقًا مع مدخلات مُعَلمة.
   - **آلية العمل**: تقوم بتعريف استعلام يحمل نائبات (`?`) وتعيين قيم المعاملات باستخدام دوال مثل `setInt()`، `setString()`، إلخ.
   - **الخصائص الرئيسية**:
     - يمنع حقن SQL من خلال فصل منطق SQL عن البيانات.
     - أكثر كفاءة للاستعلامات المتكررة، حيث يتم ترجمة SQL مرة واحدة وإعادة استخدامها.
     - يدعم ربط المعاملات الديناميكية، مما يجعله أكثر أمانًا ومرونة.
   - **مثال**:
     ```java
     PreparedStatement pstmt = conn.prepareStatement("SELECT * FROM users WHERE id = ?");
     pstmt.setInt(1, 1);
     ResultSet rs = pstmt.executeQuery();
     ```

3. **CallableStatement**:
   - **الغرض**: يُستخدم لتنفيذ الإجراءات المخزنة في قاعدة البيانات.
   - **آلية العمل**: يُمدد `PreparedStatement` للتعامل مع استدعاءات الإجراءات المخزنة، مدعومًا معاملات الإدخال (`IN`) والإخراج (`OUT`) والإدخال/الإخراج (`IN OUT`).
   - **الخصائص الرئيسية**:
     - مُصمم خصيصًا للإجراءات المخزنة في قاعدة البيانات.
     - يسمح بتسجيل معاملات الإخراج باستخدام دوال مثل `registerOutParameter()`.
     - يدعم التعامل المعقد مع المعاملات لمنطق الإجراء المخزن.
   - **مثال**:
     ```java
     CallableStatement cstmt = conn.prepareCall("{call getUserName(?, ?)}");
     cstmt.setInt(1, 1);
     cstmt.registerOutParameter(2, Types.VARCHAR);
     cstmt.execute();
     String username = cstmt.getString(2);
     ```

**الاختلافات الرئيسية**:
| الميزة                  | Statement                           | PreparedStatement                   | CallableStatement                   |
|-------------------------|-------------------------------------|-------------------------------------|-------------------------------------|
| **الغرض**               | استعلامات SQL ثابتة                | استعلامات SQL مُعَلمة              | تنفيذ الإجراءات المخزنة            |
| **حقن SQL**             | عُرضة للخطر (توصيل يدوي)           | آمن (ربط المعاملات)                | آمن (ربط المعاملات)                |
| **الأداء**              | أقل كفاءة (لا يوجد ترجمة مسبقة)   | أكثر كفاءة (مترجم مسبقًا)          | كفء للإجراءات المخزنة              |
| **حالة الاستخدام**      | استعلامات بسيطة لمرة واحدة        | استعلامات متكررة أو مُعَلمة        | إجراءات مخزنة مع معاملات           |
| **دعم المعاملات**       | لا شيء                             | معاملات إدخال فقط                  | معاملات إدخال وإخراج و IN/OUT      |

**متى تُستخدم**:
- استخدم `Statement` للاستعلامات البسيطة غير المتكررة حيث يكون الأمان والأداء أقل أهمية.
- استخدم `PreparedStatement` للاستعلامات المُعَلمة، أو التنفيذ المتكرر، أو عندما يكون الأمان (منع حقن SQL) مصدر قلق.
- استخدم `CallableStatement` عند استدعاء الإجراءات المخزنة في قاعدة البيانات مع معاملات الإدخال/الإخراج.

هذا الشرح مبني على السلوك القياسي لواجهة برمجة تطبيقات Java SQL اعتبارًا من تاريخ قطع المعرفة لدي. إذا كنت بحاجة إلى مزيد من التفاصيل أو الأمثلة، فأعلمني!