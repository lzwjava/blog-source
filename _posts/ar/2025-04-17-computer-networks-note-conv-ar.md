---
audio: false
lang: ar
layout: post
title: ملاحظة شبكات الحاسوب - محادثة
translated: true
type: note
---

أ: مرحبًا، كنت أسمع كثيرًا عن طبقة النقل في الشبكات. هل يمكنك شرحها لي؟

ب: بالتأكيد! لنبدأ بالأساسيات. طبقة النقل مسؤولة بشكل أساسي عن الاتصال من طرف إلى طرف، وضمان تسليم البيانات بشكل موثوب وبالترتيب الصحيح عبر الشبكة.

أ: مثير للاهتمام. إذن ما هي البروتوكولات التي تعمل في هذه الطبقة؟

ب: البروتوكولان الأكثر شيوعًا هما TCP، الموجه للاتصال، و UDP، غير الموجه للاتصال. كلاهما يخدمان أغراضًا مختلفة اعتمادًا على احتياجات التطبيق.

أ: صحيح، أعلم أن TCP مشهور بالموثوقية. ما هي الآليات التي تجعله موثوقًا بالضبط؟

ب: سؤال جيد. يستخدم TCP أرقام التسلسل، والإقرارات (ACKs)، وإعادة الإرسال لضمان التسليم الموثوق. إذا فقدت قطعة أو وصلت خارج الترتيب، يتعامل TCP مع الاستعادة.

أ: والتحكم في التدفق؟ هذا جزء من TCP أيضًا، أليس كذلك؟

ب: Absolutely. يستخدم TCP آلية النافذة المنزلقة للتحكم في التدفق. هذا يساعد المرسل على عدم إرباك المستقبل بإرسال بيانات أكثر مما يمكنه معالجتها.

أ: إذن ماذا عن التحكم في الازدحام؟ أليس هذا يتعلق بالشبكة وليس الأنظمة الطرفية؟

ب: صحيح، لكن TCP يلعب دورًا. يستخدم خوارزميات مثل البدء البطيء، وتجنب الازدحام، والإرسال السريع، والاستعادة السريعة للاستجابة لعلامات الازدحام - مثل فقدان الحزم أو تأخر الإقرارات.

أ: و UDP يتخطى كل هذا، أليس كذلك؟ إنه يرسل البيانات دون الاهتمام بما إذا كانت تصل؟

ب: Exactly. UDP أسرع لأنه يحتوي على حد أدنى من النفقات العامة. لا مصافحات، لا إعادة إرسال. إنه مثالي للتطبيقات في الوقت الحقيقي مثل بث الفيديو أو VoIP، حيث يكون التوقيت أكثر أهمية من التسليم المثالي.

أ: هذا منطقي. لكن متى تختار TCP على UDP في سيناريو حقيقي؟

ب: إذا كنت تقوم بتطوير تطبيق حيث تكون سلامة البيانات حرجة - مثل نقل الملفات أو البريد الإلكتروني أو تصفح الويب - فإن TCP هو الخيار الصحيح. إذا كنت تبث محتوى مباشرًا أو تلعب ألعابًا، حيث يمكن تحمل فقدان الحزم العرضي، فإن UDP أفضل.

أ: بالحديث عن الألعاب، بعض الألعاب تنفذ موثوقيتها الخاصة فوق UDP. أليس هذا زائدًا عن الحاجة؟

ب: ليس بالضرورة. إن تنفيذ الموثوقية بشكل انتقائي يمنح المطورين مزيدًا من التحكم. يمكنهم اختيار البيانات التي يضمنون تسليمها لها - مثل إجراءات اللاعب - بينما يتركون التحديثات الأقل أهمية مثل لقطات الموضع دون التحقق.

أ: هذا ذكي جدًا. إذن كيف تتناسب أرقام المنافذ في كل هذا؟

ب: تساعد أرقام المنافذ طبقة النقل في توجيه حركة المرور إلى عملية التطبيق الصحيحة. على سبيل المثال، يستخدم HTTP عادة المنفذ 80، بينما يستخدم DNS المنفذ 53. يتم تحديد كل نقطة نهاية في اتصال بواسطة مجموعة: عنوان IP + المنفذ.

أ: أوه نعم، المجموعة الخماسية الشهيرة: عنوان IP المصدر، ومنفذ المصدر، وعنوان IP الوجهة، ومنفذ الوجهة، والبروتوكول.

ب: Exactly. هذه المجموعة تحدد الاتصال بشكل فريد. إنها مهمة بشكل خاص في سيناريوهات NAT حيث تشارك أجهزة متعددة عنوان IP عام.

أ: هل صحيح أن TCP يمكن أن يسبب انسداد رأس الخط بسبب ترتيبه الصارم؟

ب: نعم. لأن TCP يسلم البيانات بالترتيب، إذا فقدت حزمة واحدة، يمكن أن تمنع الحزم اللاحقة من المعالجة حتى يتم إعادة إرسال الحزمة المفقودة.

أ: هذا عيب في الاتصال في الوقت الحقيقي. هل كان هناك أي تطور لمعالجة ذلك؟

ب: Definitely. QUIC هو مثال رائع. إنه بروتوكول أحدث طورته Google يعمل فوق UDP ويوفر ميزات مشابهة لـ TCP لكنه يتجنب انسداد رأس الخط باستخدام تدفقات متعددة.

أ: آه، وهو يدعم TLS افتراضيًا، أليس كذلك؟ لذا فإن الأمان مدمج.

ب: Correct. على عكس TCP+TLS اللذين يتطلبان مصافحات منفصلة، فإن QUIC يجمعهما، مما يقلل زمن الوصول. يتم استخدامه بشكل متزايد في HTTP/3.

أ: إذن هل تقول أن مستقبل طبقة النقل هو أكثر حول البروتوكولات الهجينة مثل QUIC؟

ب: Absolutely. نحن نشهد تحولًا نحو البروتوكولات التي تجمع بين الموثوقية والأمان والسرعة مع كونها أيضًا أكثر تكيفًا مع بنية الإنترنت الحديثة.

أ: بالحديث عن التكيف، كيف تتعامل بروتوكولات النقل مع الشبكات المحمولة أو غير المستقرة؟

ب: هذا هو المكان الذي تأتي فيه بروتوكولات المسارات المتعددة مثل MPTCP. تسمح بتقسيم اتصال واحد عبر مسارات متعددة - مثل Wi-Fi والخلوي - مما يوفر مرونة وإنتاجية أفضل.

أ: مثير للاهتمام. لكن أتخيل أن هذا يضيف تعقيدًا من حيث ترتيب الحزم وإدارة المسار.

ب: نعم، وهذا جزء من المقايضة. تحصل على أداء أفضل ولكن مع زيادة النفقات العامة في إدارة المسارات وإعادة تجميع البيانات.

أ: لقد ذكرت الموثوقية سابقًا - كيف تكتشف البروتوكولات فعليًا الحزم المفقودة؟

ب: يستخدم TCP المهلات و ACKs المكررة لاكتشاف الفقد. على سبيل المثال، استلام ثلاثة ACKs مكررة لنفس رقم التسلسل عادة ما يؤدي إلى إرسال سريع.

أ: وإعادة الإرسال يمكن أن تؤثر حقًا على الأداء إذا كان وقت الذهاب والإياب (RTT) مرتفعًا، أليس كذلك؟

ب: Exactly. لهذا السبب لدى TCP فترات مهلة تكيفية بناءً على تقديرات RTT. إذا زاد RTT، تزيد المهلة أيضًا لتجنب إعادة الإرسال المبكرة.

أ: كيف يقوم مهندسو الشبكات بتحسين أداء النقل في بيئات الكمون العالي، مثل روابط الأقمار الصناعية؟

ب: غالبًا ما يستخدمون وكلاء تعزيز الأداء (PEPs) أو يضبطون معلمات TCP مثل حجم النافذة. البعض يتحول إلى بروتوكولات لا تتطلب إقرارات لكل حزمة.

أ: فهمت. هل هناك أي عيوب ملحوظة في UDP aside عن عدم الموثوقية؟

ب: حسنًا، عدم وجود تحكم في الازدحام هو عيب كبير. حركة مرور UDP غير المنظمة يمكن أن تغمر الشبكات، ولهذا السبب يقوم مقدمو خدمات الإنترنت أحيانًا بالحد أو حظر استخدام UDP الثقيل ما لم يتم التحكم فيه بواسطة التطبيق.

أ: منطقي. هل تعتقد أن بروتوكولات النقل الواعية بالتطبيق أصبحت أكثر شيوعًا؟

ب: نعم، خاصة مع مكدسات مساحة المستخدم. التطبيقات تقوم بشكل متزايد بضبط السلوك بناءً على احتياجاتها المحددة بدلاً من الاعتماد على مكدسات TCP العامة على مستوى نظام التشغيل.

أ: هذا يذكرني بتقنيات تخطي النواة مثل DPDK أو RDMA للتطبيقات ذات الكمون المنخفض جدًا.

ب: Exactly. هذه التقنيات تسمح بالوصول المباشر إلى الذاكرة وتقلل من عبء وحدة المعالجة المركزية، وهو أمر حاسم لتداول التردد العالي أو مجموعات الحوسبة عالية الأداء.

أ: هل TCP لا يزال يتطور، رغم ذلك؟ أم أنه وصل إلى حده؟

ب: لا تزال هناك تعديلات تُجرى - مثل TCP BBR من Google. يستخدم نهجًا قائمًا على النمذجة لتجنب تخمين نافذة الازدحام التقليدية، مما يؤدي إلى إنتاجية أفضل.

أ: لقد قرأت عن BBR - إنه جيد بشكل خاص عبر الشبكات ذات الفقد، أليس كذلك؟

ب: Right. إنه لا يعامل الفقد على أنه ازدحام، وهو انحراف كبير عن سلوك TCP التقليدي مثل Reno أو Cubic.

أ: لذا بشكل عام، فإن تصميم طبقة النقل هو حقًا حول موازنة المقايضات - الموثوقية، والسرعة، والتعقيد، والتوافق.

ب: Exactly. ومع تنوع التطبيقات - من IoT إلى AR/VR - فإن الحاجة إلى بروتوكولات نقل مصممة خصيصًا لحالات استخدام محددة ستنمو فقط.

أ: شكرًا، كانت هذه غوصة رائعة. لدي صورة أوضح بكثير لكيفية عمل طبقة النقل - وتطورها.

ب: في أي وقت! إنها واحدة من تلك الطبقات التي تشغل بهدوء كل ما نفعله عبر الإنترنت.

أ: لقد كنت أراجع طبقة ربط البيانات مؤخرًا. تبدو بسيطة في البداية، لكن هناك الكثير يحدث تحت السطح.

ب: Absolutely. إنها واحدة من تلك الطبقات التي تضمن بهدوء أن الاتصال المحلي موثوق. إنها تتعامل مع التأطير، واكتشاف الأخطاء، والتحكم في الوصول إلى الوسيط.

أ: صحيح، والتأطير هو حول تغليف حزم طبقة الشبكة في أطر، أليس كذلك؟

ب: Exactly. تضيف رؤوسًا وأحيانًا ذيولاً لإنشاء أطر. هذه هي الطريقة التي تعرف بها النهاية المستقبلة حيث يبدأ الإطار وينتهي.

أ: كيف يتم التعامل مع اكتشاف الأخطاء عادة في هذه الطبقة؟

ب: الطريقة الأكثر شيوعًا هي CRC - فحص التكرار الدوري. إنها فعالة وتكتشف معظم أخطاء الإرسال.

أ: وإذا تم العثور على أخطاء، هل تقوم طبقة ربط البيانات دائمًا بتصحيحها؟

ب: ليس بالضرورة. بعض البروتوكولات تكتشف الأخطاء فقط وتتخلص من الأطر السيئة، تاركة للطبقات العليا إعادة الإرسال. أخرى مثل PPP يمكنها القيام بكل من الاكتشاف والتصحيح.

أ: مثير للاهتمام. بالحديث عن البروتوكولات، Ethernet هو الأكثر شهرة، لكنه ليس الوحيد، أليس كذلك؟

ب: Correct. Ethernet (IEEE 802.3) يهيمن على الشبكات المحلية، لكن لدينا أيضًا PPP للوصلات نقطة لنقطة، و HDLC في الأنظمة القديمة، و Wi-Fi (802.11) كمعادل لاسلكي.

أ: Ethernet يستخدم عناوين MAC. ما الدور الذي تلعبه هنا؟

ب: عناوين MAC هي معرفات فريدة لكل واجهة شبكة. تستخدمها طبقة ربط البيانات لتسليم الأطر بين الأجهزة على نفس مقطع الشبكة.

أ: كيف تتناسب المحولات في هذه الصورة؟

ب: المحولات تعمل في طبقة ربط البيانات. تتعلم عناوين MAC وتبني جدولاً لإعادة توجيه الأطر بذكاء بدلاً من إغراق كل منفذ.

أ: ماذا عن التصادمات في شبكات Ethernet؟ أتذكر استخدام CSMA/CD لذلك.

ب: نعم، في Ethernet القديم نصف المزدوج باستخدام المحاور، كان CSMA/CD (استشعار الناقل، الوصول المتعدد مع اكتشاف التصادم) crucial. كانت الأجهزة تستمع قبل الإرسال وتراجع إذا حدثت تصادمات.

أ: لكن في الوقت الحاضر، الاتصال المزدوج الكامل والمحولات تجعل CSMA/CD قديمًا، أليس كذلك؟

ب: Exactly. Ethernet بالمحولات الحديثة يلغي التصادمات تمامًا، لذا فإن CSMA/CD أصبح تاريخيًا إلى حد كبير.

أ: وفي الشبكات اللاسلكية، لدينا CSMA/CA بدلاً من ذلك؟

ب: Right. CSMA/CA (تجنب التصادم) يستخدم في Wi-Fi. نظرًا لأن الأجهزة اللاسلكية لا يمكنها اكتشاف التصادمات بسهولة، فإنها تحاول تجنبها باستخدام الإقرارات والتراجعات العشوائية.

أ: لقد ذكرت التحكم في التدفق سابقًا. كيف يتم إدارته في هذه الطبقة؟

ب: بروتوكولات مثل HDLC يمكنها تنفيذ التحكم في التدفق، باستخدام آليات مثل التوقف والانتظار أو النوافذ المنزلقة. لكن في Ethernet، يتم التعامل معه عادة في الطبقات الأعلى أو عبر أطر الإيقاف في الوصلات المزدوجة الكاملة.

أ: لنتحدث عن التبديل. ما الفرق بين تبديل الدوائر، وتبديل الحزم، وتبديل الرسائل؟

ب: تبديل الدوائر يحجز مسارًا لجلسة العمل بأكملها - مستخدم في الهاتفة القديمة. تبديل الحزم يقسم البيانات إلى حزم يتم توجيهها بشكل مستقل - مستخدم في شبكات IP. تبديل الرسائل هو تخزين وإعادة توجيه دون تقسيم - نادر اليوم.

أ: فهمت. و VLANs - تلك تُنفذ في Layer 2، أليس كذلك؟

ب: نعم. تقوم VLANs بفصل نطاقات البث منطقيًا على محول واحد. تضيف IEEE 802.1Q علامة في أطر Ethernet لتحديد VLAN.

أ: هذا مفيد لتقسيم حركة المرور. ماذا عن بروتوكول الشجرة الممتدة؟

ب: STP يمنع الحلقات في شبكات Layer 2. يقوم بتعطيل المسارات الزائدة ديناميكيًا لتشكيل شجرة خالية من الحلقات. بدونه، يمكن للبث أن ينشئ حلقات لا نهاية لها.

أ: هل هناك بدائل حديثة لـ STP؟

ب: نعم. Rapid STP (RSTP) يسرع التقارب، وبروتوكولات مثل TRILL أو SPB تحل محل STP تمامًا لاختيار مسار Layer 2 أكثر كفاءة.

أ: بنية إطار Ethernet تستحق الذكر أيضًا. ما هي الحقول في الإطار القياسي؟

ب: الإطار النموذجي يحتوي على مقدمة، عنوان MAC الوجهة، عنوان MAC المصدر، حقل النوع/الطول، الحمولة، وذيل CRC. الأطر ذات العلامات VLAN لديها أيضًا علامة 802.1Q إضافية.

أ: ما هو الحد الأقصى لوحدة الإرسال (MTU) النموذجي لـ Ethernet؟

ب: Ethernet القياسي لديه MTU بقيمة 1500 بايت، على الرغم من أن الأطر العملاقة يمكن أن تمدد ذلك إلى 9000+ بايت في بعض الشبكات عالية الأداء.

أ: هل هناك مخاطر أمنية في هذه الطبقة؟

ب: نعم - انتحال عنوان MAC، القفز بين VLANs، تسمم ARP. Layer 2 معرض للخطر بدون تكوينات محول مناسبة وتقسيم الشبكة.

أ: إذن كيف يمكن التخفيف من ذلك؟

ب: أمان المنفذ، التفتيش الديناميكي لـ ARP، تقليم VLAN، واستخدام 802.1X للمصادقة يمكن أن يساعد في تأمين Layer 2.

أ: تضيف الشبكات المحلية اللاسلكية بُعدًا آخر. كيف تختلف Layer 2 في Wi-Fi؟

ب: يستخدم Wi-Fi تأطير 802.11 MAC، ويدعم أطر الإدارة/التحكم/البيانات، ويضيف إعادة إرسال due to ارتفاع معدلات الخطأ. هناك أيضًا المزيد من استخدام الإقرارات.

أ: والتشفير في Wi-Fi يحدث في Layer 2 أيضًا؟

ب: Correct. يستخدم WPA2 و WPA3 آليات التشفير والمصادقة المدمجة في Layer 2 قبل بدء حركة مرور IP.

أ: هل يمكنك التفكير في أي اتجاهات أو ابتكارات في هذه الطبقة؟

ب: Definitely. نحن نرى المزيد من التبديل الخاضع لتحكم SDN، وتفريغ وظائف MAC إلى الأجهزة، والتحسين الشبكي بمساعدة الذكاء الاصطناعي في Layer 2.

أ: مثير للاهتمام. هل تعتقد أن Layer 2 يتم تجريدها بشكل مفرط في البيئات السحابية والمؤمنة؟

ب: إلى حد ما، نعم. المحولات الافتراضية والطبقات العلوية مثل VXLAN تغير طريقة تفكيرنا في حدود Layer 2، لكن فهم الأساسيات لا يزال ضروريًا.

أ: أوافق تمامًا. لا يمكنك تصحيح مشاكل الشبكة بشكل صحيح إذا كنت لا تعرف ما يحدث في كل طبقة.

ب: Exactly. حتى في الشبكات الافتراضية، فهم كيفية عمل تعلم MAC، والإغراق، وإعادة توجيه الإطارات يمكن أن يوفر لك ساعات من الإحباط.

أ: حسنًا، كان هذا نقاشًا رائعًا. طبقة ربط البيانات أكثر تعقيدًا وأهمية مما يعترف به معظم الناس.

ب: Absolutely. إنها البطل المجهول في نموذج OSI - تقوم بالعمل الشاق للتسليم المحلي while تبقى غير مرئية معظم الوقت.