---
audio: false
generated: true
lang: ar
layout: post
title: تقنية التعاون في الوقت الحقيقي في جوجل دوكس
translated: true
type: note
---

يستخدم Google Docs خوارزمية متطورة **للتعاون في الوقت الفعلي** للسماح لعدة مستخدمين بتحرير المستند في الوقت نفسه. تعتمد التكنولوجيا الأساسية وراء هذا على **التحويل التشغيلي (OT)** وتطورت لاحقًا لدمج **أنواع البيانات المنسوخة الخالية من التعارض (CRDTs)** في بعض الأنظمة. إليك تفصيل للمكونات الرئيسية:

### 1. **التحويل التشغيلي (OT)**
   - **الفكرة الأساسية**: يحل OT التعارضات عن طريق تحويل (تعديل) العمليات الواردة مقابل العمليات المطبقة سابقًا.
   - **كيفية العمل**:
     1. عندما يقوم المستخدم بإجراء تحرير (مثل إدراج نص)، يولد العميل **عملية** (مثل `insert("hello", pos=5)`).
     2. يتم إرسال العملية إلى الخادم، الذي **يحولها** مقابل التعديلات المتزامنة من مستخدمين آخرين للحفاظ على الاتساق.
     3. يطبق جميع العملاء العمليات بطريقة تضمن الاتساق النهائي.
   - **مثال**: إذا أدخل المستخدم أ "abc" في الموضع 5 بينما حذف المستخدم ب الموضع 5، يقوم OT بتعديل عملية ب لحذف الموضع 8 (بعد إدراج أ).
   - **التحديات**: يتطلب OT خادمًا مركزيًا لإدارة التحويلات، مما يجعل تنفيذه بشكل صحيح معقدًا.

### 2. **أنواع البيانات المنسوخة الخالية من التعارض (CRDTs)**
   - **الفكرة الأساسية**: تسمح CRDTs للأنظمة الموزعة بدمج التعديلات دون الحاجة إلى خادم مركزي عن طريق تصميم هياكل بيانات تتقارب دائمًا.
   - **كيفية العمل**:
     1. يتم وضع علامة على التعديلات بمعرفات فريدة (مثل الطوابع الزمنية أو الساعات المتجهة).
     2. يدمج النظام التعديلات باستخدام الخصائص الرياضية (مثل العمليات التبادلية والترابطية).
   - **المزايا مقارنة بـ OT**:
     - لا حاجة لخادم مركزي (يعمل بنظام الند للند).
     - أكثر متانة للتحرير في وضع عدم الاتصال.
   - **مثال**: بدلاً من تتبع المواضع بالأرقام، قد تستخدم CRDTs فهرسة كسرية (مثل "A" < "A1" < "B") لتجنب التعارضات.

### 3. **تنفيذ Google (هجين Wave/OT)**
   - كان Google Docs يعتمد في الأصل على **خوارزمية OT من Google Wave**، التي وسعت نطاق OT الكلاسيكي بـ:
     - **خادم مركزي**: يضمن تحويل جميع العمليات بشكل صحيح.
     - **مزامنة تفاضلية**: يقلل من البيانات المرسلة عبر الشبكة.
   - مع مرور الوقت، من المرجح أن Google دمجت **تحسينات تشبه CRDT** لدعم أفضل في وضع عدم الاتصال.

### 4. **تكنولوجيات رئيسية أخرى**
   - **مزامنة الواجهة الأمامية/الخلفية**: تستخدم **WebSockets/الانتظار الطويل** للتحديثات في الوقت الفعلي.
   - **متجهات الإصدار/الساعات المنطقية**: تتبع السببية للتعديلات.
   - **حل التعارض**: إذا قام مستخدمان بتحرير نفس النص في الوقت نفسه، يحل النظام التعارضات عبر قواعد OT/CRDT.

### **مقارنة: OT مقابل CRDT**

| الميزة               | OT (إصدار Google Docs الكلاسيكي) | CRDT (مثل Figma, Notion) |
|-----------------------|--------------------------|---------------------------|
| الحاجة لخادم مركزي | نعم                      | لا (يمكن العمل بنظام الند للند) |
| الدعم في وضع عدم الاتصال       | محدود                  | أفضل                    |
| التعقيد            | عال (منطق التحويل) | عال (تصميم هيكل البيانات) |
| زمن الوصول               | منخفض (تدار بواسطة الخادم)     | يعتمد على التنفيذ |

### **لماذا تستخدم Google على الأرجح OT (مع تأثيرات من CRDT)**
- OT مناسب جيدًا للخدمات **المركزية** مثل Google Docs.
- تكتسب CRDTs شعبية في التطبيقات اللامركزية (مثل **Figma, Apple Notes**)، لكن البنية التحتية لـ Google محسنة لـ OT.

### **قراءة إضافية**
- **ورقة بحثية عن OT**: [التحويل التشغيلي في محرري المجموعات في الوقت الحقيقي](https://dl.acm.org/doi/10.1145/146486.146487) (Cormack et al.)
- **CRDTs**: [دراسة شاملة لـ CRDTs](https://arxiv.org/abs/1805.06358)
- **بروتوكول Google Wave**: [بروتوكول Wave](https://wave-protocol.google.com/)

هل ترغب في الخوض بشكل أعمق في أي جانب محدد؟