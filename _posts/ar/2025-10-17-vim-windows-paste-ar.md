---
audio: false
generated: true
image: false
lang: ar
layout: post
model: x-ai/grok-4-fast
title: اللصق في فيم على ويندوز
translated: true
type: note
---

## اللصق في Vim داخل Git Bash على Windows

آه، أرى المشكلة — أمر `p` في Vim داخل Git Bash (الذي يعمل على Windows) يمكن أن يكون متقلبًا، خاصة عند التعامل مع الحافظة النظامية أو النص الخارجي. هذه مشكلة شائعة لأن Git Bash يستخدم MinTTY كمحاكي طرفية، وسلوك Vim الافتراضي لا يتوافق دائمًا مع حافظة Windows. أمر `p` يلصق فقط من *مسودة* Vim الداخلية (ما نسخته باستخدام `y` داخل نفس جلسة Vim). لأي شيء من خارج Vim (مثل النسخ من Notepad أو المتصفح)، تحتاج إلى لصق الطرفية أو تكامل الحافظة.

لا تقلق — إليك كيفية التعامل معها خطوة بخطوة، مخصصة لسير العمل الخاص بك "تحديد الكل، حذف، ثم اللصق في نص جديد". سأغطي اللصق الداخلي (والذي يجب أن يعمل بالفعل) واللصق الخارجي.

### فحص سريع: هل Vim الخاص بك يدعم الحافظة النظامية؟
أولاً، تحقق مما إذا كان Vim الخاص بك يمكنه الوصول إلى حافظة Windows مباشرة (هذا يُصلح الكثير):
1. افتح Git Bash.
2. شغّل `vim --version | grep clipboard` (أو افتح Vim بـ `vim`، ثم اكتب `:version` وابحث عن `+clipboard`).
   - إذا أظهر `+clipboard`، ممتاز — يمكنك استخدام `"+p` للصق من حافظة Windows.
   - إذا أظهر `-clipboard` أو لا شيء، فهذا يعني أنه غير مدعوم (شائع في Vim المضمن مع Git Bash). انتقل إلى طرق لصق الطرفية أدناه.

إذا لم يكن مدعومًا، ففكر في تثبيت Vim كامل لنظام Windows (على سبيل المثال، عبر Chocolatey: `choco install vim`) أو استخدام Neovim/WSL للحصول على تكامل أفضل.

### ١. اللصق الداخلي (النسخ داخل Vim، اللصق في نفس الجلسة)
هذا ما استهدفته تعليماتي السابقة — النسخ *داخل* Vim واللصق في ملف جديد في *نفس* الجلسة. `p` يجب أن يعمل بشكل جيد هنا، لا توجد مشاكل متعلقة بـ Git Bash:
- في `oldfile.txt`: `gg` (أعلى)، `yG` (نسخ الكل).
- `:e newfile.txt` (افتح ملف جديد في نفس Vim).
- `p` (لصق). يضع المحتوى بعد المؤشر مباشرة.
- `:wq` للحفظ.

إذا كان `p` لا يزال فاشلًا (على سبيل المثال، يلصق لا شيء أو نص مشوه)، فقد تكون مشكلة في النسخ — جرب `"+yG` بدلاً من `yG` إذا كانت الحافظة مدعومة، ثم `"+p`.

### ٢. لصق النص الخارجي في Vim (من تطبيقات Windows)
إذا كنت تنسخ من الخارج (على سبيل المثال، تحديد الكل في Notepad، Ctrl+C، ثم تريد اللصق في Vim):
- **الطريقة ١: استخدم اللصق المدمج في Git Bash (الأسهل، لا يحتاج لتغييرات في Vim)**
  ١. افتح ملفك: `vim newfile.txt`.
  ٢. ادخل إلى وضع الإدخال: اضغط `i`.
  ٣. انقر بزر الماوس الأيمن في نافذة Git Bash (هذا يلصق من حافظة Windows مباشرة في الطرفية/Vim).
     - اختصارات بديلة: مفتاح `Insert`، أو تمكين وضع التحرير السريع في Git Bash (انقر بزر الماوس الأيمن على شريط العنوان > Options > Quick Edit) ثم استخدم Ctrl+Shift+V.
  ٤. اضغط `Esc` للخروج من وضع الإدخال.
  - *نصيحة احترافية:* إذا بدا نص متعدد الأسطر غريبًا عند اللصق (أسطر جديدة إضافية أو مسافات بادئة)، فغالبًا ما يكون بسبب نهايات الأسطر في Windows (CRLF مقابل LF). أصلح ذلك باستخدام `:set ff=unix` في Vim قبل اللصق، أو استخدم `:%s/\r$//g` بعد اللصق لإزالة إرجاع النقل.

- **الطريقة ٢: إذا كان +clipboard مدعومًا (مباشر في Vim)**
  ١. انسخ النص خارجيًا (Ctrl+C).
  ٢. في وضع أمر Vim: `"+p` (يلصق من الحافظة النظامية بعد المؤشر) أو `"+P` (قبل).
  ٣. لسير العمل الخاص بك: بعد الحذف في الملف القديم، انتقل إلى الملف الجديد و `"+p`.

### ٣. النسخ من Vim إلى الخارج (نسخ للخارج إلى Windows)
- النسخ الداخلي (`y`) يبقى في Vim — استخدم نسخ الطرفية للخارج.
- حدد النص في Vim: `v` (وضع التحديد البصري)، حرك المؤشر لتحديد الكل (`ggVG`)، ثم `y`.
- للنسخ إلى Windows: انقر بزر الماوس الأيمن > Edit > Copy (أو حدد النص وانقر بزر الماوس الأيمن > Copy).
- مع +clipboard: `"+y` بدلاً من `y`، ثم Ctrl+V في مكان آخر.

### استكشاف الأخطاء وإصلاحها لمشاكل اللصق الشائعة في Git Bash + Vim
- **نص مشوه (على سبيل المثال، أسطر جزئية أو مسافات إضافية):** عطّل اللصق بين الأقواس في Vim (`:set paste` قبل الدخول إلى وضع الإدخال، ثم الصق، ثم `:set nopaste`). أو أضف `set paste` إلى `~/.vimrc` للتشغيل الدائم (لكنه يعطل بعض الميزات مثل المسافة البادئة التلقائية).
- **لا يتم لصق أي شيء:** تأكد من أنك في وضع الإدخال للصق الطرفية — `p` في وضع الأمر يكون داخليًا فقط.
- **تداخل الماوس:** إذا كان النقر بزر الماوس الأيمن يحدد بدلاً من أن يلصق، فعّله أو عطله عن طريق النقر بزر الماوس الأيمن على شريط العنوان > Options > Mouse > Quick Edit.
- **لحذف الكل قبل اللصق:** في سير العمل الخاص بك، بعد النسخ، استخدم `:%d` لمسح الملف الجديد، ثم الصق.

هذا يجب أن يمكنك من اللصق بسلاسة! إذا كان لا يزال لا يعمل (على سبيل المثال، شارك ما يحدث بالضبط عندما تحاول استخدام `p`)، أو إذا كنت تلصق *من* مصادر خارجية على وجه التحديد، فأخبرني لمزيد من التعديلات.

[How do you copy and paste into Git Bash](https://stackoverflow.com/questions/2304372/how-do-you-copy-and-paste-into-git-bash)  
[Copying from Windows clipboard in Vim](https://vi.stackexchange.com/questions/37599/copying-from-windows-clipboard)  
[How to copy paste contents in the vi editor](https://askubuntu.com/questions/256782/how-to-copy-paste-contents-in-the-vi-editor)