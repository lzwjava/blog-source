---
audio: false
generated: true
image: false
lang: ar
layout: post
model: x-ai/grok-4-fast
title: حل تعارض تبعيات هاجينغ فيس
translated: true
type: note
---

يبدو أنك تواجه تعارضًا في التبعيات أثناء ترقية/تثبيت pip لحزم Hugging Face ذات الصلة (hf-xet و huggingface-hub). سأقوم بتحليل المشكلة وتقديم خطوات لحلها مع مراعاة تفضيلك للالتزام بـ `huggingface-hub==1.1.4`.

### فهم المشكلة
- **التعارض**: حزمة `transformers==4.57.0` المثبتة لديك تحدّد إصدار `huggingface-hub` بـ `<1.0` (تحديدًا `>=0.34.0, <1.0`). الإصدار الجديد `huggingface-hub==1.1.4` يتعارض مع هذا لأنه يمثل قفزة في الإصدار الرئيسي (سلسلة 1.x)، مما قد يؤدي إلى تغييرات غير متوافقة.
- **التحذير**: اكتشف برنامج pip هذا التعارض ولكنّه تابع على أي حال (ومن هنا جاءت رسالة "تم التثبيت بنجاح"). ومع ذلك، قد يؤدي هذا إلى أخطاء أثناء التشغيل في `transformers` (مثل عدم توافق واجهة البرمجة عند تحميل النماذج أو أدوات الترميز).
- **ملاحظات أخرى**: خطأ تحليل `send2trash` لا علاقة له (على الأرجح مشكلة في البيانات الوصفية لهذه الحزمة) ويمكن تجاهله ما لم تكن تستخدمه. اكتملت ترقيات `hf-xet` و `typer-slim` بنجاح.

باختصار: التثبيت "نجح"، ولكن بيئتك أصبحت الآن غير متسقة. تشغيل الكود باستخدام `transformers` قد يفشل حتى يتم حل المشكلة.

### الحل الموصى به: تحديث Transformers لتحقيق التوافق
نظرًا لأنك تريد الاحتفاظ بـ `huggingface-hub==1.1.4`، فإن الحل الأنظف هو ترقية `transformers` إلى إصدار يدعمه. أصدرت Hugging Face تحديثات تتماشى مع الإصدار 1.x من الـ hub.

1. **التحقق من أحدث الإصدارات المتوافقة**:
   - قم بتشغيل هذا لمعرفة ما هو متاح:
     ```
     pip index versions transformers huggingface-hub
     ```
   - اعتبارًا من الآن، `transformers>=4.46.0` (ويفضل أن يكون أحدث إصدار، مثل 4.46.3 أو أعلى) يدعم `huggingface-hub>=1.0`. الإصدار 4.57.0 الذي تستخدمه أقدم ويحدد الإصدار بـ <1.0.

2. **ترقية Transformers**:
   ```
   pip install --upgrade transformers
   ```
   - من المفترض أن يقوم هذا بسحب إصدار متوافق مع `huggingface-hub==1.1.4` (مثل 4.46.x أو أحدث). إذا لم يحل المشكلة تلقائيًا، فحدد:
     ```
     pip install transformers>=4.46.0
     ```
   - بعد الترقية، تحقق باستخدام:
     ```
     pip check  # يجب أن يظهر عدم وجود تعارضات
     pip list | grep -E "(transformers|huggingface-hub)"
     ```

3. **إذا كنت بحاجة إلى تثبيت إصدارات محددة تمامًا** (للتكرار):
   ```
   pip install transformers==4.46.3 huggingface-hub==1.1.4 --force-reinstall
   ```
   - اضبط إصدار transformers بناءً على احتياجاتك (تحقق من وثائق Hugging Face للميزات).

### بديل: إجبار تجاهل التعارض (غير موصى به)
إذا كان يجب عليك تجنب تحديث `transformers` الآن (على سبيل المثال، للاختبار)، يمكنك كتم التحذير والمضي قدمًا على مسؤوليتك الخاصة:
```
pip install huggingface-hub==1.1.4 --force-reinstall --no-deps
```
- `--no-deps` يتخطى فحص التبعيات.
- **تحذير**: قد يؤدي هذا إلى كسر وظائف `transformers` (على سبيل المثال، قد يفشل `AutoTokenizer.from_pretrained()`). اختبر الكود الخاص بك مباشرة بعد ذلك.

### أفضل الممارسات للمستقبل
- استخدم بيئة افتراضية (عبر `venv` أو `conda`) لعزل المشاريع وتجنب التعارضات العامة.
- لمجموعة Hugging Face، فكر في استخدام `pip install -U transformers datasets tokenizers` للحفاظ على كل شيء متزامنًا.
- إذا كنت تستخدم هذا في نص أو notebook، فاستورده واختبره مبكرًا:
  ```python
  import transformers
  from huggingface_hub import HfApi
  print(transformers.__version__)  # يجب أن يكون متوافقًا
  ```
- راقب المشكلات: تشير سجل التغييرات في Hugging Face إلى أن تغييرات الإصدار 1.x من hub تؤثر على معالجة المستودعات والمصادقة — راجع ذلك إذا كان الكود الخاص بك يعتمد عليها.

إذا لم يحل هذا المشكلة أو إذا شاركت المزيد من التفاصيل (مثل ملف `requirements.txt` الكامل أو الخطأ الذي يظهر عند تشغيل الكود)، يمكنني تحسين النصيحة!