---
audio: false
generated: true
lang: ar
layout: post
title: طبقة النقل
translated: true
type: note
---

فيما يلي برنامج تعليمي مفصل لمساعدتك في تعلم فصل **طبقة النقل** في مقرر مثل *تقنية شبكات الحاسوب (02141)* ضمن نظام التعليم الذاتي في التعليم العالي الصيني (自考). يركز هذا البرنامج التعليمي على وظائف طبقة النقل (الاتصال من طرف إلى طرف، الموثوقية، التحكم في الازدحام)، والبروتوكولات (TCP و UDP)، وأرقام المنافذ وتعدد الإرسال، وآليات التحكم في التدفق والتحكم في الأخطاء. تم تصميمه ليكون شاملاً، وسهل الفهم للمبتدئين، ومتوافقًا مع العمق التقني المتوقع في مثل هذا المقرر.

---

### الخطوة 1: فهم دور طبقة النقل
تعد **طبقة النقل** الطبقة الرابعة في نموذج OSI والثالثة في نموذج TCP/IP. تعمل كجسر بين الطبقات السفلية (التي تتعامل مع نقل البيانات المادي) والطبقات العليا (تطبيقات المستخدم). وظيفتها الأساسية هي ضمان وصول البيانات من جهاز إلى آخر بكفاءة وموثوقية (إذا لزم الأمر).

- **سبب أهميتها:** بدون طبقة النقل، لن تعرف التطبيقات مثل متصفحات الويب أو عملاء البريد الإلكتروني كيفية إرسال البيانات أو استقبالها بشكل صحيح عبر الإنترنت.

---

### الخطوة 2: تعلم وظائف طبقة النقل
تمتلك طبقة النقل عدة مسؤوليات رئيسية. دعنا نفصلها:

#### 1. الاتصال من طرف إلى طرف
- **المعنى:** يضمن انتقال البيانات من الجهاز المصدر إلى الجهاز الوجهة، بغض النظر عن الشبكات الموجودة بينهما.
- **كيفية العمل:** تتحدث طبقة النقل على جهاز المرسل مباشرة مع طبقة النقل على جهاز المستقبل، متجاهلة التفاصيل المعقدة للموجهات والمحولات (التي تتعامل معها طبقة الشبكة).
- **تشبيه:** مثل إرسال رسالة بالبريد مباشرة إلى صديق، دون الاهتمام بمكاتب البريد التي تمر عبرها.

#### 2. الموثوقية
- **المعنى:** يضمن وصول البيانات كاملة، بالترتيب الصحيح، وخالية من الأخطاء (إذا تطلب البروتوكول ذلك).
- **كيفية العمل:** تتحقق بعض البروتوكولات (مثل TCP) من فقدان البيانات أو تلفها وتعيد إرسالها إذا لزم الأمر. بينما تتخطى بروتوكولات أخرى (مثل UDP) هذا للسرعة.
- **تشبيه:** مثل شركة شحن تؤكد وصول طردك سليماً مقابل مجرد رميه فوق السياج.

#### 3. التحكم في الازدحام
- **المعنى:** يمنع الشبكة من أن تتعرض للضغط بسبب كمية كبيرة من البيانات.
- **كيفية العمل:** يضبط معدل إرسال البيانات بناءً على حالة الشبكة (مثل إبطاء TCP إذا كان هناك ازدحام مروري).
- **تشبيه:** مثل إبطاء سرعة سيارتك في حركة المرور الكثيفة لتجنب الازدحام.

---

### الخطوة 3: استكشاف بروتوكولات طبقة النقل
تستخدم طبقة النقل بروتوكولين رئيسيين: **TCP** و **UDP**. لكل منهما نهج مختلف.

#### 1. TCP (بروتوكول التحكم في الإرسال) – موجه للاتصال
- **ما يفعله:** يضمن توصيل البيانات بشكل موثوق ومرتب.
- **الميزات الرئيسية:**
  - **إنشاء الاتصال:** يستخدم مصافحة ثلاثية (SYN → SYN-ACK → ACK) لإنشاء اتصال.
  - **الموثوقية:** يعيد إرسال الحزم المفقودة، ويضمن عدم وجود بيانات مكررة أو خارج الترتيب.
  - **التحكم في التدفق:** يضبط معدل الإرسال ليتناسب مع سعة المستقبل.
  - **التحكم في الازدحام:** يبطئ إذا كانت الشبكة مشغولة.
- **أمثلة:** تصفح الويب (HTTP/HTTPS)، البريد الإلكتروني (SMTP)، نقل الملفات (FTP).
- **تشبيه:** مثل مكالمة هاتفية – كلا الطرفين يؤكدان أنهما جاهزان، ويتحدثان بالترتيب، ويغلقان الاتصال بشكل منظم.

#### 2. UDP (بروتوكول مخطط بيانات المستخدم) – لا موجه للاتصال
- **ما يفعله:** يرسل البيانات بسرعة دون ضمانات.
- **الميزات الرئيسية:**
  - **لا يوجد اتصال:** يرسل الحزم (مخططات البيانات) دون إعداد مسبق.
  - **لا توجد موثوقية:** لا يتحقق من فقدان البيانات أو خروجها عن الترتيب.
  - **سريع:** حد أدنى من النفقات العامة، مثالي للمهام الحساسة للوقت.
- **أمثلة:** بث الفيديو، الألعاب عبر الإنترنت، استعلامات DNS.
- **تشبيه:** مثل إرسال بطاقات بريدية – لا يوجد تأكيد على وصولها، لكنها سريعة وبسيطة.

**جدول المقارنة:**

| **الميزة**         | **TCP**             | **UDP**            |
|---------------------|---------------------|--------------------|
| **الاتصال**      | نعم (مصافحة)     | لا                 |
| **الموثوقية**     | نعم (يعيد الإرسال)   | لا                 |
| **السرعة**           | أبطأ (نفقات عامة)   | أسرع (خفيف الوزن) |
| **الترتيب**           | مضمون          | غير مضمون     |
| **حالة الاستخدام**        | الويب، البريد الإلكتروني          | البث، الألعاب  |

---

### الخطوة 4: فهم أرقام المنافذ وتعدد الإرسال
تستخدم طبقة النقل **أرقام المنافذ** لإدارة تطبيقات متعددة على نفس الجهاز.

#### 1. أرقام المنافذ
- **ما هي:** أرقام 16 بت (0–65535) تحدد تطبيقات أو خدمات معينة على جهاز.
- **الأنواع:**
  - **المنافذ المعروفة (0–1023):** محجوزة للخدمات الشائعة (مثل 80 لـ HTTP، 443 لـ HTTPS، 25 لـ SMTP).
  - **المنافذ المسجلة (1024–49151):** تستخدمها تطبيقات محددة.
  - **المنافذ الديناميكية (49152–65535):** مؤقتة، تُخصص لاتصالات جانب العميل.
- **تشبيه:** مثل أرقام الشقق في مبنى – كل تطبيق يحصل على "عنوان" خاص به.

#### 2. تعدد الإرسال وفك التعدد
- **تعدد الإرسال (جانب المرسل):** يجمع البيانات من تطبيقات متعددة في دفق واحد لإرساله عبر الشبكة. تحصل كل حزمة على رقم منفذ لتحديد التطبيق الخاص بها.
- **فك التعدد (جانب المستقبل):** يقسم البيانات الواردة ويوصلها إلى التطبيق الصحيح بناءً على رقم المنفذ.
- **كيفية العمل:** تضيف طبقة النقل رأسًا يحتوي على أرقام منافذ المصدر والوجهة إلى كل حزمة.
- **مثال:** يمكن لمتصفحك (المنفذ 50000) وعميل البريد الإلكتروني (المنفذ 50001) استخدام اتصال الشبكة نفسه في وقت واحد.

**الفكرة الرئيسية:** عناوين IP توصل البيانات إلى الجهاز الصحيح؛ أرقام المنافذ توصلها إلى التطبيق الصحيح على ذلك الجهاز.

---

### الخطوة 5: الخوض في آليات التحكم في التدفق والتحكم في الأخطاء
تضمن هذه الآليات انتقال البيانات بسلوك ودقة (غالبًا في TCP).

#### 1. التحكم في التدفق
- **المعنى:** يمنع المرسل من إرباك المستقبل.
- **كيفية العمل:**
  - **النافذة المنزلقة:** يستخدم TCP "نافذة" للبيانات يمكن للمرسل إرسالها قبل الحاجة إلى إشعار الاستلام (ACK). يعلن المستقبل عن حجم نافذته (كم يستطيع معالجته).
  - **يضبط ديناميكيًا:** إذا كان المخزن المؤقت للمستقبل ممتلئًا، تتقلص النافذة؛ إذا كان جاهزًا، تتسع النافذة.
- **تشبيه:** مثل صب الماء في كوب – تبطئ إذا كان على وشك الفيضان.

#### 2. التحكم في الأخطاء
- **المعنى:** يكتشف الأخطاء في نقل البيانات ويصححها.
- **كيفية العمل:**
  - **أرقام التسلسل:** لكل مقطع TCP رقم لتتبع الترتيب واكتشاف البيانات المفقودة.
  - **إشعارات الاستلام (ACKs):** يؤكد المستقبل الاستلام؛ يؤدي فقدان ACKs إلى إعادة الإرسال.
  - **مجاميع الاختبار (Checksums):** قيمة تُحسب من البيانات لاكتشاف التلف. إذا لم تتطابق، يتم إعادة إرسال الحزمة.
- **تشبيه:** مثل التحقق من قائمة التسوق – العناصر المفقودة أو التالفة يعاد طلبها.

**ملاحظة على UDP:** لا يقوم UDP بالتحكم في التدفق أو الأخطاء – يترك ذلك للتطبيق إذا لزم الأمر.

---

### الخطوة 6: نصائح الدراسة لـ 自考 (امتحان التعليم الذاتي)
1. **احفظ المفاهيم الرئيسية:**
   - الوظائف: من طرف إلى طرف، الموثوقية، التحكم في الازدحام.
   - البروتوكولات: TCP (موثوق)، UDP (سريع).
   - المنافذ: المعروفة (مثل 80، 443)، الديناميكية.
2. **تصور:**
   - ارسم المصافحة الثلاثية لـ TCP (SYN → SYN-ACK → ACK).
   - ارسم تخطيطيًا لتعدد الإرسال: تطبيقات متعددة → منافذ → دفق شبكة واحد.
3. **أسئلة التدريب:**
   - ما الفرق بين TCP و UDP؟
   - كيف تستخدم طبقة النقل أرقام المنافذ؟
   - اشرح كيف يضمن TCP الموثوقية.
4. **استخدم أساليب التذكر:** "TCP = بروتوكول التحكم الكلي" (موثوق)؛ "UDP = بروتوكول مخطط البيانات الفائق" (سريع).
5. **أمثلة من العالم الحقيقي:** اربطها بالتصفح (TCP) مقابل البث (UDP).

---

### الخطوة 7: اختبر فهمك
أجب على هذه الأسئلة للتحقق من استيعابك:
1. أي بروتوكول يستخدم مصافحة ثلاثية؟ (TCP)
2. ما دور أرقام المنافذ في تعدد الإرسال؟ (تحديد التطبيقات)
3. كيف يتعامل TCP مع الحزمة المفقودة؟ (يعيد إرسالها باستخدام أرقام التسلسل و ACKs)
4. لماذا قد يُفضل UDP على TCP؟ (السرعة، نفقات عامة منخفضة)

---

### موارد إضافية
- **الكتب:** "Computer Networking: A Top-Down Approach" (Kurose & Ross) – فصل طبقة النقل.
- **عبر الإنترنت:** برامج Cisco التعليمية لطبقة النقل، YouTube (مثل "PowerCert" عن TCP مقابل UDP).
- **أدوات:** استخدم Wireshark لالتقاط حزم TCP/UDP ورؤية أرقام المنافذ أثناء العمل.

---

يغطي هذا البرنامج التعليمي طبقة النقل بعمق. ادرس كل قسم، تدرب على شرح المفاهيم (مفيد للتحضير الشفهي لـ 自考)، وراجع المناطق الصعبة مثل التحكم في التدفق أو تعدد الإرسال. إذا كنت بحاجة إلى مزيد من الأمثلة أو التوضيح، لا تتردد في السؤال! حظًا موفقًا في دراستك!