---
audio: false
generated: true
lang: ar
layout: post
title: دليل ريديس
translated: true
type: note
---

إليك دليل شامل حول Redis، وهو مخزن بيانات في الذاكرة مفتوح المصدر يُستخدم على نطاق واسع كقاعدة بيانات وذاكرة تخزين مؤقت ووسيط رسائل. سيغطي هذا الدليل أساسياته، وميزاته، وحالات الاستخدام، والتثبيت، والعمليات الأساسية، والمفاهيم المتقدمة.

---

### ما هو Redis؟
Redis (خادم القاموس البعيد) هو مخزن قيم-مفاتيح عالي الأداء يعمل أساسًا في الذاكرة، مما يجعله سريعًا بشكل استثنائي. يدعم هياكل بيانات متنوعة مثل السلاسل النصية، والتجزئات، والقوائم، والمجموعات، والمجموعات المرتبة، وخريطة البتات، وهايبرلوجلوج، والفهارس الجغرافية المكانية. تم إنشاؤه بواسطة Salvatore Sanfilippo في عام 2009، ويتم صيانة Redis الآن من قبل المجتمع وبرعاية Redis Inc.

الخصائص الرئيسية:
- **في الذاكرة**: يتم تخزين البيانات في ذاكرة الوصول العشوائي (RAM) للوصول بزمن انتقال منخفض.
- **ثابت**: يقدم خيار الثبات على القرص للمتانة.
- **متعدد الاستخدامات**: يدعم هياكل بيانات معقدة تتجاوز أزواج المفتاح-القيمة البسيطة.
- **قابل للتوسع**: يوفر التجميع والنسخ المتماثل لتوفر عالي.

---

### لماذا تستخدم Redis؟
يشتهر Redis بسرعته ومرونته. تشمل حالات الاستخدام الشائعة:
1. **التخزين المؤقت**: يسرع التطبيقات عن طريق تخزين البيانات التي يتم الوصول إليها بشكل متكرر (مثل استجابات API، وصفحات الويب).
2. **إدارة الجلسة**: يخزن بيانات جلسة المستخدم في تطبيقات الويب.
3. **التحليلات في الوقت الفعلي**: يتتبع المقاييس، ولوحات المتصدرين، أو عداد الأحداث.
4. **الرسائل نشر/اشتراك**: يمكّن من إرسال الرسائل في الوقت الفعلي بين العمليات أو الخدمات.
5. **طوابير المهام**: يدير الوظائف الخلفية (مثل استخدام أدوات مثل Celery).
6. **التطبيقات الجغرافية المكانية**: يتعامل مع الاستعلامات القائمة على الموقع (مثل العثور على نقاط الاهتمام القريبة).

---

### الميزات الرئيسية
1. **هياكل البيانات**:
   - **السلاسل النصية**: أزواج بسيطة من المفتاح-القيمة (مثال: `SET key "value"`).
   - **القوائم**: مجموعات مرتبة (مثال: `LPUSH mylist "item"`).
   - **المجموعات**: مجموعات غير مرتبة وفريدة (مثال: `SADD myset "item"`).
   - **المجموعات المرتبة**: مجموعات تحتوي على درجات للترتيب (مثال: `ZADD leaderboard 100 "player1"`).
   - **التجزئات**: تعيينات المفتاح-القيمة (مثال: `HSET user:1 name "Alice"`).
   - **خريطة البتات، وهايبرلوجلوج، والتدفقات**: لحالات استخدام متخصصة مثل عد المستخدمين الفريدين أو دفق الأحداث.

2. **الثبات**:
   - **RDB (التقاط اللحظة)**: يحفظ البيانات على القرص بشكل دوري كقطة زمنية.
   - **AOF (ملف الإلحاق فقط)**: يسجل كل عملية كتابة للمتانة؛ يمكن إعادة تشغيله لإعادة بناء مجموعة البيانات.

3. **النسخ المتماثل**: نسخ متماثل رئيسي-تابع لتوفر عالي وقابلية توسع للقراءة.
4. **التجميع**: يوزع البيانات عبر عقد متعددة للتوسع الأفقي.
5. **العمليات الذرية**: يضمن الوصول المتزامن الآمن بأوامر مثل `INCR` أو `MULTI`.
6. **برمجة Lua**: تتيح منطقًا مخصصًا من جانب الخادم.
7. **نشر/اشتراك**: نظام مراسلة خفيف الوزن للاتصال في الوقت الفعلي.

---

### التثبيت
يتوفر Redis على Linux، وmacOS، وWindows (عبر WSL أو إصدارات غير رسمية). إليك كيفية تثبيته على نظام Linux:

1. **عبر مدير الحزم** (Ubuntu/Debian):
   ```bash
   sudo apt update
   sudo apt install redis-server
   ```

2. **من المصدر**:
   ```bash
   wget http://download.redis.io/releases/redis-7.0.15.tar.gz
   tar xzf redis-7.0.15.tar.gz
   cd redis-7.0.15
   make
   sudo make install
   ```

3. **بدء تشغيل Redis**:
   ```bash
   redis-server
   ```

4. **التحقق من التثبيت**:
   ```bash
   redis-cli ping
   ```
   الناتج: `PONG`

5. **التكوين**: قم بتحرير `/etc/redis/redis.conf` (أو ما يعادله) لتعديل الإعدادات مثل الثبات، وحدود الذاكرة، أو الربط بعناوين IP محددة.

---

### العمليات الأساسية
يستخدم Redis واجهة بسيطة قائمة على الأوامر عبر `redis-cli` أو مكتبات العميل. فيما يلي بعض الأمثلة:

#### السلاسل النصية
- تعيين قيمة: `SET name "Alice"`
- الحصول على قيمة: `GET name` → `"Alice"`
- الزيادة: `INCR counter` → `1` (تزداد إلى 2، 3، إلخ)

#### القوائم
- الإضافة إلى اليسار: `LPUSH mylist "item1"`
- الإضافة إلى اليمين: `RPUSH mylist "item2"`
- إخراج من اليسار: `LPOP mylist` → `"item1"`

#### المجموعات
- إضافة عناصر: `SADD myset "apple" "banana"`
- سرد الأعضاء: `SMEMBERS myset` → `"apple" "banana"`
- التحقق من العضوية: `SISMEMBER myset "apple"` → `1` (صحيح)

#### التجزئات
- تعيين الحقول: `HSET user:1 name "Bob" age "30"`
- الحصول على حقل: `HGET user:1 name` → `"Bob"`
- الحصول على جميع الحقول: `HGETALL user:1`

#### المجموعات المرتبة
- الإضافة مع درجة: `ZADD leaderboard 100 "player1" 200 "player2"`
- الحصول على أعلى الدرجات: `ZRANGE leaderboard 0 1 WITHSCORES` → `"player1" "100" "player2" "200"`

---

### مفاهيم متقدمة
1. **تكوين الثبات**:
   - تمكين RDB: عيّن `save 60 1000` في `redis.conf` (احفظ كل 60 ثانية إذا تغير 1000 مفتاح).
   - تمكين AOF: عيّن `appendonly yes` لتسجيل الكتابة.

2. **النسخ المتماثل**:
   - تكوين تابع: `SLAVEOF master_ip master_port`.
   - التحقق من الحالة: `INFO REPLICATION`.

3. **التجميع**:
   - التمكين بـ `cluster-enabled yes` في `redis.conf`.
   - استخدم `redis-cli --cluster create` لإعداد العقد.

4. **سياسات الإخلاء**:
   - التحكم في استخدام الذاكرة بـ `maxmemory` وسياسات مثل `LRU` (الأقل استخدامًا مؤخرًا) أو `LFU` (الأقل استخدامًا).
   - مثال: `maxmemory-policy allkeys-lru`.

5. **المعاملات**:
   - تجميع الأوامر: `MULTI`، متبوعة بالأوامر، ثم `EXEC`.
   - مثال:
     ```
     MULTI
     SET key1 "value1"
     SET key2 "value2"
     EXEC
     ```

6. **نشر/اشتراك**:
   - الاشتراك: `SUBSCRIBE channel1`
   - النشر: `PUBLISH channel1 "Hello"`

---

### مكتبات العميل
يدعم Redis العديد من لغات البرمجة. أمثلة:
- **Python**: `redis-py` (`pip install redis`)
  ```python
  import redis
  r = redis.Redis(host='localhost', port=6379, db=0)
  r.set('key', 'value')
  print(r.get('key'))  # b'value'
  ```
- **Node.js**: `ioredis`
  ```javascript
  const Redis = require('ioredis');
  const redis = new Redis();
  redis.set('key', 'value');
  redis.get('key').then(console.log); // 'value'
  ```

---

### نصائح للأداء
1. **استخدم pipeline**: جمّع الأوامر لتقليل زمن انتقال الذهاب والإياب.
2. **حسن هياكل البيانات**: اختر الهيكل المناسب (مثل استخدام التجزئات للكائنات الصغيرة بدلاً من مفاتيح متعددة).
3. **راقب الذاكرة**: استخدم `INFO MEMORY` لتتبع الاستخدام.
4. **اضبط الثبات**: وازن بين السرعة (RDB) والمتانة (AOF).

---

### الأمان
- **الربط بـ localhost**: عيّن `bind 127.0.0.1` في `redis.conf` لتقييد الوصول.
- **تعيين كلمة مرور**: استخدم `requirepass yourpassword`.
- **تعطيل الأوامر الخطرة**: استخدم `rename-command` (مثال: `rename-command FLUSHALL ""`).

---

### القيود
- **مقيد بالذاكرة**: حجم البيانات محدود بذاكرة الوصول العشوائي المتاحة.
- **أحادي الخيط**: تعمل العمليات الأساسية على خيط واحد (على الرغم من أن الإدخال/الإخراج والثبات يمكنهما استخدام خيوط متعددة في الإصدارات الأحدث).
- **لا توجد استعلامات معقدة**: يفتقر إلى الاستعلامات الشبيهة بـ SQL؛ يعتمد على الوصول القائم على المفتاح.

---

### Redis مقابل قواعد البيانات الأخرى
- **Redis مقابل Memcached**: يقدم Redis هياكل بيانات أكثر ثراءً وثباتًا؛ بينما Memcached أبسط ويعمل بالكامل في الذاكرة.
- **Redis مقابل MongoDB**: Redis أسرع للتخزين المؤقت ولكنه أقل ملاءمة لتخزين المستندات المعقدة والثابتة.
- **Redis مقابل PostgreSQL**: يتفوق Redis في المهام ذات زمن الانتقال المنخفض والوقت الفعلي؛ بينما PostgreSQL أفضل للبيانات العلاقية والامتثال لـ ACID.

---

### المصادر
- **الوثائق الرسمية**: [redis.io](https://redis.io)
- **جرب Redis**: [try.redis.io](https://try.redis.io) (برنامج تعليمي تفاعلي)
- **GitHub**: [github.com/redis/redis](https://github.com/redis/redis)

---

يوفر هذا الدليل أساسًا متينًا لفهم واستخدام Redis. دعني أعلم إذا كنت ترغب في الخوض بشكل أعمق في أي جانب محدد!