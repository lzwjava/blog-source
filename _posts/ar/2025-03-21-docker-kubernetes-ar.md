---
audio: false
generated: true
lang: ar
layout: post
title: دوكر مقابل كوبرنيتس
translated: true
type: note
---

Docker وKubernetes هما تقنيتان مكملتان في نظام الحاويات البيئي، لكنهما تخدم أغراضًا مختلفة. دعنا نفصل أوجه الاختلاف بينهما وكيفية ارتباطهما.

---

### Docker: منصة حاوية
**ما يفعله**: Docker هي أداة لإنشاء وتشغيل وإدارة الحاويات الفردية—بيئات خفيفة الوزن ومعزولة تُغلِّف التطبيق مع تبعياته.

#### الميزات الرئيسية
1. **وقت تشغيل الحاوية (Container Runtime)**:
   - يستخدم Docker وقت تشغيل (مثل `containerd` أو `runc`) لتنفيذ الحاويات بناءً على ميزات نواة Linux مثل النطاقات (namespaces) ومجموعات التحكم (cgroups).
   - هو المسؤول عن دورة حياة الحاوية الفردية: البناء، البدء، الإيقاف، إلخ.

2. **إدارة الصور (Image Management)**:
   - يبني Docker الصور من ملف `Dockerfile`، الذي يحدد التطبيق والمكتبات والإعدادات.
   - يتم تخزين الصور في السجلات (مثل Docker Hub) وتشغيلها كحاويات.

3. **التركيز على المضيف الواحد (Single-Host Focus)**:
   - يتفوق Docker في إدارة الحاويات على جهاز واحد. يمكنك تشغيل حاويات متعددة، لكن التنسيق (orchestration) عبر مضيفين متعددين ليس مدمجًا فيه.

4. **يعتمد على واجهة سطر الأوامر (CLI-Driven)**:
   - أوامر مثل `docker build`، و`docker run`، و`docker ps` تتيح لك التفاعل مع الحاويات مباشرة.

#### حالة الاستخدام
- تشغيل تطبيق Spring Boot فردي على حاسوبك المحمول أو على خادم:
  ```bash
  docker run -p 8080:8080 myapp:latest
  ```

#### القيود
- لا يوجد دعم أصلي متعدد المضيفين.
- لا يوجد تحجيم تلقائي، أو معالجة ذاتية للأعطال (self-healing)، أو موازنة تحميل (load balancing).
- إدارة العديد من الحاويات يدويًا تصبح فوضوية.

---

### Kubernetes: نظام تنسيق الحاويات
**ما يفعله**: Kubernetes (يُختصر غالبًا K8s) هو منصة لإدارة وتنسيق حاويات متعددة عبر مجموعة (cluster) من الأجهزة. فهو يُؤتمت نشر وتوسيع نطاق وتشغيل التطبيقات المعتمدة على الحاويات.

#### الميزات الرئيسية
1. **إدارة المجموعة (Cluster Management)**:
   - يعمل Kubernetes على مجموعة من العُقَد (nodes) (أجهزة فعلية أو افتراضية). عقدة واحدة هي "مستوى التحكم" (control plane) (تدير المجموعة)، والآخرون هم "عُقَد العامل" (worker nodes) (تشغل الحاويات).

2. **التنسيق (Orchestration)**:
   - **الجدولة (Scheduling)**: تقرر أي عقدة تشغل كل حاوية بناءً على الموارد والقيود.
   - **التحجيم (Scaling)**: تزيد أو تقلل تلقائيًا عدد نسخ الحاوية (مثلاً، بناءً على استخدام وحدة المعالجة المركزية CPU).
   - **المعالجة الذاتية (Self-Healing)**: تعيد تشغيل الحاويات الفاشلة، تعيد جدولتها إذا توقفت عقدة ما، وتضمن الحفاظ على الحالة المطلوبة.
   - **موازنة التحميل (Load Balancing)**: توزع حركة المرور عبر عدة نسخ من الحاوية.

3. **طبقة التجريد (Abstraction Layer)**:
   - يستخدم "الجرابات (Pods)" كأصغر وحدة—يمكن أن تحتوي الجرابة على حاوية واحدة أو أكثر (عادة واحدة) تشارك موارد التخزين والشبكة.
   - يتم إدارتها عبر ملفات YAML التصريحية (declarative) (مثلاً، تعريفات النشرات (deployments) والخدمات (services)).

4. **التركيز على المضيفين المتعددين (Multi-Host Focus)**:
   - مُصمم لأنظمة موزعة، ينسق الحاويات عبر العديد من الأجهزة.

5. **النظام البيئي (Ecosystem)**:
   - يتضمن ميزات مثل اكتشاف الخدمة (service discovery)، والتخزين الدائم (persistent storage)، وإدارة الأسرار (secrets management)، والتحديثات المتدرجة (rolling updates).

#### حالة الاستخدام
- نشر تطبيق يعتمد على هندسة الخدمات المصغرة (microservices) يحتوي على 10 خدمات، كل منها في حاويتها الخاصة، عبر 5 خوادم، مع تحجيم تلقائي وتبديل عند الفشل (failover):
  ```yaml
  apiVersion: apps/v1
  kind: Deployment
  metadata:
    name: myapp
  spec:
    replicas: 3
    selector:
      matchLabels:
        app: myapp
    template:
      metadata:
        labels:
          app: myapp
      spec:
        containers:
        - name: myapp
          image: myapp:latest
          ports:
          - containerPort: 8080
  ```

#### القيود
- منحنى تعلم أكثر حدة.
- مبالغة للتطبيقات البسيطة ذات الحاوية الواحدة على جهاز واحد.

---

### الاختلافات الرئيسية

| الجانب                | Docker                              | Kubernetes                          |
|-----------------------|-------------------------------------|-------------------------------------|
| **الغرض**             | إنشاء الحاوية ووقت التشغيل          | تنسيق الحاويات (Container orchestration) |
| **النطاق**            | مضيف واحد                           | مجموعة من المضيفين                  |
| **الوحدة**            | حاوية (Container)                   | جرابة (Pod) (مجموعة من حاوية واحدة أو أكثر) |
| **التحجيم**           | يدوي (مثلاً، `docker run` عدة مرات) | تلقائي (عبر النسخ المتماثلة replicas) |
| **الشبكات**           | أساسي (جسر، مضيف، تراكبي)           | متقدم (خدمات، مدخل ingress)         |
| **المعالجة الذاتية**  | لا يوجد (إعادة تشغيل يدوية)         | مدمج (يعيد التشغيل، يعيد الجدولة)    |
| **الإدارة**           | واجهة سطر الأوامر أو Docker Compose للإعدادات الصغيرة | تكوينات YAML، واجهة سطر أوامر `kubectl` |
| **التبعيات**          | قائم بذاته (يحتاج محرك Docker)      | يحتاج إلى وقت تشغيل للحاوية (مثل Docker) |

---

### كيف يعملان معًا
- **Docker كوقت تشغيل**: Kubernetes لا يشغل الحاويات مباشرة—يعتمد على وقت تشغيل للحاويات مثل Docker (أو بدائل مثل `containerd`) لبدء وإدارة الحاويات الفردية داخل الجرابات (Pods).
- **سير العمل (Workflow)**:
  1. تبني صورة Docker (`docker build -t myapp:latest .`).
  2. تدفعها إلى السجل (`docker push myapp:latest`).
  3. يسحب Kubernetes الصورة وينشرها عبر المجموعة بناءً على تكوين YAML الخاص بك (`kubectl apply -f deployment.yaml`).

- **مثال**: قد يستخدم Kubernetes Docker لتشغيل ثلاث نسخ من `myapp:latest` على عُقَد مختلفة، وعرضها عبر خدمة متوازنة التحميل.

---

### تشبيه
- **Docker**: طاهٍ يطبخ طبقًا واحدًا في مطبخ. أنت تخبر الطاهي ما يصنع (`Dockerfile`) وكيف يقدمه (`docker run`).
- **Kubernetes**: مدير مطعم يشرف على عدة طهاة (مثيلات Docker) عبر العديد من المطابخ (العُقَد). يتأكد المدير من تحضير الأطباق في الوقت المحدد، ويزيد عدد الموظفين خلال ساعات الذروة، ويستبدل الطاهي الذي يمرض.

---

### متى تستخدم أيهما؟
- **Docker بمفرده**: للتطوير، الاختبار، أو التطبيقات البسيطة على جهاز واحد (مثلاً، تطبيق Spring Boot فردي).
- **Kubernetes**: للتطبيقات الموزعة من درجة الإنتاج التي تحتاج إلى توفر عالٍ، وتوسيع نطاق، ومرونة (مثلاً، هندسة الخدمات المصغرة).

---

هل هذا يوضح الفرق؟ أعلمني إذا كنت ترغب في استكشاف جانب محدد— مثل إعداد Kubernetes أو مقارنته بـ Docker Compose!