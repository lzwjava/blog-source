---
audio: true
lang: ar
layout: post
title: ما يمكن لـ ChatGPT o1 فعله ولا يمكن لـ 4o-mini فعله
translated: true
---

واجهت مؤخرًا مشكلة مع حزمة `fontawesome5` في سير عمل GitHub. الحل الذي قدمه 4o-mini (باستخدام TeX Live 2021 و `tlmgr install fontawesome5`) لم يعمل، لكن 4o اقترح نهجًا أفضل (باستخدام TeX Live 2023 مع الاستمرار في استخدام `tlmgr` لتثبيت `fontawesome5`)، وهو ما أحاول تطبيقه حاليًا. لم يتم حل المشكلة بالكامل، لكن التحول إلى TeX Live 2023 بدلًا من 2021 قد أحدث تحسنًا ملحوظًا.

---

## إجابة 4o-mini

الخطأ الذي تراه مرتبط بـ `tlmgr` (مدير TeX Live) الذي لم يتم تهيئته بشكل صحيح في الوضع الخاص بالمستخدم. على وجه التحديد، تشير الرسالة `tlmgr: user mode not initialized, please read the documentation!` إلى أن `tlmgr` لم يتم إعداده بشكل صحيح في بيئة المستخدم.

إليك تفصيلًا لكيفية إصلاحه:

### إصلاح خطأ وضع المستخدم في `tlmgr`

عند استخدام `tlmgr` (مدير حزم TeX Live)، قد تواجه خطأً يشير إلى أنك تعمل في "وضع المستخدم" (User Mode) ولا يمكنك إجراء تغييرات على النظام. هذا الخطأ شائع عند محاولة تثبيت أو تحديث الحزم باستخدام `tlmgr`. إليك كيفية إصلاحه:

#### الخطوات:

1. **فتح طرفية (Terminal)**: 
   افتح الطرفية على نظامك.

2. **تحديث `tlmgr`**:
   قم بتشغيل الأمر التالي لتحديث `tlmgr` إلى الإصدار الأحدث:
   ```bash
   tlmgr update --self
   ```

3. **تغيير وضع `tlmgr` إلى وضع المسؤول (Admin Mode)**:
   إذا كنت بحاجة إلى إجراء تغييرات على النظام، يجب أن تعمل في وضع المسؤول. قم بتشغيل الأمر التالي:
   ```bash
   tlmgr --usermode
   ```
   ثم قم بتعطيل وضع المستخدم:
   ```bash
   tlmgr option --usermode 0
   ```

4. **تثبيت أو تحديث الحزم**:
   الآن يمكنك تثبيت أو تحديث الحزم التي تحتاجها باستخدام `tlmgr` دون مواجهة خطأ وضع المستخدم. على سبيل المثال:
   ```bash
   tlmgr install <package_name>
   ```

5. **التحقق من الإذن (Permissions)**:
   تأكد من أن لديك الصلاحيات الكافية لتعديل دليل TeX Live. قد تحتاج إلى استخدام `sudo` إذا كنت تعمل على نظام Linux أو macOS:
   ```bash
   sudo tlmgr install <package_name>
   ```

باتباع هذه الخطوات، يجب أن تكون قادرًا على إصلاح خطأ وضع المستخدم في `tlmgr` وإدارة حزم TeX Live بشكل صحيح.

1. **تعيين `tlmgr` إلى وضع المستخدم بشكل صحيح**:
   تحتاج إلى إخبار `tlmgr` بشكل صريح بالعمل في وضع المستخدم والتأكد من تهيئته بشكل صحيح. للقيام بذلك في البرنامج النصي الخاص بك، استخدم الخطوات التالية:

   - تأكد من استخدام `tlmgr` في وضع المستخدم عن طريق تعيين متغير البيئة الصحيح.
   - يمكنك أيضًا تهيئة دليل TeX Live المخصص للمستخدم قبل استخدام `tlmgr`.

2. **تهيئة `tlmgr` في وضع المستخدم**:
   قبل تشغيل أوامر `tlmgr`، تأكد من تهيئة `tlmgr` باستخدام الأمر التالي:
   ```bash
   tlmgr init-usertree
   ```

سيؤدي هذا إلى إنشاء شجرة TeX Live الخاصة بالمستخدم في المسار `~/texmf`. بمجرد التهيئة، يمكنك بعد ذلك تشغيل أوامر `tlmgr update` و`install`.

3. **تعديل سير عمل GitHub Actions**:
   قم بتحديث ملف سير عمل GitHub Actions الخاص بك لتضمين خطوة التهيئة. إليك مثالًا لكيفية تعديل السير العمل:

```yaml
name: CI

on:
  push:
    branches:
      - main

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2

    - name: Initialize environment
      run: |
        echo "Initializing environment..."
        # Add your initialization commands here

    - name: Build project
      run: |
        echo "Building project..."
        # Add your build commands here

    - name: Run tests
      run: |
        echo "Running tests..."
        # Add your test commands here
```

في هذا المثال، تمت إضافة خطوة جديدة باسم "Initialize environment" حيث يمكنك إضافة الأوامر اللازمة لتهيئة البيئة قبل بدء عملية البناء والاختبار.

```yaml
   - name: تعيين tlmgr إلى وضع المستخدم
     run: |
       # تهيئة دليل TeX Live الخاص بوضع المستخدم
       tlmgr init-usertree
       tlmgr update --self
       tlmgr install fontawesome5
   ```

### مثال كامل:

إذا كنت تقوم بتشغيل هذا كجزء من سير عمل أكبر في GitHub Actions، يمكنك دمج هذه التغييرات في قسم الوظيفة ذات الصلة:

```yaml
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: تثبيت TeX Live (xelatex)
        run: |
          sudo apt-get update
          sudo apt-get install -y texlive-xetex
          tlmgr init-usertree  # تهيئة شجرة المستخدم لـ TeX Live
          tlmgr update --self  # تحديث tlmgr نفسه
          tlmgr install fontawesome5  # تثبيت الحزمة المطلوبة
```

### شرح الأوامر:

- `tlmgr init-usertree`: يقوم بتهيئة شجرة TeX Live الخاصة بالمستخدم (عادةً ما تكون موجودة في `~/texmf`).
- `tlmgr update --self`: يقوم بتحديث حزمة `tlmgr` نفسها إلى أحدث إصدار.
- `tlmgr install fontawesome5`: يقوم بتثبيت حزمة `fontawesome5`.

### ملاحظات إضافية:

- **الأذونات**: تأكد من أن المستخدم الذي يقوم بتشغيل سير عمل GitHub Actions لديه الإذن لتثبيت وتعديل الملفات في دليل مستخدم TeX Live.
- **متغيرات البيئة**: إذا كنت تعمل مع مسارات مخصصة، قد تحتاج إلى تعديل `TEXMFSYSVAR` أو `TEXMFHOME` للإشارة إلى الأدلة المحددة لديك.

بضمان تهيئة `tlmgr` في وضع المستخدم وإعداده بشكل صحيح في سير عمل GitHub Actions، يجب أن يتم حل الخطأ. أخبرني إذا نجح هذا أو إذا واجهت أي مشاكل أخرى!

### إجابة o1

أفهم أنك تواجه مشكلات مع `tlmgr` (مدير TeX Live) في سير عمل GitHub Actions، خاصة عند محاولة تثبيت حزمة `fontawesome5`. رسالة الخطأ:

```
TLPDB: ليس مجلدًا، لا يتم التحميل: /home/runner/texmf
tlmgr: وضع المستخدم غير مهيأ، يرجى قراءة الوثائق!
خطأ: اكتملت العملية برمز خروج 2.
```

يشير إلى أن `tlmgr` غير قادر على العمل في "وضع المستخدم" لأن الدلائل والإعدادات اللازمة غير مُعدة بشكل صحيح. غالبًا ما تحدث هذه المشكلة عند استخدام تثبيتات TeX Live المقدمة من خلال مديريات الحزم مثل `apt-get`، والتي قد تكون ذات وظائف محدودة مقارنة بتثبيت TeX Live الكامل من TUG (مجموعة مستخدمي TeX).

لحل هذه المشكلة، أوصي **بتثبيت TeX Live 2023 يدويًا** داخل سير عمل GitHub Actions الخاص بك. هذا النهج يضمن أن `tlmgr` يعمل بكامل طاقته ويمكنه تثبيت حزم إضافية مثل `fontawesome5` دون مشاكل.

### الحل خطوة بخطوة:

1. **إزالة تثبيت System TeX Live:**
   - تجنب استخدام `apt-get install texlive-xetex` لأنه يوفر تثبيتًا جزئيًا لـ TeX Live مع وظائف محدودة لـ `tlmgr`.
   
2. **تثبيت TeX Live 2023 يدويًا:**
   - قم بتنزيل وتثبيت TeX Live مباشرة من TUG.
   
3. **تكوين متغير بيئة PATH:**
   - تأكد من أن ملفات TeX Live الثنائية قابلة للوصول عن طريق تحديث PATH.

4. **استخدم `tlmgr` لتثبيت الحزم المطلوبة:**
   - قم بتحديث `tlmgr` وقم بتثبيت `fontawesome5`.

5. **تحسين سير العمل باستخدام التخزين المؤقت (اختياري):**
   - قم بتخزين تثبيت TeX Live مؤقتًا لتسريع عمليات تشغيل سير العمل المستقبلية.

### سير عمل GitHub Actions المحدث:

أدناه نسخة محدثة من سير عمل GitHub Actions الخاصة بك والتي تتضمن التثبيت اليدوي لـ TeX Live 2023 وإعداد `tlmgr` بشكل صحيح لتثبيت حزمة `fontawesome5`.

```yaml
name: نشر Jekyll مع تبعيات GitHub Pages المثبتة مسبقًا
```

عند:
  دفع:
    الفروع: ["master"]
  إرسال_سير_العمل:

```yaml
permissions:
  contents: read
  pages: write
  id-token: write
```

الترجمة:

```yaml
الأذونات:
  المحتويات: قراءة
  الصفحات: كتابة
  رمز الهوية: كتابة
```

التزامن:
  مجموعة: "الصفحات"
  إلغاء-في-التقدم: خطأ

```yaml
jobs:
  awesome-cv-copy:
    runs-on: ubuntu-latest
    steps:
      - name: التحقق من المستودع
        uses: actions/checkout@v4
```

```yaml
      - name: إعداد Make
        run: sudo apt-get update && sudo apt-get install -y make
```

```yaml
      - name: تخزين TeX Live مؤقتًا
        uses: actions/cache@v3
        with:
          path: /usr/local/texlive/2023
          key: ${{ runner.os }}-texlive-2023
          restore-keys: |
            ${{ runner.os }}-texlive-
```

```yaml
      - name: تثبيت TeX Live 2023
        if: steps.cache-texlive.outputs.cache-hit != 'true'
        run: |
          # تثبيت التبعيات اللازمة لتثبيت TeX Live
          sudo apt-get update
          sudo apt-get install -y perl wget xz-utils
```

          # تنزيل مُثبِّت TeX Live
          wget http://mirror.ctan.org/systems/texlive/tlnet/install-tl-unx.tar.gz
          tar -xzf install-tl-unx.tar.gz
          cd install-tl-*/

```bash
# إنشاء ملف texlive.profile للتثبيت التلقائي
cat <<EOF > texlive.profile
selected_scheme scheme-full
TEXDIR /usr/local/texlive/2023
TEXMFCONFIG ~/.texlive2023/texmf-config
TEXMFHOME ~/texmf
TEXMFLOCAL /usr/local/texlive/2023/texmf-local
TEXMFSYSCONFIG /usr/local/texlive/2023/texmf-config
TEXMFSYSVAR /usr/local/texlive/2023/texmf-var
binary_x86_64-linux 1
collection-basic 1
collection-latex 1
collection-fontsrecommended 1
EOF
```

          # تشغيل المثبت باستخدام الملف الشخصي
          sudo ./install-tl --profile=texlive.profile

```yaml
      - name: إضافة TeX Live إلى PATH
        run: echo "/usr/local/texlive/2023/bin/x86_64-linux" >> $GITHUB_PATH
```

```yaml
      - name: تحديث tlmgr وتثبيت fontawesome5
        run: |
          tlmgr update --self
          tlmgr install fontawesome5
```

      - name: تشغيل make awesome-cv-copy
        run: make awesome-cv-copy

```yaml
  build:
    runs-on: ubuntu-latest
    needs: awesome-cv-copy
    steps:
      - name: التحقق من المستودع
        uses: actions/checkout@v4
```

```yaml
      - name: إعداد Python 3
        uses: actions/setup-python@v4
        with:
          python-version: "3.x"
```

```yaml
      - name: تثبيت التبعيات
        run: |
          python -m pip install --upgrade pip
          pip install python-frontmatter
```

      - name: إنشاء روابط الملاحظات
        run: |
          python scripts/generate_notes_link.py

```yaml
      - name: إعداد الصفحات
        uses: actions/configure-pages@v5
```

```yaml
      - name: بناء باستخدام Jekyll
        uses: actions/jekyll-build-pages@v1
        with:
          source: ./
          destination: ./_site
```

```yaml
      - name: تحميل الأداة
        uses: actions/upload-pages-artifact@v3
```

```yaml
  deploy:
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    runs-on: ubuntu-latest
    needs: build
    steps:
      - name: النشر على GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4
```

### شرح مفصل:

1. **تفقد المستودع:**
   - يستخدم الإجراء `actions/checkout@v4` لاستنساخ مستودعك.

2. **إعداد Make:**
   - تثبيت `make` باستخدام `apt-get`، مما يضمن توافره لبناء سيرتك الذاتية.

3. **تخزين TeX Live مؤقتًا:**
   - يستخدم `actions/cache@v3` لتخزين تثبيت TeX Live الموجود في `/usr/local/texlive/2023` مؤقتًا. هذا يقلل بشكل كبير من وقت التثبيت في عمليات التشغيل اللاحقة للتدفق العملي.

4. **تثبيت TeX Live 2023:**
   - **التنفيذ الشرطي:** الشرط `if: steps.cache-texlive.outputs.cache-hit != 'true'` يضمن أن يتم تثبيت TeX Live فقط إذا لم يكن موجودًا بالفعل في الذاكرة المؤقتة.
   - **تثبيت التبعيات:** يتم تثبيت التبعيات الضرورية مثل Perl، `wget`، و `xz-utils`.
   - **تنزيل واستخراج المثبت:** يتم تنزيل أحدث مثبت لـ TeX Live من CTAN واستخراجه.
   - **إنشاء ملف تعريف التثبيت:** يتم إنشاء ملف `texlive.profile` لأتمتة عملية التثبيت. يحدد هذا الملف:
     - **`selected_scheme scheme-full`:** يقوم بتثبيت توزيعة TeX Live الكاملة. يمكنك تعديل هذا إلى مخطط تثبيت أدنى إذا رغبت.
     - **الدلائل:** يحدد مكان تثبيت TeX Live وإعداداته.
     - **المجموعات:** يتم اختيار المجموعات الأساسية مثل `basic`، `latex`، و `fontsrecommended`.
   - **تشغيل المثبت:** يتم تنفيذ المثبت باستخدام ملف التعريف المحدد، مما يؤدي إلى تثبيت TeX Live 2023 في `/usr/local/texlive/2023`.

5. **إضافة TeX Live إلى PATH:**
   - يقوم بتحديث متغير البيئة `PATH` عن طريق إضافة دليل ثنائيات TeX Live. هذا يضمن أن `tlmgr` والأوامر الأخرى الخاصة بـ TeX Live ستكون متاحة في الخطوات اللاحقة.

6. **تحديث `tlmgr` وتثبيت `fontawesome5`:**
   - **تحديث `tlmgr`:** يضمن أن `tlmgr` نفسه محدثًا إلى آخر إصدار.
   - **تثبيت `fontawesome5`:** يستخدم `tlmgr` لتثبيت حزمة `fontawesome5`، مما يحل المشكلة الأولية التي واجهتها.

7. **تشغيل أمر Make:**
   - تنفيذ `make awesome-cv-copy` لبناء سيرتك الذاتية باستخدام إعداد TeX Live المثبت.

8. **وظائف البناء والنشر:**
   - تظل هذه الوظائف دون تغيير كبير، ولكن تأكد من أن تثبيت TeX Live متاح طوال عملية سير العمل بسبب تحديث PATH.

### توصيات إضافية:

- **وقت تثبيت TeX Live:**
  - **التخزين المؤقت:** تضمين خطوة `actions/cache@v3` يساعد في تقليل وقت التثبيت الطويل عن طريق تخزين TeX Live مؤقتًا بعد التشغيل الأول. تأكد من أن مفتاح التخزين المؤقت (`${{ runner.os }}-texlive-2023`) يعكس بدقة إصدار TeX Live لتجنب عدم تطابق التخزين المؤقت.
  
- **تخصيص تثبيت TeX Live:**
  - إذا كنت لا تحتاج إلى توزيعة TeX Live الكاملة، يمكنك تعديل ملف `texlive.profile` لتثبيت مجموعات محددة فقط، مما يقلل من وقت التثبيت واستخدام القرص. على سبيل المثال، استبدل `scheme-full` بـ `scheme-basic` وحدد فقط المجموعات الضرورية.

- **التحقق من التثبيت:**
  - للتأكد من تثبيت TeX Live بشكل صحيح، يمكنك إضافة خطوة تحقق:
    ```yaml
    - name: التحقق من تثبيت TeX Live
      run: |
        tex --version
        tlmgr --version
        kpsewhich fontawesome5.sty
    ```
    يمكن أن تساعد هذه الخطوة في تشخيص أي مشاكل عن طريق التأكد من أن أوامر TeX Live متاحة وأن `fontawesome5.sty` مثبتة.

- **التعامل مع PATH بشكل صحيح:**
  - استخدام الأمر `echo "/usr/local/texlive/2023/bin/x86_64-linux" >> $GITHUB_PATH` يضمن إضافة ملفات TeX Live الثنائية إلى PATH لجميع الخطوات اللاحقة في المهمة. هذا أمر بالغ الأهمية لكي تعمل أوامر `tlmgr` و LaTeX بشكل صحيح.

### نصائح لاستكشاف الأخطاء وإصلاحها:

1. **مشكلات فقدان ذاكرة التخزين المؤقت (Cache Miss):**
   - تأكد من أن مفتاح ذاكرة التخزين المؤقت يعكس بشكل دقيق إصدار TeX Live. إذا قمت بتحديث TeX Live أو تغيير مسار التثبيت، قم بتحديث مفتاح ذاكرة التخزين المؤقت وفقًا لذلك.

2. **فشل التثبيت:**
   - تحقق من سجلات GitHub Actions للبحث عن أي أخطاء حدثت أثناء تثبيت TeX Live. تشمل المشاكل الشائعة مشاكل الشبكة عند تنزيل المثبّت أو عدم وجود الصلاحيات الكافية.

3. **أخطاء تثبيت الحزم:**
   - إذا فشل `tlmgr` في تثبيت `fontawesome5`، تحقق من أن اسم الحزمة صحيح وأنها متوفرة في مستودع TeX Live.

4. **مشكلات PATH:**
   - تأكد من تحديث PATH بشكل صحيح. يمكنك إضافة خطوة لطباعة PATH لأغراض التصحيح:
     ```yaml
     - name: Print PATH
       run: echo $PATH
     ```

5. **قيود مساحة القرص:**
   - لدى عدائي GitHub Actions مساحة قرص محدودة. يمكن أن تستهلك عملية تثبيت TeX Live الكاملة مساحة كبيرة. إذا واجهت مشاكل في مساحة القرص، ففكر في تثبيت إعداد TeX Live بحد أدنى من المكونات.

### مثال نهائي لسير العمل مع التحقق:

لنلخص كل ما تعلمناه في مثال عملي نهائي. سنقوم بإنشاء سير عمل بسيط يقوم ببناء تطبيق React، تشغيل الاختبارات، ونشر التطبيق على GitHub Pages إذا نجحت جميع الاختبارات. سنستخدم أيضًا التحقق من التوقيع (signature verification) للتأكد من أن العملية آمنة.

#### الخطوة 1: إعداد المستودع

1. **إنشاء مستودع جديد على GitHub**:
   - اذهب إلى GitHub وأنشئ مستودعًا جديدًا باسم `react-app-example`.

2. **استنساخ المستودع محليًا**:
   ```bash
   git clone https://github.com/username/react-app-example.git
   cd react-app-example
   ```

3. **تهيئة مشروع React**:
   ```bash
   npx create-react-app .
   ```

4. **إضافة ملفات العمل إلى المستودع**:
   ```bash
   git add .
   git commit -m "Initialize React app"
   git push origin main
   ```

#### الخطوة 2: إعداد سير العمل

1. **إنشاء ملف سير العمل**:
   - في المستودع، أنشئ مجلد `.github/workflows` وملف `ci-cd.yml` بداخله.

2. **تحديد سير العمل**:
   ```yaml
   name: CI/CD Pipeline

   on:
     push:
       branches:
         - main
     pull_request:
       branches:
         - main

   jobs:
     build:
       runs-on: ubuntu-latest

       steps:
       - name: Checkout code
         uses: actions/checkout@v2

       - name: Set up Node.js
         uses: actions/setup-node@v2
         with:
           node-version: '14'

       - name: Install dependencies
         run: npm install

       - name: Run tests
         run: npm test

       - name: Build project
         run: npm run build

       - name: Deploy to GitHub Pages
         if: github.ref == 'refs/heads/main'
         uses: peaceiris/actions-gh-pages@v3
         with:
           github_token: ${{ secrets.GITHUB_TOKEN }}
           publish_dir: ./build
   ```

#### الخطوة 3: إضافة التحقق من التوقيع

1. **إنشاء مفتاح GPG**:
   - قم بإنشاء مفتاح GPG إذا لم يكن لديك واحدًا:
     ```bash
     gpg --full-generate-key
     ```
   - اتبع التعليمات لإكمال العملية.

2. **تصدير المفتاح العام**:
   ```bash
   gpg --armor --export YOUR_KEY_ID > public-key.asc
   ```

3. **إضافة المفتاح العام إلى GitHub**:
   - اذهب إلى إعدادات GitHub -> SSH and GPG keys -> New GPG key.
   - الصق محتوى `public-key.asc` في الحقل المخصص.

4. **توقيع الـ commit**:
   - عند إجراء commit، قم بتوقيعه باستخدام:
     ```bash
     git commit -S -m "Your commit message"
     ```

5. **تعديل سير العمل للتحقق من التوقيع**:
   ```yaml
   jobs:
     build:
       runs-on: ubuntu-latest

       steps:
       - name: Checkout code
         uses: actions/checkout@v2

       - name: Verify commit signature
         run: |
           git verify-commit HEAD
           if [ $? -ne 0 ]; then
             echo "Commit signature verification failed!"
             exit 1
           fi

       - name: Set up Node.js
         uses: actions/setup-node@v2
         with:
           node-version: '14'

       - name: Install dependencies
         run: npm install

       - name: Run tests
         run: npm test

       - name: Build project
         run: npm run build

       - name: Deploy to GitHub Pages
         if: github.ref == 'refs/heads/main'
         uses: peaceiris/actions-gh-pages@v3
         with:
           github_token: ${{ secrets.GITHUB_TOKEN }}
           publish_dir: ./build
   ```

#### الخطوة 4: اختبار سير العمل

1. **إجراء تغييرات على المشروع**:
   - قم بإجراء بعض التغييرات على ملف `src/App.js` وأضفها إلى الـ commit.

2. **توقيع الـ commit**:
   ```bash
   git add .
   git commit -S -m "Update App.js"
   git push origin main
   ```

3. **مراقبة سير العمل**:
   - اذهب إلى GitHub -> Actions لمراقبة سير العمل. يجب أن ترى أن العملية قد تمت بنجاح إذا كانت جميع الخطوات صحيحة.

#### الخطوة 5: التحقق من النشر

1. **زيارة GitHub Pages**:
   - بعد اكتمال سير العمل، اذهب إلى إعدادات المستودع -> Pages لرؤية الرابط الذي تم نشره.

2. **اختبار التطبيق**:
   - افتح الرابط في المتصفح وتأكد من أن التطبيق يعمل بشكل صحيح.

بهذا نكون قد أنشأنا سير عمل متكامل مع التحقق من التوقيع لضمان أمان العملية. يمكنك الآن تطبيق هذه الخطوات على مشاريعك الخاصة لتحسين جودة وأمان عمليات التطوير والنشر.

إليك سير عمل أكثر شمولاً يتضمن خطوات التحقق للتأكد من أن كل شيء تم إعداده بشكل صحيح:

```yaml
name: نشر Jekyll مع تثبيت تبعيات GitHub Pages مسبقًا
```

عند:
  الدفع:
    الفروع: ["master"]
  إرسال_سير_العمل:

الأذونات:
  المحتويات: قراءة
  الصفحات: كتابة
  رمز الهوية: كتابة

التزامن:
  مجموعة: "صفحات"
  إلغاء-في-التقدم: خطأ

```yaml
jobs:
  awesome-cv-copy:
    runs-on: ubuntu-latest
    steps:
      - name: التحقق من المستودع
        uses: actions/checkout@v4
```

```yaml
      - name: إعداد Make
        run: sudo apt-get update && sudo apt-get install -y make
```

```yaml
      - name: تخزين TeX Live مؤقتًا
        uses: actions/cache@v3
        with:
          path: /usr/local/texlive/2023
          key: ${{ runner.os }}-texlive-2023
          restore-keys: |
            ${{ runner.os }}-texlive-
```

      - name: تثبيت TeX Live 2023
        if: steps.cache-texlive.outputs.cache-hit != 'true'
        run: |
          # تثبيت التبعيات اللازمة لمثبت TeX Live
          sudo apt-get update
          sudo apt-get install -y perl wget xz-utils

          # تنزيل مُثبِّت TeX Live
          wget http://mirror.ctan.org/systems/texlive/tlnet/install-tl-unx.tar.gz
          tar -xzf install-tl-unx.tar.gz
          cd install-tl-*/

          # إنشاء ملف texlive.profile للتثبيت التلقائي
          cat <<EOF > texlive.profile
          selected_scheme scheme-full
          TEXDIR /usr/local/texlive/2023
          TEXMFCONFIG ~/.texlive2023/texmf-config
          TEXMFHOME ~/texmf
          TEXMFLOCAL /usr/local/texlive/2023/texmf-local
          TEXMFSYSCONFIG /usr/local/texlive/2023/texmf-config
          TEXMFSYSVAR /usr/local/texlive/2023/texmf-var
          binary_x86_64-linux 1
          collection-basic 1
          collection-latex 1
          collection-fontsrecommended 1
          EOF

```bash
# تشغيل المثبت باستخدام الملف الشخصي
sudo ./install-tl --profile=texlive.profile
```

```yaml
      - name: إضافة TeX Live إلى PATH
        run: echo "/usr/local/texlive/2023/bin/x86_64-linux" >> $GITHUB_PATH
```

```yaml
      - name: التحقق من تثبيت TeX Live
        run: |
          tex --version
          tlmgr --version
          kpsewhich fontawesome5.sty || echo "لم يتم العثور على fontawesome5.sty"
```

```yaml
      - name: تحديث tlmgr وتثبيت fontawesome5
        run: |
          tlmgr update --self
          tlmgr install fontawesome5
```

      - name: التحقق من تثبيت fontawesome5
        run: kpsewhich fontawesome5.sty

```yaml
      - name: تشغيل make awesome-cv-copy
        run: make awesome-cv-copy
```

```yaml
  build:
    runs-on: ubuntu-latest
    needs: awesome-cv-copy
    steps:
      - name: التحقق من المستودع
        uses: actions/checkout@v4
```

```yaml
      - name: إعداد Python 3
        uses: actions/setup-python@v4
        with:
          python-version: "3.x"
```

```yaml
      - name: تثبيت التبعيات
        run: |
          python -m pip install --upgrade pip
          pip install python-frontmatter
```

      - name: إنشاء روابط الملاحظات
        run: |
          python scripts/generate_notes_link.py

      - name: إعداد الصفحات
        uses: actions/configure-pages@v5

```yaml
      - name: بناء باستخدام Jekyll
        uses: actions/jekyll-build-pages@v1
        with:
          source: ./
          destination: ./_site
```

```yaml
      - name: تحميل الأداة
        uses: actions/upload-pages-artifact@v3
```

```yaml
  deploy:
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    runs-on: ubuntu-latest
    needs: build
    steps:
      - name: نشر على GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4
```

### التحسينات الرئيسية:

1. **خطوات التحقق:**
   - **التحقق من تثبيت TeX Live:** التأكد من أن `tex`، `tlmgr`، و `fontawesome5.sty` متاحة للاستخدام.
   - **التحقق من تثبيت `fontawesome5`:** التأكد من أن ملف `fontawesome5.sty` مثبت بشكل صحيح.

2. **تحسين التخزين المؤقت:**
   - **دقة مفتاح التخزين المؤقت:** يتم إنشاء مفتاح التخزين المؤقت بناءً على نظام التشغيل وإصدار TeX Live، مما يضمن أن التغييرات في TeX Live تتطلب تخزينًا مؤقتًا جديدًا.

3. **معالجة الأخطاء:**
   - **رسالة احتياطية:** الأمر `kpsewhich fontawesome5.sty || echo "fontawesome5.sty not found"` يوفر رسالة احتياطية في حالة عدم العثور على الحزمة، مما يساعد في عملية تصحيح الأخطاء.

### نصائح إضافية:

- **التثبيت الأدنى لـ TeX Live:**
  - إذا كان التثبيت الكامل لـ TeX Live يستغرق وقتًا طويلاً أو يستهلك مساحة كبيرة، ففكر في تثبيت مخطط أدنى وإضافة الحزم الضرورية فقط.
  - قم بتحديث ملف `texlive.profile` وفقًا لذلك:
    ```yaml
    selected_scheme scheme-basic
    collection-latexrecommended 1
    collection-fontsrecommended 1
    collection-fontsextra 1
    collection-luatex 1
    ```
  
- **توازي المهام:**
  - اعتمادًا على تعقيد سير العمل الخاص بك، قد تفكر في توازي المهام أو إعادة استخدام الخطوات عبر المهام لتحسين وقت التشغيل.

- **إدارة تحديثات TeX Live:**
  - التحديث المنتظم لـ `tlmgr` و TeX Live يضمن التوافقية والوصول إلى أحدث الحزم.

### الخلاصة:

من خلال تثبيت TeX Live 2023 يدويًا داخل سير عمل GitHub Actions وتكوين البيئة بشكل صحيح، يمكنك التغلب على القيود والأخطاء المرتبطة بحزم TeX Live المثبتة مسبقًا على النظام. هذا الإعداد يوفر وظائف كاملة لـ `tlmgr`، مما يسمح لك بتثبيت حزم LaTeX إضافية مثل `fontawesome5` بسلاسة.

إذا كنت لا تزال تواجه مشكلات، يرجى تقديم سجلات أكثر تفصيلاً أو رسائل خطأ محددة، وسأكون سعيدًا بمساعدتك أكثر!