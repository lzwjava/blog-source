---
audio: false
lang: ar
layout: post
title: تهيئة SSH
translated: true
---

يُهيئ ملف `ssh-config` هذا سلوك عميل SSH. لنُفصّل كل جزء:

- `Host * !192.*.*.*`: ينطبق هذا القسم على جميع المضيفين *باستثناء* تلك التي تتطابق مع نمط `192.*.*.*` (عادةً، عناوين الشبكة المحلية).
    - `ProxyCommand corkscrew localhost 7890 %h %p`: هذا هو الجزء الرئيسي. يُخبر هذا الأمر SSH باستخدام برنامج `corkscrew` للاتصال بمضيف الهدف.
        - `corkscrew`: أداة تسمح لك بتنقيب اتصالات SSH عبر وكلاء HTTP أو HTTPS.
        - `localhost 7890`: يُحدد عنوان خادم الوكيل (`localhost`) ومنفذه (`7890`). هذا بافتراض أن لديك خادم وكيل قيد التشغيل على جهازك المحلي، يستمع على المنفذ ٧٨٩٠ (مثل، Shadowsocks، أو وكيل SOCKS، أو حل نفق آخر).
        - `%h`: متغير SSH خاص يتوسّع إلى اسم مضيف الهدف الذي تحاول الاتصال به.
        - `%p`: متغير SSH آخر يتوسّع إلى منفذ الهدف (عادةً ٢٢ لـ SSH).
    - باختصار، يُهيئ كتلة `Host` هذه SSH لاستخدام وكيل `corkscrew` لجميع الاتصالات *باستثناء* تلك الخاصة بالشبكة المحلية.

- `Host *`: ينطبق هذا القسم على *جميع* المضيفين.
    - `UseKeychain yes`: على macOS، يُخبر هذا الأمر SSH بتخزين واسترجاع مفاتيح SSH من حافظة مفاتيحك، حتى لا تضطر إلى إدخال كلمة المرور في كل مرة.
    - `AddKeysToAgent yes`: يُضيف هذا تلقائيًا مفاتيح SSH الخاصة بك إلى وكيل SSH، حتى لا تضطر إلى إضافتها يدويًا بعد كل إعادة تشغيل.
    - `IdentityFile ~/.ssh/id_rsa`: يُحدد مسار ملف مفتاح SSH الخاص بك. `~/.ssh/id_rsa` هو الموقع الافتراضي لمفتاح RSA الخاص.

**في جوهره، يُنشئ هذا التكوين وكيلًا لجميع اتصالات SSH باستثناء تلك الموجودة على الشبكة المحلية، ويُهيئ إدارة المفاتيح من أجل الراحة.**


```bash
Host * !192.*.*.*
    ProxyCommand corkscrew localhost 7890 %h %p
Host *
    UseKeychain yes
    AddKeysToAgent yes
    IdentityFile ~/.ssh/id_rsa
```
