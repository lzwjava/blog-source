---
audio: false
generated: true
lang: ar
layout: post
title: استخدام FMDB لإدارة قواعد البيانات في نظام iOS
translated: true
type: note
---

FMDB هو غلاف شهير مكتوب بلغة Objective-C يُستخدم مع SQLite، حيث يوفر واجهة أبسط وأكثر سهولة لإجراءات قواعد البيانات في تطبيقات iOS. فيما يلي دليل مفصل حول كيفية استخدام FMDB في مشاريعك الخاصة بتطوير iOS.

---

## مقدمة عن FMDB

FMDB (Flying Meat Database) هو غلاف Objective-C لـ SQLite يجعل عمليات قواعد البيانات أسهل وأكثر كفاءة. فهو يوفر طريقة ملائمة للتفاعل مع قواعد بيانات SQLite دون الحاجة للتعامل مع تعقيدات واجهات برمجة تطبيقات SQLite الخام. يُستخدم FMDB على نطاق واسع في تطوير تطبيقات iOS نظرًا لسهولته وأدائه.

## لماذا نستخدم FMDB؟

- **السهولة**: يبسط FMDB عمليات قواعد البيانات باستخدام طرق سهلة الاستخدام.
- **الأداء**: تم تحسينه للأداء، مما يجعله مناسبًا للتطبيقات المحمولة.
- **السلامة في التعامل مع الخيوط البرمجية (Thread Safety)**: يوفر FMDB عمليات قاعدة بيانات آمنة للاستخدام في بيئات متعددة الخيوط.
- **مجتمع نشط**: نظرًا لاستخدامه على نطاق واسع، يتمتع FMDB بمجتمع نشط والكثير من الموارد المتاحة.

## البدء مع FMDB

### الخطوة 1: تثبيت FMDB

يمكنك تثبيت FMDB باستخدام CocoaPods أو Carthage أو Swift Package Manager. هنا، سنستخدم CocoaPods للتثبيت.

1. **أضف FMDB إلى ملف Podfile الخاص بك**:
   ```ruby
   platform :ios, '10.0'
   use_frameworks!

   target 'YourAppTarget' do
     pod 'FMDB', '~> 2.7'
   end
   ```

2. **ثبّت الـ Pods**:
   ```bash
   pod install
   ```

### الخطوة 2: استيراد FMDB

قم باستيراد FMDB في ملفات Swift أو Objective-C الخاصة بك:

```swift
import FMDB
```

### الخطوة 3: العمليات الأساسية لقاعدة البيانات

#### فتح قاعدة بيانات

```swift
let fileURL = try! FileManager.default
    .url(for: .documentDirectory, in: .userDomainMask, appropriateFor: nil, create: false)
    .appendingPathComponent("database.sqlite")

let database = FMDatabase(url: fileURL)

if database.open() {
    print("Database opened successfully")
} else {
    print("Unable to open database")
}
```

#### إنشاء جدول

```swift
let createTableQuery = """
CREATE TABLE IF NOT EXISTS users (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT,
    age INTEGER
)
"""

if database.executeStatements(createTableQuery) {
    print("Table created successfully")
} else {
    print("Unable to create table")
}
```

#### إدراج البيانات

```swift
let insertQuery = "INSERT INTO users (name, age) VALUES (?, ?)"

if database.executeUpdate(insertQuery, withArgumentsIn: ["Alice", 30]) {
    print("Data inserted successfully")
} else {
    print("Unable to insert data")
}
```

#### استعلام البيانات

```swift
let selectQuery = "SELECT * FROM users"

if let results = database.executeQuery(selectQuery, withArgumentsIn: []) {
    while results.next() {
        let id = results.int(forColumn: "id")
        let name = results.string(forColumn: "name")
        let age = results.int(forColumn: "age")
        print("User ID: \\(id), Name: \\(name ?? ""), Age: \\(age)")
    }
} else {
    print("Unable to fetch data")
}
```

#### تحديث البيانات

```swift
let updateQuery = "UPDATE users SET age = ? WHERE name = ?"

if database.executeUpdate(updateQuery, withArgumentsIn: [31, "Alice"]) {
    print("Data updated successfully")
} else {
    print("Unable to update data")
}
```

#### حذف البيانات

```swift
let deleteQuery = "DELETE FROM users WHERE name = ?"

if database.executeUpdate(deleteQuery, withArgumentsIn: ["Alice"]) {
    print("Data deleted successfully")
} else {
    print("Unable to delete data")
}
```

### الخطوة 4: إغلاق قاعدة البيانات

اغلق قاعدة البيانات دائمًا عندما تنتهي من استخدامها لتحرير الموارد.

```swift
database.close()
```

## أفضل الممارسات

- **السلامة في التعامل مع الخيوط البرمجية**: استخدم `FMDatabaseQueue` للعمليات الآمنة في بيئات متعددة الخيوط.
- **معالجة الأخطاء**: تحقق دائمًا من الأخطاء وتعامل معها بشكل مناسب.
- **إدارة الموارد**: أغلق قاعدة البيانات عندما لا تكون هناك حاجة إليها.
- **الأداء**: استخدم المعاملات (Transactions) للعمليات المجمعة لتحسين الأداء.

## خاتمة

يُعد FMDB أداة قوية لإدارة قواعد بيانات SQLite في تطبيقات iOS. تجعله سهولته وأداؤه خيارًا شائعًا بين المطورين. باتباع هذا الدليل، يمكنك دمج FMDB في مشاريعك وإدارة عمليات قاعدة البيانات الخاصة بك بكفاءة.

---

توفر هذه المقالة المدونة نظرة شاملة عن FMDB، بدءًا من التثبيت وصولاً إلى العمليات الأساسية، وتشمل أفضل الممارسات للإدارة الفعالة لقواعد البيانات.