---
audio: false
generated: true
lang: ar
layout: post
title: استخدام FMDB لإدارة قواعد البيانات في iOS
translated: true
---

FMDB هو غلاف Objective-C حول SQLite، يوفر واجهة أكثر بساطة ووضوحًا للعمليات القاعدية في تطبيقات iOS. أدناه دليل مفصل حول كيفية استخدام FMDB في مشاريع iOS.

---

## مقدمة إلى FMDB

FMDB (Flying Meat Database) هو غلاف Objective-C حول SQLite يجعل العمليات القاعدية أسهل وأكثر كفاءة. يوفر وسيلة مريحة للتفاعل مع قواعد البيانات SQLite دون التعامل مع تعقيدات واجهات برمجة التطبيقات SQLite الخام. FMDB يستخدم على نطاق واسع في تطوير iOS بسبب بساطته وفعاليته.

## لماذا استخدام FMDB؟

- **البساطة**: FMDB يبسط العمليات القاعدية باستخدام طرق سهلة الاستخدام.
- **الفعالية**: تم تحسينه للفعالية، مما يجعله مناسبًا للتطبيقات المحمولة.
- **أمان الخيوط**: FMDB يوفر عمليات قاعدة بيانات آمنة من حيث الخيوط.
- **مجتمع نشط**: نظرًا لانتشار استخدامه، FMDB لديه مجتمع نشط وكمية كبيرة من الموارد المتاحة.

## البدء مع FMDB

### الخطوة 1: تثبيت FMDB

يمكنك تثبيت FMDB باستخدام CocoaPods، Carthage، أو Swift Package Manager. سنستخدم CocoaPods للتثبيت هنا.

1. **إضافة FMDB إلى ملف Podfile**:
   ```ruby
   platform :ios, '10.0'
   use_frameworks!

   target 'YourAppTarget' do
     pod 'FMDB', '~> 2.7'
   end
   ```

2. **تثبيت Pods**:
   ```bash
   pod install
   ```

### الخطوة 2: استيراد FMDB

استورد FMDB في ملفات Swift أو Objective-C:

```swift
import FMDB
```

### الخطوة 3: العمليات القاعدية

#### فتح قاعدة بيانات

```swift
let fileURL = try! FileManager.default
    .url(for: .documentDirectory, in: .userDomainMask, appropriateFor: nil, create: false)
    .appendingPathComponent("database.sqlite")

let database = FMDatabase(url: fileURL)

if database.open() {
    print("تم فتح قاعدة البيانات بنجاح")
} else {
    print("تعذر فتح قاعدة البيانات")
}
```

#### إنشاء جدول

```swift
let createTableQuery = """
CREATE TABLE IF NOT EXISTS users (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT,
    age INTEGER
)
"""

if database.executeStatements(createTableQuery) {
    print("تم إنشاء الجدول بنجاح")
} else {
    print("تعذر إنشاء الجدول")
}
```

#### إدخال البيانات

```swift
let insertQuery = "INSERT INTO users (name, age) VALUES (?, ?)"

if database.executeUpdate(insertQuery, withArgumentsIn: ["Alice", 30]) {
    print("تم إدخال البيانات بنجاح")
} else {
    print("تعذر إدخال البيانات")
}
```

#### استعلام البيانات

```swift
let selectQuery = "SELECT * FROM users"

if let results = database.executeQuery(selectQuery, withArgumentsIn: []) {
    while results.next() {
        let id = results.int(forColumn: "id")
        let name = results.string(forColumn: "name")
        let age = results.int(forColumn: "age")
        print("User ID: \(id), Name: \(name ?? ""), Age: \(age)")
    }
} else {
    print("تعذر استخراج البيانات")
}
```

#### تحديث البيانات

```swift
let updateQuery = "UPDATE users SET age = ? WHERE name = ?"

if database.executeUpdate(updateQuery, withArgumentsIn: [31, "Alice"]) {
    print("تم تحديث البيانات بنجاح")
} else {
    print("تعذر تحديث البيانات")
}
```

#### حذف البيانات

```swift
let deleteQuery = "DELETE FROM users WHERE name = ?"

if database.executeUpdate(deleteQuery, withArgumentsIn: ["Alice"]) {
    print("تم حذف البيانات بنجاح")
} else {
    print("تعذر حذف البيانات")
}
```

### الخطوة 4: إغلاق قاعدة البيانات

أغلق قاعدة البيانات دائمًا عندما تنتهي منها لتحرير الموارد.

```swift
database.close()
```

## أفضل الممارسات

- **أمان الخيوط**: استخدم `FMDatabaseQueue` للعمليات الآمنة من حيث الخيوط.
- **إدارة الأخطاء**: تحقق دائمًا من الأخطاء واسْتِعْدِلْ لها بشكل مناسب.
- **إدارة الموارد**: أغلق قاعدة البيانات عندما لا تكون بحاجة إليها.
- **الفعالية**: استخدم المعاملات للعمليات المتراكمة لتحسين الفعالية.

## الخاتمة

FMDB هو أداة قوية لإدارة قواعد البيانات SQLite في تطبيقات iOS. بساطتها وفعاليتها تجعلها خيارًا شعبيًا بين المطورين. من خلال تتبع هذا الدليل، يمكنك دمج FMDB في مشاريعك وإدارة عمليات قاعدة البيانات بكفاءة.

---

يقدم هذا المنشور على المدونة نظرة شاملة على FMDB، من التثبيت إلى العمليات القاعدية، ويشمل أفضل الممارسات لإدارة قاعدة البيانات بكفاءة.