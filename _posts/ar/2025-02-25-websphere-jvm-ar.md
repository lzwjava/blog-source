---
audio: true
generated: false
lang: ar
layout: post
title: خيارات JVM في WebSphere Liberty Server
translated: true
---

للتحقق من خيارات JVM المحدد في ملف `jvm.options` الموجود في دليل الخادم من خادم WebSphere Liberty Profile (WLP)، يمكنك استخدام الأمر `jinfo` الذي يوفره Java Development Kit (JDK). تسمح هذه الطريقة لك بالتحقق من الخيارات التي تم تطبيقها على خادم يعمل بشكل فعال. أدناه دليل خطوة بخطوة لتحقيق ذلك:

### خطوات التحقق من خيارات JVM

1. **فهم السياق**
   يستخدم ملف `jvm.options` في دليل الخادم (عادةً `<WLP_HOME>/usr/servers/<serverName>/jvm.options`) لتحديد حجج JVM مثل حجم الكومة (مثل `-Xmx`)، وإعدادات جمع القمامة (مثل `-XX:+UseG1GC`) أو خواص النظام (مثل `-Dmy.property=value`) التي يتم تطبيقها عند بدء خادم الحرية.

2. **بدء الخادم**
   ابدأ من خلال تشغيل خادم الحرية في الخلفية باستخدام الأمر التالي:
   ```
   <WLP_HOME>/bin/server start <serverName>
   ```
   استبدل `<WLP_HOME>` بمسار تثبيت WebSphere Liberty و`<serverName>` باسم خادمك. هذا الأمر يطلق الخادم كعملية خلفية.

3. **تحديد معرف العملية (PID)**
   بعد بدء الخادم، تحتاج إلى معرف العملية للعملية الجارية من Java. يوفر الحرية هذا بشكل مفيد في ملف `.pid` الموجود في:
   ```
   <WLP_HOME>/usr/servers/<serverName>/workarea/<serverName>.pid
   ```
   افتح هذا الملف (مثلًا باستخدام `cat` في أنظمة Unix أو محرر نص) للحصول على معرف العملية، وهو قيمة رقمية تمثل عملية الخادم.

4. **تحقق من أعلام JVM**
   استخدم الأمر `jinfo` للتحقق من أعلام JVM التي تم تطبيقها على الخادم الجاري. قم بتشغيل:
   ```
   jinfo -flags <pid>
   ```
   استبدل `<pid>` بمعرف العملية الذي حصلت عليه من ملف `.pid`. هذا الأمر يخرج أعلام السطر الأوامر التي تم تمريرها إلى JVM، مثل `-Xmx1024m` أو `-XX:+PrintGCDetails`. ابحث في المخرجات لتأكيد أن أعلامك التي قمت بتعيينها في `jvm.options` موجودة.

5. **تحقق من خواص النظام**
   إذا كان ملف `jvm.options` يحتوي على خواص النظام (مثل `-Dmy.property=value`)، فاحقق منها بشكل منفصل باستخدام:
   ```
   jinfo -sysprops <pid>
   ```
   هذا يعرض جميع خواص النظام التي تم تعيينها لـ JVM. ابحث في المخرجات عن خواصك المحددة لتأكيد أنها تم تطبيقها بشكل صحيح.

### متطلبات مسبقة
- **JDK مثبت**: الأمر `jinfo` جزء من JDK، وليس JRE. تأكد من أن لديك JDK مثبتًا وأن ملف `jinfo` في مسار النظام.
- **أذونات**: قم بتشغيل `jinfo` بنفس المستخدم الذي بدأ الخادم أو بأذونات كافية للالتحاق بالعملية.

### طرق بديلة
إذا كان `jinfo` غير متاح أو تفضل طريقة أخرى، إليك خيارين إضافيين:

- **استخدام `server dump`**:
  1. ابدأ الخادم باستخدام `server start <serverName>`.
  2. انشئ رصيد الخادم باستخدام:
     ```
     <WLP_HOME>/bin/server dump <serverName>
     ```
  3. حدد الملف `.zip` الذي تم إنشاؤه في `<WLP_HOME>/usr/servers/<serverName>/`، انشئه، وافتح ملف `javacore.<timestamp>.txt`.
  4. ابحث عن قسم "CMDLINE" لرؤية السطر الأوامر الكامل لـ Java، بما في ذلك أعلام JVM، وقسم "System Properties" لخواص النظام.

- **تتبع النصية البدء** (نظام Unix مثل):
  1. قم بتشغيل النصية الخادم مع تتبع مفعّل:
     ```
     sh -x <WLP_HOME>/bin/server start <serverName>
     ```
  2. مراجعة المخرجات للحصول على الأمر Java الذي تم تنفيذه من النصية، والذي يتضمن جميع الخيارات من `jvm.options`.

### ملاحظات
- **الخادم غير يعمل**: إذا فشل الخادم في البدء بسبب خيارات غير صالحة، استخدم `server run <serverName>` لتشغيله في المقدمة وتحقق من مخرجات الواجهة الأمامية للخطأ، أو استخدم طريقة تتبع النصية لرؤية الأمر.
- **ملفات السجلات**: قد يحتوي ملف `console.log` في `<WLP_HOME>/usr/servers/<serverName>/logs/` على بعض معلومات البدء، ولكن لا يدرج جميع خيارات JVM إلا إذا تم تفعيل تسجيل التفاصيل (مثل `-XX:+PrintFlagsFinal`).

### الخاتمة
طريقة `jinfo` هي الطريقة الأيسر للتحقق من خيارات JVM المحدد في `jvm.options` لخادم الحرية الجاري. من خلال اتباع الخطوات أعلاه، يمكنك تأكيد أن أعلام JVM وخواص النظام تم تطبيقها كما هو مطلوب.

---

أبلغت `jinfo` أنها لا تستطيع الالتحاق بالعملية.

بالإضافة إلى ذلك، لم يتم العثور على ملف `javacore.<timestamp>.txt` بعد استخدام الأمر الرصيد.

نسخة WebSphere Liberty Server هي 24.0.0.9.

---

### حل مشاكل التحقق من خيارات JVM في WebSphere Liberty 24.0.0.9

أنت تواجه مشاكل باستخدام الأمر `jinfo` للتحقق من خيارات JVM في خادم WebSphere Liberty Profile (WLP) نسخة 24.0.0.9، مع خطأ يشير إلى أنه "لا يمكن الالتحاق بالعملية." بالإضافة إلى ذلك، بعد إنشاء رصيد الخادم، لم يتم العثور على ملف `javacore.<timestamp>.txt` في الموقع المتوقع (`<WLP_HOME>/usr/servers/<serverName>/`) داخل ملف `.zip` المنشئ. أدناه دليل مفصل لتشخيص وإصلاح هذه المشاكل، مما يضمن لك التحقق من خيارات JVM المحدد في ملف `jvm.options`.

---

### فهم المشكلة

- **فشل `jinfo`**: خطأ "لا يمكن الالتحاق بالعملية" يشير عادةً إلى أن `jinfo` لا يمكن أن يتصل بالجهاز الافتراضي الجاري لـ Java (JVM). هذا غالبًا ما يكون بسبب مشاكل الأذونات (مثل تشغيل الأمر كمسخدم مختلف عن المستخدم الذي بدأ الخادم) أو قيود على عملية JVM.
- **فقدان `javacore.<timestamp>.txt`**: يجب أن تنتج عملية رصيد الخادم ملفًا `.zip` يحتوي على ملفات تشخيصية، بما في ذلك `javacore.<timestamp>.txt`، ولكن غيابها يشير إلى أن الرصيد فشل، أو أن الملف في موقع غير متوقع، أو أن المحتوى المتوقع لم يتم إنشاؤه.

منذ أنك تستخدم WebSphere Liberty 24.0.0.9 على ما يبدو نظام Unix مثل (بناءً على مسارات الملفات النموذجية)، سنقوم بتعديل الحلول وفقًا لذلك.

---

### حلول خطوة بخطوة

هنا عدة طرق لاستعادة خيارات JVM، بدءًا من البدائل الأيسر لـ `jinfo` ومواجهة مشكلة رصيد الخادم.

#### 1. التحقق من أن الخادم يعمل
قبل المتابعة، تأكد من أن خادم الحرية يعمل:

- **الأمر**:
  ```bash
  <WLP_HOME>/bin/server status <serverName>
  ```
- **المخرجات المتوقعة**:
  إذا كان يعمل، ستجد رسالة مثل "Server <serverName> is running with process ID <pid>." إذا لم يكن يعمل، ابدأه:
  ```bash
  <WLP_HOME>/bin/server start <serverName>
  ```

- **تحديد معرف العملية**:
  حدد معرف العملية في `<WLP_HOME>/usr/servers/<serverName>/workarea/<serverName>.pid` باستخدام:
  ```bash
  cat <WLP_HOME>/usr/servers/<serverName>/workarea/<serverName>.pid
  ```
  احتفظ بهذا معرف العملية للخطوات القادمة.

#### 2. استخدام `jps -v` بديلًا لـ `jinfo`
الأمر `jps` (جزء من JDK) يدرج عمليات Java وأعلامها، وغالبًا ما يتجنب مشاكل الالتحاق التي يواجهها `jinfo`.

- **الأمر**:
  ```bash
  jps -v
  ```
- **المخرجات**:
  قائمة من عمليات Java، مثل:
  ```
  12345 Liberty -Xmx1024m -XX:+UseG1GC -Dmy.property=value
  ```
- **العمل**:
  حدد عملية خادم الحرية من خلال تطابق معرف العملية من ملف `.pid` أو البحث عن "Liberty" أو `<serverName>` في السطر الأوامر. الأعلام المدرجة (مثل `-Xmx1024m`، `-Dmy.property=value`) تشمل تلك من `jvm.options`.

- **تحقق من الأذونات**:
  إذا فشل `jps -v` أو لم يظهر أي مخرجات، قم بتشغيله بنفس المستخدم الذي بدأ الخادم (مثلًا `sudo -u <serverUser> jps -v`) أو باستخدام `sudo`:
  ```bash
  sudo jps -v
  ```

#### 3. استخدام `jcmd` للحصول على معلومات JVM التفصيلية
إذا لم يكن `jps -v` كافيًا، يمكن لـ `jcmd` (أداة JDK أخرى) استعلام JVM الجاري دون بعض قيود الالتحاق لـ `jinfo`.

- **الأوامر**:
  - للحصول على خيارات JVM:
    ```bash
    jcmd <pid> VM.command_line
    ```
    المخرجات: السطر الأوامر الكامل، مثل `java -Xmx1024m -XX:+UseG1GC -Dmy.property=value ...`
  - للحصول على خواص النظام:
    ```bash
    jcmd <pid> VM.system_properties
    ```
    المخرجات: قائمة من خواص، مثل `my.property=value`.

- **العمل**:
  استبدل `<pid>` بمعرف عملية خادمك. تأكد من تشغيل هذه الأوامر بأذونات مناسبة (مثل `sudo jcmd <pid> ...` إذا لزم الأمر).

#### 4. إنشاء وإعادة فحص ملف Javacore
منذ أن لم ينتج رصيد الخادم الملف المتوقع `javacore.<timestamp>.txt`، حاول إنشاء ملف Javacore منفصل:

- **الأمر**:
  ```bash
  <WLP_HOME>/bin/server javadump <serverName>
  ```
- **المخرجات المتوقعة**:
  رسالة تشير إلى موقع ملف javacore، عادةً `<WLP_HOME>/usr/servers/<serverName>/javacore.<timestamp>.txt`.

- **العمل**:
  - تحقق من الدليل:
    ```bash
    ls <WLP_HOME>/usr/servers/<serverName>/javacore.*.txt
    ```
  - افتح الملف وابحث عن:
    - **CMDLINE**: يدرج خيارات JVM (مثل `-Xmx1024m`).
    - **System Properties**: يدرج خواص `-D`.

- **التشخيص**:
  إذا لم يظهر أي ملف، تحقق من سجلات الخادم `console.log` أو `messages.log` في `<WLP_HOME>/usr/servers/<serverName>/logs/` للحصول على أخطاء أثناء تنفيذ الأمر.

#### 5. إعادة زيارة طريقة رصيد الخادم
دعونا نضمن أن رصيد الخادم الكامل يعمل بشكل صحيح:

- **الأمر**:
  ```bash
  <WLP_HOME>/bin/server dump <serverName>
  ```
- **المخرجات المتوقعة**:
  ملف `.zip` مثل `<serverName>.dump-<timestamp>.zip` في `<WLP_HOME>/usr/servers/<serverName>/`.

- **العمل**:
  - تحقق من وجود الملف:
    ```bash
    ls <WLP_HOME>/usr/servers/<serverName>/*.zip
    ```
  - انشئه:
    ```bash
    unzip <serverName>.dump-<timestamp>.zip -d temp_dir
    ```
  - ابحث عن `javacore.<timestamp>.txt`:
    ```bash
    find temp_dir -name "javacore.*.txt"
    ```
  - افتح الملف وابحث عن أقسام "CMDLINE" و"System Properties".

- **التشخيص**:
  - تحقق من مخرجات الأمر في الواجهة الأمامية للحصول على أخطاء.
  - تأكد من أن الخادم كان يعمل أثناء الرصيد (على الرغم من أن `server dump` يمكن أن يعمل على خادم متوقف، فإن javacore يتطلب JVM جاري).
  - إذا كان الملف `.zip` مفقودًا، مراجعة السجلات في `<WLP_HOME>/usr/servers/<serverName>/logs/` للحصول على أدلة.

#### 6. تفعيل مخرجات JVM التفصيلية (الخيار الأخير)
إذا فشلت جميع الطرق الأخرى، قم بتعديل `jvm.options` لتسجيل جميع أعلام JVM:

- **تحرير `<WLP_HOME>/usr/servers/<serverName>/jvm.options`**:
  أضف:
  ```
  -XX:+PrintFlagsFinal
  ```
- **إعادة بدء الخادم**:
  ```bash
  <WLP_HOME>/bin/server stop <serverName>
  <WLP_HOME>/bin/server start <serverName>
  ```
- **تحقق من السجلات**:
  افتح `<WLP_HOME>/usr/servers/<serverName>/logs/console.log` وابحث عن جدول من أعلام JVM، مثل:
  ```
  [uintx] MaxHeapSize = 1073741824 {product}
  ```

---

### ملاحظات إضافية

- **الأذونات**:
  يشير فشل `jinfo` إلى عدم تطابق الأذونات. استخدم دائمًا نفس المستخدم الذي بدأ الخادم (مثلًا `sudo -u <serverUser>` أو تسجيل الدخول كهذا المستخدم) لجميع الأوامر.
- **WebSphere Liberty 24.0.0.9**:
  يجب أن يتوافق سلوك الرصيد مع العملية المستندة (`.zip` في `<WLP_HOME>/usr/servers/<serverName>/` يحتوي على `javacore.<timestamp>.txt`). إذا كان يختلف، تحقق من وثائق IBM للتغيرات الخاصة بالنسخة، على الرغم من أن طريقة `server javadump` تبقى موثوقة.
- **مطلوب JDK**:
  تأكد من أن JDK (ليس JRE فقط) مثبت، حيث أن `jps` و`jcmd` و`jinfo` أدوات JDK.

---

### النهج الموصى به

1. **حاول `jps -v` أولًا**: إنه سريع ويمكن أن يتجنب مشاكل الالتحاق.
2. **استخدم `jcmd` كبديل**: يوفر مخرجات تفصيلية إذا لم يكن `jps` كافيًا.
3. **استخدم `server javadump`**: يخلق javacore مباشرةً، ويبطل تعقيد رصيد الخادم الكامل.
4. **تشخيص الرصيد**: أعد تشغيل `server dump` وتحقق من محتويات `.zip` إذا لزم الأمر.

من خلال اتباع هذه الخطوات، يجب أن تتمكن من استعادة خيارات JVM الخاصة بك وتحل المشاكل مع `jinfo` وغياب ملف javacore. أخبرني إذا واجهت أخطاء محددة!