---
audio: false
generated: true
lang: ar
layout: post
title: استخدام برنامج تشغيل جيه دي بي سي
translated: true
type: note
---

لاستخدام مشغل JDBC (اتصال قاعدة بيانات جافا) في جافا، تحتاج إلى اتباع سلسلة من الخطوات لإنشاء اتصال بقاعدة البيانات، وتنفيذ الاستعلامات، ومعالجة النتائج. أدناه، سأرشدك خلال العملية خطوة بخطوة بطريقة واضحة وعملية.

### الخطوة 1: إضافة مشغل JDBC إلى مشروعك
أولاً، تحتاج إلى مشغل JDBC المناسب لقاعدة البيانات التي تعمل معها (مثل MySQL أو PostgreSQL أو Oracle، إلخ). كل مورد قاعدة بيانات يوفر مشغله الخاص.

- **لمشاريع Maven**:
  أضف الاعتماد إلى ملف `pom.xml` الخاص بك. على سبيل المثال، لـ MySQL:
  ```xml
  <dependency>
      <groupId>mysql</groupId>
      <artifactId>mysql-connector-java</artifactId>
      <version>8.0.33</version> <!-- تحقق من أحدث إصدار -->
  </dependency>
  ```
  لـ PostgreSQL:
  ```xml
  <dependency>
      <groupId>org.postgresql</groupId>
      <artifactId>postgresql</artifactId>
      <version>42.7.3</version> <!-- تحقق من أحدث إصدار -->
  </dependency>
  ```

- **لمشاريع غير Maven**:
  حمّل ملف JAR لمشغل JDBC من موقع المورد على الويب (مثل MySQL Connector/J من mysql.com) وأضفه إلى classpath مشروعك يدويًا.

### الخطوة 2: تحميل مشغل JDBC
في الإصدارات القديمة من جافا (ما قبل JDBC 4.0)، كان عليك تحميل المشغل صراحةً باستخدام `Class.forName()`. مع مشغلات JDBC الحديثة (JDBC 4.0+)، هذه الخطوة اختيارية حيث يتم التسجيل التلقائي للمشغل من خلال آلية موفر الخدمة (Service Provider). ومع ذلك، من أجل الوضوح، إليك كيف تعمل:

```java
try {
    Class.forName("com.mysql.cj.jdbc.Driver"); // مثال MySQL
    // لـ PostgreSQL: Class.forName("org.postgresql.Driver");
} catch (ClassNotFoundException e) {
    e.printStackTrace();
}
```

### الخطوة 3: إنشاء اتصال
استخدم صنف `DriverManager` للاتصال بقاعدة البيانات من خلال توفير عنوان URL للاتصال، واسم المستخدم، وكلمة المرور. تنسيق عنوان URL يعتمد على قاعدة البيانات.

```java
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;

public class JdbcExample {
    public static void main(String[] args) {
        String url = "jdbc:mysql://localhost:3306/mydatabase"; // مثال MySQL
        String username = "your_username";
        String password = "your_password";

        try (Connection connection = DriverManager.getConnection(url, username, password)) {
            System.out.println("Connected to the database!");
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }
}
```

- **أمثلة على عناوين URL**:
  - MySQL: `jdbc:mysql://localhost:3306/mydatabase?useSSL=false`
  - PostgreSQL: `jdbc:postgresql://localhost:5432/mydatabase`
  - Oracle: `jdbc:oracle:thin:@localhost:1521:xe`

### الخطوة 4: إنشاء Statement وتنفيذ الاستعلامات
بمجرد الاتصال، يمكنك تنفيذ استعلامات SQL باستخدام `Statement`، أو `PreparedStatement` (مفضل للاستعلامات ذات المعاملات)، أو `CallableStatement` (للإجراءات المخزنة).

#### مثال باستعلام بسيط:
```java
import java.sql.*;

public class JdbcExample {
    public static void main(String[] args) {
        String url = "jdbc:mysql://localhost:3306/mydatabase";
        String username = "your_username";
        String password = "your_password";

        try (Connection connection = DriverManager.getConnection(url, username, password)) {
            Statement statement = connection.createStatement();
            ResultSet resultSet = statement.executeQuery("SELECT * FROM users");

            while (resultSet.next()) {
                System.out.println("ID: " + resultSet.getInt("id") + ", Name: " + resultSet.getString("name"));
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }
}
```

#### مثال باستخدام PreparedStatement (أكثر أمانًا لإدخال المستخدم):
```java
try (Connection connection = DriverManager.getConnection(url, username, password)) {
    String sql = "SELECT * FROM users WHERE id = ?";
    PreparedStatement preparedStatement = connection.prepareStatement(sql);
    preparedStatement.setInt(1, 5); // تعيين قيمة المعامل
    ResultSet resultSet = preparedStatement.executeQuery();

    while (resultSet.next()) {
        System.out.println("ID: " + resultSet.getInt("id") + ", Name: " + resultSet.getString("name"));
    }
} catch (SQLException e) {
    e.printStackTrace();
}
```

### الخطوة 5: إغلاق الموارد
أغلق دائمًا كائنات `ResultSet` و`Statement` و`Connection` لتحرير الموارد. استخدام try-with-resources (كما هو موضح أعلاه) يتعامل مع هذا تلقائيًا نيابة عنك.

### مثال عمل كامل (MySQL)
إليك مثالاً كاملاً بافتراض وجود جدول `users` به أعمدة `id` (int) و `name` (varchar):

```java
import java.sql.*;

public class JdbcExample {
    public static void main(String[] args) {
        String url = "jdbc:mysql://localhost:3306/mydatabase?useSSL=false";
        String username = "root";
        String password = "your_password";

        try (Connection connection = DriverManager.getConnection(url, username, password)) {
            String sql = "SELECT * FROM users WHERE id = ?";
            PreparedStatement preparedStatement = connection.prepareStatement(sql);
            preparedStatement.setInt(1, 1);
            ResultSet resultSet = preparedStatement.executeQuery();

            while (resultSet.next()) {
                System.out.println("ID: " + resultSet.getInt("id") + ", Name: " + resultSet.getString("name"));
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }
}
```

### نصائح رئيسية
- **معالجة الأخطاء**: التقط دائمًا `SQLException` للتعامل مع الأخطاء المتعلقة بقاعدة البيانات.
- **التبعيات**: تأكد من أن مشغل JDBC يتطابق مع إصدار قاعدة البيانات الخاصة بك.
- **الأمان**: استخدم `PreparedStatement` للاستعلامات التي تحتوي على إدخال المستخدم لمنع حقن SQL.
- **تجميع الاتصالات**: للتطبيقات الإنتاجية، فكر في استخدام تجميع الاتصالات (مثل HikariCP) بدلاً من `DriverManager`.

دعني أعرف إذا كنت بحاجة إلى مساعدة مع قاعدة بيانات محددة أو حالات استخدام أكثر تقدمًا!