---
audio: false
generated: true
image: false
lang: ar
layout: post
model: x-ai/grok-4-fast
title: دليل إدارة الوصول إلى Microsoft Entra ID
translated: true
type: note
---

Microsoft Entra ID هي خدمة إدارة هويات ووصول قائمة على السحابة تساعد في تأمين الوصول إلى الموارد مثل التطبيقات والبيانات والأجهزة. وهي تدعم المصادقة (مثل طرق تسجيل الدخول، MFA)، والتفويض (مثل الوصول القائم على الأدوار)، والتكامل مع خدمات Azure. للبدء، ستحتاج إلى اشتراك Azure وأذونات مناسبة (مثل دور المسؤول العام).

## البدء
1. **تسجيل الدخول إلى بوابة Azure**: اذهب إلى [portal.azure.com](https://portal.azure.com) وقم بتسجيل الدخول باستخدام حساب Microsoft الخاص بك.
2. **الانتقال إلى Microsoft Entra ID**: ابحث عن "Microsoft Entra ID" في شريط البحث العلوي أو ابحث عنه ضمن "خدمات Azure."
3. **استكشاف لوحة التحكم**: راجع نظرة عامة عن المستأجر الخاص بك، بما في ذلك المستخدمين والمجموعات والتطبيقات. قم بإعداد الأساسيات مثل النطاقات المخصصة إذا لزم الأمر.
4. **تمكين الميزات الرئيسية**:
   - **المصادقة**: قم بتكوين إعادة تعيين كلمة المرور الذاتي أو المصادقة متعددة العوامل (MFA) ضمن "طرق المصادقة."
   - **الوصول المشروط**: أنشئ سياسات ضمن "الأمان" > "الوصول المشروط" لفرض قواعد تستند إلى المستخدم أو الجهاز أو الموقع.

## إدارة المستخدمين والمجموعات
- **إضافة المستخدمين**: اذهب إلى "المستخدمين" > "مستخدم جديد." أدخل التفاصيل مثل الاسم واسم المستخدم (مثل user@yourdomain.com)، وقم بتعيين الأدوار أو التراخيص.
- **إنشاء المجموعات**: ضمن "المجموعات" > "مجموعة جديدة"، اختر نوع مجموعة أمان أو Microsoft 365، أضف الأعضاء، واستخدمها لتعيينات الوصول.
- **تعيين التراخيص**: في تفاصيل المستخدم/المجموعة، اذهب إلى "التراخيص" لتعيين Entra ID P1/P2 للميزات المتقدمة مثل إدارة الهوية المميزة (PIM).
- **أفضل الممارسات**: اتبع مبدأ الامتياز الأدنى—قم بتعيين الحد الأدنى من الأذونات واستخدم المجموعات للإدارة المجمعة.

## إدارة التطبيقات
- **تسجيل تطبيق**: ضمن "تسجيلات التطبيقات" > "تسجيل جديد"، قدم الاسم، وURIs إعادة التوجيه، وأنواع الحسابات المدعومة (مستأجر واحد، مستأجرين متعددين، إلخ).
- **إضافة تطبيقات المؤسسة**: للتطبيقات الخارجية، اذهب إلى "تطبيقات المؤسسة" > "تطبيق جديد" لاستعراض المعرض أو إنشاء تطبيقات غير معرضة.
- **تكوين الوصول**: عيّن المستخدمين/المجموعات للتطبيق ضمن "المستخدمين والمجموعات"، وقم بإعداد تسجيل دخول واحد (SSO) عبر SAML أو OAuth.
- **توفير الهويات**: أتمتة مزامنة المستخدم إلى التطبيقات ضمن "التوفير" للوصول في الوقت المناسب.

للإعدادات الهجينة (AD محلي)، استخدم Microsoft Entra Connect لمزامنة الهويات. راقب الاستخدام عبر السجلات ضمن "المراقبة" > "سجلات تسجيل الدخول."

# كيفية التحقق من الوصول إلى قاعدة بيانات، أو Kubernetes (AKS)، أو أي مورد آخر

يتم إدارة الوصول في Azure عبر التحكم في الوصول القائم على الأدوار (RBAC)، المتكامل مع Entra ID. يقوم المستخدمون بالمصادقة باستخدام بيانات اعتماد Entra، وتحدد الأدوار الأذونات. للتحقق من الوصول، استخدم أدوات IAM (إدارة الهوية والوصول) في بوابة Azure. يسرد هذا التعيينات المباشرة، الموروثة من النطاقات الأصلية (مثل الاشتراك)، وتعيينات الرفض.

## الخطوات العامة لأي مورد في Azure
1. **افتح المورد**: في بوابة Azure، انتقل إلى المورد (مثل مجموعة الموارد، VM، حساب التخزين).
2. **اذهب إلى التحكم في الوصول (IAM)**: حدد "التحكم في الوصول (IAM)" من القائمة اليسرى.
3. **التحقق من الوصول**:
   - للوصول الخاص بك: انقر فوق "التحقق من الوصول" > "عرض وصولي" لرؤية التعيينات في هذا النطاق والموروثة.
   - لمستخدم/مجموعة/كائن خدمة محدد:
     - انقر فوق "التحقق من الوصول" > "التحقق من الوصول."
     - حدد "مستخدم، أو مجموعة، أو كائن خدمة."
     - ابحث بالاسم أو البريد الإلكتروني.
     - اعرض جزء النتائج لتعيينات الأدوار (مثل المالك، المساهم) والأذونات الفعالة.
4. **عرض التعيينات المؤهلة** (إذا كنت تستخدم PIM): انتقل إلى علامة التبويب "التعيينات المؤهلة" للأدوار في الوقت المناسب.
5. **بديل PowerShell/CLI**: استخدم `az role assignment list --assignee <user> --scope <resource-id>` للفحوصات البرمجية.

ملاحظة: هذا لا يشمل تعيينات نطاق الطفل؛ قم بالتعمق إذا لزم الأمر.

## التحقق من الوصول إلى قاعدة بيانات Azure SQL
يستخدم Azure SQL مصادقة Entra لمستخدمي قاعدة البيانات المضمنة (مرتبطة بهويات Entra، وليس بتسجيلات دخول SQL).
1. **تكوين مسؤول Entra (إذا لم يتم تعيينه)**: في نظرة عامة على خادم SQL > "Microsoft Entra ID" ضمن الإعدادات > "تعيين المسؤول." ابحث وحدد مستخدم/مجموعة، ثم احفظ. هذا يمكّن مصادقة Entra على مستوى الكتلة.
2. **التحقق من الوصول على مستوى الخادم**:
   - في جزء خادم SQL > "Microsoft Entra ID"، اعرض حقل المسؤول لرؤية الهوية المعينة.
   - استعلام في قاعدة البيانات `master`: `SELECT name, type_desc FROM sys.database_principals WHERE type IN ('E', 'X');` (E للمستخدمين الخارجيين، X للمجموعات الخارجية).
3. **التحقق من الوصول على مستوى قاعدة البيانات**:
   - اتصل بقاعدة البيانات باستخدام SSMS مع مصادقة Entra (حدد "Microsoft Entra - Universal with MFA" في مربع حوار الاتصال).
   - شغّل `SELECT * FROM sys.database_principals;` أو `EXEC sp_helprolemember;` لإدراج المستخدمين والأدوار.
4. **استكشاف الأخطاء وإصلاحها**: إذا فشل تسجيل الدخول (مثل خطأ 33134)، تحقق من أن سياسات الوصول المشروط لـ Entra تسمح بالوصول إلى Microsoft Graph API.

يحصل المستخدمون على `CONNECT` افتراضيًا؛ امنح أدوارًا مثل `db_datareader` عبر T-SQL: `ALTER ROLE db_datareader ADD MEMBER [user@domain.com];`.

## التحقق من الوصول إلى AKS (مجموعة Kubernetes)
يكامل AKS مع Entra ID للمصادقة ويستخدم Azure RBAC أو Kubernetes RBAC للتفويض.
1. **الوصول على مستوى Azure (إلى مورد AKS)**:
   - اتبع الخطوات العامة أعلاه على مورد مجموعة AKS.
   - الأدوار الشائعة: "مسؤول مجموعة خدمة Azure Kubernetes" للوصول الكامل إلى kubeconfig؛ "قارئ" للعرض فقط.
2. **الوصول إلى Kubernetes API**:
   - قم بالمصادقة عبر `az login` (يستخدم رمز Entra).
   - احصل على kubeconfig: `az aks get-credentials --resource-group <rg> --name <cluster>`.
   - تحقق من الارتباطات: `kubectl auth can-i <verb> <resource> --as <user@domain.com> -n <namespace>`.
   - أدرج أدوار الكتلة: `kubectl get clusterrolebindings | grep <user-or-group>`.
3. **استخدام مجموعات Entra**: عيّن Kubernetes Roles/Bindings إلى المجموعات للتوسع. مثال YAML لدور مساحة الاسم (طبّق باستخدام `kubectl apply -f file.yaml`):
   ```
   apiVersion: rbac.authorization.k8s.io/v1
   kind: RoleBinding
   metadata:
     name: example-binding
     namespace: default
   subjects:
   - kind: Group
     name: finance-group  # مجموعة Entra
     apiGroup: rbac.authorization.k8s.io
   roleRef:
     kind: Role
     name: example-role
     apiGroup: rbac.authorization.k8s.io
   ```
4. **أفضل الممارسات**: استخدم أدوار الامتياز الأدنى، وادمج مع PIM للارتفاع في الوقت المناسب، وتجنب بيانات الاعتماد الثابتة—استخدم هويات عبء العمل للحاويات.

للحاويات التي تصل إلى الموارد (مثل SQL من AKS)، عيّن هويات مُدارة وتحقق عبر Azure RBAC على تلك الهويات.

[وثائق Microsoft Entra ID](https://learn.microsoft.com/en-us/entra/identity/)  
[التحقق من الوصول إلى مورد Azure واحد](https://learn.microsoft.com/en-us/azure/role-based-access-control/check-access)  
[تكوين مصادقة Entra لـ Azure SQL](https://learn.microsoft.com/en-us/azure/azure-sql/database/authentication-aad-configure?view=azuresql)  
[أفضل ممارسات الهوية والوصول لـ AKS](https://learn.microsoft.com/en-us/azure/aks/operator-best-practices-identity)