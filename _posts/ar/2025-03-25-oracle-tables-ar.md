---
audio: false
generated: true
lang: ar
layout: post
title: تحديد الجداول التي تحتوي على بيانات في قاعدة بيانات أوراكل
translated: true
type: note
---

في Oracle Database، إذا كنت تستكشف المخططات وتجد أن بعض الجداول تظهر "فارغة" عند النقر عليها (عبر أداة واجهة مستخدم مثل SQL Developer أو Toad)، فهذا لا يعني بالضرورة أنها لا تحتوي على بيانات. قد يكون هناك عدة أسباب: الأذونات، أو الفلاتر، أو أنك ببساطة تنظر إلى الجداول الخطأ. للتعرف بشكل منهجي على الجداول في المخطط التي تحتوي على بيانات، يمكنك الاستعلام عن البيانات الوصفية لقاعدة البيانات أو فحص الجداول مباشرة. إليك كيفية القيام بذلك:

#### 1. **تحقق من أذوناتك**
   - إذا كنت ترى جداول فارغة، فقد تفتقر إلى الصلاحيات اللازمة لعرض البيانات. تأكد من أن لديك امتيازات `SELECT` على الجداول في المخطط.
   - قم بتشغيل هذا للتحقق من صلاحياتك على جدول محدد:
     ```sql
     SELECT privilege
     FROM dba_tab_privs
     WHERE grantee = UPPER('your_username')
     AND table_name = UPPER('table_name');
     ```
     استبدل `'your_username'` و `'table_name'` وفقًا لذلك. إذا لم يظهر شيء، فاطب من مالك المخطط أو مسؤول قاعدة البيانات (DBA) منحك الوصول.

#### 2. **الاستعلام عن عدد الصفوف في الجداول**
   - تحتفظ Oracle بإحصائيات حول الجداول، بما في ذلك عدد الصفوف، في طلعات `USER_TABLES`، أو `ALL_TABLES`، أو `DBA_TABLES` (اعتمادًا على مستوى وصولك).
   - لرؤية الجداول التي تحتوي على بيانات في المخطط الحالي:
     ```sql
     SELECT table_name, num_rows
     FROM user_tables
     WHERE num_rows > 0
     ORDER BY num_rows DESC;
     ```
     - `USER_TABLES`: يعرض الجداول المملوكة للمستخدم الحالي.
     - `NUM_ROWS`: العدد التقريبي للصفوف (بناءً على آخر تحديث للإحصائيات).

   - إذا كان لديك حق الوصول إلى مخطط آخر (عبر `ALL_TABLES` مثلاً):
     ```sql
     SELECT owner, table_name, num_rows
     FROM all_tables
     WHERE num_rows > 0
     AND owner = UPPER('schema_name')
     ORDER BY num_rows DESC;
     ```
     استبدل `'schema_name'` باسم المخطط الذي تتحقق منه.

   **ملاحظة**: قد تكون قيمة `NUM_ROYS` قديمة إذا لم يتم جمع الإحصائيات مؤخرًا. راجع الخطوة 5 لتحديثها.

#### 3. **التحقق يدويًا من جداول محددة**
   - إذا كنت تشك في أن `NUM_ROWS` غير موثوق أو تريد التحقق، قم بتشغيل `COUNT(*)` على الجداول الفردية:
     ```sql
     SELECT table_name
     FROM user_tables;
     ```
     يسرد هذا جميع الجداول في مخططك. ثم، لكل جدول:
     ```sql
     SELECT COUNT(*) FROM table_name;
     ```
     إذا كان العدد أكبر من 0، فإن الجدول يحتوي على بيانات. كن حذرًا مع الجداول الكبيرة — `COUNT(*)` قد يكون بطيئًا.

#### 4. **استخدم نصًا برمجيًا لأتمتة عملية الفحص**
   - لتجنب الاستعلام يدويًا عن كل جدول، استخدم نص PL/SQL للتحقق من عدد الصفوف في جميع جداول المخطط:
     ```sql
     BEGIN
         FOR t IN (SELECT table_name FROM user_tables)
         LOOP
             EXECUTE IMMEDIATE 'SELECT COUNT(*) FROM ' || t.table_name INTO v_count;
             IF v_count > 0 THEN
                 DBMS_OUTPUT.PUT_LINE(t.table_name || ' has ' || v_count || ' rows');
             END IF;
         END LOOP;
     EXCEPTION
         WHEN OTHERS THEN
             DBMS_OUTPUT.PUT_LINE('Error on table ' || t.table_name || ': ' || SQLERRM);
     END;
     /
     ```
     - قم بتمكين الإخراج في أداتك (مثل `SET SERVEROUTPUT ON` في SQL*Plus أو SQL Developer).
     - يطبع هذا النص البرمجي فقط الجداول التي تحتوي على بيانات. اضبط `user_tables` إلى `all_tables` وأضف تصفية `owner` إذا كنت تتحقق من مخطط آخر.

#### 5. **تحديث إحصائيات الجدول (إذا لزم الأمر)**
   - إذا أظهر `NUM_ROWS` في `USER_TABLES` أو `ALL_TABLES` القيمة 0 أو بدا خاطئًا، فقد تكون الإحصائيات قديمة. لتحديثها:
     ```sql
     EXEC DBMS_STATS.GATHER_SCHEMA_STATS(ownname => 'schema_name');
     ```
     استبدل `'schema_name'` باسم المخطط (استخدم اسم المستخدم الخاص بك لمخططك الخاص). ثم أعد تشغيل استعلام `USER_TABLES` من الخطوة 2.

#### 6. **التحقق من الجداول المقسمة (Partitioned Tables)**
   - إذا كان المخطط يستخدم جداول مقسمة، فقد تكون البيانات موزعة عبر الأقسام، وقد لا يعكس الاستعلام البسيط ذلك. تحقق من الأقسام:
     ```sql
     SELECT table_name, partition_name, num_rows
     FROM user_tab_partitions
     WHERE num_rows > 0
     ORDER BY table_name, partition_name;
     ```
     يوضح هذا الأقسام التي تحتوي على بيانات.

#### 7. **نصائح لأدوات واجهة المستخدم (مثل SQL Developer)**
   - إذا كنت تستخدم أداة واجهة مستخدم مثل Oracle SQL Developer:
     1. انقر بزر الماوس الأيمن على المخطط في نافذة Connections.
     2. قم بتوسيع عقدة "Tables".
     3. انقر بزر الماوس الأيمن على جدول، وحدد "Count Rows"، أو افتح علامة التبويب "Data" لمعاينة المحتويات (إذا كان مسموحًا).
     - إذا كانت علامة التبويب "Data" فارغة، فقد تكون مشكلة في الأذونات أو أن الجدول لا يحتوي على أي صفوف حقًا.

---

### مثال عملي
لنفترض أنك في مخطط يسمى `HR`. ستفعل:
1. قم بتشغيل:
   ```sql
   SELECT table_name, num_rows
   FROM user_tables
   WHERE num_rows > 0;
   ```
   قد يبدو الناتج كالتالي:
   ```
   TABLE_NAME   NUM_ROWS
   ----------   --------
   EMPLOYEES    107
   DEPARTMENTS  27
   ```
   يخبرك هذا أن `EMPLOYEES` و `DEPARTMENTS` تحتويان على بيانات.

2. إذا اشتبهت في أن الإحصائيات قديمة، قم بتحديثها:
   ```sql
   EXEC DBMS_STATS.GATHER_SCHEMA_STATS('HR');
   ```
3. أعد التحقق باستخدام نفس الاستعلام.

---

### لماذا قد تظهر الجداول فارغة
- **لا توجد بيانات**: الجدول لا يحتوي على أي صفوف حقًا.
- **الأذونات**: يمكنك رؤية هيكل الجدول ولكن ليس البيانات.
- **الفلاتر**: قد تحتوي أداة واجهة المستخدم على فلاتر تخفي الصفوف (مثل شرط `WHERE`).
- **بيانات مقطوعة/محذوفة**: قد تكون البيانات قد أزيلت مؤخرًا.
- **المرادفات (Synonyms)/الطلات (Views)**: قد تنظر إلى مرادف أو طلبة تشير إلى جدول فارغ أو غير قابل للوصول.

إذا كنت لا تزال عالقًا، فأخبرني بإعداداتك المحددة (مثل اسم المخطط، الأداة المستخدمة)، ويمكنني تخصيص النصيحة بشكل أكبر!