---
audio: false
date: 2025-09-11
generated: true
image: false
lang: ar
layout: post
model: mistralai/mistral-medium-3.1
title: تفاصيل تنفيذ تفرع المحادثة في LibreChat
translated: true
type: note
---

سؤال رائع! **LibreChat** (الإصدار v0.8.0-rc3) كان يحتوي على ميزة **تفرع المحادثات** منذ فترة، وهي تعمل بشكل مختلف عن التنفيذ الأخير من OpenAI. إليك كيفية عملها في LibreChat ومقارنتها مع نهج ChatGPT:

---

### **كيف يعمل التفرع في LibreChat**
1. **التفرع اليدوي**
   - يسمح لك LibreChat **بتفرعة المحادثة** بشكل صريح في أي نقطة عن طريق النقر على زر **"Fork"** (عادةً بالقرب من الرسالة التي تريد التفرع منها).
   - يؤدي هذا إلى إنشاء **محادثة جديدة** تبدأ من الرسالة المحددة، مع الحفاظ على كل السياق السابق حتى تلك النقطة.

2. **مسارات مستقلة**
   - بعد التفرع، التغييرات في الفرع الجديد **لا تؤثر على المحادثة الأصلية**.
   - يمكنك استكشاف اتجاهات مختلفة (مثل طرق التصحيح، الأفكار الإبداعية) دون فقدان المسار الأصلي.

3. **لا يوجد تفرع تلقائي (على عكس ChatGPT)**
   - لا يقوم LibreChat **بتفرعة المحادثات تلقائيًا** عند تعديل الرسائل (على عكس ميزة "التفرع عند التعديل" الأخيرة في ChatGPT).
   - يجب عليك **اختيار** وقت التفرع يدويًا.

4. **التنفيذ في الخلفية**
   - يقوم LibreChat بتخزين سجل المحادثة بطريقة منظمة (مثل استخدام `conversationId` و `parentMessageId` في قاعدة البيانات الخاصة به).
   - عند التفرع، ينشئ `conversationId` جديدًا مع إعادة استخدام الرسائل الأصلية حتى نقطة التفرع.

---

### **مقارنة مع تفرع ChatGPT**

| الميزة                  | LibreChat (v0.8.0-rc3)        | ChatGPT (التحديث الأخير)        |
|-------------------------|-------------------------------|----------------------------------|
| **السبب المحفز**        | يدوي (النقر على "Fork")       | تلقائي (عند تعديل الرسالة)      |
| **حالة الاستخدام**      | استكشاف البدائل               | التعافي من التعديلات            |
| **إشارة واجهة المستخدم**| قائمة فروع واضحة             | "عرض النسخة المحررة" خفية      |
| **الثبات**              | محفوظ في قاعدة البيانات      | مؤقت (قائم على الجلسة؟)         |
| **تعدد الفروع**         | نعم (فروع متعددة)             | محدود (فرع تعديل واحد)          |

---

### **لماذا كانت موجودة مسبقًا في LibreChat**
1. **مرونة المصدر المفتوح**
   - تم بناء LibreChat على واجهات برمجة التطبيقات مثل OpenAI ولكنه يضيف **طبقة إدارة محادثات** خاصة به.
   - كان التفرع ميزة طبيعية لمنصة دردشة ذاتية الاستضافة حيث يريد المستخدمون **تحكمًا كاملاً** في سجل المحادثة.

2. **مصمم لسير العمل**
   - يستهدف LibreChat **المطورين والباحثين والفرق** الذين يحتاجون إلى:
     - اختبار نقاشات مختلفة دون فقدان السياق.
     - مقارنة استجابات الذكاء الاصطناعي جنبًا إلى جنب.
     - التعاون في المناقشات المتفرعة.

3. **لا يوجد تقييد بمزود محدد**
   - على عكس ChatGPT (الذي يربط التفرع بخلفية OpenAI)، يعمل تفرع LibreChat **بغض النظر عن مزود الذكاء الاصطناعي** (مثال: يعمل بنفس الطريقة مع Claude أو Gemini أو النماذج المحلية).

---

### **كيفية استخدام التفرع في LibreChat**
1. **تفرعة محادثة**:
   - مرر فوق رسالة → انقر على **"Fork"** (أو استخدم قائمة المحادثة).
   - ستفتح دردشة جديدة تحتوي على جميع الرسائل حتى تلك النقطة.

2. **إدارة الفروع**:
   - استخدم **الشريط الجانبي** للتبديل بين المحادثات الأصلية والمتفرعة.
   - أعد تسمية الفروع للتوضيح (مثال: "طريقة التصحيح أ" مقابل "الطريقة ب").

3. **دمج السياق (متقدم)**:
   - بينما لا يقوم LibreChat بالدمج التلقائي، يمكنك **نسخ ولصق** الرسائل الرئيسية بين الفروع.

---

### **مثال على سير العمل**
1.  أنت تقوم بتصحيح خطأ في سكريبت Python مع الذكاء الاصطناعي.
2.  عند الرسالة رقم 5، تقوم بالتفرع لتجربة **نهج مختلف**.
3.  في الفرع الأصلي، تواصل مع النهج أ.
4.  في الفرع المتفرع، تختبر النهج ب.
5.  قارن النتائج لاحقًا دون إعادة كتابة السياق.

---

### **القيود**
- **لا يوجد مقارنة بصرية**: على عكس فروع Git، لا يُظهر LibreChat الاختلافات بين الفروع (حتى الآن).
- **التخزين**: قد يؤدي إنشاء فروع كثيرة إلى تضخم قاعدة البيانات الخاصة بك (نظف الفروع القديمة بشكل دوري).

---
### **خلف الكواليس (تقني)**
يعتمد تفرع LibreChat على:
- **MongoDB/PostgreSQL**: يخزن المحادثات مع مراجع `parentMessageId`.
- **حالة الواجهة الأمامية**: تدير React الفروع النشطة في واجهة المستخدم.
- **تجريد واجهة برمجة التطبيقات**: يعمل بشكل موحد عبر جميع مزودي الذكاء الاصطناعي (OpenAI و Anthropic وغيرهم).

---
### **التحسينات المستقبلية (ربما في الإصدارات اللاحقة)**
- **التفرع التلقائي عند التعديل** (مثل ChatGPT).
- **مقارنة الفروع** (عرض جنبًا إلى جنب).
- **وظيفة الدمج** (جمع فرعين).

هل تريد شرحًا أعمق لأي جزء محدد (مثل مخطط قاعدة البيانات، حيل واجهة المستخدم، أو نصائح الاستضافة الذاتية)؟