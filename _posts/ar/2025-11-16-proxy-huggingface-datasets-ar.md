---
audio: false
generated: true
image: false
lang: ar
layout: post
model: openai/gpt-5
title: استخدام الوكيل مع مجموعات بيانات هوجينج فيس
translated: true
type: note
---

نعم — `datasets` تتبع **إعدادات البروكسي الخاصة بالنظام / البيئة** لديك، لكنها **لا** تملك إعدادات بروكسي خاصة بها.
لذا يمكنك بالتأكيد جعل Hugging Face تقوم بتنزيل مجموعات البيانات عبر بروكسي عندما تكون في الصين.

إليك الطريقة.

---

# كيفية جعل `load_dataset` تستخدم بروكسي (مناسب للصين)

## 1. تعيين متغيرات البيئة لبروكسي HTTP/HTTPS

تستخدم `datasets` مكتبة `requests` الخاصة بـ Python داخليًا.
تستخدم `requests` تلقائيًا متغيرات بيئة البروكسي القياسية:

### Linux / macOS

```bash
export HTTP_PROXY="http://127.0.0.1:7890"
export HTTPS_PROXY="http://127.0.0.1:7890"
```

إذا كان بروكسي الخاص بك يستخدم SOCKS5:

```bash
export HTTP_PROXY="socks5://127.0.0.1:1080"
export HTTPS_PROXY="socks5://127.0.0.1:1080"
```

### Windows (PowerShell)

```powershell
setx HTTP_PROXY "http://127.0.0.1:7890"
setx HTTPS_PROXY "http://127.0.0.1:7890"
```

ثم أعد فتح الطرفية.

---

## 2. إذا كنت تشغل Python داخل كود (مثل Jupyter)، عينها داخل Python

```python
import os

os.environ['HTTP_PROXY'] = 'http://127.0.0.1:7890'
os.environ['HTTPS_PROXY'] = 'http://127.0.0.1:7890'
```

هذا يعمل بموثوقية.

---

## 3. تأكد من أن البروكسي يعمل

يمكنك الاختبار باستخدام:

```python
import requests
print(requests.get("https://api.ipify.org?format=json").text)
```

إذا كان عنوان IP هو عقدة الخروج لبروكسي الخاص بك، فإن تنزيلات مجموعة بيانات Hugging Face ستذهب أيضًا عبر ذلك البروكسي.

---

## 4. مكتبة `huggingface_hub` التابعة لـ Hugging Face تحترم هذه المتغيرات أيضًا

تستخدم `datasets` داخليًا `huggingface_hub`، وهي **أيضًا** تتبع:

* `HTTP_PROXY`
* `HTTPS_PROXY`
* `http_proxy`
* `https_proxy`

لذلك بمجرد تعيين متغيرات البيئة، كل من تنزيلات النماذج ومجموعات البيانات ستستخدم بروكسي الخاص بك تلقائيًا.

---

# ملاحظات حول الاستخدام في الصين

* غالبًا ما تتطلب التنزيلات الأولية من Hugging Face بروكسي لأنها تستضيف على نقاط نهاية في الولايات المتحدة / أوروبا.
* إذا رأيت انتهاء مهلة من ملفات مجموعة البيانات ذات الامتداد `.zst`، فهذا طبيعي بدون بروكسي.
* البروكسي العام (مثل Clash, V2Ray, Qv2ray، إلخ) يجعل كل شيء أكثر سلاسة.

---

# إذا أردت، يمكنني أن أوضح:

* كيفية التأكد من أن NanoGPT يقوم بتنزيل مجموعات البيانات عبر بروكسي الخاص بك
* كيفية تخزين مجموعة البيانات محليًا لتجنب التنزيلات المستقبلية
* كيفية إنشاء نسخة مرآة لمجموعات بيانات Hugging Face محليًا في الصين (على سبيل المثال، حل بديل لمرآة Tsinghua)

فقط أخبرني بما تحتاج.