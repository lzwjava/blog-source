---
audio: false
generated: true
lang: ar
layout: post
title: الفرعات المتفرعة في Git
translated: true
---

عندما يتفرع فرع `main` المحلي و الفرع البعيد `origin/main` في Git—ب 74 و 70 تعليقات مختلفة على التوالي—فإن ذلك يعني أن لهما سلف مشترك ولكنهما تطوروا منذ ذلك الحين تعليقات فريدة. هدفك هو جعل فرع `main` المحلي يتطابق مع `origin/main` من خلال إعادة تعيين فرعك المحلي إلى السلف المشترك (الأب لكل منهما) ثم استخدام `git pull` لإحضار التغييرات البعيدة، مما يؤدي إلى إلغاء تعليقاتك المحلية المتفرعة لصالح البعيد. أدناه الخطوات لتحقيق ذلك.

### خطوات إصلاح التفرع

1. **جلب أحدث التغييرات البعيدة**
   ابدأ من خلال التأكد من أن مستودعك المحلي يحتوي على أحدث المعلومات من البعيد. هذا يحديث مرجعك إلى `origin/main` دون تغيير فرع `main` المحلي بعد ذلك.

   ```bash
   git fetch origin
   ```

2. **إيجاد التعليق المشترك**
   استخدم `git merge-base` لتحديد التعليق المشترك بين فرع `main` المحلي و `origin/main`. هذا هو النقطة التي تفرعت فيها الفروع.

   ```bash
   ancestor=$(git merge-base main origin/main)
   ```

   هذه الأوامر تخزن هاش التعليق المشترك في المتغير `ancestor`.

3. **إعادة تعيين `main` المحلي إلى السلف المشترك**
   اعد تعيين فرع `main` المحلي إلى التعليق المشترك. خيار `--hard` يضمن أن كلا من المؤشر الفرعي ومساحة العمل الخاصة بك يتم تحديثهما، مما يؤدي إلى إلغاء جميع التعليقات المحلية والتغييرات التي تم إجراؤها بعد هذه النقطة.

   ```bash
   git reset --hard $ancestor
   ```

   **تحذير**: هذه الخطوة ستؤدي إلى إلغاء جميع التغييرات غير المرفقة في مساحة العمل الخاصة بك ومساحة الإعداد، بالإضافة إلى 74 التعليقات الفريدة في فرع `main` المحلي. إذا كنت تحتاج إلى حفظ هذه، فاعتبر إنشاء فرع احتياطي أولا (انظر "إحتياطي اختياري" أدناه).

4. **جلب التغييرات البعيدة**
   الآن، جلب التغييرات من `origin/main`. نظرًا لأن فرع `main` المحلي الآن في السلف المشترك، و `origin/main` متقدم بـ 70 تعليقات، فسيؤدي هذا إلى تقدم سريع لفروعك المحلية `main` لتطابق `origin/main`.

   ```bash
   git pull origin main
   ```

   بعد ذلك، سيكون فرع `main` المحلي متطابقًا مع `origin/main`، مع إلغاء جميع التعليقات المحلية المتفرعة.

### تسلسل الأوامر الكامل

هنا هو التسلسل الكامل للأوامر التي يجب تنفيذها:

```bash
git fetch origin
ancestor=$(git merge-base main origin/main)
git reset --hard $ancestor
git pull origin main
```

### ماذا يحدث؟
- **بعد الخطوة 1**: يعرف مستودعك المحلي أحدث حالة `origin/main`.
- **بعد الخطوة 2**: قمت بإيجاد التعليق المشترك (مثل هاش مثل `abc123`).
- **بعد الخطوة 3**: تم إعادة تعيين فرع `main` المحلي إلى `abc123`، مما يؤدي إلى فقدان 74 التعليقات المحلية الفريدة.
- **بعد الخطوة 4**: `git pull` تقدم `main` إلى `origin/main`، مما يؤدي إلى جلب 70 التعليقات من الفرع البعيد.

النتيجة هي أن فرع `main` المحلي يتطابق مع `origin/main` تمامًا، مما يؤدي إلى تحقيق هدفك من استخدام الفرع البعيد.

### احتياطي اختياري
إذا كنت غير متأكد من إلغاء تعليقاتك المحلية و تريد حفظها لاحقا، قم بإنشاء فرع احتياطي قبل إعادة الإعداد:

```bash
git branch backup-main
```

قم بتشغيل هذا قبل أمر `git reset`. ستظل 74 تعليقاتك المحلية على `backup-main`، ويمكنك مراجعتها لاحقًا إذا لزم الأمر.

### ملاحظات مهمة
- **التغييرات غير المرفقة**: إذا كان لديك تغييرات غير مرفقة (في مساحة العمل أو مساحة الإعداد) التي تريد الاحتفاظ بها، قم بإخفائها قبل إعادة الإعداد:
  ```bash
  git stash
  ```
  بعد إكمال العملية، يمكنك استرجاعها باستخدام `git stash pop`.
- **لماذا يعمل هذا**: إعادة الإعداد إلى السلف المشترك و الجلب يضمن تقدم سريع نظيف إلى `origin/main`، مما يجنب النزاعات التي قد تحدث من الجلب المباشر مع الفروع المتفرعة.

بمتابعة هذه الخطوات، ستنجح في إعادة تعيين فرع `main` المحلي لتطابق `origin/main` كما هو مطلوب.