---
audio: false
generated: true
image: false
lang: ar
layout: post
model: x-ai/grok-code-fast-1
title: علامة موفر OpenSSL القديم في Node.js
translated: true
type: note
---

### فهم المشكلة
يستخدم Node.js 16 (والإصدارات السابقة) OpenSSL 1.x، بينما يقدم Node.js 22 OpenSSL 3.x الذي يتمتع بإعدادات أمان أكثر صرامة. يمكن أن يتسبب هذا في أخطاء في بعض التطبيقات، خاصة تلك التي تعتمد على موفري التشفير القديم أو الخوارزميات المهجورة (مثل تجزئات MD4). يمكّن العلم `--openssl-legacy-provider` مؤقتًا التوافق مع سلوك OpenSSL 1.x لإصلاح هذه المشكلات أثناء الترقية.

**ملاحظة**: هذا العلم حل مؤقت وقد يتم إزالته في إصدارات Node.js المستقبلية. من الأفضل استخدامه للإصلاحات قصيرة المدى — قم بتحديث الكود الخاص بك لاستخدام واجهات برمجة تطبيقات OpenSSL 3.x الحديثة عندما يكون ذلك ممكنًا.

### كيفية استخدام العلم
يمكنك تطبيق هذا العلم عند تشغيل Node.js مباشرة أو عبر نصوص npm/yarn. إنه خيار وقت التشغيل وليس تكوينًا دائمًا.

#### للأوامر المباشرة في Node
أضف العلم قبل النص أو الأمر الخاص بك. أمثلة:
- تنفيذ النص الأساسي: `node --openssl-legacy-provider app.js`
- REPL (الوضع التفاعلي): `node --openssl-legacy-provider`
- إذا كنت تشغّل وحدة: `node --openssl-legacy-provider --input-type=module index.mjs`
- مع أعلام إضافية: `node --openssl-legacy-provider --max-old-space-size=4096 script.js`

هذا يمكّن دعم موفر التشفير القديم، متجنبًا الأخطاء الشائعة مثل "دوال المغلف الرقمي غير مدعومة" (المتعلقة بالتجزئات أو الشفرات القديمة).

#### لنصوص npm/Yarn
عدّل ملف `package.json` الخاص بك تحت `"scripts"` لتضمين العلم في الأوامر ذات الصلة. مثال:
```json
{
  "scripts": {
    "start": "node --openssl-legacy-provider app.js",
    "dev": "node --openssl-legacy-provider --watch app.js"
  }
}
```
ثم شغّل كالمعتاد: `npm start` أو `yarn dev`.

إذا كنت تستخدم أداة مثل nodemon أو vite التي تنتج عمليات Node، فقم بإضافة العلم في بداية تكوينها (مثال: في nodemon.json: `"exec": "node --openssl-legacy-provider"`).

#### للأوامر العامة (مثلاً عبر nvm أو Node النظام)
إذا كنت تدير إصدارات Node باستخدام nvm، فانتقل إلى Node 22 وشغّل الأوامر مع العلم كما هو موضح. بالنسبة لـ Docker أو CI/CD، أضفه إلى نصوص التشغيل الخاصة بك (مثال: `CMD ["node", "--openssl-legacy-provider", "app.js"]`).

### استكشاف الأخطاء وإصلاحها والبدائل
- **التحقق من عمل العلم**: شغّل `node --openssl-legacy-provider --version` — يجب أن يخرج إصدار Node 22 دون أخطاء.
- **المشكلات الشائعة المصلحة**: أخطاء مع `require()` لوحدات التشفير، أو بناء webpack، أو بدء التشغيل للتطبيق. إذا استمرت المشكلة، افحص وجود كود محدد لـ OpenSSL (مثال: استبدل `crypto.createCipher` ببدائل مثل `crypto.createCipheriv`).
- **الحلول طويلة المدى**: افحص عن استخدام التشفير المهجور (استخدم أدوات مثل إضافات ESLint) وقم بالتحديث إلى الطرق المتوافقة مع OpenSSL 3.x. توثيق Node 22 يوصي بمكتبات مثل `bcrypt` أو `crypto.scrypt` للتجزئة.
- **ملاحظة الأداء/التوافق**: وضع المزود القديم قد يؤثر قليلاً على الأمان/الميزات لكنه يساعد أثناء الهجرة. اختبر بدقة، حيث أن بعض ميزات OpenSSL 3 (مثل: مصادر إنتروبيا محسنة) لن تكون متاحة.

لمزيد من التفاصيل، انظر إلى توثيق Node.js OpenSSL على nodejs.org/api/crypto.html. إذا قمت بمشاركة رسائل خطأ محددة، يمكنني تقديم نصائح أكثر استهدافًا!