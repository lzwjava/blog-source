---
audio: false
generated: true
lang: ar
layout: post
title: تحديد أداء تطبيقات جافا باستخدام VisualVM
translated: true
type: note
---

إليك دليل واضح ومختصر عن **كيفية استخدام VisualVM** لمراقبة وتحليل تطبيقات Java. VisualVM هو أداة مجانية وقوية مدمجة مع JDK تساعدك على تحليل الأداء واستخدام الذاكرة ونشاط الخيوط في تطبيقات Java الخاصة بك.

---

### الخطوة 1: تثبيت وتشغيل VisualVM
- **تحقق من تثبيت VisualVM**: عادةً ما تكون VisualVM مدرجة مع JDK (الإصدار 6 تحديث 7 وما بعده). ابحث عنها في دليل `bin` الخاص بتثبيت JDK (مثال: `jdk/bin/visualvm.exe` على Windows).
- **قم بالتنزيل إذا لزم الأمر**: إذا لم تكن مدرجة، قم بتنزيلها من [موقع VisualVM الرسمي](https://visualvm.github.io/).
- **شغّل VisualVM**: شغّل الملف التنفيذي `visualvm`. عند بدء التشغيل، سترى قائمة بعمليات Java التي تعمل حاليًا على جهازك المحلي.

---

### الخطوة 2: الاتصال بتطبيق Java الخاص بك
- **التطبيقات المحلية**: تكتشف VisualVM تلقائيًا عمليات Java قيد التشغيل على جهازك. انقر نقرًا مزدوجًا فوق العملية التي تريد مراقبتها للاتصال بها.
- **التطبيقات البعيدة**: لمراقبة عملية Java على جهاز آخر:
  1. ابدأ تشغيل JVM البعيد مع تمكين JMX (أضف `-Dcom.sun.management.jmxremote` إلى وسيطات JVM).
  2. في VisualVM، انقر بزر الماوس الأيمن على **Remote** في الجزء الأيسر، واختر **Add Remote Host**، وأدخل تفاصيل الجهاز البعيد.
  3. بمجرد الاتصال، حدد العملية البعيدة لمراقبتها.

---

### الخطوة 3: مراقبة أداء التطبيق
بعد الاتصال، تعرض علامة التبويب **Overview** التفاصيل الأساسية مثل معرف العملية ووسيطات JVM. انتقل إلى علامة التبويب **Monitor** للحصول على بيانات الأداء في الوقت الفعلي:
- **استخدام وحدة المعالجة المركزية**: يتتبع مقدار وحدة المعالجة المركزية الذي يستخدمه تطبيقك.
- **استخدام الذاكرة**: يعرض استهلاك Heap و Metaspace مع مرور الوقت.
- **الخيوط**: يظهر عدد الخيوط النشطة.
- **Garbage Collection**: يراقب نشاط GC.

تمنحك هذه الرسوم البيانية نظرة عامة على صحة تطبيقك.

---

### الخطوة 4: تحليل استخدام وحدة المعالجة المركزية والذاكرة
للتحليل الأعمق، استخدم علامة التبويب **Profiler**:
- **تحليل أداء وحدة المعالجة المركزية**: يحدد الطرق التي تستهلك أكبر وقت لوحدة المعالجة المركزية.
  1. انتقل إلى علامة التبويب **Profiler** وانقر على **CPU**.
  2. انقر على **Start** لبدء التحليل.
  3. استخدم تطبيقك لتوليد الحمل الذي تريد تحليله.
  4. انقر على **Stop** و راجع النتائج لمعرفة أبطأ الطرق.
- **تحليل الذاكرة**: يتتبع تخصيص الكائنات ويكتشف تسريبات الذاكرة.
  1. في علامة التبويب **Profiler**، انقر على **Memory**.
  2. انقر على **Start**، استخدم تطبيقك، ثم انقر على **Stop**.
  3. تحقق من النتائج لأعداد وأحجام الكائنات لاكتشاف مشكلات الذاكرة المحتملة.

**ملاحظة**: يضيف التحليل عبئًا إضافيًا، لذا استخدمه في بيئات التطوير أو الاختبار، وليس في بيئة الإنتاج.

---

### الخطوة 5: تحليل Heap Dumps و Thread Dumps
- **Heap Dumps**: التقاط لقطات الذاكرة للتحليل التفصيلي.
  1. في علامة التبويب **Monitor**، انقر على **Heap Dump**.
  2. استكشف الـ dump في عرض **Classes** أو **Instances** لرؤية تخصيصات الكائنات.
  3. ابحث عن الأنماط غير المعتادة (مثل كثرة الكائنات) التي قد تشير إلى تسريبات.
- **Thread Dumps**: تشخيص مشكلات الخيوط مثل deadlocks.
  1. في علامة التبويب **Threads**، انقر على **Thread Dump**.
  2. تحقق من حالات الخيوط (مثل RUNNABLE, WAITING) لتحديد المشكلات.

---

### الخطوة 6: استكشاف الميزات الإضافية
- **أداة أخذ العينات**: موجودة في علامة التبويب **Sampler**، توفر تحليلًا خفيفًا لوحدة المعالجة المركزية والذاكرة مع عبء أقل من التحليل الكامل.
- **Visual GC**: قم بتثبيت الإضافة Visual GC (عبر **Tools > Plugins**) لتصور سلوك garbage collection.
- **MBeans**: استخدم علامة التبويب **MBeans** لعرض وإدارة JMX beans للحصول على مقاييس مخصصة.

---

### أفضل الممارسات
- **تجنب التحليل في بيئة الإنتاج**: يبطئ التحليل تطبيقك، لذا التزم بإعدادات التطوير أو الاختبار.
- **ابدأ ببساطة**: استخدم علامة التبويب **Monitor** أولاً للحصول على خط أساس قبل البدء في التحليل.
- **استهدف مشكلات محددة**: ركز التحليل على المناطق المشتبه فيها لتقليل العبء الإضافي.
- **راجع بيانات GC**: حلل إحصائيات garbage collection لتحسين استخدام الذاكرة.

---

### استكشاف الأخطاء وإصلاحها
- **التطبيق لا يظهر**: تأكد من أنه يعمل باستخدام JVM متوافق وأن VisualVM لديه صلاحية الوصول.
- **مشكلات الاتصال البعيد**: تأكد من تكوين JVM البعيد ليعمل مع JMX وأن إعدادات الشبكة (مثل الجدران النارية) تسمح بالاتصال.
- **تأثير الأداء**: إذا كان التحليل بطيئًا جدًا، انتقل إلى **Sampler** للحصول على خيار أخف.

---

تعتبر VisualVM أداة ممتازة لفهم وتحسين تطبيقات Java الخاصة بك. اتبع هذه الخطوات لمراقبة الأداء وتحليل الاختناقات وتشخيص المشكلات بفعالية. لمزيد من التفاصيل، راجع [الوثائق الرسمية لـ VisualVM](https://visualvm.github.io/documentation.html).