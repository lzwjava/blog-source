---
audio: false
generated: true
image: false
lang: ar
layout: post
model: x-ai/grok-4-fast
title: الاختلافات في بنية ملفات تفريغ ويكيبيديا
translated: true
type: note
---

الفرق الرئيسي هو كيفية تقسيم نص مقالة ويكيبيديا الكامل عبر ملفات متعددة — تحديدًا ما إذا كان ملف `.xml.bz2` واحدًا يحتوي على تيار واحد فقط من المراجعات (غير متعدد التيارات) أو العديد من التيارات المضغوطة مجتمعة معًا (متعدد التيارات).

### 1. ملفات الإلقاء غير متعددة التيارات (النمط الأقدم، أو ملفات "pages-articles" الافتراضية)
اسم ملف مثال:  
`enwiki-20251101-pages-articles1.xml-p1p41242.bz2`

*   كل ملف `.xml.bz2` يحتوي على جزء من الصفحات (مثلاً، الصفحات 1–41242) مرتبة حسب معرف الصفحة.
*   داخل الملف يوجد تتابع مستمر واحد بالضبط `<page>` … `<page>` ….
*   جميع مراجعات صفحة واحدة تكون معًا داخل وسم الصفحة ذاك (أحدث مراجعة + المراجعات الأقدم إذا طلبت "الحالية + السجل").
*   لاستخراج مقالة واحدة، تقوم ببساطة بفك الضغط وتحليل XML الكبير بشكل طبيعي باستخدام أي أداة XML/BZ2.
*   `wget -c` يعمل بشكل مثالي بالطريقة البسيطة: يستأنف بالضبط من حيث توقف لأن الملف هو تيار bzip2 واحد.

### 2. ملفات الإلقاء متعددة التيارات (الملفات التي تحتوي على "multistream" في الاسم)
اسم ملف مثال (الذي ربطته):  
`enwiki-20251101-pages-articles-multistream1.xml-p1p41242.bz2`

*   نفس نطاق الصفحات (p1p41242) لا يزال مغطى، لكن النص الكامل لكل مراجعة لم يعد مخزنًا داخل ملف XML الرئيسي.
*   بدلاً من ذلك:
    *   ملف XML الرئيسي يحتوي فقط على البيانات الوصفية (العنوان، المعرف، القيود، طابع زمني لأحدث مراجعة، إلخ) ومؤشر (إزاحة البايت + الطول) إلى مكان وجود نص المراجعة الفعلي.
    *   نصوص المراجعة الفعلية مخزنة بشكل منفصل في العديد من التيارات المضغوطة الصغيرة داخل نفس ملف `.bz2` (ومن هنا جاءت تسمية "multistream").
*   يوجد عادةً ملف مرافق `...-multistream-index1.txt.bz2` يحتوي على إزاحات البايت الدقيقة لكل صفحة/مراجعة حتى تتمكن الأدوات من القفز مباشرة إلى تيار الضغط الصحيح واستخراج ذلك النص فقط دون فك ضغط ملف 10–30 جيجابايت كامل.

### لماذا يهم هذا الأمر بالنسبة لـ `wget -c`؟

عمليًا، كلا الأمرين:

```bash
wget -c https://.../enwiki-20251101-pages-articles1.xml-p1p41242.bz2
wget -c https://.../enwiki-20251101-pages-articles-multistream1.xml-p1p41242.bz2
```

يتصرفان بنفس الطريقة تمامًا من وجهة نظر wget: كلاهما ملفات bzip2 فردية عادية، لذا فإن التنزيل القابل للاستئناف باستخدام `-c` يعمل بشكل مثالي في كلتا الحالتين.

يظهر الفرق فقط عندما تبدأ في معالجة الملف الذي تم تنزيله.

### جدول الملخص

| الميزة                              | غير متعدد التيارات (عادي)                      | متعدد التيارات                                      |
|--------------------------------------|-------------------------------------------------|--------------------------------------------------|
| اسم الملف يحتوي على                  | `-pages-articlesN.xml-...bz2`                  | `-pages-articles-multistreamN.xml-...bz2`        |
| مكان نص المقالة                      | داخل XML `<page><revision><text>...</text></revision></page>` | خارج XML، في تيارات مضغوطة منفصلة |
| حجم الملف (لنفس نطاق الصفحات)        | أكبر بكثير (غالبًا 2–3×)                        | أصغر بكثير                                    |
| الوصول العشوائي / استخراج صفحة مفردة | بطيء جدًا (يجب فك ضغط الملف بالكامل)          | سريع جدًا (مع ملف الفهرس)                  |
| الأدوات التي تفهمه مباشرة            | أي محلل XML (SAX, xmltodict، إلخ)           | أدوات dump-generator الخاصة بويكيميديا، pywiki، mwxml، إلخ. |
| هل يحتاج إلى ملف فهرس مرافق؟          | لا                                              | نعم (`-multistream-index....txt.bz2`)            |
| قابلية الاستئناف لـ `wget -c`        | مثالية                                         | مثالية (لا يزال ملف bzip2 واحدًا)                   |

### إذن أي واحد يجب أن تقوم بتنزيله؟

*   إذا كنت تريد فقط إجراء تمرير تسلسلي كامل لمرة واحدة (مثلاً لتدريب نموذج لغة)، فإن الملفات غير متعددة التيارات أبسط.
*   إذا أردت يومًا البحث عن صفحات فردية بسرعة، أو إذا كنت تهتم بمساحة القرص وسرعة الاستخراج، ففضل دائمًا زوج multistream + الفهرس. تقريبًا جميع أدوات معالجة ويكيميديا الجادة (WikiExtractor، WikiCorpus الخاص بـ gensim، سكريبتات jawiki، إلخ) تتوقع أو توصي بشدة باستخدام إصدار multistream في الوقت الحالي.

كلا الملفين يمكنك استئناف تنزيلهما باستخدام `wget -c` دون أي مشكلة؛ جزء "multistream" يغير فقط ما بداخل الملف، وليس كيف تراه HTTP/wget.