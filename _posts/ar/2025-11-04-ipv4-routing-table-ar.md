---
audio: false
generated: true
image: false
lang: ar
layout: post
model: x-ai/grok-4-fast
title: فهم ناتج جدول توجيه IPv4
translated: true
type: note
---

### فهم ناتج أمر `ip route` الخاص بك

هذا هو جدول توجيه IPv4 من نظام Linux الخاص بك (على الأرجح باستخدام أمر `ip` من حزمة iproute2). يوضح كيف تقرر جهازك أين يرسل الحزم بناءً على عناوين IP الوجهة. يتم مطابقة المسارات حسب أطول بادئة (الأكثر تحديدًا أولاً)، والمسار الافتراضي يلتقط كل شيء آخر.

سأقوم بتحليله مدخلًا تلو الآخر في جدول من أجل الوضوح، ثم سألخص ما يعنيه بشكل عام. هذا يعود بنا إلى محادثتنا السابقة: إنه مثال واقعي لجدول توجيه بسيط يحتوي على مسارات متصلة (شبكات محلية فرعية) وبوابة افتراضية للإنترنت.

| الوجهة               | البوابة (القفزة التالية) | الواجهة    | البروتوكول | النطاق | عنوان IP المصدر | المتر | الملاحظات |
|----------------------|--------------------------|------------|------------|--------|-----------------|-------|-----------|
| **0.0.0.0/0** (افتراضي) | 192.168.1.1       | enp4s0   | dhcp    | global| (لا شيء)       | 100   | كل حركة المرور التي لا تطابق المسارات الأخرى تذهب إلى هنا. تشير إلى جهاز التوجيه الخاص بك (على الأرجح بوابة منزلك) على واجهة الإيثرنت enp4s0. تم اكتشافها عبر DHCP. |
| **169.254.0.0/16** | (مباشر)          | enp4s0   | kernel  | link  | (لا شيء)       | 1000  | نطاق العنوان المحلي للرابط (APIPA) للتكوين التلقائي عند فشل DHCP. المتر المرتفع يعني أنها احتياطية—تُستخدم فقط إذا لم يكن هناك مسار أفضل. |
| **172.17.0.0/16** | (مباشر)          | docker0  | kernel  | link  | 172.17.0.1   | (لا شيء)| شبكة الجسر الافتراضية لـ Docker. "linkdown" تعني أن الواجهة معطلة (لا توجد حاويات نشطة?). يعمل مضيفك كبوابة لهذه الشبكة الفرعية. |
| **172.18.0.0/16** | (مباشر)          | br-c33e38e216df | kernel | link  | 172.18.0.1   | (لا شيء)| جسر Docker آخر (شبكة معرفة من قبل المستخدم?). نشط، لذا يمكن للحاويات على هذا الجسر الوصول إلى المضيف عبر 172.18.0.1. |
| **192.168.1.0/24** | (مباشر)         | enp4s0   | kernel  | link  | 192.168.1.35 | 100   | شبكتك المحلية الفرعية LAN. متصلة مباشرة عبر enp4s0—تبقى الحزم الموجهة لأجهزة أخرى على 192.168.1.x محلية (مثلاً، إلى جهاز التوجيه الخاص بك على .1). عنوان IP لجهازك هو 192.168.1.35. |

#### رؤى أساسية
- **المسارات المحلية/المتصلة**: مداخل 172.x.x.x و 192.168.1.0/24 هي مسارات "kernel" للشبكات المرفقة مباشرة (لا حاجة إلى بوابة قفزة تالية). هذا يطابق التكرار البسيط الذي وصفته—يقوم نظامك بالتحقق مما إذا كان عنوان IP الوجهة يقع ضمن هذه النطاقات ويخرجه عبر الواجهة المطابقة (مثلاً، enp4s0 للشبكة المحلية LAN).
- **تأثير Docker**: لديك Docker مثبت/شغال، مما ينشئ جسورًا افتراضية (docker0 و br-...). هذه تسمح للحاويات بأن يكون لها شبكاتها المعزولة. "linkdown" على docker0 تشير إلى عدم وجود حاويات تستخدم الجسر الافتراضي حاليًا.
- **المسار الافتراضي**: كل شيء آخر (مثلاً، google.com) يذهب عبر 192.168.1.1 على enp4s0. المتر 100 منخفض (مفضل)؛ العنوان المحلي للرابط لديه 1000 لإعطائه أولوية أقل.
- **لا توجد مسارات بعيدة**: هذا الجدول أساسي—لا توجد بروتوكولات توجيه ديناميكية (مثل OSPF) تضيف مداخل للشبكات البعيدة. إذا قمت بـ ping لشيء خارج 192.168.1.0/24، فسيضرب المسار الافتراضي.

#### اختبارات سريعة للتحقق
- `ping 192.168.1.1` → يجب أن يستخدم المسار المحلي على enp4s0.
- `ping 8.8.8.8` → يستخدم المسار الافتراضي؛ تتبع مع `traceroute 8.8.8.8` لرؤية المسار.
- `ip addr show enp4s0` → يؤكد عنوان IP لواجهتك.
- إذا كان Docker متورطًا: `docker network ls` لسرد الجسور.

إذا كان هذا من إعدادك وكان هناك شيء لا يعمل (مثلاً، لا يوجد اتصال بالإنترنت؟)، الإصلاحات الشائعة: تحقق من الكبل/تجديد DHCP (`dhclient enp4s0`)، أو مسح ذاكرة التوجيه (`ip route flush cache`). ما الذي يحدث—هل تحاول استكشاف مشكلة في الاتصال، أم أنك فقط فضولي بخصوص مدخل معين؟