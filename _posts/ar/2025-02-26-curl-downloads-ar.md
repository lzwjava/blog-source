---
audio: false
generated: true
lang: ar
layout: post
title: استكشاف أخطاء تنزيلات كيرل
translated: true
type: note
---

عندما تحاول تنزيل ملف ZIP من Eclipse من eclipse.org باستخدام `curl -O`، قد تواجه مشكلة حيث يتم تنزيل ملف HTML بدلاً من ملف ZIP المطلوب، مصحوبًا بخطأ "301 Moved Permanently". يحدث هذا لأن الرابط الذي تستخدمه يتم إعادة توجيهه إلى موقع آخر، وأداة `curl` لا تتابع هذا التوجيه تلقائيًا إلى الملف الفعلي. إليك كيفية إصلاح ذلك:

### فهم المشكلة

- **301 Moved Permanently**: رمز حالة HTTP هذا يعني أن المورد (ملف ZIP) قد نُقل بشكل دائم إلى عنوان URL جديد. غالبًا ما تستخدم الخوادم عمليات إعادة التوجيه لروابط التنزيل للإشارة إلى مواقع مرآة أو مواقع محدثة.
- **سلوك `curl -O`**: الخيار `-O` يخبر `curl` بحفظ المحتوى الذي تم تنزيله في ملف باسم الملف الأصلي على الخادم. ومع ذلك، دون معالجة عمليات إعادة التوجيه صراحةً، قد تقوم `curl` بحفظ محتوى استجابة إعادة التوجيه الوسيطة (غالبًا صفحة HTML) بدلاً من متابعتها إلى ملف ZIP.

### الحل

لضمان متابعة `curl` لإعادة التوجيه وتنزيل ملف ZIP الخاص بـ Eclipse، استخدم الخيار `-L` إلى جانب `-O`. علم `-L` يوجه `curl` لمتابعة أي عمليات إعادة توجيه حتى تصل إلى الوجهة النهائية.

#### الأمر

```bash
curl -L -O <URL>
```

- **`-L`**: يتابع عمليات إعادة التوجيه، مثل إعادة التوجيه 301، إلى الموقع الجديد.
- **`-O`**: يحفظ الملف بالاسم الأصلي من عنوان URL النهائي.
- **`<URL>`**: استبدل هذا بعنوان URL المحدد لتنزيل Eclipse، مثل `https://www.eclipse.org/downloads/download.php?file=/technology/epp/downloads/release/2023-03/R/eclipse-java-2023-03-R-win32-x86_64.zip`.

### التعليمات خطوة بخطوة

1.  **ابحث عن عنوان URL الصحيح**:
    *   قم بزيارة موقع Eclipse على الويب (مثال: `https://www.eclipse.org/downloads/`).
    *   حدد الحزمة المطلوبة (مثال: Eclipse IDE for Java Developers).
    *   انقر بزر الماوس الأيمن على رابط التنزيل أو الزر وانسخ عنوان URL. بدلاً من ذلك، استخدم أدوات المطور في المتصفح (F12، علامة تبويب Network) لالتقاط عنوان URL الدقيق عند النقر على التنزيل.

2.  **شغّل الأمر**:
    *   افتح الطرفية (Terminal) الخاصة بك.
    *   نفّذ أمر `curl` مع الخيارين `-L` و `-O`، باستخدام عنوان URL الذي نسخته:
        ```bash
        curl -L -O https://www.eclipse.org/downloads/download.php?file=/technology/epp/downloads/release/2023-03/R/eclipse-java-2023-03-R-win32-x86_64.zip
        ```
    *   يجب أن يقوم هذا بتنزيل ملف ZIP (مثال: `eclipse-java-2023-03-R-win32-x86_64.zip`) إلى المجلد الحالي الخاص بك.

### استكشاف الأخطاء وإصلاحها

إذا كنت لا تزال تواجه مشاكل، جرب هذه الخطوات الإضافية:

- **تحقق من عمليات إعادة التوجيه مع إخراج مفصل**:
  * استخدم الخيار `-v` لرؤية معلومات مفصلة حول الطلب وعمليات إعادة التوجيه:
    ```bash
    curl -v -L -O <URL>
    ```
  * ابحث عن رأس `Location` في استجابة 301 لترى إلى أين يتم إعادة التوجيه. إذا كان يشير إلى صفحة HTML بدلاً من ملف ZIP، فقد يكون عنوان URL ليس رابط التنزيل المباشر.

- **تحقق من عنوان URL**:
  * غالبًا ما يستخدم Eclipse سكريبت `download.php` الذي قد يعيد التوجيه إلى موقع مرآة. تأكد من أن عنوان URL الخاص بك إما رابط مباشر لملف ZIP أو رابط إعادة توجيه يحل إلى الملف. على سبيل المثال، قد يبدو رابط المرآة المباشر كالتالي:
    ```bash
    curl -L -O https://mirror.its.dal.ca/eclipse/technology/epp/downloads/release/2023-03/R/eclipse-java-2023-03-R-win32-x86_64.zip
    ```

- **تعيين رأس User-Agent**:
  * تتصرف بعض الخوادم بشكل مختلف بناءً على العميل. إذا كان الخادم يُرجع HTML لأنه يكتشف `curl`، فحاكي متصفحًا عن طريق إضافة User-Agent:
    ```bash
    curl -L -O -A "Mozilla/5.0" <URL>
    ```

### لماذا هذا الحل يعمل

قد يعيد موقع Eclipse على الويب توجيه طلبات التنزيل إلى موقع مرآة أو عنوان URL محدّد. بدون `-L`، يحفظ `curl -O` استجابة إعادة التوجيه (صفحة HTML) بدلاً من متابعتها. إضافة `-L` تضمن أن `curl` تتابع إعادة التوجيه 301 إلى ملف ZIP الفعلي، مما يحل المشكلة.

باتباع هذه الخطوات، يجب أن تتمكن من تنزيل ملف ZIP الخاص بـ Eclipse من eclipse.org بنجاح باستخدام `curl`.