---
audio: false
generated: false
lang: ar
layout: post
title: توافقية إصدارات جافا مع سبرينغ بوت
translated: true
---

### فهم الخطأ

عندما تنفذ `mvn spring-boot:run` مع Spring Boot 3.4.3 وتواجه الخطأ "class file has wrong version 61.0, should be 52.0," فهذا يشير إلى مشكلة في التوافق مع إصدار Java. في Java، ملفات الفئة لديها رقم إصدار يحدد الإصدار الذي تم تجميعه به:

- **الإصدار 52.0** يتوافق مع Java 8.
- **الإصدار 61.0** يتوافق مع Java 17.

يشير الخطأ إلى أن ملفات الفئة في تطبيق Spring Boot تم تجميعها باستخدام Java 17 (الإصدار 61.0)، ولكن آلة Java الافتراضية (JVM) التي تحاول تشغيلها تتوقع ملفات الفئة متوافقة مع Java 8 (الإصدار 52.0). نظرًا لأن JVM Java 8 لا يمكن أن تنفذ ملفات الفئة التي تم تجميعها باستخدام Java 17 (لأن Java لا تكون متوافقة للخلف ولكن لا تكون متوافقة للأمام في هذا السياق)، فإنك تتعرض لهذا الخطأ.

### لماذا يحدث هذا

يحتاج Spring Boot 3.4.3 إلى **Java 17 أو أحدث** كإصدار الدعم الأدنى. وهذا يعني أن مشروعك يجب أن يتم تجميعه وتشغيله باستخدام Java 17 على الأقل. قد يحدث هذا الخلط بسبب:

1. **التجميع**: يتم تجميع مشروعك باستخدام Java 17، مما ينتج ملفات الفئة مع الإصدار 61.0. هذا عادةً ما يتم تعيينه في ملف `pom.xml` باستخدام `maven-compiler-plugin` أو الخاصية `<java.version>`.
2. **الوقت الفعلي**: عند تنفيذ `mvn spring-boot:run`، يقوم الماكينة Spring Boot Maven بتشغيل عملية Java جديدة لتشغيل التطبيق. ومع ذلك، فإن `java` التنفيذ الذي يستخدمه هو من تثبيت Java 8 (الإصدار 52.0)، والذي لا يمكن أن يعالج ملفات الفئة التي تم تجميعها باستخدام Java 17.

### خطوات لحل المشكلة

لحل هذه المشكلة، يجب عليك التأكد من أن بيئة التجميع والوقت الفعلي تستخدم Java 17. إليك كيفية حلها:

#### 1. التحقق من إصدار Java للمشروع
أولا، تأكد من أن مشروعك يتم تعيينه لاستخدام Java 17. في ملف `pom.xml`، تحقق من التالي:

```xml
<properties>
    <java.version>17</java.version>
</properties>
```

تحدد هذه الخاصية `maven-compiler-plugin` لتجميع كودك باستخدام Java 17. Spring Boot 3.4.3 يحدد هذا بشكل افتراضي، ولكن من الجيد التحقق منه. إذا كان مفقودًا أو تم تعيينه إلى إصدار آخر (مثل 8)، قم بتحديثه إلى 17.

#### 2. تثبيت Java 17
تأكد من أن Java 17 تم تثبيته على نظامك. يمكنك تحميله من:

- [Adoptium (Eclipse Temurin)](https://adoptium.net/)
- [Oracle JDK](https://www.oracle.com/java/technologies/javase/jdk17-archive-downloads.html) (إذا كنت توافق على شروط الترخيص)

لتحقق من تثبيت Java 17، افتح نافذة ترمينال وقم بإدخال:

```bash
java -version
```

إذا لم يظهر Java 17 (مثل `openjdk 17.x.x` أو مشابه)، قم بتثبيته واستمر.

#### 3. تحديث بيئتك لاستخدام Java 17
يستخدم الماكينة Spring Boot Maven التنفيذ `java` من بيئتك، عادةً ما يتم تحديده بواسطة متغير البيئة `JAVA_HOME` أو الأمر `java` في مسار النظام. إذا كان الأمر `java` الحالي يشير إلى Java 8، يجب عليك تحديثه.

##### خيار أ: تعيين JAVA_HOME و PATH
قم بتعيين متغير البيئة `JAVA_HOME` ليشير إلى تثبيت Java 17 وتأكد من أن الأمر `java` في PATH يستخدمه.

- **في Linux/Mac**:
  1. ايجاد دليل تثبيت Java 17 (مثل `/usr/lib/jvm/java-17-openjdk` أو أينما تم تثبيته).
  2. تعيين `JAVA_HOME` وتحديث `PATH` في نافذة ترمينال:
     ```bash
     export JAVA_HOME=/path/to/java-17
     export PATH=$JAVA_HOME/bin:$PATH
     ```
  3. التحقق:
     ```bash
     java -version
     ```
     يجب أن يظهر الآن Java 17.

  لجعلة هذه الدائمة، أضف خطوط `export` إلى ملف تكوين شلك (مثل `~/.bashrc`، `~/.zshrc`).

- **في Windows**:
  1. ايجاد دليل تثبيت Java 17 (مثل `C:\Program Files\Java\jdk-17`).
  2. تعيين `JAVA_HOME`:
     - افتح نافذة خواص النظام (ابحث عن "Environment Variables" في قائمة البداية).
     - في "System Variables," أضف أو تحديث `JAVA_HOME` إلى `C:\Program Files\Java\jdk-17`.
  3. تحديث `Path`:
     - في "System Variables," قم بتحرير `Path` وأضف `%JAVA_HOME%\bin` (تأكد من أن يكون في الأعلى أو قم بإزالة مسارات Java القديمة مثل Java 8).
  4. افتح نافذة Command Prompt جديدة وتحقق:
     ```cmd
     java -version
     ```
     يجب أن يظهر الآن Java 17.

##### خيار ب: استخدام إصدار Java محدد لماكينة
إذا كان لديك عدة إصدارات من Java مثبتة ولا تريد تغيير `JAVA_HOME` النظامي، يمكنك تشغيل Maven باستخدام إصدار Java محدد:

- قبل تنفيذ `mvn spring-boot:run`، قم بتعيين `JAVA_HOME` فقط لهذا الأمر:
  ```bash
  JAVA_HOME=/path/to/java-17 mvn spring-boot:run
  ```
  هذا يضمن أن الماكينة Spring Boot Maven تستخدم Java 17 دون تغيير إعدادات النظام.

#### 4. تشغيل التطبيق مرة أخرى
مع Java 17 تم تعيينه بشكل صحيح، قم بإدخال:

```bash
mvn spring-boot:run
```

سيستخدم الماكينة الآن Java 17 لتشغيل تطبيقك، مما يتوافق مع إصدار ملف الفئة المجمع (61.0)، وسيزول الخطأ.

### التحققات الإضافية
- **إصدار Java لماكينة**: قم بإدخال `mvn -version` لرؤية أي إصدار Java يستخدمه Maven. يجب أن يتوافق مع `JAVA_HOME`. إذا لم يكن كذلك، تأكد من أن PATH و `JAVA_HOME` تم إعدادهما بشكل صحيح.
- **الاعتماديات**: إذا استمر الخطأ، قد يكون أحد الاعتماديات تم تجميعه باستخدام Java 17 بينما لا يزال وقت التشغيل غير مهيأ بشكل صحيح. نظرًا لأن Spring Boot 3.4.3 يحدد Java 17، تأكد من أن وقت التشغيل هو Java 17.

### لماذا لا Java 8؟
Spring Boot 3.4.3 لا يدعم Java 8. إذا كنت بحاجة إلى استخدام Java 8، يجب عليك تنزيل إلى إصدار Spring Boot أقدم (مثل 2.x)، ولكن هذا غير موصى به إلا إذا كنت لديك قيود محددة. نظرًا لأن ملفات الفئة لديك الإصدار 61.0، فإن البقاء مع Java 17 يتوافق مع متطلبات Spring Boot 3.4.3.

### ملخص الحل النهائي
لحل "class file has wrong version 61.0, should be 52.0" عند تنفيذ `mvn spring-boot:run` مع Spring Boot 3.4.3:

1. تأكد من أن `<java.version>17</java.version>` موجود في ملف `pom.xml`.
2. قم بتثبيت Java 17 إذا لم يكن موجودًا.
3. قم بتعيين `JAVA_HOME` إلى دليل تثبيت Java 17.
4. تحديث PATH حتى يظهر `java -version` Java 17.
5. قم بإدخال `mvn spring-boot:run` مرة أخرى.

هذا يضمن أن وقت التشغيل يتوافق مع ملفات الفئة المجمع باستخدام Java 17، مما يحل مشكلة التوافق.