---
audio: false
generated: true
lang: ar
layout: post
title: توافق إصدارات جافا مع سبرينغ بوت
translated: true
type: note
---

### فهم الخطأ

عند تشغيل الأمر `mvn spring-boot:run` مع Spring Boot 3.4.3 ومواجهة الخطأ "class file has wrong version 61.0, should be 52.0"، فهذا يشير إلى مشكلة في توافق إصدار Java. في لغة Java، تحتوي ملفات الفئات (class files) على رقم إصدار يتوافق مع إصدار Java الذي تم تجميعها به:

- **الإصدار 52.0** يتوافق مع Java 8.
- **الإصدار 61.0** يتوافق مع Java 17.

يشير الخطأ إلى أن ملفات فئات تطبيق Spring Boot الخاصة بك تم تجميعها باستخدام Java 17 (الإصدار 61.0)، لكن آلة Java الافتراضية (JVM) التي تحاول تشغيلها تتوقع ملفات فئات متوافقة مع Java 8 (الإصدار 52.0). نظرًا لأن JVM الخاصة بـ Java 8 لا يمكنها تنفيذ ملفات الفئات المترجمة باستخدام Java 17 (لأن Java متوافقة مع الإصدارات الأقدم وليست متوافقة مع الإصدارات الأحدث في هذا السياق)، تحصل على هذا الخطأ.

### لماذا يحدث هذا

يتطلب Spring Boot 3.4.3 **Java 17 أو إصدارًا أحدث** كحد أدنى للإصدارات المدعومة. هذا يعني أنه يجب تجميع وتشغيل مشروعك باستخدام Java 17 على الأقل. من المحتمل أن يحدث عدم التطابق بسبب:

1. **التجميع**: تم تكوين مشروعك للتجميع باستخدام Java 17، مما ينتج ملفات فئات بالإصدار 61.0. يتم تعيين هذا عادةً في ملف `pom.xml` الخاص بك باستخدام `maven-compiler-plugin` أو الخاصية `<java.version>`.
2. **وقت التشغيل**: عند تنفيذ `mvn spring-boot:run`، تقوم إضافة Spring Boot لـ Maven بتشغيل عملية Java جديدة لتشغيل التطبيق. ومع ذلك، فإن الأمر القابل للتنفيذ `java` الذي تستخدمه هو من تثبيت Java 8 (الإصدار 52.0)، والذي لا يمكنه معالجة ملفات الفئات المترجمة بـ Java 17.

### خطوات إصلاح المشكلة

لحل هذه المشكلة، تحتاج إلى التأكد من أن بيئتي التجميع ووقت التشغيل تستخدمان Java 17. إليك كيفية الإصلاح:

#### 1. التحقق من إصدار Java في مشروعك
أولاً، تأكد من تعيين مشروعك لاستخدام Java 17. في ملف `pom.xml` الخاص بك، تحقق مما يلي:

```xml
<properties>
    <java.version>17</java.version>
</properties>
```

تخبر هذه الخاصية `maven-compiler-plugin` بتجميع الكود الخاص بك باستخدام Java 17. يقوم Spring Boot 3.4.3 بتعيين هذا افتراضيًا، ولكن من الجيد التحقق. إذا كانت مفقودة أو معينة لإصدار مختلف (مثل 8)، فقم بتحديثها إلى 17.

#### 2. تثبيت Java 17
تأكد من تثبيت Java 17 على نظامك. يمكنك تنزيله من:

- [Adoptium (Eclipse Temurin)](https://adoptium.net/)
- [Oracle JDK](https://www.oracle.com/java/technologies/javase/jdk17-archive-downloads.html) (إذا كنت تقبل شروط الترخيص)

للتحقق مما إذا كان Java 17 مثبتًا، افتح طرفية وقم بتشغيل:

```bash
java -version
```

إذا لم تظهر Java 17 (مثل `openjdk 17.x.x` أو ما شابه)، فقم بتثبيته وتابع.

#### 3. تحديث بيئتك لاستخدام Java 17
تستخدم إضافة Spring Boot لـ Maven الأمر القابل للتنفيذ `java` من بيئتك، والذي يتم تحديده عادةً بواسطة متغير البيئة `JAVA_HOME` أو أمر `java` في PATH الخاص بنظامك. إذا كان أمر `java` الحالي يشير إلى Java 8، فأنت بحاجة إلى تحديثه.

##### الخيار أ: تعيين JAVA_HOME و PATH
عيّن متغير البيئة `JAVA_HOME` الخاص بك للإشارة إلى تثبيت Java 17 وتأكد من أن أمر `java` في PATH الخاص بك يستخدمه.

- **على Linux/Mac**:
  1. ابحث عن دليل تثبيت Java 17 الخاص بك (مثل `/usr/lib/jvm/java-17-openjdk` أو أينما قمت بتثبيته).
  2. عيّن `JAVA_HOME` وقم بتحديث `PATH` في طرفيتك:
     ```bash
     export JAVA_HOME=/path/to/java-17
     export PATH=$JAVA_HOME/bin:$PATH
     ```
  3. تحقق:
     ```bash
     java -version
     ```
     يجب أن تظهر الآن Java 17.

  لجعل هذا الإعداد دائمًا، أضف سطور `export` إلى ملف تكوين shell الخاص بك (مثل `~/.bashrc`، `~/.zshrc`).

- **على Windows**:
  1. ابحث عن دليل تثبيت Java 17 (مثل `C:\Program Files\Java\jdk-17`).
  2. عيّن `JAVA_HOME`:
     - افتح نافذة خصائص النظام (ابحث عن "Environment Variables" في قائمة ابدأ).
     - ضمن "System Variables"، أضف أو حدّث `JAVA_HOME` إلى `C:\Program Files\Java\jdk-17`.
  3. حدّث `Path`:
     - في "System Variables"، حرر `Path` وأضف `%JAVA_HOME%\bin` (تأكد من أنها في الأعلى أو قم بإزالة مسارات Java الأقدم مثل Java 8).
  4. افتح موجه أوامر جديد وتحقق:
     ```cmd
     java -version
     ```
     يجب أن تظهر Java 17.

##### الخيار ب: استخدام إصدار محدد من Java لـ Maven
إذا كان لديك إصدارات متعددة من Java مثبتة ولا تريد تغيير `JAVA_HOME` على مستوى النظام، يمكنك تشغيل Maven بإصدار محدد من Java:

- قبل تشغيل `mvn spring-boot:run`، عيّن `JAVA_HOME` لهذا الأمر فقط:
  ```bash
  JAVA_HOME=/path/to/java-17 mvn spring-boot:run
  ```
  يضمن هذا أن تستخدم إضافة Spring Boot لـ Maven Java 17 دون تغيير إعدادات النظام.

#### 4. تشغيل التطبيق مرة أخرى
بعد تعيين Java 17 بشكل صحيح، قم بتشغيل:

```bash
mvn spring-boot:run
```

ستستخدم الإضافة الآن Java 17 لتنفيذ تطبيقك، متطابقة مع إصدار ملف الفئة المترجم (61.0)، ويجب أن يختفي الخطأ.

### فحوصات إضافية
- **إصدار Java الذي يستخدمه Maven**: قم بتشغيل `mvn -version` لمعرفة إصدار Java الذي يستخدمه Maven. يجب أن يتطابق مع `JAVA_HOME` الخاص بك. إذا لم يكن كذلك، فتأكد من تكوين PATH و `JAVA_HOME` بشكل صحيح.
- **التبعيات**: إذا استمر الخطأ، فقد يتم تجميع أحد التبعيات باستخدام Java 17 بينما لا يزال وقت التشغيل الخاص بك مضبوطًا بشكل خاطئ. نظرًا لأن Spring Boot 3.4.3 يفرض استخدام Java 17، فإن ضبط وقت التشغيل على Java 17 يجب أن يحل هذه المشكلة.

### لماذا لا نستخدم Java 8؟
لا يدعم Spring Boot 3.4.3 Java 8. إذا كنت بحاجة إلى استخدام Java 8، فسيتعين عليك الرجوع إلى إصدار أقدم من Spring Boot (مثل 2.x)، ولكن هذا غير موصى به إلا إذا كانت لديك قيود محددة. نظرًا لأن ملفات الفئات الخاصة بك هي من الإصدار 61.0، فإن البقاء مع Java 17 يتوافق مع متطلبات Spring Boot 3.4.3.

### ملخص الحل النهائي
لإصلاح خطأ "class file has wrong version 61.0, should be 52.0" عند تشغيل `mvn spring-boot:run` مع Spring Boot 3.4.3:

1. تأكد من وجود `<java.version>17</java.version>` في ملف `pom.xml` الخاص بك.
2. قم بتثبيت Java 17 إذا لم يكن موجودًا بالفعل.
3. عيّن `JAVA_HOME` على دليل تثبيت Java 17 الخاص بك.
4. حدّث PATH الخاص بك بحيث يظهر `java -version` Java 17.
5. قم بتشغيل `mvn spring-boot:run` مرة أخرى.

يضمن هذا تطابق وقت التشغيل مع ملفات فئات Java 17 المترجمة الخاصة بك، مما يحل مشكلة التوافق.