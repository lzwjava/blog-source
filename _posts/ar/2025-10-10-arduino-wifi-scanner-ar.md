---
audio: false
generated: true
image: false
lang: ar
layout: post
model: x-ai/grok-4-fast
title: حمل طائرة مسيّرة للمسح الضوئي باستخدام الواي فاي من أردوينو
translated: true
type: note
---

### نظرة عامة على الجدوى
ربط Arduino مباشرةً بطائرة DJI Mini 3 للتحكم في طيرانها (مثل دوريات المراقبة الذاتية للحي) مع مسح إشارات الواي فاي في نفس الوقت ليس أمرًا مباشرًا أو مدعومًا بشكل أصلي. نظام DJI احتكاري، ووحدة تحكم الطيران في Mini 3 غير معرّضة للتكامل السهل مع المتحكمات الدقيقة مثل Arduino. ومع ذلك، فإن الإعداد الهجين ممكن باستخدام حلول بديلة: استخدم تطبيقات الطرف الثالث للطيران الذاتي الأساسي، وثبت ماسح واي فاي منفصل قائم على Arduino كحمولة. سأقوم بشرح ذلك خطوة بخطوة، بما في ذلك التحديات التقنية، والنهج العملي، ومخططات التعليمات البرمجية.

### التحديات الرئيسية
- **التحكم في الطيران**: تدعم DJI Mini 3 Mobile SDK للتطبيقات المخصصة (Android/iOS) التي تمكن من مهام Waypoint أو التحكم بالعصا الافتراضية للطيران شبه الذاتي. لكن هذا الـ SDK لا يعمل على الأجهزة المدمجة مثل Arduino—فهو مخصص للهواتف المحمولة فقط. لا يوجد Onboard SDK لـ Mini 3 (هذا مخصص للطائرات بدون طيار Enterprise مثل سلسلة Matrice). يوجد اختراق لوحدة تحكم الطيران (على سبيل المثال، عبر الهندسة العكسية لبروتوكول OcuSync) لإلغاء قيود مثل حدود الارتفاع، ولكن لا توجد تكاملات موثقة لـ Arduino للاستقلالية الكاملة في الطيران.
- **ربط الأجهزة**: لا يمكنك توصيل Arduino مباشرة بالمكونات الداخلية لـ Mini 3 دون المخاطرة بالتلف أو إبطال الضمان. تزن الطائرة أقل من 250 جرامًا للوائح، لذا يجب أن يظل وزن الحمولة المضافة (Arduino + وحدة الواي فاي) خفيفًا (~10-20 جرامًا كحد أقصى لتجنب المشاكل).
- **مسح الواي فاي**: هذا هو الجزء السهل—Arduino يتفوق هنا مع الإضافات مثل ESP32.
- **الجوانب القانونية/الأخلاقية**: مسح شبكات الواي فاي (Wardriving) via drone قد ينتهك قوانين الخصوصية (مثل FCC في الولايات المتحدة) أو لوائح الطائرات بدون طيار (مشاهدة الطائرة بالعين المجردة مطلوبة). التزم بممتلكاتك أو احصل على الأذونات.

### النهج العملي: الإعداد الهجين
1. **الطيران الذاتي عبر التطبيق**: استخدم تطبيقات مثل Litchi أو Dronelink أو DroneDeploy (عبر Mobile SDK) للرحلات القائمة على Waypoint حول الحي. خطط مسبقًا لمسار في التطبيق (مثل نمط الشبكة على ارتفاع 50 مترًا). يتولى هذا الإقلاع والملاحة والعودة إلى نقطة الانطلاق—لا حاجة لـ Arduino للطيران.
2. **تثبيت Arduino كحمولة**: ثبت Arduino خفيف الوزن (مثل لوحة Nano أو ESP32) أسفل الطائرة باستخدام أربطة بلاستيكية أو حامل مطبوع ثلاثي الأبعاد. قم بتشغيله من منفذ USB الخاص بالطائرة أو بطارية LiPo صغيرة.
3. **مسح الواي فاي على Arduino**: برمج ESP32 (قابل للبرمجة عبر Arduino IDE) لمسح SSIDs وRSSI (قوة الإشارة) والقنوات والتشفير وتقديرات معدل البت. سجل البيانات على بطاقة SD أو انقلها عبر البلوتوث/الواي فاي إلى هاتفك/محطة الأرضية.
4. **المزامنة**: قم بتشغيل عمليات المسح بشكل دوري (مثل كل 10 ثوانٍ) أثناء الطيران. استخدم وحدة GPS على Arduino (مثل NEO-6M) لإضافة بيانات الموقع الجغرافي للمسوحات، أو مزامنة الطوابع الزمنية مع بيانيات الطائرة إذا كانت متاحة عبر تطبيق SDK.
5. **التكلفة/الوزن الإجمالي**: ~20-30 دولارًا للأجزاء؛ يبقي الوزن الإجمالي أقل من 249 جرامًا.

بهذه الطريقة، "يجمع" Arduino البيانات بشكل مستقل بينما تطير الطائرة ذاتيًا عبر البرنامج.

### نموذج كود Arduino لماسح الواي فاي
استخدم لوحة ESP32 (متوافقة مع Arduino ولها واي فاي مدمج). قم بتوصيل وحدة بطاقة SD للتسجيل. قم بتثبيت المكتبات: `WiFi`، `SD`، `TinyGPS++` (لـ GPS إذا تمت إضافته).

```cpp
#include <WiFi.h>
#include <SD.h>
#include <TinyGPS++.h>  // اختياري لإضافة بيانات الموقع الجغرافي من GPS

// دبوس اختيار الشريحة لبطاقة SD
const int chipSelect = 5;

// إعدادات GPS (إذا كنت تستخدم Serial1 لوحدة GPS)
TinyGPSPlus gps;
HardwareSerial gpsSerial(1);

void setup() {
  Serial.begin(115200);
  gpsSerial.begin(9600, SERIAL_8N1, 16, 17);  // RX=16, TX=17 لـ GPS
  
  // تهيئة بطاقة SD
  if (!SD.begin(chipSelect)) {
    Serial.println("فشل تهيئة بطاقة SD!");
    return;
  }
  Serial.println("ماسح الواي فاي جاهز. بدء المسوحات...");
}

void loop() {
  // مسح شبكات الواي فاي
  int n = WiFi.scanNetworks();
  if (n == 0) {
    Serial.println("لم يتم العثور على شبكات");
  } else {
    File dataFile = SD.open("/wifi_log.txt", FILE_APPEND);
    if (dataFile) {
      dataFile.print("مسح عند: " + String(millis()) + "مللي ثانية | ");
      
      // اختياري: إضافة بيانات GPS إذا كانت متاحة
      if (gpsSerial.available() > 0) {
        if (gps.encode(gpsSerial.read())) {
          if (gps.location.isValid()) {
            dataFile.print("خط العرض: " + String(gps.location.lat(), 6) + ", خط الطول: " + String(gps.location.lng(), 6) + " | ");
          }
        }
      }
      
      for (int i = 0; i < n; ++i) {
        dataFile.print("SSID: " + WiFi.SSID(i) + " | RSSI: " + String(WiFi.RSSI(i)) + "dBm | القناة: " + String(WiFi.channel(i)) + " | التشفير: " + String(WiFi.encryptionType(i)) + " | ");
        // تقدير معدل البت: حساب تقريبي من RSSI (غير دقيق، لكن تقريبي)
        int bitrate = map(WiFi.RSSI(i), -100, -30, 1, 100);  // مقياس تقريبي بوحدة Mbps
        dataFile.print("معدل البت التقريبي: " + String(bitrate) + "Mbps | ");
      }
      dataFile.println();
      dataFile.close();
      Serial.println("تم تسجيل البيانات على بطاقة SD");
    }
  }
  
  WiFi.scanDelete();  // مسح النتائج
  delay(10000);  // امسح كل 10 ثوانٍ (اضبط وفقًا لسرعة الطيران)
}
```

- **كيف يعمل**: يمسح جميع الشبكات المرئية، ويسجل SSID وقوة الإشارة (RSSI) والقناة ونوع التشفير وتقدير تقريبي لمعدل البت. أضف GPS لربط البيانات بالموقع.
- **التجميع**: يلحق البيانات في ملف `/wifi_log.txt` على بطاقة SD. بعد الرحلة، اقرأه على جهاز الكمبيوتر الخاص بك لرسم الخرائط (مثلًا باستخدام Python مع Folium).
- **التحسينات**: أضف بلوتوث (HC-05) لبث البيانات مباشرة إلى هاتفك أثناء الطيران.

### القيود والبدائل
- **لا توجد استقلالية كاملة من Arduino**: إذا أصررت على الطيران الموجّه بـ Arduino، فقم ببناء طائرة بدون طيار مخصصة (مثلًا باستخدام برنامج MultiWii على Arduino) بدلاً من اختراق Mini 3—أكثر أمانًا وأرخص للتعلم.
- **المدى/السلامة**: نطاق Mini 3 البالغ 10 كم رائع، لكن الرياح/العوائق تحد من رحلات الحي. اختبر في المناطق المفتوحة.
- **إذا كنت ترغب في الترقية**: تمتلك Mini 3 Pro دعمًا أفضل لـ SDK للمهام المتقدمة.

هذا الإعداد يوفر لك 80% من الهدف دون الحاجة إلى اختراقات عميقة. إذا شاركت المزيد من التفاصيل (مثل نموذج Arduino المحدد)، يمكنني تحسين الكود.

### المراجع
- [DJI Mobile SDK Documentation](https://developer.dji.com/mobile-sdk)
- [DJI Mini 3 SDK Support Announcement](https://dronedj.com/2023/04/13/dji-sdk-mini-3-pro/)
- [ESP32 WiFi Scanner Tutorial](https://randomnerdtutorials.com/esp32-scanning-wifi-networks/)
- [Drone-Hacks for DJI Modifications](https://www.youtube.com/watch?v=WiAWBjaUfeg)
- [Arduino Drone Projects Overview](https://www.instructables.com/How-to-Control-Any-Drone-From-Your-Arduino-Microco/)