---
audio: false
generated: true
image: false
lang: ar
layout: post
title: ترتيب دمج Git Rebase موضّح
translated: true
type: note
---

عند تشغيل `git rebase -i` (إعادة قاعدة تفاعلية) لدمج الحفظات، يتبع Git ترتيبًا ومنطقًا محددين جدًا:

---

### 1. الترتيب الافتراضي

عند بدء إعادة قاعدة تفاعلية (مثل `git rebase -i HEAD~5`)، يفتح Git المحرر الخاص بك مع **إدراج الحفظات من الأقدم إلى الأحدث** (الأعلى = الأقدم، الأسفل = الأحدث).
الترتيب مهم: هذا هو التسلسل الذي سيحاول Git إعادة تشغيله على القاعدة الجديدة.

---

### 2. Pick مقابل Squash

* **pick** → احتفظ بالحفظة كما هي.
* **squash (أو s)** → ادمج هذه الحفظة مع **الحفظة السابقة المعلمة كـ `pick`**.
* **fixup (أو f)** → نفس دمج الحفظة، لكنه يتجاهل رسالة الحفظة (يحتفظ فقط برسالة الحفظة الأولى).

لذا إذا كتبت:

```
pick  a1b2c3  Initial feature
squash d4e5f6  Minor fix
squash g7h8i9  Small cleanup
pick  j1k2l3  Another feature
```

سيدمج Git `d4e5f6` و `g7h8i9` في `a1b2c3`، لينتج حفظة واحدة.

---

### 3. إعادة ترتيب الحفظات

يمكنك **إعادة ترتيب الحفظات مباشرة في محرر إعادة القاعدة** عن طريق نقل الأسطر لأعلى أو لأسفل.
على سبيل المثال:

```
pick  a1b2c3  Initial feature
pick  j1k2l3  Another feature
squash d4e5f6  Minor fix
squash g7h8i9  Small cleanup
```

هنا، سيطبق Git أولاً `a1b2c3`، ثم `j1k2l3`.
ستندمج الآن حفظات `squash` (`d4e5f6` و `g7h8i9`) في **`j1k2l3`**، لأن `squash` يدمج دائمًا في أقرب `pick` سابقة.

---

### 4. تحرير الرسائل

بعد الدمج، يتوقف Git ويسمح لك **بتحرير رسالة الحفظة** للحفظة المدمجة. يمكنك:

* الاحتفاظ بجميع الرسائل.
* دمجها يدويًا.
* الاحتفاظ بأول رسالة فقط.

---

### 5. الأخطاء الشائعة

* إذا وضعت `squash` كأول حفظة (لا توجد `pick` قبلها)، سيقوم Git بإرجاع خطأ—فهو يحتاج إلى حفظة أساسية ليدمج فيها.
* إذا تعارضت الحفظات بعد إعادة الترتيب، فستحتاج إلى حل التعارضات يدويًا أثناء إعادة القاعدة.
* يمكن أن يغير إعادة الترتيب السجل بشكل كبير؛ افعل ذلك فقط على الفروع التي لم تدفعها/تشاركها بعد، إلا إذا كنت متأكدًا من أنك تريد إعادة كتابة السجل.

---

✅ باختصار:

* يتم إدراج الحفظات من **الأقدم → إلى الأحدث**.
* `pick` تحتفظ بالحفظة، `squash` يدمج في **أقرب `pick` سابقة**.
* يمكنك إعادة ترتيب الحفظات يدويًا في المحرر؛ `squash` يربط دائمًا الحفظات اللاحقة بالحفظة المختارة السابقة.

---

هل تريد مني توضيح هذا بمثال **قبل/بعد لسجل الحفظات** (عرض `git log --oneline` قبل وبعد الدمج)؟ هذا عادة ما يجعل الترتيب أكثر وضوحًا.