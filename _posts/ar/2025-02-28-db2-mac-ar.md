---
audio: false
lang: ar
layout: post
title: استخدام IBM Db2 على macOS
translated: true
---

استخدام IBM Db2 على ماك يتطلب بعض الإعدادات، حيث لا يوفر IBM تثبيت خادم Db2 الأصلي لماك أو إس. ومع ذلك، هناك طرق عملية لتشغيل Db2 وتفاعل معه على ماك، اعتمادًا على احتياجاتك - سواء كنت تريد تشغيل نسخة محلية من Db2 للتنمية/الاختبار أو الاتصال بقاعدة بيانات Db2 عن بُعد. أدناه، سأوضّح الأساليب الأكثر شيوعًا والأكثر فعالية اعتبارًا من 28 فبراير 2025.

---

### خيار 1: تشغيل Db2 محليًا على macOS باستخدام Docker
لأن Db2 لا يدعمه بشكل أصلي كخادم على macOS، فإن أسهل طريقة لتشغيل نسخة محلية من Db2 هي باستخدام Docker. يعمل هذا على ماكات Intel وApple Silicon (M1/M2/M3)، واستخدام التعميم حيث يكون ذلك ضروريًا.

#### الخطوات:
1. **تثبيت Docker:**
   - قم بتنزيل وتثبيت Docker Desktop للماك من [docker.com](https://www.docker.com/products/docker-desktop/). اتبع تعليمات التثبيت لماكك (Intel أو Apple Silicon).

2. **جلب صورة Db2 Community Edition:**
   - افتح نافذة الترمينال واكتب:
     ```
     docker pull icr.io/db2_community/db2
     ```
   - هذا يجلب صورة الحاوية الرسمية Db2 Community Edition من سجل الحاويات الخاص بIBM.

3. **تشغيل حاوية Db2:**
   - ابدأ نسخة Db2 باستخدام الأمر التالي (قم بتخصيصه حسب الحاجة):
     ```
     docker run -itd --name db2server --privileged=true -p 50000:50000 -e LICENSE=accept -e DB2INST1_PASSWORD=your_password -e DBNAME=testdb icr.io/db2_community/db2
     ```
     - شرح:
       - `-itd`: يعمل الحاوية في وضع التفاعل، والتفريغ.
       - `--name db2server`: يحدد اسم الحاوية.
       - `--privileged=true`: ضروري لتعمل Db2 بشكل صحيح.
       - `-p 50000:50000`: يربط المينح 50000 (الافتراضي Db2) إلى ماكك.
       - `-e LICENSE=accept`: يقبل اتفاقية الترخيص.
       - `-e DB2INST1_PASSWORD=your_password`: يحدد كلمة المرور للمستخدم `db2inst1` (قم بإستبدال `your_password`).
       - `-e DBNAME=testdb`: يخلق قاعدة بيانات باسم `testdb`.

4. **التحقق من تشغيل الحاوية:**
   - تحقق باستخدام:
     ```
     docker ps
     ```
   - يجب أن ترى `db2server` مدرجة.

5. **الوصول إلى نسخة Db2:**
   - ادخل قشرة الحاوية:
     ```
     docker exec -ti db2server bash -c "su - db2inst1"
     ```
   - بعد الدخول، يمكنك استخدام أوامر Db2 مثل:
     ```
     db2 connect to testdb
     db2 "SELECT * FROM SYSIBM.SYSDUMMY1"
     ```

6. **ملاحظات لماكات Apple Silicon:**
   - تم بناء صورة Db2 لأجهزة x86_64 (Intel)، ولكن Docker Desktop على Apple Silicon يستخدم Rosetta 2 لتعميل x86_64، لذا يجب أن يعمل بشكل سلس. إذا واجهت مشاكل في الأداء، فاقترح استخدام أدوات تعميل بديلة مثل Lima (انظر خيار 3).

---

### خيار 2: الاتصال بقاعدة بيانات Db2 عن بُعد باستخدام IBM Data Server Driver
إذا لم تحتاج إلى خادم Db2 محلي، وكنت فقط تريد الاتصال بقاعدة بيانات Db2 موجودة عن بُعد (على سبيل المثال، على خادم أو في السحاب)، يمكنك تثبيت IBM Data Server Driver for ODBC and CLI على ماكك.

#### الخطوات:
1. **تنزيل السائق:**
   - لماكات Intel: استخدم السائق Db2 11.5 (x86_64).
   - لماكات Apple Silicon: استخدم السائق Db2 12.1 (ARM64)، صدر في نوفمبر 2024.
   - احصل عليه من IBM Fix Central: [IBM Support Fix Central](https://www.ibm.com/support/fixcentral/). ابحث عن “IBM Data Server Driver for ODBC and CLI” واختر الإصدار المناسب لعملك:
     - Intel: `macos64_odbc_cli.tar.gz` (11.5).
     - Apple Silicon: ابحث عن حزمة السائق 12.1 ARM64 (على سبيل المثال، `clidriver` لماك أو إس ARM).

2. **تثبيت السائق:**
   - استخرج الملف الذي تم تنزيله:
     ```
     tar -xzf macos64_odbc_cli.tar.gz
     ```
   - قم بنقله إلى مجلد مثل `/usr/local/db2_clidriver`:
     ```
     mv clidriver /usr/local/db2_clidriver
     ```

3. **إعداد unixODBC:**
   - قم بتثبيت unixODBC إذا لم يكن موجودًا (استخدم Homebrew):
     ```
     brew install unixodbc
     ```
   - قم بتحرير `/usr/local/etc/odbcinst.ini` لتسجيل السائق:
     ```
     [IBM DB2 ODBC DRIVER]
     Description = IBM DB2 ODBC Driver
     Driver = /usr/local/db2_clidriver/lib/libdb2.dylib
     ```

4. **إعداد الاتصال:**
   - قم بإنشاء أو تحرير `/usr/local/etc/odbc.ini` (أو `~/.odbc.ini` للاعدادات الخاصة بالمستخدم):
     ```
     [MYDB2]
     Driver = IBM DB2 ODBC DRIVER
     Database = your_db_name
     Hostname = your_db_host
     Port = 50000
     Protocol = TCPIP
     UID = your_username
     PWD = your_password
     ```
   - قم بإستبدال `your_db_name`, `your_db_host`, `your_username`, و`your_password` ببيانات قاعدة البيانات عن بُعد الخاصة بك.

5. **اختبار الاتصال:**
   - استخدم `isql` للتحقق:
     ```
     isql -v MYDB2
     ```
   - إذا كان النجاح، فستتصل بقاعدة البيانات Db2 عن بُعد.

6. **استخدام مع التطبيقات:**
   - يمكنك الآن استخدام هذا الإعداد ODBC مع أدوات مثل Python (`pyodbc`), Java (JDBC عبر جسر ODBC)، أو أي تطبيق متوافق مع ODBC.

---

### خيار 3: إعداد متقدم مع Lima (تحسين Apple Silicon)
لمستخدمي Apple Silicon الذين يبحثون عن أداء أفضل من تعميل Docker، يوفر Lima VM Linux خفيف الوزن مع دعم "Fast Mode" Rosetta 2. هذا أكثر تعقيدًا، ولكن يوفر تجربة تشبه الأصلية.

#### الخطوات:
1. **تثبيت Lima وPodman:**
   - قم بتثبيت Homebrew إذا لم يكن موجودًا:
     ```
     /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
     ```
   - قم بتثبيت Lima وPodman:
     ```
     brew install lima podman
     ```

2. **بدء VM Lima:**
   - ابدأ VM مع دعم Rosetta:
     ```
     limactl start --name=db2-vm --rosetta
     ```

3. **تشغيل Db2 في Podman:**
   - داخل VM، استخدم Podman لتشغيل حاوية Db2 (شبه الخطوات Docker أعلاه):
     ```
     podman run -itd --name db2server --privileged=true -p 50000:50000 -e LICENSE=accept -e DB2INST1_PASSWORD=your_password -e DBNAME=testdb icr.io/db2_community/db2
     ```

4. **الوصول من macOS:**
   - اتصل بقاعدة البيانات Db2 من ماكك باستخدام عنوان IP من VM Lima (على سبيل المثال، `192.168.5.15:50000`) باستخدام أداة العميل أو السائق ODBC.

---

### نصائح إضافية
- **تخصيصات الترخيص:** Db2 Community Edition مجانية للتنمية والاختبار. للاستخدام الإنتاجي أو الاتصال Db2 على z/OS أو iSeries، قد تحتاج إلى ترخيص Db2 Connect.
- **الأداء:** على Apple Silicon، يعمل التعميل ولكن قد يكون أبطأ. الدعم الأصلي ARM64 (السائق Db2 12.1) محدود بالعميل، وليس الخادم، حتى الآن.
- **اختبارات التلقائية:** إذا كنت تستخدم unixODBC لاختبارات التلقائية، تأكد من أن نصوص الاختبارات الخاصة بك تشير إلى DSN الصحيح من `odbc.ini`.

---

### أي خيار يجب أن اختره؟
- **التنمية/الاختبار المحلي:** استخدم خيار 1 (Docker) للسهولة.
- **وصول قاعدة البيانات عن بُعد:** استخدم خيار 2 (ODBC Driver) للاتصال بقواعد البيانات Db2 الموجودة.
- **أداء Apple Silicon:** استخدم خيار 3 (Lima) إذا كنت تحتاج إلى إعداد محلي عالي الأداء.

أعلمني إذا كنت تحتاج إلى مساعدة في أي خطوة محددة!