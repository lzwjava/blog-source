---
audio: false
generated: false
lang: ar
layout: post
title: تحميل ملفات HTTP
translated: true
---

### النقاط الرئيسية
- تشير الأبحاث إلى أن تحميل الملفات عبر HTTP يستخدم عادةً طريقة POST مع multipart/form-data في استمارات الويب، مما يسمح بتحميل عدة ملفات ومعلومات إضافية.
- يبدو أن طريقة PUT يمكن أيضًا تحميل الملفات، بإرسال المحتوى الخام مباشرة، وغالبًا ما تستخدم في APIs RESTful من أجل البساطة.
- تشير الأدلة إلى أن كلا من هذه الطرق صالحة، حيث أن تكوين الخادم وحالة الاستخدام يحددان الاختيار.

### نظرة عامة
تحميل الملفات عبر HTTP هو مهمة شائعة لتقاسم البيانات عبر الإنترنت، مثل إرسال الصور أو المستندات إلى موقع ويب. يمكنك القيام بذلك بطريقتين رئيسيتين: باستخدام طريقة POST مع تنسيق خاص يسمى multipart/form-data، وهو ممتاز للاستمارات الويب، أو باستخدام طريقة PUT، التي هي أبسط وأكثر استخدامًا في APIs الحديثة. لكل طريقة إعداداتها الخاصة، واختيار الطريقة الصحيحة يعتمد على كيفية إعداد الخادم وما تحاول تحقيقه.

### كيفية العمل
- **POST مع Multipart/Form-Data**: هذا مثل تعبئة ملفك وأي معلومات إضافية (مثل الوصف) في أجزاء منفصلة، مرتبة بسلسلة حدود فريدة. وهو شائع في استمارات الويب حيث تحدد الملفات للتحميل.
- **PUT Method**: هذا يرسل محتوى الملف مباشرة إلى عنوان URL محدد، مثل تحديث ملف على الخادم. هو أبسط ولكن يتطلب من الخادم دعمه.

### تفاصيل غير متوقعة
قد لا تتوقع أن طريقة PUT، التي تستخدم عادةً لتحديث البيانات، يمكن أيضًا معالجة تحميل الملفات، خاصة في APIs، مما يجعلها خيارًا مرنًا خارج الاستمارات التقليدية.

---

### ملاحظة الاستطلاع: شرح مفصل لتحميل الملفات عبر HTTP

تحميل الملفات عبر HTTP هو عملية أساسية في تطوير الويب، مما يسمح للمستخدمين بتقاسم البيانات مثل الصور، المستندات أو الوسائط مع الخوادم. يمكن تحقيق هذه العملية من خلال طريقتين رئيسيتين: طريقة POST مع تشفير multipart/form-data، التي تستخدم بشكل شائع في استمارات الويب، وPUT، التي تستخدم في APIs RESTful لتحويل محتوى الملفات مباشرة. في ما يلي، نكشف عن هذه الطرق في التفاصيل، بما في ذلك بنيتها، تنفيذها، واعتباراتها، لتقديم فهم شامل لكل من الجمهور الفني وغير الفني.

#### Multipart/Form-Data: المعيار لاستمارات الويب

نوع المحتوى multipart/form-data هو الاختيار الافتراضي لتحميل الملفات عبر HTTP، خاصة عند التعامل مع استمارات HTML. تسمح هذه الطريقة بتحويل عدة ملفات ومعلومات استمارة إضافية، مثل حقول النص، في طلب واحد. يتضمن هذا العملية بناء جسم الطلب مقسم إلى أجزاء، كل منها مفصول بسلسلة حدود فريدة، مما يضمن أن الخادم يمكن تمييز بين أجزاء البيانات المختلفة.

##### البنية والمثال
يبدأ الطلب بإعداد رأس `Content-Type` إلى `multipart/form-data; boundary=boundary_string`، حيث `boundary_string` هو سلسلة مختارة عشوائيًا لتجنب التعارض مع محتوى الملف. يحتوي كل جزء من الجسم على رؤوس مثل `Content-Disposition`، الذي يحدد اسم حقل الاستمارة، واسم الملف، و `Content-Type`، الذي يشير إلى نوع البيانات (مثل `text/plain` للملفات النصية، `image/jpeg` للصور JPEG). ينتهي الجزء بالسلسلة الحدودية، ويحدد الجزء النهائي بالحدودية متبوعة بعلامةين.

فكر في تحميل ملف باسم `example.txt` مع المحتوى "Hello, world!" إلى [هذا النهايات](https://example.com/upload)، مع اسم حقل الاستمارة "file". سيبدو الطلب HTTP كما يلي:

```
POST /upload HTTP/1.1
Host: example.com
Content-Type: multipart/form-data; boundary=abc123
Content-Length: 101

--abc123
Content-Disposition: form-data; name="file"; filename="example.txt"
Content-Type: text/plain

Hello, world!
--abc123--
```

في هذا المثال، `Content-Length` محسوب على 101 بايت، مع حساب الحدود، والأراس، ومحتوى الملف، مع استخدام النهاية عادةً CRLF (`\r\n`) لتكوين HTTP الصحيح.

##### معالجة عدة ملفات وحقول الاستمارة
تتميز هذه الطريقة في السيناريوهات التي تتطلب بيانات إضافية. على سبيل المثال، إذا كنت تحميل ملف مع وصف، يمكن أن يحتوي جسم الطلب على أجزاء متعددة:

```
--abc123
Content-Disposition: form-data; name="description"

This is my file
--abc123
Content-Disposition: form-data; name="file"; filename="example.txt"
Content-Type: text/plain

Hello, world!
--abc123--
```

يحتفظ كل جزء من المحتوى، بما في ذلك أي تغييرات في السطور، ويضمن الحدود الفصل. هذه المرونة تجعلها مثالية للاستمارات الويب مع عناصر `<input type="file">`.

#### PUT Method: تحميل الملفات المباشر لAPIs RESTful

تقدم طريقة PUT بديلًا أبسط، خاصة في سياق APIs RESTful، حيث الهدف هو تحديث أو إنشاء موارد مع محتوى الملف. على عكس multipart/form-data، PUT يرسل محتوى الملف الخام مباشرة في جسم الطلب، مما يقلل من التكاليف ويبسط معالجة الخادم.

##### البنية والمثال
لتحميل `example.txt` إلى [هذا URL](https://example.com/files/123)، سيكون الطلب:

```
PUT /files/123 HTTP/1.1
Host: example.com
Content-Type: text/plain
Content-Length: 13

Hello, world!
```

في هذا المثال، `Content-Type` يحدد نوع MIME للملف (مثل `text/plain`), و `Content-Length` هو حجم الملف في البايتات. هذه الطريقة فعالة للملفات الكبيرة، حيث تجنب التكاليف التشفيرية multipart/form-data، ولكن تتطلب من الخادم أن يكون مهيأ لتحميل الملفات باستخدام PUT.

##### حالات الاستخدام واعتباراتها
PUT يستخدم غالبًا في السيناريوهات مثل تحديث صور المستخدم أو تحميل ملفات إلى مورد معين في API. ومع ذلك، لا يدعم جميع الخوادم PUT لتحميل الملفات بشكل افتراضي، خاصة في بيئات الاستضافة المشتركة، حيث POST مع multipart/form-data أكثر قبولًا. قد يتطلب إعداد الخادم، مثل تمكين PUT في Apache، كما هو موضح في [دليل PHP حول دعم PUT](https://www.php.net/manual/en/features.file-upload.put-method.php).

#### تحليل مقارنة

لإظهار الاختلافات، انظر إلى الجدول التالي المقارنة بين الطريقتين:

| الجوانب                  | POST مع Multipart/Form-Data          | PUT مع المحتوى الخام                  |
|-------------------------|----------------------------------------|---------------------------------------|
| **حالة الاستخدام**            | استمارات الويب، ملفات متعددة، بيانات إضافية    | APIs RESTful، تحديثات ملفات واحدة     |
| **التعقيد**          | أعلى (معالجة الحدود، أجزاء متعددة) | أدنى (محتوى مباشر)               |
| **الفعالية**          | معتدلة (تكاليف التشفير)           | أعلى (بدون تشفير)                 |
| **دعم الخادم**      | مدعوم على نطاق واسع                      | قد يتطلب إعدادًا                    |
| **أراس المثال**     | `Content-Type: multipart/form-data; boundary=abc123` | `Content-Type: text/plain`           |
| **جسم الطلب**        | أجزاء مفصولة بالحدود          | محتوى الملف الخام                     |

يوضح هذا الجدول أن multipart/form-data أكثر مرونة للتواصل الويب، بينما PUT أكثر فعالية لتحميل الملفات في APIs، اعتمادًا على قدرات الخادم.

#### تفاصيل التنفيذ والمشاكل

##### اختيار الحدود ومحتوى الملف
في multipart/form-data، اختيار سلسلة الحدود هو أمر حاسم لتجنب التعارض مع محتوى الملف. إذا ظهرت الحدود في الملف، يمكن أن تسبب أخطاء في التحليل. تتعامل المكتبات الحديثة مع ذلك من خلال توليد حدود عشوائية، ولكن التنفيذ اليدوي يتطلب حذرًا. بالنسبة للملفات الثنائية، يتم نقل المحتوى كما هو، مما يضمن الحفاظ على جميع البايتات، وهو ضروري للحفاظ على سلامة الملف.

##### حجم الملف والاداء
يجب أن تتعامل كلا من هذه الطرق مع حدود حجم الملف التي يفرضها الخوادم. يمكن أن تصبح طلبات multipart/form-data كبيرة مع ملفات متعددة، مما قد يتجاوز حدود الخادم أو يسبب مشاكل في الذاكرة. PUT، رغم بساطتها، يتطلب أيضًا تدفق للملفات الكبيرة لتجنب تحميل المحتوى بالكامل في الذاكرة، كما هو موضح في [وثائق HTTPie حول تحميل الملفات](https://httpie.io/docs/cli/file-upload-forms).

##### معالجة الأخطاء والأمن
بعد إرسال الطلب، يجب على العملاء التحقق من رمز حالة HTTP. يشير النجاح عادةً إلى 200 (OK) أو 201 (Created)، بينما تشير الأخطاء مثل 400 (Bad Request) أو 403 (Forbidden) إلى مشاكل. الأمن هو أمر حاسم، حيث يمكن استغلال تحميل الملفات للهجمات مثل تحميل ملفات تنفيذية ضارة. يجب على الخوادم التحقق من أنواع الملفات، فحص الفيروسات، وقيود دليل التحميل، كما هو موضح في [محادثات Stack Overflow حول أمن تحميل الملفات عبر HTTP](https://stackoverflow.com/questions/8659808/how-does-http-file-upload-work).

#### أمثلة عملية عبر اللغات

توفر لغات البرمجة المختلفة مكتبات لتسهيل تحميل الملفات عبر HTTP. على سبيل المثال، يمكن للمكتبة `requests` في Python معالجة multipart/form-data كما يلي:

```python
import requests
files = {'file': open('example.txt', 'rb')}
response = requests.post('https://example.com/upload', files=files)
```

لPUT، يمكن استخدام curl كما هو موضح في [Stack Overflow حول اختبار PUT تحميل الملفات](https://stackoverflow.com/questions/5143915/test-file-upload-using-http-put-method):

```bash
curl -X PUT "https://example.com/files/123" --upload-file example.txt
```

توضح هذه الأمثلة التعميم، ولكن فهم البنية الأساسية HTTP هو حاسم لتسوية المشاكل والتطبيقات المخصصة.

#### الخاتمة

في الختام، يمكن تحقيق تحميل الملفات عبر HTTP من خلال POST مع multipart/form-data لتفاعل الاستمارات الويب المرن أو PUT لتحديثات APIs الفعالة، كل منها مع مزايا ومتطلبات مختلفة. إعداد الخادم، حجم الملف، واعتبارات الأمن هي حاسمة لضمان تنفيذ قوي. لمزيد من القراءة، استكشف [دليل Medium حول POST تحميل الملفات](https://medium.com/@API4AI/post-a-file-via-http-request-the-ultimate-guide-b23fb70a3f73) لمثالات عملية عبر اللغات.

### المراجع الرئيسية
- [كيف تحميل ملفاتك إلى خادم ويب تعلم تطوير الويب MDN](https://developer.mozilla.org/en-US/docs/Learn_web_development/Howto/Tools_and_setup/Upload_files_to_a_web_server)
- [كيف يعمل تحميل الملفات عبر HTTP Stack Overflow](https://stackoverflow.com/questions/8659808/how-does-http-file-upload-work)
- [POST ملف عبر طلب HTTP الدليل النهائي بواسطة API4AI Medium](https://medium.com/@API4AI/post-a-file-via-http-request-the-ultimate-guide-b23fb70a3f73)
- [HTTP REST API File Uploads Phil Sturgeon](https://philsturgeon.com/http-rest-api-file-uploads/)
- [دعم PHP PUT method Manual](https://www.php.net/manual/en/features.file-upload.put-method.php)
- [curl اختبار تحميل الملفات باستخدام HTTP PUT method Stack Overflow](https://stackoverflow.com/questions/5143915/test-file-upload-using-http-put-method)
- [File upload forms HTTPie 3.2.4 latest docs](https://httpie.io/docs/cli/file-upload-forms)