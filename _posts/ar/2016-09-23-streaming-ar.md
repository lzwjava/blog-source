---
audio: false
generated: false
image: false
lang: ar
layout: post
title: إعداد البث المباشر باستخدام OBS و SRS و FFmpeg
translated: true
type: post
---

*تمت كتابة هذه المدونة بمساعدة ChatGPT-4o.*

---

أصبح البث المباشر جزءًا أساسيًا من التواصل عبر الإنترنت، حيث يتم استخدامه على نطاق واسع من البث الاحترافي إلى مدونات الفيديو الشخصية. يتطلب بناء حل قوي للبث المباشر فهمًا لمجموعة متنوعة من الأدوات والبروتوكولات. سيرشدك هذا الدليل خطوة بخطوة حول كيفية إعداد البث المباشر باستخدام OBS وSRS وFFmpeg.

### المكونات الرئيسية للبث المباشر

**1. OBS (Open Broadcaster Software)**  
OBS هو برنامج مفتوح المصدر قوي يُستخدم لتسجيل الفيديو والبث المباشر. يوفر ميزات مثل التقاط المصادر والأجهزة في الوقت الفعلي، وتكوين المشاهد، والتشفير، والتسجيل، والبث.

**2. SRS (Simple Realtime Server)**
SRS هو خادم بث عالي الأداء يدعم RTMP و HLS و HTTP-FLV. يدعم عددًا كبيرًا من الاتصالات المتزامنة ويمكن تكوينه بدرجة عالية.

**3. FFmpeg**
FFmpeg هو إطار عمل شامل للوسائط المتعددة، قادر على فك التشفير، وتشفير، وتحويل الترميز، وتعدد الإرسال، وفك تعدد الإرسال، والتدفق، والتصفية، وتشغيل كل ما تقريبًا تم إنشاؤه بواسطة البشر والآلات. يتم استخدامه على نطاق واسع في إعدادات البث المباشر، ويحظى بتقدير كبير لتعدد استخداماته وموثوقيته.

### إعداد بيئة البث المباشر الخاصة بك

#### إعدادات OBS

1. **تثبيت OBS**: قم بتنزيل وتثبيت OBS من الموقع الرسمي.
2. **تكوين الإعدادات**: افتح OBS، ثم انتقل إلى `الإعدادات > البث`، وقم بتكوين نوع البث على `مخصص...`. أدخل عنوان URL لخادم البث الخاص بك (على سبيل المثال `rtmp://your_server_ip/live`).
3. **إضافة مصادر**: قم بإضافة مصادر الفيديو والصوت في OBS لإنشاء مشهد. يمكن أن يشمل ذلك التقاط الشاشة، الكاميرا، الصور، النصوص، وغيرها.

#### إعداد خادم SRS

1. **تثبيت SRS**: قم باستنساخ مستودع SRS من GitHub وقم بتجميعه لدعم SSL.
    ```sh
    git clone https://github.com/ossrs/srs.git
    cd srs/trunk
    ./configure --disable-all --with-ssl
    make
    ```
2. **تكوين SRS**: قم بتحرير ملف `conf/rtmp.conf` لتكوين إعدادات RTMP الخاصة بك.
    ```sh
    listen 1935;
    max_connections 1000;
    vhost __defaultVhost__ { }
    ```
3. **تشغيل SRS**: قم بتشغيل خادم SRS باستخدام ملف التكوين الخاص بك.
    ```sh
    ./objs/srs -c conf/rtmp.conf
    ```

#### استخدام FFmpeg لبث الوسائط المتدفقة

1. **تثبيت FFmpeg**: قم بتثبيت FFmpeg من الموقع الرسمي أو باستخدام مدير الحزم.
2. **استخدام FFmpeg لبث الوسائط**: استخدم FFmpeg لدفق الفيديو إلى خادم SRS الخاص بك.
    ```sh
    ffmpeg -re -i input_video.flv -vcodec copy -acodec copy -f flv rtmp://your_server_ip/live/stream_key
    ```
3. **أتمتة بث الوسائط**: قم بإنشاء نص برمجي لدفق ملفات الفيديو بشكل مستمر.
    ```sh
    for ((;;)); do 
        ffmpeg -re -i input_video.flv -vcodec copy -acodec copy -f flv rtmp://your_server_ip/live/stream_key;
        sleep 1;
    done
    ```

### البروتوكولات والتنسيقات

**بروتوكول نقل الرسائل في الوقت الفعلي (RTMP)**
- يُستخدم RTMP على نطاق واسع في البث المباشر بسبب تأخيره المنخفض ونقله الموثوق.
- يستخدم بروتوكول TCP، مما يمكنه من الحفاظ على اتصال دائم، مما يضمن نقلًا سلسًا للبث.

**HLS (HTTP Live Streaming)**
- يقوم HLS بتقسيم تدفق الفيديو إلى أجزاء صغيرة تعتمد على HTTP، مما يجعله سهل النقل عبر خوادم الويب القياسية.
- على الرغم من أنه يسبب بعض التأخير، إلا أنه متوافق بشكل كبير مع مختلف الأجهزة والمنصات.

**HTTP-FLV**
- يجمع بين تنسيق FLV ونقل HTTP، ويُستخدم لنقل البث المباشر بتأخير منخفض.
- مناسب للبث القائم على المتصفح، حيث يستفيد من البنية التحتية الحالية لـ HTTP.

### التطبيقات العملية

**بث الفيديو على iOS وAndroid**
- استخدام مكتبات مثل VideoCore وIjkplayer لتنفيذ بث RTMP على الأجهزة المحمولة.
- دمج FFmpeg لمهام الترميز وفك الترميز لتعزيز التوافق والأداء.

**البث المباشر القائم على الويب**
- استخدام عنصر الفيديو في HTML5 لتشغيل الفيديو على صفحات الويب، مع دعم HLS أو HTTP-FLV.
- استخدام WebRTC للتواصل في الوقت الفعلي والتفاعل منخفض التأخير.

### الأدوات والموارد

- **VLC**: مشغل وسائط متعدد الوظائف يدعم بروتوكولات البث مثل RTMP وHLS.
- **SRS Player**: مشغل عبر الإنترنت لاختبار تدفقات SRS.
- **وثائق FFmpeg**: توفر وثائق تفصيلية لمهام الوسائط المتعددة المختلفة.

### الخلاصة

إن إنشاء حل بث مباشر موثوق يتطلب فهمًا وتكوينًا لأدوات وبروتوكولات متعددة. تُعد OBS وSRS وFFmpeg مكونات قوية، وعند استخدامها معًا، يمكنها إنشاء إعداد بث قوي. سواء كان ذلك موجهًا لنظام iOS أو Android أو الويب، توفر هذه الأدوات المرونة والأداء اللازمين لتحقيق بث مباشر عالي الجودة.

لمزيد من المعلومات التفصيلية والإعدادات المتقدمة، يُرجى الرجوع إلى الوثائق الرسمية لكل أداة، واستكشاف النصائح والدعم الإضافي في منتديات المجتمع. نتمنى لكم بثًا ناجحًا!