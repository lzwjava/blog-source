---
audio: false
generated: true
lang: ar
layout: post
title: جيت ستاش
translated: true
type: note
---

إليك كيفية استخدام `git stash` بفعالية والتبديل بين الفروع (branches) والوسوم (tags) بشكل متكرر مع وجود تغييرات غير مكتملة (uncommitted changes):

## استخدام `git stash`

`git stash` هو أمر قوي يسمح لك بحفظ التغييرات غير المكتملة مؤقتًا (المعلنة staged وغير المعلنة unstaged) وإعادة دليل العمل الخاص بك إلى آخر commit. هذا مفيد عندما تحتاج إلى تبديل الفروع أو العمل على شيء آخر دون إكمال العمل الحالي غير المنتهي.

فيما يلي تفصيل للعمليات الشائعة لـ `git stash`:

**١. تخزين التغييرات الحالية مؤقتًا (Stashing):**

```bash
git stash
```

يأخذ هذا الأمر التغييرات غير المكتملة الخاصة بك، يحفظها كـ stash جديد، وينظف دليل العمل الخاص بك. سترى رسالة مثل:

```
Saved working directory and index state WIP on <your_branch>: <commit_hash> <commit_message>
```

**٢. التخزين المؤقت مع رسالة:**

من المفيد إضافة رسالة وصفية إلى الـ stashes الخاصة بك، خاصة إذا كان لديك عدة stashes:

```bash
git stash save "رسالتك الوصفية"
# أو
git stash push -m "رسالتك الوصفية"
```

**٣. عرض قائمة stashes الخاصة بك:**

لمشاهدة قائمة بجميع الـ stashes المحفوظة، استخدم:

```bash
git stash list
```

سيؤدي هذا إلى عرض قائمة بالـ stashes، عادة بالتنسيق:

```
stash@{0}: On <branch_name>: <commit_hash> <stash_message>
stash@{1}: WIP on <another_branch>: ...
```

`stash@{0}` هو أحدث stash.

**٤. تطبيق stash:**

لإعادة التغييرات من stash، يمكنك استخدام `git stash apply`. يطبق هذا الأمر التغييرات ولكنه يحتفظ بالـ stash في القائمة. افتراضيًا، يطبق أحدث stash (`stash@{0}`).

```bash
git stash apply
# أو لتطبيق stash محدد:
git stash apply stash@{1}
```

**٥. تطبيق وإزالة stash:**

إذا كنت تريد تطبيق التغييرات وإزالة الـ stash فورًا من القائمة، استخدم `git stash pop`. هذا أيضًا يستخدم أحدث stash افتراضيًا.

```bash
git stash pop
# أو لإزالة وتطبيق stash محدد:
git stash pop stash@{1}
```

**٦. عرض تفاصيل stash:**

يمكنك رؤة ملخص للتغييرات في stash باستخدام:

```bash
git stash show
# أو لـ stash محدد:
git stash show stash@{2}
```

لرؤية الـ diff الكامل لـ stash، أضف علم `-p` أو `--patch`:

```bash
git stash show -p stash@{0}
```

**٧. تخزين الملفات غير المتعقبة (untracked files) مؤقتًا:**

افتراضيًا، `git stash` يخزن فقط التغييرات على الملفات المتعقبة (tracked). لتضمين الملفات غير المتعقبة، استخدم خيار `-u` أو `--include-untracked`:

```bash
git stash -u
git stash save -u "stash مع ملفات غير متعقبة"
```

**٨. تخزين الملفات المتجاهلة (ignored files) أيضًا:**

لتضمين كل من الملفات غير المتعقبة والملفات المتجاهلة، استخدم خيار `-a` أو `--all`:

```bash
git stash -a
git stash save -a "stash مع كل الملفات"
```

**٩. إنشاء فرع جديد من stash:**

إذا قمت بتخزين بعض التغييرات مؤقتًا وتريد الآن العمل عليها في فرع جديد، يمكنك إنشاء فرع مباشرة من الـ stash:

```bash
git stash branch <new_branch_name> stash@{0}
# أو لأحدث stash:
git stash branch <new_branch_name>
```

ينشئ هذا الأمر فرعًا جديدًا بناءً على الـ commit حيث تم إنشاء الـ stash، يطبق التغييرات المخزنة مؤقتًا على الفرع الجديد، ثم يتخلص من الـ stash.

**١٠. إزالة stashes:**

* لإزالة stash محدد:
    ```bash
    git stash drop stash@{1}
    ```
* لإزالة جميع الـ stashes:
    ```bash
    git stash clear
    ```

## التبديل بين الفروع أو الوسوم بشكل متكرر مع وجود تغييرات غير مكتملة

إليك كيفية استخدام `git stash` لتسهيل التبديل المتكرر بين الفروع أو الوسوم عندما يكون لديك تغييرات غير مكتملة:

**السيناريو ١: التبديل إلى فرع آخر**

١.  **خزن تغييراتك الحالية مؤقتًا:**
    ```bash
    git stash save "عمل قيد التنفيذ على الفرع الحالي"
    ```
٢.  **انتقل إلى الفرع الهدف:**
    ```bash
    git checkout <target_branch_name>
    # أو باستخدام أمر `git switch` الأحدث:
    git switch <target_branch_name>
    ```
٣.  **قم بعملك على الفرع الهدف.**
٤.  **عندما تحتاج إلى العودة إلى فرعك الأصلي:**
    ```bash
    git checkout <original_branch_name>
    # أو
    git switch <original_branch_name>
    ```
٥.  **أعد تطبيق التغييرات المخزنة مؤقتًا:**
    ```bash
    git stash pop  # إذا كنت تريد التطبيق وإزالة الـ stash
    # أو
    git stash apply # إذا كنت تريد التطبيق والاحتفاظ بالـ stash
    ```
٦.  **حل أي تعارضات دمج محتملة** قد تنشأ إذا كان الفرع الأصلي قد تباعد بشكل كبير منذ أن قمت بالتخزين المؤقت.

**السيناريو ٢: التبديل إلى وسْم (tag)**

التبديل مباشرة إلى وسْم يضعك في حالة "رأس منفصل detached HEAD"، وهي بشكل عام غير موصى بها لإجراء commits. إذا كنت تريد فقط فحص الكود في وسْم محدد:

١.  **خزن تغييراتك الحالية مؤقتًا:**
    ```bash
    git stash save "عمل قيد التنفيذ قبل فحص الوسْم"
    ```
٢.  **انتقل إلى الوسْم:**
    ```bash
    git checkout <tag_name>
    ```
٣.  **افحص الكود.**
٤.  **للعودة إلى فرعك:**
    ```bash
    git checkout <your_branch_name>
    # أو
    git switch <your_branch_name>
    ```
٥.  **أعد تطبيق التغييرات المخزنة مؤقتًا:**
    ```bash
    git stash pop
    # أو
    git stash apply
    ```

**السيناريو ٣: إنشاء فرع جديد من وسْم مع التغييرات المخزنة مؤقتًا**

إذا كنت تريد البدء في العمل على ميزة أو إصلاح جديد بناءً على وسْم محدد، وكان لديك تغييرات مخزنة مؤقتًا من سياق سابق:

١.  **خزن تغييراتك الحالية مؤقتًا (إذا لم تقم بذلك بالفعل):**
    ```bash
    git stash save "عمل قيد التنفيذ"
    ```
٢.  **أنشئ فرعًا جديدًا من الوسْم:**
    ```bash
    git checkout -b <new_branch_name> <tag_name>
    # أو
    git switch -c <new_branch_name> <tag_name>
    ```
٣.  **طبق التغييرات المخزنة مؤقتًا على الفرع الجديد:**
    ```bash
    git stash pop # أو git stash apply
    ```
٤.  **حل أي تعارضات دمج محتملة.**

**اعتبارات مهمة:**

* **حافظ على تنظيم stashes الخاصة بك:** استخدم رسائل وصفية لتحديد stashes الخاصة بك بسهولة.
* **الـ stash محلي:** يتم تخزين الـ stashes محليًا في مستودعك ولا يتم دفعها إلى المستودعات البعيدة (remote repositories).
* **إمكانية وجود تعارضات:** عندما تعيد تطبيق stash، هناك احتمال لحدوث تعارضات دمج إذا كان الفرع الذي تطبق عليه قد تغير بشكل كبير منذ أن أنشأت الـ stash. ستحتاج إلى حل هذه التعارضات يدويًا.
* **فكر في إنشاء فروع مؤقتة:** للعمل طويل الأجل الذي لست مستعدًا لإكماله، قد يكون إنشاء فرع مؤقت نهجًا أفضل من الاعتماد بشدة على الـ stashes. يمكنك التبديل بين الفروع بسهولة وإكمال تقدمك.

باستخدام `git stash` بفعالية، يمكنك التبديل بسلاسة بين الفروع والوسوم حتى عندما يكون لديك تغييرات غير مكتملة، مما يسمح بسير عمل أكثر مرونة وكفاءة. تذكر إدارة stashes الخاصة بك وكن مستعدًا للتعامل مع تعارضات الدمج المحتملة.