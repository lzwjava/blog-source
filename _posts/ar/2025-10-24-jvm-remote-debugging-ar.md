---
audio: false
generated: true
image: false
lang: ar
layout: post
model: x-ai/grok-4-fast
title: خيارات تصحيح أخطاء JVM عن بُعد موضحة
translated: true
type: note
---

### خيارات تصحيح أخطاء JVM: JDWP، الإيقاف المؤقت، المقبس، والمنفذ 7777

المصطلحات التي ذكرتها—"خيارات JVM"، "الإيقاف المؤقت"، "مقبس 7777"، و "jdwp"—ترتبط عادةً بتمكين التصحيح عن بُعد في تطبيقات Java التي تعمل على آلة Java الافتراضية (JVM). هذه الخيارات جزء من وسيم سطر الأوامر القياسي المستخدم لإرفاق أداة تصحيح (مثل IntelliJ IDEA، أو Eclipse، أو jdb) بعملية Java قيد التشغيل عبر اتصال شبكة. سأشرحها خطوة بخطوة.

#### 1. **خيارات JVM (بشكل عام)**
   - خيارات JVM هي وسائط سطر أوامر يتم تمريرها إلى الملف القابل للتنفيذ `java` عند بدء تشغيل تطبيق Java. وهي تُعدّل سلوك JVM، مثل تخصيص الذاكرة (مثال: `-Xmx2g`)، جمع البيانات المهملة، أو التصحيح.
   - تقع خيارات التصحيح تحت فئة مكتبات "الوكيل" (agent)، التي يتم تحميلها ديناميكيًا لتمكين ميزات مثل فحص الكود والمتغيرات والخيوط عن بُعد.

#### 2. **JDWP (بروتوكول سلك تصحيح Java)**
   - JDWP هو البروتوكول الأساسي الذي يسمح لأداة تصحيح بالتواصل مع JVM عبر سلك (شبكة أو أنبوب محلي). إنه الأساس للتصحيح عن بُعد في Java.
   - لتمكينه، تستخدم خيار JVM `-agentlib:jdwp=...`، والذي يقوم بتحميل وكيل JDWP داخل JVM عند بدء التشغيل.
   - مثال كامل:  
     ```
     java -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=*:7777 -jar your-app.jar
     ```
     يبدأ هذا الأمر تطبيقك مع تمكين التصحيح على المنفذ 7777.

#### 3. **Transport=dt_socket (اتصال المقبس)**
   - `dt_socket` تحدد آلية النقل لاتصالات JDWP. تستخدم مقابس TCP للتصحيح عن بُعد، مما يسمح لأداة التصحيح بالاتصال عبر شبكة (مثال: من بيئة التطوير المتكاملة (IDE) الخاصة بك على localhost أو من خادم بعيد).
   - البدائل تشمل `dt_shmem` (ذاكرة مشتركة، محلي فقط) أو الأنابيب، لكن المقابس هي الأكثر شيوعًا في الإعدادات البعيدة.
   - يشير "مقبس 7777" إلى ربط هذا الاتصال بمنفذ TCP 7777 (قيمة افتراضية شائعة، لكن يمكن استخدام أي منفذ حر).

#### 4. **Server=y و Suspend (وسيمة الإيقاف المؤقت)**
   - `server=y`: تخبر JVM بأن تتصرف كـ *خادم* تصحيح، تستمع لاتصالات قادمة من عميل أداة تصحيح (بيئة التطوير المتكاملة الخاصة بك). إذا كانت `server=n`، فإنها تحاول الاتصال خارجيًا بأداة تصحيح (أقل شيوعًا).
   - `suspend=y` أو `suspend=n`: تتحكم فيما إذا كانت JVM توقف التنفيذ عند بدء التشغيل حتى يتم إرفاق أداة تصحيح.
     - `suspend=y`: يتوقف التطبيق فورًا عند بدء التشغيل (مفيد لالتقاط المشكلات من البداية). يستأنف العمل فقط بعد إرفاق أداة التصحيح.
     - `suspend=n`: يعمل التطبيق بشكل طبيعي؛ يمكنك إرفاق أداة تصحيح لاحقًا دون انقطاع (أكثر أمانًا للاختبار الشبيه ببيئة الإنتاج).
   - القيمة الافتراضية عادةً هي `n` لتجنب الت blocking.

#### حالة الاستخدام الشائعة
- **لماذا تستخدم هذا؟** لاستكشاف أخطاء التطبيقات الحية وإصلاحها دون إيقافها. ابدأ تشغيل تطبيق Java الخاص بك باستخدام هذه الوسائم، ثم في بيئة التطوير المتكاملة الخاصة بك، أنشئ تكوين "Remote JVM Debug" يشير إلى `localhost:7777` (أو IP الخادم).
- **ملاحظة أمنية:** قد يشكل تعريض JDWP على منفذ عام (مثل 7777) نقطة ضعف—يمكن لأي شخص أن يربط ويفحص تطبيقك. استخدم الجدران النارية، أو الربط المحلي فقط (`address=localhost:7777`)، أو أدوات مثل نفق SSH في بيئة الإنتاج.

#### جدول مرجعي سريع

| معامل الخيار | الوصف | قيمة مثال | ملاحظات |
|------------------|-------------|---------------|-------|
| `transport`     | طريقة الاتصال | `dt_socket` | مقبس لـ TCP/IP؛ استخدم للتصحيح عن بُعد. |
| `server`        | وضع الاستماع | `y` | JVM تستمع على المنفذ؛ أداة التصحيح تتصل بها. |
| `suspend`       | إيقاف مؤقت عند البدء | `n` | `y` توقف حتى يتم إرفاق أداة التصحيح؛ `n` تعمل بحرية. |
| `address`       | عنوان/منفذ الربط | `*:7777` | `*` تسمح لأي IP؛ `localhost:7777` تقيد للمحلي فقط. |

لمزيد من التفاصيل، راجع الوثائق الرسمية لـ OpenJDK حول التصحيح.

[Java Debugging with JDWP](https://docs.oracle.com/en/java/javase/21/docs/specs/jdwp-transport.html)  
[Enabling Remote Debugging](https://www.baeldung.com/java-debugging-with-intellij)