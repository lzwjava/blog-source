---
audio: false
generated: true
lang: ar
layout: post
title: مشاكل اتصال خادم دوكر
translated: true
type: note
---

### النقاط الرئيسية
- يبدو من المرجح أن خادم docker لا يعمل، استنادًا إلى رسالة الخطأ.
- تشير الأبحاث إلى ضرورة التحقق مما إذا كان تطبيق docker desktop مفتوحًا، لأنه شائع الاستخدام على نظام macOS.
- تميل الأدلة نحو التحقق من مسار المقبس (socket path)، والذي قد يكون مضبوطًا بشكل خاطئ على موقع مخصص مثل /Users/lzwjava/.docker/run docker sock.

### تأكد من أن Docker Desktop يعمل
أولاً، تأكد من تثبيت تطبيق docker desktop وأنه يعمل. يمكنك العثور عليه في مجلد التطبيقات (Applications) أو البحث عن أيقونته في شريط القوائم. إذا لم يكن يعمل، فافتحه وانتظر حتى يبدأ التشغيل. يجب أن يحل هذا المشكلة إذا كنت تستخدم الإعداد القياسي.

### تحقق من مسار المقبس ومتغير DOCKER_HOST
تشير رسالة الخطأ إلى مسار مقبس عند /Users/lzwjava/.docker/run docker sock، وهو غير معتاد بسبب وجود مسافة. من المحتمل أن هذا خطأ مطبعي، وأن المسار المقصود هو /Users/lzwjava/.docker/run/dockersock. تحقق مما إذا كان هذا الملف موجودًا عن طريق تشغيل الأمر `ls /Users/lzwjava/.docker/run/dockersock` في الطرفية. أيضًا، قم بتشغيل الأمر `echo $DOCKER_HOST` لمعرفة ما إذا كان مضبوطًا على مسار مخصص؛ إذا كان الأمر كذلك، فقم بإلغاء ضبطه باستخدام الأمر `unset DOCKER_HOST` لاستخدام المسار الافتراضي /var/run/dockersock.

### التعامل مع التثبيتات المخصصة
إذا كنت لا تستخدم docker desktop، فقد يكون لديك إعداد مخصص (مثل colima). تأكد من تشغيل محرك docker الخاص بك، على سبيل المثال، باستخدام الأمر `colima start` لـ colima، وقم بتعيين متغير DOCKER_HOST وفقًا لذلك. تحقق من الأذونات باستخدام الأمر `ls -l /var/run/dockersock` إذا كان المقبس موجودًا، وقم بتعديلها إذا لزم الأمر.

---

### ملاحظة المسح: تحليل مفصل لمشاكل الاتصال بخادم Docker على نظام macOS

يقدم هذا القسم استكشافًا شاملاً للمشكلة "Cannot connect to the docker daemon at unix://Users/lzwjava/.docker/run docker sock. Is the docker daemon running؟" على نظام macOS، معالجة الأسباب المحتملة، وخطوات استكشاف الأخطاء وإصلاحها، والاعتبارات لكل من التثبيتات القياسية والمخصصة. يستند التحليل إلى الفهم أن docker على نظام macOS يعتمد عادةً على تطبيق docker desktop، الذي يقوم بتشغيل محرك docker في آلة افتراضية (VM) بنظام Linux، ويستكشف الانحرافات مثل التكوينات المخصصة.

#### الخلفية والسياق
Docker هو منصة لتطوير وشحن وتشغيل التطبيقات في حاويات، باستخدام تقنية virtualisation على مستوى نظام التشغيل. على نظام macOS، ونظرًا لعدم وجود ميزات نواة Linux أصلية مثل cgroups و namespaces، يتطلب docker آلة افتراضية لتشغيل محرك docker. الطريقة الرسمية هي من خلال docker desktop، الذي يعرض خادم docker عبر مقبس يونكس (Unix socket) في /var/run/dockersock بشكل افتراضي. ومع ذلك، تشير رسالة الخطأ إلى محاولة الاتصال بمسار مخصص، /Users/lzwjava/.docker/run docker sock، مما يشير إما إلى إعداد خاطئ أو تثبيت غير قياسي.

عادة ما تظهر رسالة الخطأ "Cannot connect to the docker daemon" عندما لا يستطيع عميل docker التواصل مع خادم docker، غالبًا بسبب عدم تشغيل الخادم، أو مسار المقبس غير الصحيح، أو مشاكل في الأذونات. نظرًا لأن الوقت الحالي هو 03:57 صباحًا بتوقيت المحيط الهادئ PST يوم الخميس، 27 فبراير 2025، ومراعاة الممارسات القياسية، سنستكشف كل من إعداد docker desktop القياسي والتكوينات المخصصة المحتملة.

#### إعداد Docker Desktop القياسي
للمستخدمين الذين يستخدمون docker desktop الرسمي لنظام macOS، يعمل محرك docker داخل آلة افتراضية HyperKit، ويتم عرض المقبس في /var/run/dockersock. لحل المشكلة:

- **تأكد من أن Docker Desktop يعمل:** افتح تطبيق docker desktop من /Applications/Docker.app أو ابحث عن أيقونته في شريط القوائم. إذا لم يكن مثبتًا، قم بتنزيله من [موقع docker الرسمي](https://www.docker.com/products/container-platform). بمجرد تشغيله، يجب أن يبدأ تشغيل الآلة الافتراضية ومحرك docker، مما يجعل المقبس متاحًا.

- **تحقق من متغير البيئة DOCKER_HOST:** قم بتشغيل الأمر `echo $DOCKER_HOST` في الطرفية للتحقق مما إذا كان مضبوطًا. إذا كان مضبوطًا على "unix://Users/lzwjava/.docker/run docker sock"، فهذا يفسر الخطأ، لأنه يتجاوز المسار الافتراضي. قم بإلغاء ضبطه باستخدام الأمر `unset DOCKER_HOST` للعودة إلى /var/run/dockersock.

- **التحقق من ملف المقبس:** قم بتشغيل الأمر `ls /var/run/dockersock` للتأكد من وجود المقبس. إذا كان موجودًا، تحقق من الأذونات باستخدام الأمر `ls -l /var/run/dockersock` للتأكد من وصول المستخدم. عادة ما يقوم docker desktop بإدارة الأذونات، ولكن تشغيل الأمر `docker ps` مع sudo قد يتجاوز المشكلات إذا لزم الأمر.

#### التثبيت المخصص وتحليل مسار المقبس
يشير المسار في رسالة الخطأ، /Users/lzwjava/.docker/run docker sock، إلى تكوين مخصص، لأنه ليس المسار القياسي /var/run/dockersock. المسافة في "run docker sock" غير معتادة، مما يشير إلى احتمال وجود خطأ مطبعي؛ من المرجح أن المقصود هو /Users/lzwjava/.docker/run/dockersock. يتوافق هذا المسار مع بعض الإعدادات المخصصة، مثل تلك التي تستخدم أدوات مثل colima، والتي تضع المقبس في /Users/<username>/.colima/run/dockersock، على الرغم من أنه هنا .docker وليس .colima.

- **تحقق من وجود ملف المقبس:** قم بتشغيل الأمر `ls /Users/lzwjava/.docker/run/dockersock` (على افتراض أن المسافة خطأ مطبعي). إذا كان موجودًا، فقد تكون المشكلة هي عدم تشغيل الخادم أو مشاكل في الأذونات. إذا لم يكن موجودًا، فإن الخادم غير مضبوط لإنشاء المقبس هناك.

- **بدء تشغيل محرك Docker للتثبيتات المخصصة:** إذا كنت لا تستخدم docker desktop، فحدد طريقة التثبيت. بالنسبة لـ colima، قم بتشغيل الأمر `colima start` لبدء تشغيل الآلة الافتراضية ومحرك docker. بالنسبة للإعدادات المخصصة الأخرى، راجع الوثائق المحددة، حيث لا يمكن تثبيت docker-engine مباشرة على نظام macOS بدون آلة افتراضية.

- **تعيين DOCKER_HOST:** إذا كنت تستخدم مسارًا مخصصًا، فتأكد من تعيين DOCKER_HOST بشكل صحيح، على سبيل المثال، `export DOCKER_HOST=unix://Users/lzwjava/.docker/run/dockersock`. تحقق من ملفات تكوين shell مثل .bashrc أو .zshrc للإعدادات المستمرة.

#### اعتبارات استكشاف الأخطاء وإصلاحها والأذونات
يمكن أن تسبب الأذونات مشاكل في الاتصال. إذا كان ملف المقبس موجودًا ولكن تم رفض الوصول، فتحقق باستخدام الأمر `ls -l` وتأكد من أن للمستخدم صلاحية القراءة/الكتابة. على نظام macOS مع docker desktop، يتم إدارة الأذونات عادة، ولكن للإعدادات المخصصة، قد يكون من الضروري إضافة المستخدم إلى مجموعة docker (إذا كانت قابلة للتطبيق) أو استخدام sudo.

إذا استمرت المشكلة، ففكر في إعادة تعيين docker desktop من خلال قائمة Troubleshoot أو التحقق من السجلات (logs) للبحث عن أخطاء. بالنسبة للتثبيتات المخصصة، استشر منتديات المجتمع أو الوثائق، حيث قد يختلف الإعداد.

#### التحليل المقارن: المسارات القياسية مقابل المخصصة
لتنظيم المسارات والإجراءات المحتملة، ضع في الاعتبار الجدول التالي:

| **نوع التثبيت**         | **مسار المقبس المتوقع**               | **الإجراء لبدء تشغيل الخادم**       | **التحقق من DOCKER_HOST**                      |
|-------------------------|--------------------------------------|------------------------------------|-----------------------------------------------|
| Docker Desktop          | /var/run/dockersock                  | فتح تطبيق docker desktop           | تأكد من إلغاء الضبط أو الضبط على unix://var/run/dockersock |
| مخصص (مثل Colima)       | /Users/<username>/.colima/run/dockersock | تشغيل الأمر `colima start`         | اضبط على المسار المخصص إذا لزم الأمر، مثال: unix://Users/lzwjava/.colima/run/dockersock |
| مخصص (مسار المستخدم)    | /Users/lzwjava/.docker/run/dockersock | يعتمد على الإعداد، راجع الوثائق     | اضبط على unix://Users/lzwjava/.docker/run/dockersock إذا كان الملف موجودًا |

يسلط هذا الجدول الضوء على أن مسار المستخدم لا يتطابق مع الإعداد الافتراضي لـ colima، مما يشير إلى إعداد مخصص فريد. تظل المسافة في المسار خطأ مطبعيًا محتملاً، والتحقق باستخدام أوامر `ls` أمر بالغ الأهمية.

#### تفصيل غير متوقع: مسارات المقابس المخصصة في مجلد المستخدم الرئيسي
التفصيل غير المتوقع هو إمكانية وجود المقبس في المجلد الرئيسي للمستخدم، كما هو موضح في رسالة الخطأ. بينما يكون /var/run/dockersock قياسيًا لـ docker desktop، يمكن للأدوات أو التكوينات المخصصة وضعه في مكان آخر، مثل /Users/<username>/.docker/run/dockersock، مما يتطلب من المستخدمين ضبط DOCKER_HOST وفقًا لذلك. هذا أقل شيوعًا وقد يشير إلى تثبيت غير قياسي، مما يزيد من تعقيد استكشاف الأخطاء وإصلاحها.

#### الخلاصة
على الأرجح تنبع المشكلة من عدم تشغيل خادم docker أو إعداد خاطئ لـ DOCKER_HOST يشير إلى /Users/lzwjava/.docker/run docker sock، وهو ما قد يكون خطأ مطبعيًا لـ /Users/lzwjava/.docker/run/dockersock. ابدأ بالتأكد من تشغيل docker desktop، وإلغاء ضبط DOCKER_HOST، والتحقق من ملف المقبس. بالنسبة للإعدادات المخصصة، حدد طريقة التثبيت وابدأ تشغيل المحرك وفقًا لذلك. إذا لم يتم حل المشكلة، فاطلب دعم المجتمع لمزيد من التشخيص.

### الاقتباسات الرئيسية
- [دليل تثبيت Docker Desktop لنظام Mac](https://docs.docker.com/desktop/install/mac-install/)
- [استخدام Docker Desktop وبدء تشغيل الخادم](https://docs.docker.com/desktop/usage/#start-the-docker-daemon)
- [الاتصال بـ Docker Engine API من خلال Docker Desktop](https://docs.docker.com/desktop/usage/#connect-to-the-docker-engine-api)