---
audio: false
generated: true
image: false
lang: ar
layout: post
model: x-ai/grok-4-fast
title: استكشاف أخطاء الوصول إلى ليبر شات محليًا
translated: true
type: note
---

### استكشاف مشاكل الوصول إلى LibreChat على localhost:3080

بناءً على السجلات الخاصة بك، تم سحب صور Docker بنجاح (بعد بعض مهلات وإعادة المحاولات الأولية)، وبدأت 6 مكونات: الشبكة الافتراضية، `vectordb`، `chat-mongodb`، `chat-meilisearch`، `rag_api`، و `LibreChat`. ومع ذلك، فإن خدمة `api` (والتي تخدم عادةً الواجهة الخلفية على المنفذ 3080) غير مدرجة في الحاويات التي بدأت — وهذا هو السبب المرجح لعدم تمكنك من الوصول إلى الموقع. من المحتمل أن حاوية `LibreChat` هي الواجهة الأمامية، والتي تعتمد على الواجهة الخلفية `api`.

تشير تحذيرات UID/GID إلى وجود مشاكل محتملة في الأذونات يمكن أن تمنع حاوية `api` من البدء بشكل صحيح. إليك دليلًا خطوة بخطوة لتشخيص وإصلاح هذه المشكلة.

#### 1. **التحقق من الحاويات العاملة والمنافذ**
   قم بتشغيل هذا الأمر لرؤية جميع الحاويات النشطة وحالتها وتعيينات المنافذ الخاصة بها:
   ```
   docker ps
   ```
   - ابحث عن حاوية `api` (قد تكون مسماة `librechat_api` أو ما شابه). إذا كانت مفقودة أو متوقفة، فهذه هي المشكلة.
   - تأكد من تعيين المنفذ `3080` (مثال: `0.0.0.0:3080->3080/tcp`). إذا لم يكن معينًا، فالخدمة لا تعرضه.
   - إذا لم تظهر أي حاويات المنفذ 3080، فتابع الخطوات التالية.

#### 2. **فحص سجلات الحاويات**
   افحص السجلات للبحث عن أخطاء أثناء بدء التشغيل، خاصة لخدمات `api` و `LibreChat`:
   ```
   docker logs LibreChat
   docker logs api  # أو docker logs librechat_api إذا كان الاسم مختلفًا
   docker logs rag_api  # في حالة وجود مشاكل في التبعيات
   ```
   - الأخطاء الشائعة: تم رفض الإذن (بسبب UID/GID)، فشل في الاتصال بـ MongoDB/Meilisearch، أو مشاكل في الربط (مثل عدم الاستماع على 0.0.0.0).
   - إذا أظهرت السجلات أن الخادم بدأ ولكن يرتبط فقط بـ localhost داخل الحاوية، أضف `HOST=0.0.0.0` إلى ملف `.env` الخاص بك.

#### 3. **تعيين UID و GID لإصلاح تحذيرات الأذونات**
   من المرجح أن ملف `.env` الخاص بك (الذي تم نسخه من `.env.example`) يحتوي على هذه المتغيرات معلقة. المتغيرات غير المعينة يمكن أن تتسبب في فشل الحاويات بصمت بسبب عدم تطابق أذونات الملفات.
   - قم بتحرير `.env`:
     ```
     UID=1000  # قم بتشغيل `id -u` للحصول على معرف المستخدم الخاص بك
     GID=1000  # قم بتشغيل `id -g` للحصول على معرف المجموعة الخاصة بك
     ```
   - احفظ الملف، ثم أعد التشغيل:
     ```
     docker compose down
     docker compose up -d
     ```
   يضمن هذا أن الأحجام (مثل config/logs) مملوكة من قبل المستخدم الخاص بك.

#### 4. **اختبار الاتصال**
   - تحقق مما إذا كان المنفذ 3080 يستمع محليًا:
     ```
     curl -v http://localhost:3080
     ```
     - إذا انتهت مهلة الاتصال أو تم رفضه، فالخدمة لا تعمل/غير معروضة.
   - إذا أظهر `docker ps` أن المنفذ معين ولكن `curl` فشل، فتحقق من الجدار الناري (مثال: `sudo ufw status`) أو جرب `http://127.0.0.1:3080`.

#### 5. **إصلاحات إضافية إذا لزم الأمر**
   - **مشاكل سحب الصورة**: كانت محاولتك الأولى تحتوي على خطأ "مرفوض" لـ `ghcr.io/v2/librechat/librechat/manifests/latest`. إذا فشل السحب مرة أخرى، قم بالمصادقة على GitHub Container Registry:
     ```
     echo $YOUR_GITHUB_TOKEN | docker login ghcr.io -u YOUR_GITHUB_USERNAME --password-stdin
     ```
     (قم بإنشاء رمز وصول شخصي في github.com/settings/tokens مع نطاق `read:packages`).
   - **استخدم ملف Compose الموصى به**: ملف `docker-compose.yml` الافتراضي مخصص للبناء المحلي، والذي يمكن أن يكون غير متسق. انتقل إلى `deploy-compose.yml` للحصول على الصور البعيدة المستقرة:
     - قم بإعادة تسمية أو عمل نسخة احتياطية لملف `docker-compose.yml` الحالي.
     - استخدم `deploy-compose.yml` بدلاً من ذلك: `docker compose -f deploy-compose.yml up -d`.
     - تأكد من أن ملف `.env` يحتوي على `HOST=0.0.0.0` و `NODE_ENV=production`.
   - **إعادة تشغيل كاملة مع تنظيف**: إذا كنت عالقًا، قم بالتنظيف:
     ```
     docker compose down -v  # يزيل الأحجام أيضًا
     docker system prune -f
     docker compose up -d
     ```
   - **التبعيات**: تأكد من أن MongoDB و Meilisearch في حالة صحية (`docker logs chat-mongodb`، إلخ). خدمة `api` تعتمد عليهما.

بعد هذه الخطوات، أعد محاولة الوصول إلى http://localhost:3080. إذا أظهرت السجلات أخطاء محددة (مثل اتصال Mongo)، شاركها للحصول على مساعدة أكثر تحديدًا. هذا الإعداد يعمل لمعظم المستخدمين بمجرد ضبط UID/GID والتبعيات.

[فشل بناء Docker المحلي في الخدمة على localhost:3080](https://github.com/danny-avila/LibreChat/discussions/3425)  
[وثائق Docker لـ LibreChat](https://www.librechat.ai/docs/local/docker)  
[تكوين ملف Env (UID/GID)](https://www.librechat.ai/docs/configuration/dotenv)