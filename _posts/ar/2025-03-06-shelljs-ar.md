---
audio: false
generated: true
lang: ar
layout: post
title: استخدام ShellJS لتنفيذ أوامر الشل
translated: true
type: note
---

ShellJS هي مكتبة جافا سكريبت توفر أوامر شل يونكس (مثل `cp`، `mkdir`، `exec`، إلخ) لاستخدامها في مشاريع Node.js. إنها تبسط كتابة البرامج النصية متعددة المنصات من خلال السماح لك بتنفيذ أوامر الشل المألوفة مباشرة في جافا سكريبت. ومع ذلك، عندما يتعلق الأمر بتطوير الواجهة الأمامية - الذي يشير عادةً إلى الكود الذي يعمل في المتصفح - فإن ShellJS لا ينطبق مباشرة لأنه يعتمد على واجهات برمجة تطبيقات Node.js غير المتوفرة في بيئة المتصفح. أدناه، سأشرح سبب ذلك وكيف يمكنك مع ذلك استخدام ShellJS بفعالية في سياق سير عمل تطوير الواجهة الأمامية.

### لماذا لا يمكن لـ ShellJS العمل مباشرة في المتصفح
- **الاعتماد على Node.js**: تم بناء ShellJS على أساس وقت تشغيل Node.js، الذي يوفر واجهات برمجة تطبيقات للوصول إلى نظام الملفات، تنفيذ العمليات، وغيرها من العمليات على مستوى النظام. هذه الواجهات غير متوفرة في المتصفح بسبب نموذج الأمان المعزول.
- **قيود أمان المتصفح**: تمنع المتصفحات جافا سكريبت من الوصول إلى نظام الملفات المحلي أو تنفيذ أوامر عشوائية لحماية المستخدمين من البرامج النصية الضارة. نظرًا لأن أوامر ShellJS مثل `exec` (لتشغيل العمليات الخارجية) أو `cp` (لنسخ الملفات) تعتمد على هذه الإمكانيات، فلا يمكنها العمل في بيئة المتصفح.

نتيجة لذلك، لا يمكنك استخدام ShellJS مباشرة في جافا سكريبت من جانب العميل التي تعمل في المتصفح. ومع ذلك، لا يزال بإمكان ShellJS لعب دور قيم في تطوير الواجهة الأمامية من خلال دمجه في عمليات البناء أو أدوات التطوير الخاصة بك، والتي تعمل عادةً على Node.js.

### كيفية استخدام ShellJS في سير عمل تطوير الواجهة الأمامية
بينما لا يتم تنفيذ ShellJS في المتصفح، يمكنك الاستفادة منه في البرامج النصية القائمة على Node.js لأتمتة المهام التي تدعم تطوير الواجهة الأمامية. تعتمد مشاريع الواجهة الأمامية غالبًا على أدوات البناء مثل Webpack أو Gulp أو Grunt، التي تعمل على Node.js ويمكنها دمج ShellJS لتبسيط سير العمل. إليك كيفية القيام بذلك:

#### 1. تثبيت ShellJS
أولاً، تأكد من تثبيت Node.js على نظامك. ثم أضف ShellJS إلى مشروعك باستخدام npm أو yarn:

```bash
npm install shelljs
```

أو

```bash
yarn add shelljs
```

#### 2. إنشاء برنامج نصي Node.js باستخدام ShellJS
اكتب برنامجًا نصيًا يستخدم ShellJS لأداء مهام ذات صلة بمشروع الواجهة الأمامية الخاص بك، مثل نسخ الملفات، أو إنشاء الدلائل، أو تشغيل أدوات سطر الأوامر. احفظ هذا البرنامج النصي كملف `.js` (على سبيل المثال، `build.js`).

إليك برنامج نصي مثالٍ يقوم بإعداد أصول الواجهة الأمامية:

```javascript
const shell = require('shelljs');

// إنشاء دليل بناء إذا لم يكن موجودًا
shell.mkdir('-p', 'build');

// نسخ ملفات HTML إلى دليل البناء
shell.cp('-R', 'src/*.html', 'build/');

// تحويل Sass إلى CSS
shell.exec('sass src/styles.scss build/styles.css');

// نسخ ملفات جافا سكريبت
shell.cp('-R', 'src/*.js', 'build/');
```

- **`shell.mkdir('-p', 'build')`**: ينشئ دليل `build`، مع `-p` لضمان عدم ظهور خطأ إذا كان موجودًا بالفعل.
- **`shell.cp('-R', 'src/*.html', 'build/')`**: ينسخ جميع ملفات HTML من `src` إلى `build`، مع `-R` للنسخ العودي.
- **`shell.exec('sass src/styles.scss build/styles.css')`**: يشغل مترجم Sass لتوليد CSS.

#### 3. دمج البرنامج النصي في سير العمل الخاص بك
يمكنك تشغيل هذا البرنامج النصي بعدة طرق:
- **مباشرة عبر Node.js**:
  ```bash
  node build.js
  ```
- **كبرنامج نصي npm**: أضفه إلى `package.json` الخاص بك:
  ```json
  "scripts": {
    "build": "node build.js"
  }
  ```
  ثم شغّل:
  ```bash
  npm run build
  ```
- **مع أدوات البناء**: ادمج ShellJS في أدوات مثل Gulp. على سبيل المثال:
  ```javascript
  const gulp = require('gulp');
  const shell = require('shelljs');

  gulp.task('build', function(done) {
    shell.exec('sass src/styles.scss build/styles.css');
    shell.cp('-R', 'src/*.js', 'build/');
    done();
  });
  ```

#### 4. حالات الاستخدام في تطوير الواجهة الأمامية
يمكن لـ ShellJS أتمتة مهام متنوعة في سير عمل الواجهة الأمامية الخاص بك:
- **إدارة الأصول**: نسخ الصور، الخطوط، أو الملفات الثابتة الأخرى إلى دليل البناء.
- **معالجة CSS/جافا سكريبت**: تشغيل أدوات مثل Sass أو PostCSS أو UglifyJS عبر `shell.exec`.
- **الاختبار والتدقيق**: تنفيذ عدّادي الاختبار أو أدوات التدقيق (مثل `shell.exec('eslint src/*.js')`).
- **التحضير للنشر**: حزم الملفات أو تنظيف الدلائل (مثل `shell.rm('-rf', 'build/*')`).

### مثال: أتمتة عملية بناء الواجهة الأمامية
تخيل أنك تبني تطبيق ويب بسيط باستخدام HTML وSass وجافا سكريبت. إليك كيف يمكنك استخدام ShellJS لأتمتة البناء:

**هيكل الدليل**:
```
project/
├── src/
│   ├── index.html
│   ├── styles.scss
│   └── app.js
├── build.js
└── package.json
```

**build.js**:
```javascript
const shell = require('shelljs');

// تنظيف دليل البناء
shell.rm('-rf', 'build/*');

// إنشاء دليل البناء
shell.mkdir('-p', 'build');

// نسخ HTML
shell.cp('src/index.html', 'build/');

// تحويل Sass
shell.exec('sass src/styles.scss build/styles.css');

// نسخ جافا سكريبت
shell.cp('src/app.js', 'build/');
```

**package.json**:
```json
{
  "scripts": {
    "build": "node build.js"
  },
  "dependencies": {
    "shelljs": "^0.8.5"
  }
}
```

شغّل `npm run build`، وسوف يقوم ShellJS بإعداد دليل `build` الخاص بك بالملفات المترجمة والمنسوخة، جاهزة للنشر.

### النقاط الرئيسية
- **ليس للاستخدام في المتصفح**: لا يمكن لـ ShellJS العمل في المتصفح بسبب اعتماده على Node.js والعمليات على مستوى النظام.
- **مثالي لبرامج البناء النصية**: استخدمه في البرامج النصية القائمة على Node.js لأتمتة مهام الواجهة الأمامية مثل معالجة الملفات وتنفيذ الأوامر.
- **متعدد المنصات**: يضمن ShellJS عمل برامجك النصية بشكل متسق عبر Windows وLinux وmacOS، مما يجعله مثاليًا لبيئات التطوير المتنوعة.

من خلال دمج ShellJS في عمليات البناء التي تعمل بالطاقة من Node.js، يمكنك تعزيز سير عمل تطوير الواجهة الأمامية الخاص بك بأتمتة قوية، حتى لو لم يعمل مباشرة في المتصفح.