---
audio: false
generated: true
lang: ar
layout: post
title: كيف يعمل بروتوكول HTTPS
translated: true
type: note
---

دعوني أشرح كيفية عمل HTTPS، بما في ذلك SSL والشهادات وعملية التشفير والاختلافات بين TLS 1.2 و TLS 1.3، بطريقة واضحة وخطوة بخطوة.

---

### **ما هو HTTPS؟**
HTTPS هو اختصار لـ **بروتوكول نقل النص التشعبي الآمن**. إنه النسخة الآمنة من HTTP، البروتوكول المستخدم لنقل البيانات بين متصفحك وموقع الويب. يأتي جزء "الأمان" من إضافة طبقة من التشفير والمصادقة، توفرها **طبقة المقابس الآمنة (SSL)** أو البديل الحديث لها، **أمان طبقة النقل (TLS)**. لذا فإن HTTPS هو في الأساس HTTP يعمل فوق TLS (أو SSL تاريخيًا) للحفاظ على أمان بياناتك.

---

### **كيف يعمل HTTPS؟ مصافحة TLS**
عندما تزور موقع ويب يستخدم HTTPS (على سبيل المثال، `https://example.com`)، فإن متصفحك وخادم موقع الويب يقومان بإEstablish اتصال آمن قبل تبادل أي بيانات. هذه العملية تسمى **مصافحة TLS**. إليك كيف تعمل بخطوات بسيطة:

1. **تحية العميل**:
   - يرسل متصفحك رسالة إلى الخادم تقول: "مرحبًا! هذه هي نسخة TLS التي أدعمها (مثل TLS 1.3)، وخوارزميات التشفير (مجموعات التشفير) التي يمكنني استخدامها، وسلسلة عشوائية من البايتات (العشوائي الخاص بالعميل)."

2. **تحية الخادم**:
   - يرد الخادم قائلاً: "أهلاً بك! سأستخدم نسخة TLS هذه ومجموعة التشفير هذه من قائمتك. ها هي سلسلتي العشوائية (العشوائي الخاص بالخادم)."

3. **الشهادة**:
   - يرسل الخادم **شهادة SSL** الخاصة به، والتي تتضمن **مفتاحه العام** ويتم توقيعها من قبل **سلطة شهادات موثوقة (CA)**. تثبت هذه الشهادة هوية الخادم.

4. **تبادل مفتاح العميل**:
   - يتحقق متصفحك من الشهادة للتأكد من أنها سارية المفعول وموقعة من قبل CA موثوق. إذا نجحت، يقوم المتصفح بإنشاء **سر أولي رئيسي**، ويشفرها باستخدام المفتاح العام للخادم، ويرسلها إلى الخادم.

5. **مفاتيح الجلسة**:
   - يستخدم كل من المتصفح والخادم العشوائي الخاص بالعميل، والعشوائي الخاص بالخادم، والسر الأولي الرئيسي لتوليد **مفتاح الجلسة** نفسه بشكل مستقل. يُستخدم هذا المفتاح لتشفير وفك تشفير جميع البيانات أثناء الجلسة.

6. **انتهى**:
   - يرسل الطرفان رسالة "انتهى"، مشفرة بمفتاح الجلسة، لتأكيد أن الاتصال الآمن جاهز.

بمجرد اكتمال المصافحة، يتم تشفير جميع البيانات (مثل صفحات الويب والنماذج أو الملفات) باستخدام مفتاح الجلسة، مما يجعلها غير قابلة للقراءة لأي شخص قد يعترضها.

---

### **ما هي شهادات SSL وكيف تعمل؟**
**شهادة SSL** هي وثيقة رقمية تثبت هوية موقع ويب وتُمكّن التشفير. إليك ما تحتاج إلى معرفته:

- **المحتويات**: تتضمن الشهادة اسم نطاق موقع الويب، ومفتاحه العام، وتوقيعًا رقميًا من **سلطة شهادات (CA)**.
- **الغرض**: تضمن أن الخادم شرعي (على سبيل المثال، أنت تتصل حقًا بـ `example.com`، وليس موقعًا مزيفًا) وتوفر المفتاح العام للتشفير.
- **التحقق**: يقوم متصفحك بالتحقق من:
  1. هل الشهادة سارية المفعول (غير منتهية الصلاحية أو ملغاة)؟
  2. هل هي موقعة من قبل CA موثوق؟ (يحتوي المتصفحات على قائمة مدمجة بجهات CA الموثوقة، مثل DigiCert أو Let’s Encrypt.)
- إذا نجحت عمليات التحقق، يثق المتصفح في الخادم ويواصل المصافحة.

تعمل CA كطرف ثالث موثوق يضمن صحة موقع الويب. بدون هذا، يمكن للمهاجمين التظاهر بأنهم أي موقع وسرقة بياناتك.

---

### **خوارزمية التشفير**
يعتمد التشفير في HTTPS على مزيج من **التشفير غير المتماثل** و **التشفير المتماثل**:

1. **التشفير غير المتماثل** (أثناء المصافحة):
   - يستخدم **مفتاح عام** (يتم مشاركته علانية) و **مفتاح خاص** (يحتفظ به الخادم سرًا).
   - يقوم المتصفح بتشفير السر الأولي الرئيسي باستخدام المفتاح العام للخادم. فقط الخادم، بمفتاحه الخاص، يمكنه فك تشفيره.
   - أمثلة على الخوارزميات: RSA أو تشفير المنحنيات الإهليلجية (ECC).

2. **التشفير المتماثل** (لـلجلسة):
   - بمجرد إنشاء مفتاح الجلسة، يستخدم كلا الطرفين لتشفير وفك تشفير البيانات.
   - هذا أسرع من التشفير غير المتماثل وهو مثالي لعمليات نقل البيانات الكبيرة.
   - مثال على الخوارزمية: AES (معيار التشفير المتقدم).

تستخدم المصافحة التشفير غير المتماثل لمشاركة مفتاح الجلسة بأمان، ثم يتولى التشفير المتماثل الزمام من أجل الكفاءة.

---

### **الاختلافات بين TLS 1.2 و TLS 1.3**
**TLS 1.2** و **TLS 1.3** هما إصداران من بروتوكول TLS، مع كون TLS 1.3 هو الإصدار الأحدث والمُحسّن. فيما يلي الاختلافات الرئيسية:

| **الميزة**               | **TLS 1.2**                               | **TLS 1.3**                               |
|---------------------------|-------------------------------------------|-------------------------------------------|
| **سرعة المصافحة**        | رحلات ذهاب وإياب متعددة بين العميل والخادم، مما يضيف زمن انتقال. | رحلات ذهاب وإياب أقل، غالبًا رحلة واحدة فقط، لاتصالات أسرع. يمكن إرسال البيانات على الفور ("0-RTT") عند إعادة الاتصال. |
| **مجموعات التشفير**      | يدعم خوارزميات تشفير أقدم وأقل أمانًا (مثل SHA-1). | يزيل مجموعات التشفير القديمة، ويستخدم فقط الخوارزميات الحديثة والآمنة (مثل AES-GCM). |
| **الخصوصية**              | يتم إرسال بعض بيانات المصافحة (مثل الشهادات) كنص عادي. | يتم تشفير المصافحة بالكامل تقريبًا، مما يخفي المزيد من التفاصيل عن المتطفلين. |
| **استئناف 0-RTT**         | غير متاح.                                 | يسمح بإرسال البيانات فورًا عند إعادة الاتصال، لكنه يحمل مخاطر هجمات إعادة التشغيل إذا لم يتم تأمينها بشكل صحيح. |
| **الأمان**                | معرض لبعض الهجمات بسبب الميزات القديمة.   | أقوى في التصميم، مع إزالة الخيارات الضعيفة. |

باختصار، TLS 1.3 **أسرع**، **أكثر أمانًا**، و **أكثر خصوصية** من TLS 1.2، مما يجعله المعيار لـ HTTPS الحديث.

---

### **خلاصة الأمر**
يؤمن HTTPS اتصالات الويب من خلال:
1. استخدام **مصافحة TLS** لإEstablish اتصال مشفر.
2. الاعتماد على **شهادات SSL** من جهات CA موثوقة للتحقق من هوية الخادم.
3. الجمع بين **التشفير غير المتماثل** (للمصافحة) و **التشفير المتماثل** (لنقل البيانات) لحماية بياناتك.
4. التطور مع بروتوكولات مثل **TLS 1.3**، الذي يُحسّن على TLS 1.2 بسرعة وأمان وخصوصية أفضل.

هذا هو جوهر كيفية حفاظ HTTPS على سلامة تصفحك! دعني أعلم إذا كنت تريد مني الخوض更深ًا في أي جزء.