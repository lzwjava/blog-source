---
audio: false
generated: false
lang: ar
layout: post
title: كيف يعمل HTTPS
translated: true
---

بسم الله الرحمن الرحيم

فلتشرح لك كيف يعمل HTTPS، بما في ذلك SSL، الشهادات، عملية التشفير، وأفرق بين TLS 1.2 و TLS 1.3، بطريقة واضحة ومفصلة.

---

### **ما هو HTTPS؟**
HTTPS هو اختصار لـ **Hypertext Transfer Protocol Secure**. إنه النسخة الآمنة من HTTP، البروتوكول المستخدم لنقل البيانات بين متصفحك وموقع الويب. الجزء الآمن يأتي من إضافة طبقة من التشفير والتحقق من الهوية، التي يوفرها **SSL (Secure Sockets Layer)** أو بديلها الحديث **TLS (Transport Layer Security)**. لذلك، HTTPS هو في الأساس HTTP يعمل فوق TLS (أو تاريخيًا SSL) لحماية بياناتك.

---

### **كيف يعمل HTTPS؟ - TLS Handshake**
عندما تزور موقعًا على الإنترنت باستخدام HTTPS (مثل `https://example.com`), يقوم متصفحك وخادم الموقع بإنشاء اتصال آمن قبل تبادل أي بيانات. يُعرف هذا العملية باسم **TLS handshake**. إليك كيف يعمل ذلك في خطوات بسيطة:

1. **Client Hello**:
   - يرسل متصفحك رسالة إلى الخادم تقول، "مرحبًا! إليك الإصدار الذي أدرجه من TLS (مثل TLS 1.3)، وألغوريثم التشفير (cipher suites) الذي يمكنني استخدامه، وسلسلة عشوائية من البايتات (client random)."

2. **Server Hello**:
   - يرد الخادم، "مرحبًا! سأستخدم هذا الإصدار من TLS و هذا من قائمة ألغوريثم التشفير. إليك سلسلة عشوائية (server random)."

3. **Certificate**:
   - يرسل الخادم **شهادة SSL** التي تتضمن **مفتاحه العام** ويوقعها **مركز الشهادات (CA)**. هذه الشهادة تثبت هوية الخادم.

4. **Client Key Exchange**:
   - يفتش متصفحك الشهادة لضمان صحتها وتوقيعها من مركز الشهادات الموثوق به. إذا مرت الفحص، يخلق المتصفح **مفتاحًا سريًا** ويشفره بمفتاح الخادم العام، ثم يرسله إلى الخادم.

5. **Session Keys**:
   - يستخدم المتصفح والخادم كلاهما من client random، server random، و pre-master secret لإنشاء نفس **مفتاح الجلسة**. يستخدم هذا المفتاح لتشفير وتشفير جميع البيانات خلال الجلسة.

6. **Finished**:
   - يرسل كلتا الجوانب رسالة "finished" مشفرة بمفتاح الجلسة لتأكيد أن الاتصال الآمن جاهز.

بعد إتمام handshake، يتم تشفير جميع البيانات (مثل صفحات الويب، الاستمارات، أو الملفات) بمفتاح الجلسة، مما يجعلها غير قابلة للقراءة لأي شخص قد يسرقها.

---

### **ما هي شهادات SSL وكيف تعمل؟**
**شهادة SSL** هي وثيقة رقمية تثبت هوية موقع الويب وتتيح التشفير. إليك ما تحتاج إلى معرفته:

- **المحتوى**: تحتوي الشهادة على اسم نطاق الموقع، ومفتاحه العام، ووقعة رقمية من **مركز الشهادات (CA)**.
- **الغرض**: تضمن أن الخادم شرعي (مثل أنك تربط بالفعل إلى `example.com` وليس إلى موقع مزيف) وتوفر المفتاح العام للتشفير.
- **التحقق**: يفتش المتصفح:
  1. هل الشهادة صالحة (غير منتهية أو ملغاة)؟
  2. هل وقعتها مركز شهادات موثوق به؟ (يحتوي المتصفحات على قائمة مدمجة من مراكز الشهادات الموثوقة مثل DigiCert أو Let’s Encrypt.)
- إذا مرت الفحوصات، يثق المتصفح بالخادم ويواصل handshake.

يعمل مركز الشهادات كطرف ثالث موثوق به يضمن هوية الموقع. بدون ذلك، يمكن للمهاجمين أن يتظاهروا بأنهم أي موقع ويسرقوا بياناتك.

---

### **الغرض من التشفير**
يستند التشفير في HTTPS إلى مزيج من **التشفير غير المتجانس** و **التشفير المتجانس**:

1. **التشفير غير المتجانس** (خلال handshake):
   - يستخدم **مفتاحًا عامًا** (مشاركة علنًا) و **مفتاحًا سريًا** (يحتفظ به الخادم سرًا).
   - يشفّر المتصفح pre-master secret بمفتاح الخادم العام. فقط الخادم، بمفتاحه السري، يمكن أن يفسره.
   - أمثلة على الألغوريثم: RSA أو التشفير بالمنحنيات الإهليلجية (ECC).

2. **التشفير المتجانس** (للجلسة):
   - بعد إنشاء مفتاح الجلسة، يستخدم كلتا الجوانب مفتاح الجلسة لتشفير وتشفير البيانات.
   - هذا أسرع من التشفير غير المتجانس ويجعله مثاليًا لنقل البيانات الكبيرة.
   - أمثلة على الألغوريثم: AES (Advanced Encryption Standard).

يستخدم handshake التشفير غير المتجانس لنقل مفتاح الجلسة بشكل آمن، ثم يتولى التشفير المتجانس العمل من أجل الكفاءة.

---

### **أفرق بين TLS 1.2 و TLS 1.3**
**TLS 1.2** و **TLS 1.3** هما إصدارات من بروتوكول TLS، حيث TLS 1.3 هو الإصدار الجديد والمحسّن. إليك الأفرق الرئيسية:

| **الميزة**              | **TLS 1.2**                              | **TLS 1.3**                              |
|---------------------------|------------------------------------------|------------------------------------------|
| **سرعة handshake**       | عدة رحلات بين العميل والخادم، مما يضيف تأخير. | أقل رحلات، غالبًا واحدة، للاتصالات الأسرع. يمكن إرسال البيانات فورًا (“0-RTT”) عند إعادة الاتصال. |
| **Cipher Suites**         | يدعم ألغوريثم التشفير القديم، الأقل أمانًا (مثل SHA-1). | يبعد الألغوريثم القديم، يستخدم فقط الألغوريثم الحديث والأماني (مثل AES-GCM). |
| **الخصوصية**               | بعض بيانات handshake (مثل الشهادات) يتم إرسالها في نص عادي. | معظم handshake مشفرة، تخفي المزيد من التفاصيل عن المستمعين. |
| **0-RTT Resumption**      | غير متاح.                           | يسمح بإرسال البيانات فورًا عند إعادة الاتصال، ولكن هناك خطر الهجمات المتكررة إذا لم يتم تأمينها بشكل صحيح. |
| **الأمان**              | عرضة لبعض الهجمات بسبب الميزات القديمة. | أقوى من التصميم، يبعد الخيارات الضعيفة. |

في الختام، TLS 1.3 **أسرع** و **أمان** و **أكثر خصوصية** من TLS 1.2، مما يجعله المعيار للHTTPS الحديث.

---

### **جمع كل شيء**
يضمن HTTPS أمان التواصل عبر الإنترنت من خلال:
1. استخدام **TLS handshake** لإنشاء اتصال مشفّر.
2. الاعتماد على **شهادات SSL** من مراكز الشهادات الموثوقة لتأكيد هوية الخادم.
3. استخدام **التشفير غير المتجانس** (للhandshake) و **التشفير المتجانس** (لنقل البيانات) لحماية بياناتك.
4. التطور مع بروتوكولات مثل **TLS 1.3**، التي تحسن على TLS 1.2 من خلال السرعة والأمان والخصوصية.

هذا هو جوهر كيفية عمل HTTPS لحماية تصفحك! أخبرني إذا كنت ترغب في غوص عميق في أي جزء.