---
audio: false
generated: true
image: false
lang: ar
layout: post
model: x-ai/grok-4-fast
title: حل نزاعات قفل APT
translated: true
type: note
---

### فهم المشكلة
أنت تواجه تعارضًا شائعًا في قفل APT على أنظمة Ubuntu/Debian. ملف القفل `/var/lib/dpkg/lock-frontend` محجوز بواسطة عملية `apt` أخرى (معرف العملية PID 6761)، مما يمنع أمر `--fix-broken install` الخاص بك من المتابعة. يحدث هذا غالبًا إذا كانت عملية تحديث أو تثبيت أو ترقية عالقة أو قيد التشغيل في الخلفية. إن الإيقاف المؤقت باستخدام `Ctrl+Z` (الذي وضعها في مهمة [1]) لا يحرر القفل.

### خطوات الحل
اتبع هذه الخطوات بالترتيب — **ابدأ بالفحص، وليس بإنهاء العملية**، لتجنب مقاطعة عملية شرعية.

1. **افحص العملية قيد التشغيل**  
   تحقق مما يستخدم معرف العملية PID 6761:  
   ```
   ps aux | grep 6761
   ```  
   أو بشكل أوسع:  
   ```
   ps aux | grep -E "(apt|dpkg)"
   ```  
   - إذا كانت عملية تحديث نشطة (عبر `apt upgrade` أو برنامج تحديث البرامج)، انتظر حتى تنتهي أو دع تكتمل.  
   - إذا كانت عالقة (لا يوجد إخراج أو أنها متجمدة)، انتقل إلى إنهائها.

2. **أنهِ العملية المعيقة (إذا كانت عالقة)**  
   أوقفها برفق:  
   ```
   sudo kill 6761
   ```  
   إذا لم ينجح ذلك (تتجاهل العملية إشارة SIGTERM):  
   ```
   sudo kill -9 6761
   ```  
   - تحقق من زوالها: `ps aux | grep 6761` (يجب ألا يعود بنتيجة ذات صلة).

3. **احذف ملفات القفل**  
   بمجرد انتهاء العملية، امسح أقفال APT:  
   ```
   sudo rm /var/lib/dpkg/lock-frontend
   sudo rm /var/lib/dpkg/lock
   sudo rm /var/lib/apt/lists/lock
   ```  
   - من الآمن حذف هذه الملفات إذا لم تكن هناك عمليات APT قيد التشغيل.

4. **حدّث قوائم الحزم**  
   حدّث ذاكرة التخزين المؤقت:  
   ```
   sudo dpkg --configure -a
   sudo apt update
   ```

5. **استأنف أو أعد تشغيل أمرك**  
   -لاستئناف المهمة المعلقة: `fg` (تعيد المهمة [1]).  
   - أو ما عليك سوى إعادة التشغيل: `sudo apt --fix-broken install`.  
   إذا استمر الفشل، جرب `sudo apt install -f` (مطابق لـ `--fix-broken`).

### نصائح للوقاية
- تجنب تشغيل أوامر APT متعددة في وقت واحد.  
- إذا كنت تستخدم أداة تحديث رسومية (GUI)، فأغلقها قبل العمليات عبر سطر الأوامر (CLI).  
- بالنسبة للمشكلات المستمرة، تحقق من مساحة القرص (`df -h`) أو السجلات (`sudo journalctl -u apt`).

إذا لم يحل هذا المشكلة أو رأيت أخطاء، الصق إخراج الخطوة 1 لمزيد من المساعدة.

[استكشاف أخطاء قفل APT في أوبونتو وإصلاحها](https://askubuntu.com/questions/248748/could-not-get-lock-var-lib-dpkg-lock)  
[دليل إدارة حزم دبيان](https://wiki.debian.org/AptConfiguration)