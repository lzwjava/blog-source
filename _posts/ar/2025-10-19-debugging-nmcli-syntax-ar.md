---
audio: false
generated: true
image: false
lang: ar
layout: post
model: x-ai/grok-4-fast
title: تصحيح الأخطاء الشائعة في بناء أوامر nmcli
translated: true
type: note
---

نعم، أنت محق تماماً— البرمجة (خاصة عند التعامل مع أوامر shell، العمليات الفرعية، أو أدوات مثل `nmcli`) مليئة حقاً بهذه النوعية من المفاجآت التركيبية الدقيقة. هذه ليست "أخطاء" بمعنى نظام معطل أو عطل غير قابل للإصلاح؛ إنها مجرد خصوصيات إصدار معينة أو تفضيلات غير موثقة في واجهات سطر الأوامر تعترض طريق الجميع في مرحلة ما. تتطور الأدوات، تتأخر الوثائق، وحرف واحد فقط (مثل `iface` مقابل `ifname`) يمكنه إيقاف كل شيء. هذا أمر محبط ولكنه شائع جداً، والإصلاح يكون عادةً واضحاً بمجرد اكتشافه.

من الناتج الذي شاركته، يبدو أن النص البرمجي واجه هذه المشكلة بالضبط عبر شبكات متعددة: رفض `nmcli` الوسيطة `iface` باعتبارها غير صالحة (وهو أمر منطقي، حيث كانت الوسيطة الرسمية دائماً هي `ifname` لتحديد اسم الواجهة في أوامر الاتصال). التحديث الذي طبقته—الاستبدال بـ `ifname {interface}` في السطر 113—يجب أن يحل المشكلة بشكل نظيف. هذا الاختلاف دقيق ومحدود، لذا لا يوجد خطر من إدخال آثار جانبية جديدة.

### اقتراح اختبار سريع
للتحقق من الإصلاح دون إعادة فحص جميع الشبكات الـ 35، يمكنك إضافة طباعة تصحيح مؤقتة مباشرة بعد استدعاء `subprocess.run` في الدالة `test_wifi_connection` (حوالي السطر 114):

```python
result = subprocess.run(cmd, shell=True, capture_output=True, text=True, timeout=timeout)
print(f"Debug: Ran '{cmd}' -> returncode: {result.returncode}, stdout: '{result.stdout}', stderr: '{result.stderr}'")  # أضف هذا السطر
```

شغّلها على شبكة أو شبكتين فقط (على سبيل المثال، عن طريق تقسيم القائمة مؤقتاً)، ويجب أن تظهر الآن محاولة اتصال ناجحة أو خطأ أكثر وضوحاً (مثل فشل المصادقة) بدلاً من شكوى الوسيطة غير الصالحة.

إذا كنت لا تزال تواجه عقبات بعد هذا (على سبيل المثال، على شبكات محددة مثل "HONG GOR 1" أو الشبكات غير المسماة بـ `--`)، الصق الناتج الجديد هنا—قد تكون المشكلة متعلقة بترميز كلمة المرور، أو أحرف مخفية في أسماء الشبكات SSIDs، أو حتى خصوصيات برنامج التشغيل على جهازك. يمكننا التكرار بناءً على ذلك. كيف تبدو نتائج التشغيل التالية؟