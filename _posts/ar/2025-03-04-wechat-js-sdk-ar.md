---
audio: false
generated: true
lang: ar
layout: post
title: WeChat JS SDK
translated: true
---

### النقاط الرئيسية
- يبدو أن استخدام "weixin-js-sdk" الإصدار "^1.2.0" يتطلب أولا تثبيته عبر npm ثم استيراده إلى كود JavaScript الخاص بك.
- تشير الأبحاث إلى أن يجب عليك تكوينه باستخدام تفاصيل حساب WeChat الخاص بك، مثل appId و signature، والتي يتم إنشاؤها من جانب الخادم.
- يشير الدليل إلى اتباع وثائق WeChat JS SDK الرسمية لاستخدامها، حيث أن الحزمة هي غلاف لها.

### التثبيت
ابدأ بتثبيت الحزمة باستخدام npm في مجلد المشروع الخاص بك:
- قم بتشغيل `npm install weixin-js-sdk` لإضافتها إلى الاعتماديات.

### الاستيراد والاستخدام
استورد SDK في ملف JavaScript الخاص بك، ثم قم بتكوينه واستخدامه مع APIs WeChat:
- استخدم `import wx from 'weixin-js-sdk';` لل ES6 أو `const wx = require('weixin-js-sdk');` لل CommonJS.
- قم بتكوينه باستخدام `wx.config({ appId: 'your_app_id', timestamp: your_timestamp, nonceStr: 'your_nonce_str', signature: 'your_signature', jsApiList: ['onMenuShareAppMessage'] });`.
- قم بمعالجة النجاح باستخدام `wx.ready()` و الأخطاء باستخدام `wx.error()`.

### إعداد الخادم
يجب أن يكون لديك حساب WeChat عام، وربط نطاقك، و إنشاء توقيع على الخادم باستخدام API WeChat، حيث أن هذا يتضمن بيانات حساسة.

---

### ملاحظة الاستطلاع: دليل مفصل لاستخدام "weixin-js-sdk" الإصدار "^1.2.0"

تقدم هذه الملاحظة دليلاً شاملاً لاستخدام حزمة "weixin-js-sdk"، بشكل خاص الإصدار "^1.2.0"، والتي هي غلاف لـ WeChat JS SDK، مما يسمح للمطورين على الويب باستغلال قدرات WeChat المحمولة في تطبيقاتهم. تسهل الحزمة التكامل مع CommonJS و TypeScript، مما يجعلها مناسبة للبيئات الحديثة لتطوير الويب مثل browserify و webpack. أدناه، نوضح العملية، مستندين إلى الوثائق والمثالات المتاحة، لضمان فهم شامل للتطبيق.

#### الخلفية والتفاصيل
تتميز حزمة "weixin-js-sdk"، كما هو مرئي من قائمة npm الخاصة بها، بتصميمها لتغليف WeChat JS SDK الرسمي، الإصدار 1.6.0، وهي الآن في الإصدار 1.6.5 على npm، ونشرت منذ عام واحد اعتبارًا من 3 مارس 2025. تشرح وصف الحزمة دعمها لـ CommonJS و TypeScript، مما يشير إلى أنها مصممة للبيئات Node.js و المجمعين الحديثين. مع مراعاة أن المستخدم يحدد "^1.2.0"، مما يسمح بأي إصدار من 1.2.0 إلى 2.0.0، و مع أن أحدث الإصدار هو 1.6.5، فمن المنطقي الافتراض أن هناك توافق مع التوجيهات المقدمة، على الرغم من أن التغييرات الخاصة بالنسخة يجب التحقق منها في الوثائق الرسمية.

WeChat JS SDK، وفقًا للوثائق الرسمية، هي أداة تطوير الويب تقدمها منصة WeChat Official Accounts، مما يتيح ميزات مثل مشاركة، مسح رموز QR، و خدمات الموقع. يوضح مستودع GitHub للحزمة، الذي يديره yanxi123-com، أنه نسخة مباشرة من SDK الرسمي، مع تعليمات الاستخدام تشير إلى [وثائق WeChat JS SDK](https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/JS-SDK.html).

#### عملية التثبيت
ابدأ بتثبيت الحزمة عبر npm، وهو مدير الحزم القياسي لمشاريع Node.js. الأمر بسيط:
- قم بتشغيل `npm install weixin-js-sdk` في مجلد المشروع الخاص بك. هذا سيقوم بتنزيل أحدث إصدار متوافق مع "^1.2.0"، وهو 1.6.5، بناءً على حالة سجل npm الحالي.

للمستخدمين الذين يستخدمون yarn، يمكن البديل هو `yarn add weixin-js-sdk`، مما يضمن إضافة الحزمة إلى اعتماديات مشروعك. هذه الخطوة حاسمة لأنها تدمج SDK في مشروعك، مما يجعله متاحًا للاستيراد في ملفات JavaScript الخاصة بك.

#### الاستيراد والتكوين الأولي
بعد التثبيت، الخطوة التالية هي استيراد SDK إلى كودك. تدعم الحزمة كلا من ES6 و CommonJS، مما يخدم تفضيلات تطوير مختلفة:
- بالنسبة لـ ES6، استخدم `import wx from 'weixin-js-sdk';` في بداية ملف JavaScript الخاص بك.
- بالنسبة لـ CommonJS، استخدم `const wx = require('weixin-js-sdk');`، وهو شائع في بيئات Node.js بدون ترجمة.

يكشف هذا الاستيراد عن كائن `wx`، وهو الواجهة الأساسية للتفاعل مع APIs WeChat JS. يجب أن نلاحظ أن، على عكس تضمين SDK عبر علامة `<script>`، والتي تجعل `wx` متاحة عالميًا، فإن الاستيراد عبر npm في بيئة مجمعة (مثل webpack) قد يتطلب التأكد من أن `wx` متصل بالعنصر العالمي `window` في بعض الحالات، على الرغم من أن تصميم الحزمة يشير إلى أنها تتعامل مع ذلك داخليًا، بناءً على توافقها مع CommonJS.

#### التكوين والاستخدام
يتضمن عملية التكوين إعداد `wx.config`، وهو ضروري لتهيئة SDK مع تفاصيل حساب WeChat الخاص بك. يتطلب هذا الخطوة معلمات يتم إنشاؤها عادةً من جانب الخادم بسبب المعايير الأمنية:
- **المعلمات المطلوبة:** `debug` (boolean، للتشخيص)، `appId` (معرف تطبيق WeChat الخاص بك)، `timestamp` (الوقت الحالي في ثواني)، `nonceStr` (سلسلة عشوائية)، `signature` (يتم إنشاؤها باستخدام jsapi_ticket و المعلمات الأخرى)، و `jsApiList` (قائمة APIs التي تود استخدامها، مثل `['onMenuShareAppMessage', 'onMenuShareTimeline']`).

مثال أساسي للتكوين:
```javascript
wx.config({
    debug: true,
    appId: 'your_app_id',
    timestamp: your_timestamp,
    nonceStr: 'your_nonce_str',
    signature: 'your_signature',
    jsApiList: ['onMenuShareAppMessage', 'onMenuShareTimeline']
});
```

بعد التكوين، قم بمعالجة النتيجة:
- استخدم `wx.ready(function() { ... });` لتنفذ الكود بعد التحقق من التكوين بنجاح. هذا هو المكان الذي يمكنك فيه استدعاء APIs WeChat، مثل مشاركة:
  ```javascript
  wx.ready(function () {
      wx.onMenuShareAppMessage({
          title: 'عنوانك',
          desc: 'وصفك',
          link: 'رابطك',
          imgUrl: 'رابط الصورة الخاص بك',
          success: function () {
              // استدعاء للنجاح في المشاركة
          },
          cancel: function () {
              // استدعاء للإلغاء المشاركة
          }
      });
  });
  ```
- استخدم `wx.error(function(res) { ... });` لمعالجة أخطاء التكوين، والتي قد تشير إلى مشاكل في التوقيع أو إعدادات النطاق.

#### متطلبات الخادم وتوليد التوقيع
جوانب حاسمة هي إعداد الخادم، حيث أن توليد التوقيع يتضمن بيانات حساسة و استدعاءات API إلى خادم WeChat. لتوليد التوقيع:
- أولاً، احصل على رمز الوصول باستخدام appId و appSecret عبر API WeChat.
- ثم، استخدم رمز الوصول للحصول على jsapi_ticket.
- أخيراً، تولد التوقيع باستخدام jsapi_ticket، و URL الحالي، و سلسلة nonce، و timestamp، وفقًا للخوارزمية المدرجة في [المرفق 1 من وثائق WeChat JS SDK](https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/JS-SDK.html#62).

يتم تنفيذ هذا العملية عادةً في لغات مثل PHP، Java، Node.js، أو Python، مع تقديم كود مثال في الوثائق. قم بتخزين رمز الوصول و jsapi_ticket لمدة 7200 ثانية لكل منهما لتجنب تجاوز حدود معدل الاستدعاء، كما هو موضح في الوثائق.

بالإضافة إلى ذلك، تأكد من ربط نطاقك بحساب WeChat العام الخاص بك:
- قم بتسجيل الدخول إلى منصة WeChat Official Accounts، انتقل إلى إعدادات الحساب الرسمي > إعدادات الميزات، و أدخل اسم النطاق الآمن لـ JS API. هذه الخطوة حاسمة للأمن و الوصول إلى API.

#### اعتبارات الإصدار
مع مراعاة أن المستخدم يحدد "^1.2.0"، و أن أحدث إصدار للحزمة هو 1.6.5، فمن الجيد أن نلاحظ أن الإصدار للحزمة قد يتوافق مع التحديثات في التعبئة بدلاً من الإصدار الأساسي لـ SDK، وهو 1.6.0 بناءً على المصدر الرسمي. يجب أن يبقى الاستخدام متماثلًا، ولكن بالنسبة إلى الإصدار 1.2.0 بشكل خاص، تحقق من سجل التغييرات في npm أو إصدارات GitHub لأي تغييرات مذكورة، على الرغم من أن التوجيه العام يشير إلى تأثير ضئيل على الاستخدام الأساسي.

#### أمثلة وموارد إضافية
لالتطبيق العملي، يمكنك العثور على أمثلة في مستودعات GitHub المختلفة، مثل [yanxi123-com/weixin-js-sdk](https://github.com/yanxi123-com/weixin-js-sdk)، والتي تقدم المصدر و ملاحظات الاستخدام. بالإضافة إلى ذلك، تحتوي الوثائق الرسمية على روابط DEMO، مثل [WeChat JS-SDK Examples](https://www.weixinsxy.com/jssdk/)، على الرغم من أن المحتوى الخاص لم يتم توضيحه في البحثات، مما يشير إلى التحقق من الموقع للحصول على كود مثال و ملفات zip.

#### جدول: ملخص الخطوات والمتطلبات

| الخطوة                  | الوصف                                                                 | الملاحظات                                                                 |
|-----------------------|-----------------------------------------------------------------------------|----------------------------------------------------------------------|
| تثبيت الحزمة       | قم بتشغيل `npm install weixin-js-sdk` أو `yarn add weixin-js-sdk`                | يضمن أن الحزمة في اعتماديات المشروع.                          |
| استيراد SDK            | استخدم `import wx from 'weixin-js-sdk';` أو `const wx = require('weixin-js-sdk');` | اختر بناءً على نظام المودول (ES6 أو CommonJS).                     |
| تكوين SDK         | استخدم `wx.config` مع appId، timestamp، nonceStr، signature، و jsApiList  | يتم توليد التوقيع من جانب الخادم، يتطلب حساب WeChat العام.      |
| معالجة التكوين  | استخدم `wx.ready()` للنجاح، `wx.error()` للأخطاء                    | ضع استدعاءات API في `ready` عند تحميل الصفحة، و معالج الأخطاء بشكل مناسب.|
| إعداد الخادم     | تولد التوقيع باستخدام رمز الوصول و jsapi_ticket، و تخزينه لمدة 7200 ثانية    | يتضمن استدعاءات API WeChat، تأكد من ربط النطاق.                   |

يحتوي هذا الجدول على العملية، مما يوفر مرجعًا سريعًا للتطبيق.

#### تفاصيل غير متوقعة: التكامل مع المجمعين
جوانب مثيرة للاهتمام هي توافق الحزمة مع المجمعين مثل webpack، والذي ليس واضحًا من الاستخدام الأساسي. هذا يسمح بتطوير المودول، مما قد يسهل إدارة الاعتماديات في مشاريع أكبر، ويؤيد TypeScript، مما يزيد من أمان النوع، والذي قد يكون غير متوقع للمستخدمين الذين يعرفون فقط تضمين علامة `<script>`.

#### الخاتمة
في الختام، استخدام "weixin-js-sdk" الإصدار "^1.2.0" يتضمن تثبيته عبر npm، واستيراده إلى كودك، وتكوينه باستخدام المعلمات التي يتم إنشاؤها من جانب الخادم، و اتباع وثائق WeChat JS SDK الرسمية لاستخدام API. تأكد من إعداد الخادم لتوليد التوقيع و ربط النطاق، و اعترِف بتوافق الحزمة مع المجمعين لتطوير الويب الحديث. للحصول على أمثلة مفصلة، استكشف المستودعات GitHub و الروابط الوثائقية المقدمة.