---
audio: false
generated: true
lang: ar
layout: post
title: SDK WeChat لـ JavaScript
translated: true
type: note
---

### النقاط الرئيسية
- يبدو من المرجح أنه لاستخدام "weixin-js-sdk" الإصدار "^1.2.0"، تقوم أولاً بتثبيته عبر npm ثم تستورده إلى كود JavaScript الخاص بك.
- تشير الأبحاث إلى أنك تقوم بتكوينه باستخدام تفاصيل حساب WeChat العام الخاص بك، مثل appId والتوقيع، المُنشأة من جانب الخادم.
- تميل الأدلة إلى اتباع الوثائق الرسمية لـ WeChat JS SDK للاستخدام، حيث أن الحزمة هي غلاف لها.

### التثبيت
ابدأ بتثبيت الحزمة باستخدام npm في دليل مشروعك:
- قم بتشغيل `npm install weixin-js-sdk` لإضافتها إلى التبعيات الخاصة بك.

### الاستيراد والاستخدام
قم باستيراد SDK في ملف JavaScript الخاص بك، ثم قم بتكوينه واستخدامه مع واجهات برمجة تطبيقات WeChat:
- استخدم `import wx from 'weixin-js-sdk';` لـ ES6 أو `const wx = require('weixin-js-sdk');` لـ CommonJS.
- قم بالتكوين باستخدام `wx.config({ appId: 'your_app_id', timestamp: your_timestamp, nonceStr: 'your_nonce_str', signature: 'your_signature', jsApiList: ['onMenuShareAppMessage'] });`.
- تعامل مع النجاح باستخدام `wx.ready()` والأخطاء باستخدام `wx.error()`.

### الإعداد من جانب الخادم
لاحظ أنك ستحتاج إلى حساب WeChat عام، وربط نطاقك، وإنشاء توقيع على الخادم باستخدام واجهة برمجة تطبيقات WeChat، حيث أن هذا يتضمن بيانات اعتماد حساسة.

---

### ملاحظة المسح: دليل مفصل حول استخدام "weixin-js-sdk" الإصدار "^1.2.0"

توفر هذه الملاحظة دليلاً شاملاً حول استخدام حزمة "weixin-js-sdk"، تحديدًا الإصدار "^1.2.0"، وهي غلاف لـ WeChat JS SDK، مما يمكن مطوري الويب من الاستفادة من إمكانيات WeChat المحمولة داخل تطبيقاتهم. تسهل الحزمة التكامل مع CommonJS و TypeScript، مما يجعلها مناسبة لبيئات تطوير الويب الحديثة مثل browserify و webpack. أدناه، نفصل العملية، مستندين إلى الوثائق والأمثلة المتاحة، لضمان فهم شامل للتنفيذ.

#### الخلفية والسياق
تم تصميم حزمة "weixin-js-sdk"، كما لوحظ من قائمة npm الخاصة بها، لتغليف WeChat JS SDK الرسمي، الإصدار 1.6.0، وهي حاليًا في الإصدار 1.6.5 على npm، نُشرت منذ عام اعتبارًا من 3 مارس 2025. يسلط وصف الحزمة الضوء على دعمها لـ CommonJS و TypeScript، مما يشير إلى أنها مصممة خصيصًا لبيئات Node.js والحزم الحديثة. نظرًا لمواصفات المستخدم لـ "^1.2.0"، الذي يسمح بأي إصدار من 1.2.0 فما فوق ولكن ليس بما في ذلك 2.0.0، ونظرًا لأن أحدث إصدار هو 1.6.5، فمن المعقول افتراض التوافق مع التوجيهات المقدمة، على الرغم من أنه يجب التحقق من التغييرات الخاصة بالإصدار في الوثائق الرسمية.

إن WeChat JS SDK، وفقًا للوثائق الرسمية، هو مجموعة أدوات تطوير ويب تقدمها منصة حسابات WeChat الرسمية، مما يمكن من ميزات مثل المشاركة ومسح رموز QR وخدمات الموقع. يعزز مستودع GitHub الخاص بالحزمة، الذي يحافظ عليه yanxi123-com، أنها منفذ مباشر لـ SDK الرسمي، مع تعليمات استخدام تشير إلى [وثائق WeChat JS SDK](https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/JS-SDK.html).

#### عملية التثبيت
للبدء، قم بتثبيت الحزمة عبر npm، وهو مدير الحزم القياسي لمشاريع Node.js. الأمر واضح ومباشر:
- نفذ `npm install weixin-js-sdk` في دليل مشروعك. سيؤدي هذا إلى تنزيل أحدث إصدار متوافق مع "^1.2.0"، على الأرجح 1.6.5، نظرًا للحالة الحالية لسجل npm.

لأولئك الذين يستخدمون yarn، سيكون البديل هو `yarn add weixin-js-sdk`، مما يضمن إضافة الحزمة إلى تبعيات مشروعك. هذه الخطوة حاسمة لأنها تدمج SDK في مشروعك، مما يجعله متاحًا للاستيراد في ملفات JavaScript الخاصة بك.

#### الاستيراد والإعداد الأولي
بمجرد التثبيت، الخطوة التالية هي استيراد SDK إلى الكود الخاص بك. تدعم الحزمة كل من وحدات ES6 و CommonJS، لتلبي تفضيلات التطوير المختلفة:
- لـ ES6، استخدم `import wx from 'weixin-js-sdk';` في أعلى ملف JavaScript الخاص بك.
- لـ CommonJS، استخدم `const wx = require('weixin-js-sdk');`، وهو شائع في بيئات Node.js بدون تحويل.

يعرض هذا الاستيراد كائن `wx`، وهو الواجهة الأساسية للتفاعل مع واجهات برمجة تطبيقات JS الخاصة بـ WeChat. من المهم ملاحظة أنه، على عكس تضمين SDK عبر علامة script، مما يجعل `wx` متاحًا عالميًا، فإن الاستيراد عبر npm في بيئة مجمعة (مثل webpack) قد يتطلب التأكد من إرفاق `wx` بكائن النافذة العالمي window لبعض حالات الاستخدام، على الرغم من أن تصميم الحزمة يشير إلى أنها تتعامل مع هذا داخليًا، نظرًا لتوافقها مع CommonJS.

#### التكوين والاستخدام
تتضمن عملية التكوين إعداد `wx.config`، وهو أمر أساسي لتهيئة SDK مع تفاصيل حساب WeChat العام الخاص بك. تتطلب هذه الخطوة معلمات يتم إنشاؤها عادةً من جانب الخادم بسبب اعتبارات الأمان:
- **المعلمات المطلوبة:** `debug` (منطقية، لتصحيح الأخطاء)، `appId` (معرف تطبيق WeChat الخاص بك)، `timestamp` (الطابع الزمني الحالي بالثواني)، `nonceStr` (سلسلة عشوائية)، `signature` (يتم إنشاؤها باستخدام jsapi_ticket ومعلمات أخرى)، و `jsApiList` (مصفوفة واجهات برمجة التطبيقات التي تنوي استخدامها، على سبيل المثال `['onMenuShareAppMessage', 'onMenuShareTimeline']`).

مثال أساسي للتكوين هو:
```javascript
wx.config({
    debug: true,
    appId: 'your_app_id',
    timestamp: your_timestamp,
    nonceStr: 'your_nonce_str',
    signature: 'your_signature',
    jsApiList: ['onMenuShareAppMessage', 'onMenuShareTimeline']
});
```

بعد التكوين، تعامل مع النتيجة:
- استخدم `wx.ready(function() { ... });` لتنفيذ الكود بمجرد التحقق من التكوين بنجاح. هذا هو المكان حيث يمكنك استدعاء واجهات برمجة تطبيقات WeChat، مثل المشاركة:
  ```javascript
  wx.ready(function () {
      wx.onMenuShareAppMessage({
          title: 'عنوانك',
          desc: 'وصفك',
          link: 'رابطك',
          imgUrl: 'رابط الصورة الخاص بك',
          success: function () {
              // رد الاتصال للمشاركة الناجحة
          },
          cancel: function () {
              // رد الاتصال للمشاركة الملغاة
          }
      });
  });
  ```
- استخدم `wx.error(function(res) { ... });` للتعامل مع أخطاء التكوين، والتي قد تشير إلى مشاكل في التوقيع أو إعدادات النطاق.

#### متطلبات جانب الخادم وإنشاء التوقيع
جانب حاسم هو الإعداد من جانب الخادم، حيث أن إنشاء التوقيع يتضمن بيانات اعتماد حساسة واستدعاءات لواجهة برمجة تطبيقات خوادم WeChat. لإنشاء التوقيع:
- أولاً، احصل على رمز وصول access token باستخدام appId و appSecret الخاصين بك عبر واجهة برمجة تطبيقات WeChat.
- ثم، استخدم رمز الوصول access token للحصول على تذكرة jsapi_ticket.
- أخيرًا، قم بإنشاء التوقيع signature باستخدام jsapi_ticket، والرابط URL الحالي، وسلسلة nonce، والطابع الزمني، باتباع الخوارزمية المفصلة في [الملحق 1 من وثائق WeChat JS SDK](https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/JS-SDK.html#62).

عادةً ما يتم تنفيذ هذه العملية بلغات مثل PHP، Java، Node.js، أو Python، مع توفير نموذج كود في الوثائق. قم بتخزين رمز الوصول access token وتذكرة jsapi_ticket مؤقتًا لمدة 7200 ثانية لكل منهما لتجنب الوصول إلى حدود المعدل، كما هو مذكور في الوثائق.

بالإضافة إلى ذلك، تأكد من ربط نطاقك بحساب WeChat العام الخاص بك:
- سجل الدخول إلى منصة حسابات WeChat الرسمية، انتقل إلى إعدادات الحساب الرسمي > إعدادات الميزات، وأدخل اسم النطاق الآمن لـ JS API. هذه الخطوة حاسمة للأمان والوصول إلى واجهة برمجة التطبيقات.

#### اعتبارات الإصدار
نظرًا لمواصفات المستخدم لـ "^1.2.0"، وأحدث إصدار للحزمة هو 1.6.5، فإنه من الجدير بالملاحظة أن إصدار الحزمة قد يتوافق مع تحديات في التغليف بدلاً من إصدار SDK الأساسي، وهو 1.6.0 بناءً على المصدر الرسمي. يجب أن يظل الاستخدام متسقًا، ولكن بالنسبة للإصدار 1.2.0 تحديدًا، تحقق من سجل التغييرات في npm أو إصدارات GitHub لأي تغييرات ملحوظة، على الرغم من أن التوجيهات العامة تشير إلى تأثير ضئيل على الاستخدام الأساسي.

#### أمثلة وموارد إضافية
للتنفيذ العملي، يمكن العثور على أمثلة في مستودعات GitHub المختلفة، مثل [yanxi123-com/weixin-js-sdk](https://github.com/yanxi123-com/weixin-js-sdk)، والذي يوفر المصدر وملاحظات الاستخدام. بالإضافة إلى ذلك، تتضمن الوثائق الرسمية روابط DEMO، مثل [أمثلة WeChat JS-SDK](https://www.weixinsxy.com/jssdk/)، على الرغم من أن المحتوى المحدد لم يتم تفصيله في عمليات البحث، مما يشير إلى ضرورة التحقق من الموقع للحصول على نموذج كود وملفات zip.

#### الجدول: ملخص الخطوات والمتطلبات

| الخطوة                  | الوصف                                                                 | ملاحظات                                                                 |
|-----------------------|-----------------------------------------------------------------------------|----------------------------------------------------------------------|
| تثبيت الحزمة       | قم بتشغيل `npm install weixin-js-sdk` أو `yarn add weixin-js-sdk`                | يضمن وجود الحزمة في تبعيات المشروع.                          |
| استيراد SDK            | استخدم `import wx from 'weixin-js-sdk';` أو `const wx = require('weixin-js-sdk');` | اختر بناءً على نظام الوحدات (ES6 أو CommonJS).                     |
| تكوين SDK         | استخدم `wx.config` مع appId، timestamp، nonceStr، signature، و jsApiList  | يتم إنشاء التوقيع signature من جانب الخادم، ويتطلب حساب WeChat عام.      |
| معالجة التكوين  | استخدم `wx.ready()` للنجاح، `wx.error()` للفشل                    | ضع استدعاءات واجهة برمجة التطبيقات في `ready` لتحميل الصفحة، تعامل مع الأخطاء بشكل مناسب.|
| الإعداد من جانب الخادم     | قم بإنشاء التوقيع signature باستخدام access token و jsapi_ticket، وقم بالتخزين المؤقت لمدة 7200 ثانية    | يتضمن استدعاءات لواجهة برمجة تطبيقات WeChat، تأكد من ربط النطاق.                   |

يلخص هذا الجدول العملية، ويوفر مرجعًا سريعًا للتنفيذ.

#### تفصيل غير متوقع: التكامل مع الحزم
جانب مثير للاهتمام هو توافق الحزمة مع الحزم مثل webpack، وهو ليس واضحًا فورًا من الاستخدام الأساسي. هذا يسمح بالتطوير المعياري، مما قد يبسط إدارة التبعيات في المشاريع الأكبر، ويدعم TypeScript، مما يعزز سلامة النوع، وهو ما قد يكون غير متوقع للمستخدمين المألوفين فقط مع التضمين عبر علامة script.

#### الخلاصة
باختصار، يتضمن استخدام "weixin-js-sdk" الإصدار "^1.2.0" التثبيت عبر npm، والاستيراد إلى الكود الخاص بك، والتكوين باستخدام المعلمات المُنشأة من الخادم، واتباع وثائق WeChat JS SDK الرسمية لاستخدام واجهة برمجة التطبيقات. تأكد من الإعداد من جانب الخادم لإنشاء التوقيع وربط النطاق، وخذ في الاعتبار توافق الحزمة مع الحزم لتطوير الويب الحديث. للحصول على أمثلة مفصلة، استكشف مستودعات GitHub المقدمة وروابط الوثائق الرسمية.

### الاقتباسات الرئيسية
- [وصف حزمة weixin-js-sdk على npm](https://www.npmjs.com/package/weixin-js-sdk)
- [الوثائق الرسمية لـ WeChat JS SDK](https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/JS-SDK.html)
- [مستودع weixin-js-sdk على GitHub](https://github.com/yanxi123-com/weixin-js-sdk)