---
audio: false
generated: true
lang: ar
layout: post
title: استخدام جيتي لتضمين خادم ويب
translated: true
type: note
---

لاستخدام `org.eclipse.jetty` في مشروع جافا، عادةً ما ترغب في الاستفادة من مكتبات Jetty لتضمين خادم ويب خفيف الوزن أو حاوية الخدمات (servlet container) داخل تطبيقك. Jetty، التي تُصان تحت مؤسسة Eclipse، هي مشروع مفتوح المصدر يسمح لك بخدمة محتوى الويب، ومعالجة طلبات HTTP، ودعم ميزات مثل الخدمات (Servlets) وتطبيقات الويب. فيما يلي دليل خطوة بخطوة لمساعدتك في البدء باستخدام `org.eclipse.jetty` لإعداد خادم ويب أساسي في تطبيق جافا باستخدام Maven كأداة بناء.

---

### **الخطوة 1: إضافة تبعيات Jetty إلى مشروعك**
لاستخدام Jetty، تحتاج إلى تضمين مكتباتها في مشروعك. إذا كنت تستخدم Maven، أضف التبعيات اللازمة إلى ملف `pom.xml` الخاص بك. لإعداد خادم ويب أساسي مع دعم الخدمات (servlets)، قم بتضمين `jetty-server` و `jetty-servlet`. إليك مثال:

```xml
<project>
    <dependencies>
        <!-- Jetty Server -->
        <dependency>
            <groupId>org.eclipse.jetty</groupId>
            <artifactId>jetty-server</artifactId>
            <version>9.4.31.v20200723</version>
        </dependency>
        <!-- Jetty Servlet Support -->
        <dependency>
            <groupId>org.eclipse.jetty</groupId>
            <artifactId>jetty-servlet</artifactId>
            <version>9.4.31.v20200723</version>
        </dependency>
        <!-- Servlet API (اختياري، غالبًا ما يتم تضمينه بشكل غير مباشر) -->
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>javax.servlet-api</artifactId>
            <version>3.1.0</version>
            <scope>provided</scope>
        </dependency>
    </dependencies>
</project>
```

- **`jetty-server`**: يوفر وظائف الخادم الأساسية لمعالجة طلبات HTTP.
- **`jetty-servlet`**: يضيف دعمًا للخدمات (Servlets)، مما يسمح لك باستخدام Java Servlet API.
- **`javax.servlet-api`**: يحدد واجهات الخدمات (servlet interfaces)؛ تم تضمينه صراحة هنا للتوضيح، على الرغم من أنه غالبًا ما يتم إحضاره بشكل غير مباشر عبر `jetty-servlet`.

**ملاحظة**: تحقق من [Maven Central Repository](https://mvnrepository.com/artifact/org.eclipse.jetty) للحصول على أحدث إصدار من Jetty وقم بتحديث وسم `<version>` وفقًا لذلك.

---

### **الخطوة 2: إنشاء خادم Jetty بسيط**
يمكنك استخدام Jetty برمجيًا عن طريق إنشاء مثيل لفئة `Server` من الحزمة `org.eclipse.jetty.server`. فيما يلي طريقتان شائعتان: استخدام معالج أساسي للردود الثابتة أو استخدام خدمة (servlet) للمحتوى الديناميكي.

#### **الخيار 1: استخدام معالج أساسي**
يقوم هذا المثال بإعداد خادم يرد بـ "Hello, World!" على جميع الطلبات.

```java
import org.eclipse.jetty.server.Server;
import org.eclipse.jetty.server.Request;
import org.eclipse.jetty.server.handler.AbstractHandler;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;

public class SimpleJettyServer {
    public static void main(String[] args) throws Exception {
        // إنشاء مثيل خادم يستمع على المنفذ 8080
        Server server = new Server(8080);

        // تعيين معالج لمعالجة الطلبات
        server.setHandler(new AbstractHandler() {
            @Override
            public void handle(String target, Request baseRequest, HttpServletRequest request, HttpServletResponse response)
                    throws IOException {
                // تعيين خصائص الرد
                response.setContentType("text/plain");
                response.setStatus(HttpServletResponse.SC_OK);
                response.getWriter().println("Hello, World!");

                // وضع علامة على الطلب على أنه تمت معالجته
                baseRequest.setHandled(true);
            }
        });

        // بدء تشغيل الخادم
        server.start();
        server.join(); // يبقي الخادم قيد التشغيل حتى يتم إيقافه
    }
}
```

- **`Server server = new Server(8080)`**: ينشئ خادم Jetty على المنفذ 8080.
- **`AbstractHandler`**: معالج بسيط تحدد فيه كيفية معالجة الطلبات في طريقة `handle`.
- **`baseRequest.setHandled(true)`**: يشير إلى أن هذا المعالج قد قام بمعالجة الطلب، مما يمنع المزيد من المعالجة.

شغل هذا الكود، ثم افتح متصفحًا وانتقل إلى `http://localhost:8080/` لترى "Hello, World!".

#### **الخيار 2: استخدام خدمة (Servlet)**
للتطبيقات الأكثر تعقيدًا، يمكنك استخدام الخدمات (Servlets) مع `ServletContextHandler`.

```java
import org.eclipse.jetty.server.Server;
import org.eclipse.jetty.servlet.ServletContextHandler;
import org.eclipse.jetty.servlet.ServletHolder;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;

public class ServletJettyServer {
    public static void main(String[] args) throws Exception {
        // إنشاء مثيل خادم على المنفذ 8080
        Server server = new Server(8080);

        // إنشاء معالج سياق الخدمة (Servlet Context Handler)
        ServletContextHandler context = new ServletContextHandler();
        context.setContextPath("/"); // مسار السياق الجذر

        // تعيين المعالج للخادم
        server.setHandler(context);

        // إضافة خدمة (servlet) لمعالجة الطلبات
        context.addServlet(new ServletHolder(new HelloServlet()), "/*");

        // بدء تشغيل الخادم
        server.start();
        server.join();
    }
}

// تعريف خدمة (servlet) بسيطة
class HelloServlet extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws IOException {
        response.setContentType("text/plain");
        response.setStatus(HttpServletResponse.SC_OK);
        response.getWriter().println("Hello from Jetty Servlet!");
    }
}
```

- **`ServletContextHandler`**: يدير سياقات الخدمات (servlet contexts) وتعييناتها.
- **`context.addServlet`**: يسجل `HelloServlet` لمعالجة جميع الطلبات (`/*`).
- **`doGet`**: يحدد سلوك الخدمة (servlet) لطلبات GET.

شغل هذا الكود وقم بزيارة `http://localhost:8080/` لترى "Hello from Jetty Servlet!".

---

### **الخطوة 3: التجميع والتشغيل**
1. تأكد من إعداد مشروعك باستخدام Maven (على سبيل المثال، قم بتشغيل `mvn compile` لتحميل التبعيات).
2. قم بتجميع وتشغيل فئة الجافا (على سبيل المثال، `java SimpleJettyServer` أو استخدم خاصية التشغيل في بيئة التطوير المتكاملة الخاصة بك).
3. اختبر الخادم بالوصول إلى `http://localhost:8080/` في متصفح أو باستخدام أداة مثل `curl`.

---

### **حالات استخدام إضافية**
- **نشر ملف WAR**: استخدم `WebAppContext` لنشر أرشيف تطبيق ويب (WAR) أو دليل:
  ```java
  import org.eclipse.jetty.server.Server;
  import org.eclipse.jetty.webapp.WebAppContext;

  public class WarJettyServer {
      public static void main(String[] args) throws Exception {
          Server server = new Server(8080);
          WebAppContext webapp = new WebAppContext();
          webapp.setContextPath("/");
          webapp.setWar("path/to/your.war"); // المسار إلى ملف WAR الخاص بك
          server.setHandler(webapp);
          server.start();
          server.join();
      }
  }
  ```
  أضف تبعية `jetty-webapp` إلى `pom.xml` لهذه الميزة.

- **تكوين Jetty**: اضبط الإعدادات مثل المنفذ، ومجموعات الخيوط (thread pools)، أو HTTPS برمجيًا أو عبر ملفات تكوين XML (راجع وثائق Jetty للإعدادات المتقدمة).

---

### **النقاط الرئيسية**
- **عمليات الاستيراد (Imports)**: استخدم الفئات من `org.eclipse.jetty.server`، `org.eclipse.jetty.servlet`، إلخ، عن طريق استيرادها حسب الحاجة.
- **المرونة**: يمكن لـ Jetty خدمة المحتوى الثابت، ومعالجة الخدمات (Servlets)، ونشر ملفات WAR، أو حتى دعم WebSockets و HTTP/2 مع وحدات إضافية.
- **الوثائق**: لمزيد من التفاصيل، راجع [الوثائق الرسمية لـ Jetty](https://www.eclipse.org/jetty/documentation/).

باتباع هذه الخطوات، يمكنك استخدام `org.eclipse.jetty` بشكل فعال لتضمين خادم ويب في تطبيق جافا الخاص بك، مخصصًا لاحتياجاتك المحددة!