---
audio: false
generated: true
lang: ar
layout: post
title: استخدام جيتي لتضمين خادم ويب
translated: true
---

لاستخدام `org.eclipse.jetty` في مشروع Java، عادةً ما ترغب في استغلال مكتبات Jetty لتضمين خادم ويب خفيف أو حاوية Servlet داخل تطبيقك. Jetty، الذي يتم الحفاظ عليه تحت مؤسسة Eclipse، هو مشروع مفتوح المصدر يسمح لك بتقديم محتوى ويب، معالجة طلبات HTTP، ودعم ميزات مثل Servlets و تطبيقات ويب. أدناه دليل خطوة بخطوة للحصول على البدء باستخدام `org.eclipse.jetty` لتكوين خادم ويب أساسي في تطبيق Java باستخدام Maven كدالة بناء.

---

### **الخطوة 1: إضافة اعتمادات Jetty إلى مشروعك**
لاستخدام Jetty، يجب عليك تضمين مكتباته في مشروعك. إذا كنت تستخدم Maven، أضف الاعتمادات اللازمة إلى ملف `pom.xml` الخاص بك. لمجموعة خادم ويب أساسية مع دعم Servlet، أضف `jetty-server` و `jetty-servlet`. إليك مثال:

```xml
<project>
    <dependencies>
        <!-- خادم Jetty -->
        <dependency>
            <groupId>org.eclipse.jetty</groupId>
            <artifactId>jetty-server</artifactId>
            <version>9.4.31.v20200723</version>
        </dependency>
        <!-- دعم Servlet Jetty -->
        <dependency>
            <groupId>org.eclipse.jetty</groupId>
            <artifactId>jetty-servlet</artifactId>
            <version>9.4.31.v20200723</version>
        </dependency>
        <!-- Servlet API (اختياري، غالبًا ما يتم تضمينه بشكل انتقالي) -->
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>javax.servlet-api</artifactId>
            <version>3.1.0</version>
            <scope>provided</scope>
        </dependency>
    </dependencies>
</project>
```

- **`jetty-server`**: يوفر الوظائف الأساسية للخادم لتعامل مع طلبات HTTP.
- **`jetty-servlet`**: يضيف دعم Servlet، مما يسمح لك باستخدام API Servlet Java.
- **`javax.servlet-api`**: يحدد واجهات Servlet؛ تم تضمينه هنا بشكل صريح من أجل الوضوح، على الرغم من أنه غالبًا ما يتم جلبه بشكل انتقالي بواسطة `jetty-servlet`.

**ملاحظة**: تحقق من [مستودع Maven Central](https://mvnrepository.com/artifact/org.eclipse.jetty) للحصول على أحدث إصدار من Jetty وتحديث علامة `<version>` وفقًا لذلك.

---

### **الخطوة 2: إنشاء خادم Jetty بسيط**
يمكنك استخدام Jetty برمجيًا بإنشاء مثيل من فئة `Server` من حزمة `org.eclipse.jetty.server`. أدناه اثنان من الطرق الشائعة: استخدام معالج أساسي للردود الثابتة أو استخدام Servlet للمحتوى الديناميكي.

#### **الخيار 1: استخدام معالج أساسي**
يضع هذا المثال خادمًا يرد "Hello, World!" على جميع الطلبات.

```java
import org.eclipse.jetty.server.Server;
import org.eclipse.jetty.server.Request;
import org.eclipse.jetty.server.handler.AbstractHandler;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;

public class SimpleJettyServer {
    public static void main(String[] args) throws Exception {
        // إنشاء مثيل خادم يستمع على الميناء 8080
        Server server = new Server(8080);

        // تعيين معالج لتعامل مع الطلبات
        server.setHandler(new AbstractHandler() {
            @Override
            public void handle(String target, Request baseRequest, HttpServletRequest request, HttpServletResponse response)
                    throws IOException {
                // تعيين خصائص الرد
                response.setContentType("text/plain");
                response.setStatus(HttpServletResponse.SC_OK);
                response.getWriter().println("Hello, World!");

                // تحديد أن هذا المعالج قد تعامل مع الطلب
                baseRequest.setHandled(true);
            }
        });

        // بدء الخادم
        server.start();
        server.join(); // يحتفظ بالخادم يعمل حتى يتم إيقافه
    }
}
```

- **`Server server = new Server(8080)`**: يخلق خادم Jetty على الميناء 8080.
- **`AbstractHandler`**: معالج بسيط حيث تحدد كيفية معالجة الطلبات في طريقة `handle`.
- **`baseRequest.setHandled(true)`**: يشير إلى أن هذا المعالج قد تعامل مع الطلب، مما يمنع معالجة إضافية.

أعد تشغيل هذا الكود، ثم افتح متصفحًا وذهب إلى `http://localhost:8080/` لرؤية "Hello, World!".

#### **الخيار 2: استخدام Servlet**
للتطبيقات أكثر تعقيدًا، يمكنك استخدام Servlets مع `ServletContextHandler`.

```java
import org.eclipse.jetty.server.Server;
import org.eclipse.jetty.servlet.ServletContextHandler;
import org.eclipse.jetty.servlet.ServletHolder;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;

public class ServletJettyServer {
    public static void main(String[] args) throws Exception {
        // إنشاء مثيل خادم على الميناء 8080
        Server server = new Server(8080);

        // إنشاء معالج سياق Servlet
        ServletContextHandler context = new ServletContextHandler();
        context.setContextPath("/"); // مسار سياق الجذر

        // تعيين المعالج للخادم
        server.setHandler(context);

        // إضافة Servlet لتعامل مع الطلبات
        context.addServlet(new ServletHolder(new HelloServlet()), "/*");

        // بدء الخادم
        server.start();
        server.join();
    }
}

// تعريف Servlet بسيط
class HelloServlet extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws IOException {
        response.setContentType("text/plain");
        response.setStatus(HttpServletResponse.SC_OK);
        response.getWriter().println("Hello from Jetty Servlet!");
    }
}
```

- **`ServletContextHandler`**: يدير سياق Servlet ومappings.
- **`context.addServlet`**: يسجل `HelloServlet` لتعامل مع جميع الطلبات (`/*`).
- **`doGet`**: يحدد سلوك Servlet للطلبات GET.

أعد تشغيل هذا الكود وزيارة `http://localhost:8080/` لرؤية "Hello from Jetty Servlet!".

---

### **الخطوة 3: التجميع والتشغيل**
1. تأكد من أن مشروعك تم إعداده باستخدام Maven (على سبيل المثال، اعد تشغيل `mvn compile` لتنزيل الاعتمادات).
2. قم بتجميع وتشغيل فئة Java (على سبيل المثال، `java SimpleJettyServer` أو استخدام ميزة تشغيل IDE الخاص بك).
3. اختبر الخادم عن طريق الوصول إلى `http://localhost:8080/` في متصفح أو باستخدام أداة مثل `curl`.

---

### **حالات استخدام إضافية**
- **نشر ملف WAR**: استخدم `WebAppContext` لنشر ملف أرشيف تطبيق ويب (WAR) أو مجلد:
  ```java
  import org.eclipse.jetty.server.Server;
  import org.eclipse.jetty.webapp.WebAppContext;

  public class WarJettyServer {
      public static void main(String[] args) throws Exception {
          Server server = new Server(8080);
          WebAppContext webapp = new WebAppContext();
          webapp.setContextPath("/");
          webapp.setWar("path/to/your.war"); // مسار ملف WAR الخاص بك
          server.setHandler(webapp);
          server.start();
          server.join();
      }
  }
  ```
  أضف الاعتماد `jetty-webapp` إلى ملف `pom.xml` الخاص بك لهذه الميزة.

- **تكوين Jetty**: قم بتعديل الإعدادات مثل الميناء، مجموعات الخيوط، أو HTTPS برمجيًا أو عبر ملفات التكوين XML (انظر وثائق Jetty للحصول على إعدادات متقدمة).

---

### **نقاط رئيسية**
- **الاستيرادات**: استخدم الفئات من `org.eclipse.jetty.server`، `org.eclipse.jetty.servlet`، إلخ. من خلال استيرادها حسب الحاجة.
- **المرونة**: يمكن لـ Jetty تقديم محتوى ثابت، التعامل مع Servlets، نشر ملفات WAR، أو حتى دعم WebSockets و HTTP/2 مع وحدات إضافية.
- **التوثيق**: للحصول على مزيد من التفاصيل، راجع [التوثيق الرسمي لـ Jetty](https://www.eclipse.org/jetty/documentation/).

بمتابعة هذه الخطوات، يمكنك استخدام `org.eclipse.jetty` بشكل فعال لتضمين خادم ويب في تطبيق Java الخاص بك، مخصصًا لحاجاتك الخاصة!