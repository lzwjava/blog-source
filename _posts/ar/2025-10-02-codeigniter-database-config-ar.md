---
audio: false
generated: true
image: false
lang: ar
layout: post
model: x-ai/grok-code-fast-1
title: نظرة عامة على تهيئة قاعدة البيانات في كود إيجنتر
translated: true
type: note
---

### نظرة عامة على تهيئة قاعدة البيانات في CodeIgniter

هذا الملف هو سكريبت تهيئة لاتصال قاعدة البيانات في CodeIgniter. وهو يحدد إعدادات الاتصال لمجموعات قاعدة بيانات مختلفة (مثل 'default', 'lzwjava', 'leo66', 'testing')، مما يسمح للتطبيق بالتبديل بينها بناءً على البيئة (التطوير، الاختبار، الإنتاج). المتغير `$active_group` يحدد مجموعة الاتصال المستخدمة افتراضيًا.

المكونات الرئيسية:
- **$query_builder**: يتم ضبطه على `TRUE` لتمكين تحميل فئة Query Builder، والتي توفر طريقة كائنية التوجه لبناء استعلامات SQL.
- **$db[][]**: مصفوفة ارتباطية حيث تحتوي كل مصفوفة فرعية (مثل 'default') على خيارات التهيئة التفصيلية لاتصال قاعدة بيانات.

يتم ضبط `$active_group` ديناميكيًا بناءً على الثابت `ENVIRONMENT` (على سبيل المثال، عبر عبارة switch)، مما يضمن إعدادات مختلفة لمراحل النشر المختلفة. أدناه، سأشرح كل خيار تهيئة بالتفصيل، مستندًا إلى وثائق CodeIgniter والاستخدام القياسي. لاحظ أن القيم الحساسة الفعلية (مثل بيانات الاعتماد) محذوفة هنا لأسباب أمنية؛ في الممارسة العملية، يجب تخزين هذه بشكل آمن، على سبيل المثال، عبر متغيرات البيئة.

### خيارات التهيئة التفصيلية

كل مجموعة قاعدة بيانات هي مصفوفة تحتوي على المفاتيح التالية. معظمها إعدادات واضحة، ولكن بعضها (مثل `encrypt`) يدعم خيارات فرعية لميزات متقدمة.

- **dsn** (سلسلة نصية): اسم مصدر البيانات (DSN) الكامل الذي يصف الاتصال. هذا بديل لتحديد hostname، username، إلخ، بشكل منفصل. إنه مفيد للإعدادات المعقدة مثل ODBC. إذا تم توفيره، فإنه يتجاوز الحقول الفردية للمضيف/بيانات الاعتماد. تنسيق المثال: `'dsn' => 'mysql:host=yourhost;dbname=yourdatabase'`.

- **hostname** (سلسلة نصية): عنوان خادم قاعدة البيانات (مثل 'localhost' أو IP مثل '127.0.0.1'). هذا يحدد مكان تشغيل قاعدة البيانات، مما يسمح بالاتصالات عبر TCP/IP أو المقابس.

- **username** (سلسلة نصية): اسم الحساب المستخدم للمصادقة مع خادم قاعدة البيانات. يجب أن يتطابق هذا مع مستخدم صالح في نظام إدارة قواعد البيانات.

- **password** (سلسلة نصية): المفتاح السري المقترن باسم المستخدم للمصادقة. قم دائمًا بتخزين هذا بشكل آمن لمنع الكشف.

- **database** (سلسلة نصية): اسم قاعدة البيانات المحدد الذي تريد الاتصال به على الخادم. ستستهدف جميع الاستعلامات قاعدة البيانات هذه ما لم يُحدد خلاف ذلك.

- **dbdriver** (سلسلة نصية): يحدد برنامج تشغيل قاعدة البيانات المراد استخدامه (مثل 'mysqli' لـ MySQL). تشمل برامج التشغيل الشائعة 'cubrid', 'ibase', 'mssql', 'mysql', 'mysqli', 'oci8', 'odbc', 'pdo', 'postgre', 'sqlite', 'sqlite3', و 'sqlsrv'. يعتبر 'mysqli' خيارًا حديثًا وآمنًا لـ MySQL.

- **dbprefix** (سلسلة نصية): بادئة اختيارية تضاف إلى أسماء الجداول عند استخدام CodeIgniter's Query Builder (على سبيل المثال، إذا تم ضبطها على 'prefix_'، فإن 'mytable' تصبح 'prefix_mytable'). هذا يساعد في تنظيم مساحات الأسماء للجداول في الاستضافة المشتركة أو التطبيقات متعددة المستأجرين.

- **pconnect** (منطقية): تمكن الاتصالات المستمرة (`TRUE`) أو الاتصالات العادية (`FALSE`). تعيد الاتصالات المستمرة استخدام نفس الرابط، مما يحسن الأداء للتطبيقات عالية التحميل، ولكنها يمكن أن تستنفد موارد الخادم إذا تم الإفراط في استخدامها.

- **db_debug** (منطقية): تتحكم في ما إذا كانت أخطاء قاعدة البيانات معروضة (`TRUE`) لأغراض التصحيح. قم بتعطيلها (`FALSE`) في الإنتاج لتجنب تسريب تفاصيل الخطأ الحساسة للمستخدمين.

- **cache_on** (منطقية): تمكن (`TRUE`) أو تعطل (`FALSE`) التخزين المؤقت للاستعلامات. عند التمكين، يتم تخزين النتائج لتسريع الاستعلامات المتكررة.

- **cachedir** (سلسلة نصية): مسار الملف إلى الدليل حيث يتم تخزين نتائج الاستعلامات المخزنة مؤقتًا. يجب أن يكون قابلاً للكتابة من قبل خادم الويب. بالاقتران مع `cache_on`، يقلل هذا من حمل قاعدة البيانات.

- **char_set** (سلسلة نصية): ترميز الأحرف لاتصال قاعدة البيانات (مثل 'utf8mb4' لدعم Unicode الحديث). يضمن سلامة البيانات للتطبيقات متعددة اللغات.

- **dbcollat** (سلسلة نصية): الترتيب لفرز ومقارنة الأحرف (مثل 'utf8mb4_unicode_ci' لـ Unicode غير الحساس لحالة الأحرف). يعمل هذا كخيار احتياطي لإصدارات PHP/MySQL القديمة؛ يتم تجاهله بخلاف ذلك.

- **swap_pre** (سلسلة نصية): بادئة جدول لاستبدال `dbprefix` ديناميكيًا. مفيدة لتبديل البادئات في التطبيقات الحالية دون إعادة تسمية الجداول.

- **encrypt** (منطقية أو مصفوفة): لدعم التشفير. بالنسبة لـ 'mysql' (مهجور)، 'sqlsrv'، و 'pdo/sqlsrv'، استخدم `TRUE`/`FALSE` لتمكين/تعطيل SSL. بالنسبة لـ 'mysqli' و 'pdo/mysql'، استخدم مصفوفة مع خيارات SSL الفرعية:
  - 'ssl_key': المسار إلى ملف المفتاح الخاص (على سبيل المثال، لشهادات العميل).
  - 'ssl_cert': المسار إلى ملف شهادة المفتاح العام.
  - 'ssl_ca': المسار إلى ملف سلطة الشهادة (يصدق شهادة الخادم).
  - 'ssl_capath': المسار إلى دليل يحتوي على شهادات CA الموثوقة بتنسيق PEM.
  - 'ssl_cipher': قائمة مفصولة بنقطتين من الشفرات المسموح بها (مثل 'AES128-SHA').
  - 'ssl_verify': لـ 'mysqli' فقط؛ `TRUE` للتحقق من شهادات الخادم، `FALSE` لتخطي (أقل أمانًا؛ استخدم للشهادات الموقعة ذاتيًا).

- **compress** (منطقية): تمكن ضغط جانب العميل لاتصالات MySQL، مما يقلل من حركة مرور الشبكة (لـ MySQL فقط؛ يتم تجاهله بواسطة برامج التشغيل الأخرى).

- **stricton** (منطقية): تفرض اتصالات 'الوضع الصارم' (`TRUE`)، والتي تفرض قواعد SQL صارمة للكشف عن الأخطاء مبكرًا (مثل أنواع البيانات غير الصالحة). مفيدة أثناء التطوير.

- **ssl_options** (مصفوفة): خيارات تهيئة SSL متقدمة لبرامج التشغيل مثل 'pdo'. تتيح الضبط الدقيق لمعلمات التشفير التي لم يتم تغطيتها بواسطة `encrypt`.

- **failover** (مصفوفة): مصفوفة اتصال احتياطي (أو مصفوفات) للتبديل التلقائي إذا فشل الاتصال الأساسي. كل عنصر يعكس التهيئة الرئيسية (مثل hostname/port بديل). مثال: `array(array('hostname' => 'backuphost', ...))`.

- **save_queries** (منطقية): يحفظ الاستعلامات المنفذة في الذاكرة لأغراض التصحيح (`TRUE`). يوفر الوصول إلى طرق مثل `$this->db->last_query()` ولكن يمكن أن يزيد من استخدام الذاكرة؛ قم بتعطيله (`FALSE`) في الإنتاج لتوفير الموارد.

### مجموعات قاعدة البيانات والتبديل بين البيئات

- **default**: مصفوفة التهيئة الأساسية، التي تعمل كقالب. يتم ضبطها على الإعدادات الافتراضية 'لإنتاج' (على سبيل المثال، لا يوجد تصحيح، إعدادات مؤمنة).
- **lzwjava**: ترث من القاعدة ولكن تتجاوز اسم المستخدم إلى قيمة مختلفة (كلمة المرور تترك فارغة، مما يعني عدم وجود مصادقة أو افتراضي).
- **leo66**: ترث الإعدادات الأساسية ولكنها تغير hostname إلى العودة المحلية، username/password إلى الافتراضي، وتضيف منفذ (3306، القياسي لـ MySQL).
- **testing**: مجموعة مخصصة لبيئات الاختبار؛ ترث التهيئة الأساسية.

عبارة `switch` تفعل المجموعة المناسبة بناءً على `ENVIRONMENT`:
- التطوير: يستخدم 'lzwjava'.
- الاختبار: يستخدم 'testing'.
- الإنتاج: يستخدم 'default'.

يشجع هذا الإعداد على المرونة للتطوير المحلي والاختبار والنشر الحي. قم دائمًا بتطهير المدخلات لمنع حقن SQL، وفكر في نقل بيانات الاعتماد إلى متغيرات البيئة للأمان. للحصول على الوثائق الكاملة، راجع الدليل الرسمي للمستخدم الخاص بـ CodeIgniter حول اتصالات قاعدة البيانات. إذا كان لديك خيار أو مجموعة محددة لتوضيحها، دعني أعلم!