---
audio: false
generated: true
lang: ar
layout: post
title: مصفوفة البوابات المنطقية القابلة للبرمجة ميدانياً
translated: true
type: note
---

مصفوفة البوابات القابلة للبرمجة ميدانياً (FPGA) هي جهاز أشباه موصلات متعدد الاستخدامات يمكن للمصمم تكوينه بعد التصنيع. على عكس الدوائر المتكاملة الخاصة بالتطبيقات (ASICs) المصممة خصيصاً لغرض محدد ولا يمكن تغييرها بعد التصنيع، تقدم مصفوفات FPGA المرونة لتنفيذ أي دائرة رقمية أو نظام تقريباً. تجعلها هذه القابلية لإعادة التكوين قوية بشكل لا يصدق لمجموعة واسعة من التطبيقات.

إليك دليل شامل لفهم مصفوفات FPGA:

**1. ما هي مصفوفة FPGA؟**

* **المنطق القابل للبرمجة:** في جوهرها، مصفوفة FPGA هي مجموعة من كتل المنطق القابلة للبرمجة المتصلة بواسطة وصلات قابلة للبرمجة. هذا يسمح للمصممين "بتوصيل" المكونات الداخلية بطرق لا حصر لها لتنفيذ وظائف أجهزة مخصصة.
* **إعادة التكوين:** الميزة الرئيسية التي تميز مصفوفة FPGA هي قدرتها على إعادة البرمجة عدة مرات، حتى بعد نشرها في الميدان. هذا يسمح بإصلاح الأخطاء، وتحديث الميزات، وحتى إعادة التصميم الكامل دون استبدال الجهاز المادي.
* **المعالجة المتوازية:** تتفوق مصفوفات FPGA في المعالجة المتوازية. على عكس وحدات المعالجة المركزية (CPUs) التي تنفذ التعليمات عادةً بالتسلسل، يمكن لمصفوفات FPGA أداء العديد من العمليات في وقت واحد، مما يجعلها مثالية للمهام الحسابية المكثفة.
* **التنفيذ على مستوى العتاد:** عندما تقوم ببرمجة مصفوفة FPGA، فأنت تصمم بشكل أساسي عتاداً مخصصاً. يوفر هذا تحكماً دقيقاً في التوقيت والموارد، مما يؤدي إلى أداء محتمل أعلى واستهلاك أقل للطاقة مقارنة بالحلول القائمة على البرامج لتطبيقات معينة.

**2. البنية الأساسية لمصفوفة FPGA:**

تتكون البنية النموذجية لمصفوفة FPGA من ثلاثة أنواع رئيسية من العناصر القابلة للبرمجة:

* **كتل المنطق القابلة للتكوين (CLBs):** هذه هي لبنات البناء الأساسية التي تنفذ وظائف المنطق. تحتوي CLB عادةً على:
    * **جداول البحث (LUTs):** هذه عبارة عن مصفوفات ذاكرة صغيرة يمكن برمجتها لتنفيذ أي دالة منطقية لعدد معين من المدخلات (على سبيل المثال، LUTs ذات 4 أو 6 مدخلات شائعة).
    * **القلابات (FFs):** هذه هي عناصر الذاكرة المستخدمة لتخزين حالة المنطق. وهي ضرورية لتنفيذ الدوائر التسلسلية.
    * **موزعات الإشارة (MUXs):** تُستخدم لتحديد الإشارات المختلفة، مما يسمح بتوجيه مرن واختيار الوظيفة داخل الـ CLB.
* **التوصيلات البينية القابلة للبرمجة:** هذه هي شبكة من الأسلاك والمفاتيح القابلة للبرمجة التي تربط كتل CLB والموارد الأخرى على مصفوفة FPGA. تسمح التوصيلات البينية للمصممين بتوجيه الإشارات بين كتل المنطق المختلفة لإنشاء دوائر معقدة. تشمل المكونات الرئيسية:
    * **صناديق التبديل:** تحتوي على مفاتيح قابلة للبرمجة تسمح بالاتصالات بين قنوات التوجيه الأفقية والعمودية.
    * **صناديق الاتصال:** تربط قنوات التوجيه بمداخل ومخارج دبابيس الـ CLBs.
    * **قنوات التوجيه:** هذه هي الأسلاك الفعلية التي تحمل الإشارات عبر مصفوفة FPGA.
* **كتل الإدخال/الإخراج (I/O Blocks):** توفر الواجهة بين المنطق الداخلي لمصفوفة FPGA والعالم الخارجي. يمكن تكوينها لدعم معايير إشارات مختلفة (مثل LVCMOS, LVDS) ويمكن أن تشمل ميزات مثل:
    * **قوة دفع الإخراج القابلة للبرمجة:** ضبط تيار الإخراج.
    * **التحكم في معدل الانحدار:** التحكم في معدل تغير الجهد.
    * **مقاومات السحب للأعلى/الأسفل:** ضبط مستوى المنطق الافتراضي.

**ما وراء الأساسيات:** غالباً ما تتضمن مصفوفات FPGA الحديثة كتل متخصصة إضافية:

* **ذاكرة الوصول العشوائي الكتلية (BRAM):** كتل ذاكرة على الشريحة توفر تخزين بيانات عالي السرعة.
* **شرائح معالجة الإشارات الرقمية (DSP):** كتل أجهزة مخصصة محسنة لعمليات DSP الشائعة مثل الضرب والتراكم.
* **أجهزة الإرسال والاستقبال التسلسلية عالية السرعة:** لواجهات الاتصالات عالية النطاق الترددي مثل PCIe و Ethernet و SerDes.
* **المعالجات المدمجة:** تدمج بعض مصفوفات FPGA معالجات صلبة أو ناعمة النواة (مثل نوى ARM) لإنشاء حلول نظام على شريحة (SoC).
* **محولات التناظري إلى الرقمي (ADCs) ومحولات الرقمي إلى التناظري (DACs):** للتواصل مع الإشارات التناظرية.
* **بلاطات إدارة الساعة (CMTs):** لتوليد وتوزيع إشارات الساعة في جميع أنحاء مصفوفة FPGA.

**3. كيف تتم برمجة مصفوفات FPGA؟**

عادةً ما تتم برمجة مصفوفات FPGA باستخدام لغات وصف العتاد (HDLs) مثل:

* **Verilog:** لغة HDL مستخدمة على نطاق واسع تشبه في تركيبها لغة C.
* **VHDL (لغة وصف العتاد لمعاهد الدوائر المتكاملة عالية السرعة):** لغة HDL شائعة أخرى، غالباً ما تفضل في تطبيقات الفضاء والدفاع.

يتضمن تدفق تصميم FPGA النموذجي الخطوات التالية:

1.  **المواصفات:** تحديد الوظيفة المطلوبة للدائرة الرقمية أو النظام.
2.  **إدخال التصميم:** كتابة كود HDL الذي يصف سلوك وهيكل الدائرة. يمكن أن يشمل ذلك أيضاً استخدام أدوات التصميم الرسومية.
3.  **التركيب:** يتم ترجمة كود HDL إلى قائمة شبكية، وهي وصف للدائرة من حيث بوابات المنطق الأساسية واتصالاتها.
4.  **التنفيذ:** تتضمن هذه المرحلة عدة خطوات فرعية:
    * **التوضيع:** تعيين عناصر المنطق من القائمة الشبكية إلى مواقع فيزيائية محددة على مصفوفة FPGA.
    * **التوجيه:** تحديد المسارات لأسلاك التوصيل البيني لربط عناصر المنطط الموضوعة.
    * **توليد سلسلة البتات:** إنشاء ملف تكوين (bitstream) يحتوي على المعلومات اللازمة لبرمجة مفاتيح ومنطق FPGA الداخلي.
5.  **التحقق:** اختبار التصميم من خلال المحاكاة والاختبار على العتاد على مصفوفة FPGA لضمان تلبية المواصفات.
6.  **التكوين:** تحميل سلسلة البتات المُنشأة على مصفوفة FPGA. يقوم هذا بتكوين المنطق الداخلي والتوصيلات البينية، مما "يبرمج" الجهاز بشكل فعال لأداء الوظيفة المطلوبة.

توفر بائعي مصفوفات FPGA (مثل Xilinx و Intel) سلاسل أدوات برمجية شاملة تؤتمت هذه الخطوات. تتضمن هذه الأدوات:

* **محررات النصوص:** لكتابة كود HDL.
* **المحاكيات:** للتحقق من سلوك التصميم قبل التنفيذ.
* **أدوات التركيب:** لترجمة HDL إلى قائمة شبكية.
* **أدوات التنفيذ:** للتوضيع والتوجيه وتوليد سلسلة البتات.
* **أدوات التصحيح:** لتحليل التصميم وتصحيحه على عتاد FPGA.

**4. الميزات الرئيسية ومزايا مصفوفات FPGA:**

* **إعادة التكوين:** تسمح بإجراء تغييرات وتحديثات على التصميم حتى بعد النشر.
* **التوازي:** تمكين معالجة عالية الأداء للمهام التي يمكن موازنتها.
* **المرونة:** يمكنها تنفيذ مجموعة واسعة من الدوائر والأنظمة الرقمية.
* **الوقت للتسويق:** يمكن أن يكون التطوير باستخدام مصفوفات FPGA أسرع مقارنةً بـ ASICs، خاصة للكميات المنخفضة.
* **الفعالية من حيث التكلفة (لحجوم معينة):** يمكن أن تكون أكثر فعالية من حيث التكلفة من ASICs لحجوم الإنتاج المتوسطة، حيث لا توجد تكاليف هندسية غير متكررة عالية مرتبطة بإنشاء الأقنعة.
* **تسريع العتاد المخصص:** يسمح بإنشاء مسرعات عتاد مخصصة لخوارزميات أو مهام محددة، مما يؤدي إلى تحسينات كبيرة في الأداء.
* **النمذجة السريعة:** مثالية لنمذجة واختبار التصميمات الرقمية المعقدة قبل الالتزام بتنفيذ ASIC.

**5. تطبيقات مصفوفات FPGA:**

تُستخدم مصفوفات FPGA في مجموعة واسعة من التطبيقات عبر مختلف الصناعات، بما في ذلك:

* **الاتصالات:** أنظمة الاتصالات اللاسلكية، البنية التحتية للشبكات، معالجة البيانات عالية السرعة.
* **مراكز البيانات:** تسريع العتاد للتعلم الآلي، تحليلات البيانات، ومعالجة الشبكات.
* **الفضاء والدفاع:** أنظمة الرادار، معالجة الإشارات، الحوسبة المدمجة، الحرب الإلكترونية.
* **السيارات:** أنظمة مساعدة السائق المتقدمة (ADAS)، أنظمة الترفيه، الشبكات داخل المركبات.
* **الأتمتة الصناعية:** تحكم المحركات، الروبوتات، رؤية الآلة.
* **التصوير الطبي:** معالجة الصور، معدات التشخيص.
* **الإلكترونيات الاستهلاكية:** الكاميرات الرقمية، معالجة الفيديو، ألعاب الفيديو.
* **الحوسبة عالية الأداء (HPC):** مسرعات مخصصة للمحاكاة العلمية.
* **التداول المالي:** منصات التداول منخفضة الكمون.

**6. تدفق تطوير FPGA بالتفصيل:**

دعنا نخوض بشكل أعمق في تدفق تطوير FPGA النموذجي:

* **التصور والمواصفات:** فهم متطلبات المشروع. تحديد المدخلات، المخرجات، الوظائف، أهداف الأداء، والقيود (مثل استهلاك الطاقة، التكلفة).
* **تصميم البنية:** تحديد البنية العامة للنظام. تقسيم التصميم إلى وحدات أصغر وتحديد الواجهات بينها.
* **كتابة كود HDL (إدخال التصميم):** كتابة كود Verilog أو VHDL لكل وحدة. التركيز على كل من سلوك وهيكل الدائرة. النظر في عوامل مثل التوقيت، استخدام الموارد، وإمكانية الاختبار.
* **المحاكاة الوظيفية:** استخدام أدوات المحاكاة للتحقق من صحة كود HDL. إنشاء مقاعد اختبار توفر مدخلات للتصميم وتتحقق من المخرجات مقابل القيم المتوقعة. هذا يساعد في تحديد وإصلاح الأخطاء المنطقية مبكراً في عملية التصميم.
* **التركيب:** استخدام أداة التركيب لترجمة كود HDL إلى قائمة شبكية. تقوم الأداة بتحسين التصميم بناءً على بنية FPGA المستهدفة والقيود المحددة.
* **التنفيذ (التوضيع والتوجيه):** تأخذ أدوات التنفيذ القائمة الشبكية وتقوم بتعيينها على الموارد الفيزيائية لـ FPGA. يتضمن التوضيع تعيين عناصر المنطق لمواقع محددة، ويتضمن التوجيه إيجاد مسارات لأسلاك التوصيل البيني. هذه عملية تحسين معقدة تهدف إلى تلبية قيود التوقيت وتقليل استخدام الموارد.
* **تحليل التوقيت:** بعد التوضيع والتوجيه، إجراء تحليل توقيت ثابت للتأكد من أن التصميم يلبي ترددات الساعة المطلوبة وهوامش التوقيت. يتضمن هذا تحليل التأخيرات عبر مسارات المنطق والتوصيل البيني.
* **المحاكاة على مستوى العتاد (اختياري):** إجراء محاكاة أكثر تفصيلاً تأخذ في الاعتبار معلومات التوقيت المستخرجة من مرحلة التنفيذ. هذا يوفر توقعاً أكثر دقة لسلوك التصميم على العتاد الفعلي.
* **توليد سلسلة البتات:** بمجرد نجاح التنفيذ وتلبية قيود التوقيت، تقوم الأدوات بإنشاء ملف bitstream. يحتوي هذا الملف على بيانات التكوين لـ FPGA.
* **اختبار العتاد والتصحيح:** تحميل bitstream على FPGA واختبار التصميم في بيئة العتاد الفعلية. استخدام أدوات التصحيح (مثل محللات المنطق) لمراقبة الإشارات الداخلية وتحديد أي مشكلات. قد يكون التكرار إلى المراحل السابقة (كتابة HDL، التركيب، التنفيذ) ضرورياً لإصلاح الأخطاء.

**7. اختيار مصفوفة FPGA:**

يعد اختيار مصفوفة FPGA المناسبة لتطبيق معين أمراً بالغ الأهمية. ضع في الاعتبار العوامل التالية:

* **السعة المنطقية:** عدد CLBs أو موارد المنطق المكافئة المطلوبة لتنفيذ التصميم.
* **موارد الذاكرة:** مقدار ذاكرة Block RAM على الشريحة المطلوبة لتخزين البيانات.
* **قدرات معالجة الإشارات الرقمية (DSP):** عدد شرائح DSP المطلوبة لمهام معالجة الإشارات.
* **عدد وسرعة مداخل/مخارج الإدخال/الإخراج:** عدد دبابيس الإدخال/الإخراج والمعايير وسرعات الإشارات المدعومة.
* **أجهزة الإرسال والاستقبال التسلسلية عالية السرعة:** الحاجة لواجهات اتصالات عالية النطاق الترددي.
* **أنوية المعالجات المدمجة:** ما إذا كان مطلوباً معالج مدمج.
* **استهلاك الطاقة:** ميزانية الطاقة للتطبيق.
* **الغلاف وتوزيع الدبابيس:** الشكل الفيزيائي وتوفر دبابيس I/O محددة.
* **التكلفة:** سعر جهاز FPGA.
* **أدوات التطوير والنظام البيئي:** توفر وسهولة استخدام أدوات البرامج من البائع، وأنوية IP، وموارد الدعم.
* **دورة الحياة والتوافر:** العمر الافتراضي المتوقع لـ FPGA وتوافره من البائع.

من البائعين الرئيسيين لمصفوفات FPGA:

* **Xilinx (الآن جزء من AMD):** معروفة بعائلات Virtex و Kintex و Artix و Zynq.
* **Intel (سابقاً Altera):** معروفة بعائلات Stratix و Arria و Cyclone و MAX.
* **Lattice Semiconductor:** معروفة بمصفوفات FPGA منخفضة الطاقة وصغيرة الحجم.
* **Microchip (سابقاً Atmel):** تقدم مصفوفات FPGA تركز على الأمان وانخفاض استهلاك الطاقة.

**8. مواضيع متقدمة حول FPGA (نظرة عامة موجزة):**

* **مصفوفات FPGA من نوع نظام على شريحة (SoC):** تدمج معالجات مدمجة واحدة أو أكثر (مثل سلسلة ARM Cortex-A أو Cortex-R) إلى جانب المنطق القابل للبرمجة. هذا يسمح بجمع بين قابلية البرمجة البرمجية وتسريع العتاد.
* **إعادة التكوين الجزئي:** القدرة على إعادة تكوين جزء من مصفوفة FPGA بينما يستمر باقي الجهاز في العمل. هذا مفيد للتحديثات الديناميكية للعتاد وتنفيذ وظائف متعددة على نفس الجهاز.
* **التركيب عالي المستوى (HLS):** أدوات تسمح للمصممين بكتابة أوصاف العتاد بلغات عالية المستوى مثل C/C++ وتوليد كود HDL المقابل تلقائياً. يمكن أن يسرع هذا بشكل كبير عملية التصميم.
* **الشبكة على الشريحة (NoC):** بنية اتصالات على الشريحة تُستخدم في مصفوفات FPGA المعقدة لتوجيه البيانات بكفاءة بين عناصر المعالجة المختلفة.
* **مصفوفات FPGA ثلاثية الأبعاد:** تقنيات تغليف متقدمة تضع رقائق FPGA متعددة رأسياً لزيادة الكثافة المنطقية والأداء.

**9. موارد التعلم لمصفوفات FPGA:**

* **وثائق البائعين:** يوفر Xilinx و Intel وثائق شاملة ودروساً وملاحظات تطبيقية على مواقعهم الإلكترونية.
* **الدورات التدريبية عبر الإنترنت:** تقدم منصات مثل Coursera و edX و Udemy دورات حول تصميم وبرمجة FPGA.
* **الدورات الجامعية:** تقدم العديد من الجامعات دورات في التصميم الرقمي والأنظمة القائمة على FPGA.
* **الكتب:** تتوفر العديد من الكتب حول Verilog و VHDL ومنهجيات تصميم FPGA.
* **المجتمعات والمنتديات عبر الإنترنت:** توفر مواقع مثل Reddit (مثل r/FPGA) و Stack Overflow ومنتديات البائعين منصة لطرح الأسئلة ومشاركة المعرفة.
* **لوحات التطوير:** توفر لوحات تطوير FPGA من البائعين والجهات الخارجية طريقة عملية للتعلم والتجربة باستخدام مصفوفات FPGA.

**10. الخلاصة:**

مصفوفات FPGA هي أجهزة قوية ومتعددة الاستخدامات تقدم مزيجاً فريداً من مرونة العتاد وقابلية برمجة البرامج. تجعلها قدرتها على إعادة التكوين مثالية لمجموعة واسعة من التطبيقات، من النمذجة السريعة إلى الحوسبة عالية الأداء. يعد فهم البنية الأساسية ومنهجيات البرمجة وتدفق التطوير أمراً ضرورياً لأي شخص يتطلع إلى الاستفادة من إمكانيات مصفوفات FPGA في مشاريعه. بينما قد يكون منحنى التعلم حاداً في البداية، فإن الفوائد المحتملة من حيث الأداء والمرونة والوقت للتسويق تجعل مصفوفات FPGA أداة لا تقدر بثمن في التصميم الرقمي الحديث.