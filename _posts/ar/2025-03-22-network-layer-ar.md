---
audio: false
generated: true
lang: ar
layout: post
title: طبقة الشبكة
translated: true
type: note
---

حسنًا، دعنا نتعمق في برنامج تعليمي مفصل حول طبقة الشبكة، مُعد خصيصًا لمادة تكنولوجيا شبكات الحاسوب ضمن نظام الامتحان الذاتي الصيني (自考). هذا الفصل أساسي لفهم كيفية انتقال البيانات عبر الشبكات.

## برنامج تعليمي لطبقة الشبكة

طبقة الشبكة هي الطبقة الثالثة في نموذج OSI ونموذج TCP/IP. مسؤوليتها الأساسية هي تسهيل حركة حزم البيانات من المضيف المصدر إلى المضيف الوجهة عبر شبكة واحدة أو أكثر. فكر فيها كخدمة البريد للإنترنت – فهي تحدد أفضل مسار وتضمن وصول "طردك" (حزمة البيانات) إلى العنوان الصحيح.

إليك تفصيلًا للموضوعات الرئيسية داخل هذا الفصل:

### 1. وظائف طبقة الشبكة

تقوم طبقة الشبكة بثلاث وظائف رئيسية:

#### أ) العنونة المنطقية

* **الغرض:** تحديد كل مضيف على الشبكة بشكل فريد. يختلف هذا عن العنوان الفعلي (عنوان MAC) الذي يحدد الجهاز داخل الشبكة المحلية. العناوين المنطقية هرمية وتسمح بتوجيه فعال.
* **المفهوم الرئيسي:** عناوين IP (عناوين بروتوكول الإنترنت) هي الشكل الأساسي للعنونة المنطقية المستخدمة في طبقة الشبكة.
* **تشبيه:** فكر في عنوان منزلك. إنه عنوان منطقي يساعد خدمة البريد في العثور على منزلك المحدد داخل مدينة وبلد، بغض النظر عن الموقع الفعلي لمكتب البريد.

#### ب) التوجيه

* **الغرض:** تحديد أفضل مسار لحزمة البيانات لتسلكه من المصدر إلى الوجهة. يتضمن هذا اختيار سلسلة من أجهزة الشبكة (الموجهات) التي ستمر عبرها الحزمة.
* **المفهوم الرئيسي:** تُستخدم خوارزميات التوجيه من قبل الموجهات لبناء جداول التوجيه والحفاظ عليها، والتي تحتوي على معلومات حول أفضل المسارات إلى الشبكات المختلفة.
* **تشبيه:** تخيل التخطيط لرحلة برية. تنظر إلى خريطة أو تستخدم GPS لمعرفة أفضل طريق لوجهتك، مع الأخذ في الاعتبار عوامل مثل المسافة والازدحام. الموجهات تفعل شيئًا مشابهًا لحزم البيانات.

#### ج) التوجيه الآني

* **الغرض:** العملية الفعلية لنقل حزمة البيانات من منفذ إدخال في الموجه إلى منفذ الإخراج المناسب بناءً على قرار التوجيه.
* **المفهوم الرئيسي:** عندما يستقبل الموجه حزمة، فإنه يفحص عنوان IP الوجهة ويستشير جدول التوجيه الخاص به لتحديد القفزة التالية (موجه آخر أو المضيف الوجهة).
* **تشبيه:** بمجرد أن تخطط لطريقك، فإن التوجيه الآني يشبه قيادة سيارتك فعليًا على طول ذلك الطريق، والانتقال من نقطة إلى أخرى.

### 2. عنونة IP

عناوين IP أساسية لطبقة الشبكة. هناك نسختان رئيسيتان: IPv4 و IPv6.

#### أ) بنية IPv4

* **التنسيق:** عنوان رقمي بطول 32 بت مكتوب بالتدوين العشري المنقط (مثال: 192.168.1.10). وهو مقسم إلى أربع ثمانيات (octets) كل منها 8 بت.
* **فئات العناوين (تاريخيًا):** بينما أصبحت هذه الفئات قديمة إلى حد كبير الآن بسبب التوجيه بين النطاقات غير المبني على الفئات (CIDR)، فإن فهم الفئات التاريخية (A, B, C, D, E) يمكن أن يكون مفيدًا للمعرفة الأساسية.
    * **الفئة A:** الشبكات الكبيرة (الثماني الأول 1-126).
    * **الفئة B:** الشبكات متوسطة الحجم (الثماني الأول 128-191).
    * **الفئة C:** الشبكات الصغيرة (الثماني الأول 192-223).
    * **الفئة D:** عناوين البث المجموعي (Multicast) (الثماني الأول 224-239).
    * **الفئة E:** محجوزة للاستخدام التجريبي (الثماني الأول 240-255).
* **معرف الشبكة ومعرف المضيف:** يتكون عنوان IPv4 من معرف الشبكة (يحدد الشبكة) ومعرف المضيف (يحدد جهازًا محددًا داخل تلك الشبكة). يعتمد التقسيم بين هذين المعرفين على فئة العنوان (أو قناع الشبكة الفرعية في CIDR).
* **عناوين IPv4 الخاصة:**
    * **0.0.0.0:** يمثل الشبكة الحالية.
    * **127.0.0.1 (عنوان loopback):** يُستخدم لاختبار مكدس الشبكة في الجهاز المحلي.
    * **عناوين IP الخاصة:** نطاقات محجوزة للاستخدام داخل الشبكات الخاصة (مثال: 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16). هذه العناوين غير قابلة للتوجيه على الإنترنت العام.
    * **عناوين IP العامة:** عناوين قابلة للتوجيه على الإنترنت العام.

#### ب) بنية IPv6

* **التنسيق:** عنوان رقمي بطول 128 بت مكتوب بالتنسيق السداسي عشري، مجمع في ثماني مقاطع كل منها 16 بت مفصولة بنقطتين (مثال: 2001:0db8:85a3:0000:0000:8a2e:0370:7334).
* **المزايا مقارنة بـ IPv4:** مساحة عناوين أكبر (تحل مشكلة نضوب عناوين IPv4)، أمان محسن (IPsec غالبًا ما يكون مدمجًا)، تنسيق رأس مبسط، دعم أفضل للأجهزة المحمولة.
* **تمثيل العنوان:**
    * **الأصفار البادئة:** يمكن حذف الأصفار البادئة داخل المقطع (مثال: يمكن كتابة 0000 كـ 0).
    * **النقطتان المزدوجتان:** يمكن استخدام نقطتين مزدوجتين (::) لتمثيل مقطع واحد أو أكثر متتالية من الأصفار. يمكن استخدام هذا مرة واحدة فقط في العنوان.
* **أنواع عناوين IPv6:**
    * **Unicast:** يحدد واجهة واحدة.
    * **Multicast:** يحدد مجموعة من الواجهات.
    * **Anycast:** يحدد مجموعة من الواجهات، حيث يتم تسليم الحزم إلى أقرب واجهة في المجموعة.
* **عناوين Link-Local (fe80::/10):** تُستخدم للاتصال داخل رابط شبكة واحد.
* **عناوين Global Unicast:** عناوين قابلة للتوجيه عالميًا على الإنترنت.

#### ج) تقسيم الشبكات إلى شبكات فرعية

* **الغرض:** تقسيم شبكة كبيرة إلى شبكات فرعية أصغر وأكثر قابلية للإدارة. يساعد هذا في تنظيم الشبكات، وتحسين الأمان، وتحسين أداء الشبكة.
* **الآلية:** يتم تحقيق التقسيم إلى شبكات فرعية عن طريق استعارة بتات من جزء المضيف في عنوان IP واستخدامها لإنشاء معرفات للشبكات الفرعية. يتم ذلك باستخدام **قناع الشبكة الفرعية**.
* **قناع الشبكة الفرعية:** رقم بطول 32 بت (لـ IPv4) يحدد أجزاء الشبكة والشبكة الفرعية من عنوان IP. يحتوي على تسلسل متتابع من 1s لبتات الشبكة والشبكة الفرعية، يليه تسلسل متتابع من 0s لبتات المضيف.
* **تدوين CIDR (التوجيه بين النطاقات غير المبني على الفئات):** طريقة أكثر مرونة لتمثيل بادئات الشبكة باستخدام شرطة مائلة يليها عدد بتات الشبكة (مثال: 192.168.1.0/24 يشير إلى أن أول 24 بت تمثل الشبكة). هذه هي الطريقة القياسية المستخدمة اليوم.
* **حساب التقسيم إلى شبكات فرعية (IPv4):**
    1.  تحديد عدد الشبكات الفرعية المطلوبة.
    2.  تحديد عدد المضيفين المطلوبين في كل شبكة فرعية.
    3.  حساب عدد البتات المطلوبة للشبكات الفرعية والمضيفين.
    4.  تحديد قناع الشبكة الفرعية.
    5.  تحديد عناوين الشبكات الفرعية الصالحة، وعناوين البث، ونطاقات المضيفين القابلة للاستخدام لكل شبكة فرعية.
* **التقسيم إلى شبكات فرعية في IPv6:** بينما يوجد مفهوم التقسيم إلى شبكات فرعية في IPv6، فإن مساحة العناوين الشاسعة تجعله أقل متعلقًا بالحفاظ على العناوين وأكثر متعلقًا بتنظيم الشبكة. عادةً ما تكون الشبكات الفرعية في IPv6 بحجم ثابت (/64).

### 3. خوارزميات التوجيه

تُستخدم خوارزميات التوجيه من قبل الموجهات لتحديد أفضل مسار لحزم البيانات. يمكن تصنيفها على نطاق واسع إلى:

#### أ) التوجيه الثابت مقابل الديناميكي

* **التوجيه الثابت:**
    * يتم تكوين جداول التوجيه يدويًا من قبل مسؤول الشبكة.
    * بسيط التنفيذ للشبكات الصغيرة والمستقرة.
    * غير قادر على التكيف مع تغييرات الشبكة أو الأعطال.
    * مناسب لحالات محددة مثل الاتصال بشبكة بعيدة واحدة.
* **التوجيه الديناميكي:**
    * تتعلم الموجهات تلقائيًا عن طوبولوجيا الشبكة وتحديث جداول التوجيه الخاصة بها عن طريق تبادل المعلومات مع الموجهات الأخرى.
    * أكثر تعقيدًا في التكوين الأولي ولكنه قابل للتكيف بدرجة كبيرة مع تغييرات الشبكة والأعطال.
    * قابل للتوسع للشبكات الأكبر حجمًا والأكثر تعقيدًا.

#### ب) توجيه ناقل المسافة

* **المبدأ:** يحتفظ كل موجه بجدول توجيه يسرد أفضل مسافة معروفة (مثال: عدد القفزات) والاتجاه (الموجه التالي) إلى كل شبكة وجهة.
* **تبادل المعلومات:** تتبادل الموجهات بشكل دوري جداول التوجيه الكاملة مع جيرانها المتصلين مباشرة.
* **مثال على الخوارزمية:** خوارزمية **Bellman-Ford** هي خوارزمية شائعة مستخدمة في بروتوكولات توجيه ناقل المسافة.
* **البروتوكولات:** RIP (بروتوكول معلومات التوجيه) هو مثال معروف على بروتوكول توجيه ناقل المسافة.
* **القيود:** يمكن أن يعاني من تقارب بطيء (يستغرق الشبكة وقتًا للتكيف مع التغييرات) ومشكلة "العد إلى اللانهاية" (قد تحدث حلقات توجيه).

#### ج) توجيه حالة الرابط

* **المبدأ:** يحتفظ كل موجه بخريطة كاملة لطوبولوجيا الشبكة. يعرف عن جميع الموجهات والوصلات بينها، بالإضافة إلى تكلفة كل وصلة.
* **تبادل المعلومات:** تتبادل الموجهات معلومات حول حالة الوصلات المتصلة بها مباشرة مع جميع الموجهات الأخرى في الشبكة. تسمى هذه المعلومات إعلان حالة الرابط (LSA).
* **مثال على الخوارزمية:** تُستخدم خوارزمية **Dijkstra** (أقصر مسار أولاً - SPF) من قبل كل موجه لحساب أقصر مسار إلى جميع الوجهات الأخرى بناءً على معلومات حالة الرابط المجمعة.
* **البروتوكولات:** OSPF (أقصر مسار أولاً مفتوح) و IS-IS (نظام وسيط إلى نظام وسيط) هما بروتوكولا توجيه لحالة الرابط شائعان.
* **المزايا:** تقارب أسرع، وأقل عرضة لحلقات التوجيه مقارنة بتوجيه ناقل المسافة.

### 4. البروتوكولات

تعمل عدة بروتوكولات رئيسية في طبقة الشبكة:

#### أ) IP (بروتوكول الإنترنت)

* **البروتوكول الأساسي:** البروتوكول الأساسي المسؤول عن عنونة وتوجيه الحزم عبر الشبكات.
* **لا موجه وغير موثوق:** يوفر IP خدمة لا موجهة (لا يوجد إنشاء اتصال مسبق) وهو غير موثوق (لا يوجد ضمان للتسليم). يتم اكتشاف الأخطاء، لكن استعادة الخطأ هي مسؤولية بروتوكولات الطبقات الأعلى (مثل TCP).
* **تنسيق الحزمة:** يحدد IP بنية حزم IP (رزم البيانات)، بما في ذلك عناوين IP المصدر والوجهة، ومعلومات الرأس (مثال: time-to-live - TTL)، والحمولة (البيانات من الطبقات الأعلى).

#### ب) ICMP (بروتوكول رسائل التحكم في الإنترنت)

* **الغرض:** يُستخدم لإرسال رسائل الخطأ ورسائل التحكم/المعلومات بين أجهزة الشبكة.
* **الوظيفة:** تُستخدم رسائل ICMP للإبلاغ عن الأخطاء (مثال: الوجهة غير متاحة، انتهى الوقت)، وطلب المعلومات (مثال: طلب/رد الصدى المستخدم من خلال أمر `ping`)، وإجراء تشخيصات شبكية أخرى.
* **أمثلة:** أداة `ping` تستخدم طلبات وردود صدى ICMP لاختبار اتصال الشبكة. تستخدم أداة `traceroute` (أو `tracert` على Windows) رسائل ICMP "انتهى الوقت" لتتبع مسار الحزمة.

#### ج) ARP (بروتوكول حل العناوين)

* **الغرض:** يُستخدم لحل عنوان منطقي (عنوان IP) إلى عنوان فعلي (عنوان MAC) داخل نفس مقطع الشبكة المحلية.
* **العملية:** عندما يحتاج مضيف إلى إرسال حزمة إلى مضيف آخر على نفس الشبكة، فهو يعرف عنوان IP الوجهة ولكنه يحتاج إلى عنوان MAC الوجهة لتأطير الحزمة في طبقة وصلة البيانات. يبث المضيف المرسل طلب ARP يحتوي على عنوان IP الوجهة. يستجيب المضيف الذي يمتلك عنوان IP هذا برد ARP يحتوي على عنوان MAC الخاص به.
* **ذاكرة التخزين المؤقت لـ ARP:** تحتفظ المضيفات بذاكرة تخزين مؤقت لـ ARP لتخزين تعيينات عناوين IP إلى MAC التي تم حلها مؤخرًا لتجنب إرسال طلبات ARP لكل اتصال.

### 5. أجهزة الشبكة

تتضمن طبقة الشبكة بشكل أساسي نوعين رئيسيين من أجهزة الشبكة:

#### أ) الموجهات

* **الوظيفة الأساسية:** توجيه حزم البيانات بين الشبكات المختلفة بناءً على عناوين IP الوجهة الخاصة بها.
* **الميزات الرئيسية:**
    * تحتفظ بجداول التوجيه لتحديد أفضل مسار للحزم.
    * تربط مقاطع شبكية مختلفة (يمكن أن تكون تقنيات شبكية مختلفة).
    * تنفذ التوجيه الآني للحزم بناءً على قرارات التوجيه.
    * يمكنها تنفيذ ميزات أمان مثل الجدران النارية وقوائم التحكم في الوصول (ACLs).

#### ب) البوابات

* **مصطلح أوسع:** البوابة هي جهاز يعمل كنقطة دخول إلى شبكة أخرى. يمكن أن تكون موجهًا، أو جدار حماية، أو نوعًا آخر من الأجهزة.
* **البوابة الافتراضية:** في سياق شبكات IP، البوابة الافتراضية هي موجه على الشبكة المحلية يستخدمه المضيف لإرسال حركة المرور إلى الوجهات خارج شبكته الخاصة.
* **تحويل البروتوكول:** يمكن للبوابات أيضًا إجراء تحويل للبروتوكول بين معماريات أو بروتوكولات الشبكات المختلفة، على الرغم من أن هذا أقل شيوعًا في التوجيه البسيط لـ IP.

## النقاط الرئيسية للامتحان الذاتي

* **افهم الوظائف الأساسية:** العنونة المنطقية (عناوين IP)، التوجيه (اختيار المسار)، والتوجيه الآني (حركة الحزمة).
* **أتقن عنونة IP:** كن قادرًا على شرح بنية عناوين IPv4 و IPv6، وفهم مفاهيم التقسيم إلى شبكات فرعية وحساباتها (خاصة لـ IPv4)، ومعرفة أنواع عناوين IP المختلفة.
* **ميز بين خوارزميات التوجيه:** افهم الاختلافات بين التوجيه الثابت والديناميكي، وكن قادرًا على شرح المبادئ الأساسية لخوارزميات توجيه ناقل المسافة وحالة الرابط. اعرف البروتوكولات الشائعة المرتبطة بكل منها.
* **اعرف بروتوكولات طبقة الشبكة الرئيسية:** افهم الغرض والعملية الأساسية لـ IP و ICMP و ARP.
* **حدد دور أجهزة الشبكة:** افهم بوضوح وظيفة الموجهات والبوابات في طبقة الشبكة.

## الممارسة والمراجعة

* **اعمل على أمثلة:** تدرب على حسابات التقسيم إلى شبكات فرعية لـ IPv4.
* **قارن وقابل:** أنشئ جداول لمقارنة خوارزميات التوجيه المختلفة وإصدارات عناوين IP.
* **اربطها بسيناريوهات واقعية:** فكر في كيفية تطبيق هذه المفاهيم على استخدامك الخاص للإنترنت وإعدادات الشبكة.
* **راجع أوراق الامتحانات السابقة:** افهم أنواع الأسئلة التي تُطرح عادةً حول هذا الموضوع في الامتحان الذاتي الصيني.

من خلال الفهم الشامل لهذه المفاهيم، ستبني أساسًا قويًا في طبقة الشبكة، وهو أمر أساسي لمزيد من الدراسات في شبكات الحاسوب. حظًا موفقًا في دراستك!