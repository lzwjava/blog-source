---
audio: false
generated: true
image: false
lang: ar
layout: post
model: deepseek/deepseek-v3.2-exp
title: دليل وضع وكيل GitHub Copilot
translated: true
type: note
---

بالتأكيد. إليك دليلًا شاملاً للوضع الوكيل (Agent Mode) في GitHub Copilot، يغطي ما هو، وكيف يعمل، واستخداماته، وأفضل الممارسات.

---

### **دليل شامل للوضع الوكيل (Agent Mode) في GitHub Copilot**

#### **1. ما هو الوضع الوكيل؟ تشبيه بسيط**

فكر في GitHub Copilot في وضعين متميزين:

*   **Copilot القياسي (المساعد):** زميلك في **برمجة الزوج**. يجلس بجانبك، ويقدم اقتراحات سطرًا بسطر أو دالةً بدالة. أنت لا تزال في مقعد السائق، تتحكم في الاتجاه العام والهيكلة والمنطق. تقبل اقتراحاته أو ترفضها أو تعدلها كما ترى مناسبًا.
*   **الوضع الوكيل (الطيار الآلي):** مبرمجك **المتدرب**. تمنحه مهمة عالية المستوى ("مطالبة")، وهو يأخذ زمام المبادرة. إنه يخطط ويكتب ويحرر ويختبر الكود بشكل مستقل لإكمال المهمة، وغالبًا ما يجري تغييرات متعددة عبر ملفات مختلفة دون الحاجة إلى تدخلك في كل خطوة.

**في الجوهر، الوضع الوكيل هو ميزة متقدمة موجهة نحو الهدف تسمح لـ Copilot بتنفيذ مهام برمجة معقدة متعددة الخطوات بناءً على تعليمات لغة طبيعية واحدة.**

---

#### **2. كيف يعمل الوضع الوكيل؟ الآليات الأساسية**

الوضع الوكيل ليس مجرد إكمال تلقائي أذكى؛ إنه تحول في كيفية تفاعل Copilot مع قاعدة الكود الخاصة بك. إليك تفصيل العملية:

**الخطوة 1: المستخدم يبدأ المهمة**
تقوم باستدعاء الوضع الوكيل، عادةً عن طريق بدء تعليق في الكود الخاص بك بأمر شرطة مائل محدد. الأكثر شيوعًا هو `/fix` للمشاكل التي حددها Copilot، ولكن الأمر الأقوى غالبًا هو شيء مثل `/explain` أو اختصار مفتاح مخصص لفتح دردشة الوكيل.

**الخطوة 2: تحليل المهمة والتخطيط**
الوكيل لا يبدأ في الكتابة فحسب. إنه يحلل أولاً مطالبتك وقاعدة الكود الخاصة بك.
*   **يقرأ ملفك الحالي والملفات ذات الصلة** لفهم السياق.
*   **يضع خطة.** داخليًا، يحلل طلبك عالي المستوى ("أضف مصادقة المستخدم") إلى مهام فرعية أصغر قابلة للإدارة ("1. التحقق من وجود مكتبة مصادقة. 2. إنشاء دالة `login`. 3. إنشاء وسيط `verifyToken`. 4. تحديد المسار الرئيسي.").

**الخطوة 3: التنفيذ التكراري و "التفكير"**
هذا هو جوهر الوضع الوكيل. يدخل الوكيل في حلقة:
*   **توليد الكود:** يكتب كودًا لإكمال أول مهمة فرعية.
*   **تنفيذ الكود (محاكاة):** لا *يعمل* الكود فعليًا في بيئتك، لكنه يستخدم بيانات التدريب الواسعة والنماذج الداخلية لمحاكاة ما سيفعله الكود، والتحقق من أخطاء Syntax والأخطاء المنطقية الواضحة وعدم تطابق الأنواع.
*   **مراجعة الذات والتصحيح:** يراجع الكود الذي أنتجه. إذا "اعتقد" أن هناك خطأ ما، سيعيد كتابة هذا الجزء. يمكنك غالبًا رؤية هذه العملية كمؤشر "جاري التفكير..." أو "جاري التخطيط..." في واجهة المستخدم.
*   **كرر:** ينتقل إلى المهمة الفرعية التالية، باستخدام سياق الكود الذي كتبه للتو.

**الخطوة 4: العرض والموافقة**
بمجرد أن يكمل الوكيل التسلسل المخطط له للإجراءات، يقدم لك ملخصًا للتغييرات.
*   يظهر لك diff (الإضافات الخضراء/الحذف الأحمر الكلاسيكي) لجميع الملفات التي عدلها.
*   يقدم شرحًا بلغة طبيعية لما فعله ولماذا.
*   يُعطيك خيار **قبول**، **رفض**، أو أحيانًا **إعادة توليد** الحل.

**التقنيات الأساسية التي تمكن هذا:**
*   **نماذج اللغة الكبيرة (LLMs):** نسخة أكثر قوة ومتخصصة من نموذج GPT تفهم الكود والتخطيط.
*   **الوعي بمساحة العمل:** يتمتع الوضع الوكيل بـ "أذونات" أوسع لقراءة وتحليل ملفات متعددة في مشروعك، وليس فقط الملف الذي تقوم بتحريره حاليًا.
*   **هندسات التفكير والتخطيط:** تقنيات متقدمة مثل Chain-of-Thought (CoT) أو Tree-of-Thought (ToT) التي تسمح للنموذج بتفكيك المشكلات منطقيًا.

---

#### **3. الاستخدام: كيف ومتى تستخدم الوضع الوكيل**

**كيفية تفعيله:**
يمكن أن تختلف الطريقة الدقيقة اعتمادًا على بيئة التطوير المتكاملة (VS Code، JetBrains، إلخ) وخطة Copilot (Pro، Business). تشمل الطرق الشائعة:
*   استخدام **أمر شرطة مائل** (مثل `/fix`، `/tests`) في تعليق.
*   كتابة طلب بلغة طبيعية في لوحة **Copilot Chat** المخصصة وتوجيهه للعمل كوكيل.
*   اختصار مفتاح محدد لبدء إدخال المهمة الخاصة بالوكيل.

**حالات الاستخدام المثالية للوضع الوكيل:**

1.  **إعادة الهيكلة المعقدة (Refactoring):**
    *   **المطالبة:** "`/refactor الدالة `calculatePrice` لاستخدام نمط الإستراتيجية (Strategy Pattern). أنشئ فئات منفصلة لـ `RegularPricing` و `MemberPricing` و `SalePricing`."`
    *   *لماذا يعمل:* هذه مهمة متعددة الخطوات تتضمن إنشاء ملفات/فئات جديدة، وتعديل تواقيع الدوال الحالية، وتحديث الاستدعاءات إلى الدالة.

2.  **تنفيذ الميزات محددة جيدًا:**
    *   **المطالبة:** "`أضف endpoint API جديد `POST /api/v1/books` يقبل جسم JSON بـ `title` و `author` و `isbn`، ويفتح صحة الإدخال، ويحفظه في جدول `books` في قاعدة البيانات.`"
    *   *لماذا يعمل:* الميزة لها هيكل واضح (REST API، تحقق من الصحة، تفاعل مع قاعدة البيانات) يمكن للوكيل تحليله.

3.  **كتابة اختبارات شاملة:**
    *   **المطالبة:** "`/tests أنشئ اختبارات وحدة لفئة `UserService`، لتغطية جميع الدوال العامة وحالات الحدود مثل تنسيقات البريد الإلكتروني غير الصالحة والمستخدمين المكررين."`
    *   *لماذا يعمل:* يمكن للوكيل تحليل فئة `UserService`، وفهم ما تفعله كل دالة، وإنشاء حالات اختبار بشكل منهجي لمسارات النجاح والفشل.

4.  **تصحيح الأخطاء وإصلاح المشكلات المعقدة:**
    *   **المطالبة:** "`/fix أحصل على 'NullPointerException' في السطر 47 من `PaymentProcessor.java` عندما ترجع دالة `user.getProfile()` قيمة null.`"
    *   *لماذا يعمل:* يمكن للوكيل تتبع تدفق الكود، وتحديد السبب الجذري (عدم وجود فحوصات null)، واقتراح إصلاح قوي، وإضافة سلامة من null محتملة إلى أجزاء أخرى ذات صلة في الكود.

5.  **إنشاء كود Boilerplate:**
    *   **المطالبة:** "`أنشئ مكون React جديدًا باسم `ProductCard` يأخذ `product` كـ props (بـ `name`، `imageUrl`، `price`) ويعرضهم في بطاقة مع زر.`"
    *   *لماذا يعمل:* بينما يمكن لـ Copilot القياسي القيام بذلك، يمكن للوكيل ضمان الاتساق مع أنماط وهيكل المكونات الحالية في مشروعك.

**متى تتجنب الوضع الوكيل (أو تستخدمه بحذر):**

*   **المهام الغامضة أو غير المحددة النطاق:** "اجعل التطبيق أفضل." سيفشل الوكيل بدون هدف واضح وقابل للتنفيذ.
*   **المهام التي تتطلب منطق أعمال عميق:** "نفذ قاعدة حساب الضريبة الربعية لمنطقة EMEA." ما لم يكن هذا المنطق موثقًا في الكود الخاص بك، فمن المرجح أن يخترع الوكيل قواعد غير صحيحة.
*   **القرارات المعمارية:** "هل يجب أن نستخدم هندسة microservices أم monolith؟" هذا قرار استراتيجي يتطلب حكمًا بشريًا.
*   **الكود الحساس والحرج للأمان:** لا تقبل أبدًا كودًا يتعلق بالمصادقة أو التشفير أو المدفوعات دون مراجعة أمنية شاملة بقيادة بشرية.

---

#### **4. أفضل الممارسات للاستخدام الفعال**

1.  **اكتب مطالبات مفصلة ومحددة:** جودة المخرجات تتناسب طرديًا مع جودة المدخلات. قم بتضمين السياق والقيود والنتيجة المرجوة.
    *   **سيئة:** "أضف زرًا."
    *   **جيدة:** "في مكون `UserProfile.jsx`، أضف زرًا أحمر 'حذف الحساب' في الزاوية اليمنى العليا. عند النقر عليه، يجب أن يستدعي الدالة الموجودة `deleteUserAccount` من `userService` ويمرر `userId` الحالي."

2.  **راجع جميع التغييرات بدقة:** **أنت لا تزال مسؤولاً عن الكود.** تعامل مع مخرجات الوكيل على أنها مسودة أولى. تحقق من:
    *   الأخطاء المنطقية.
    *   الثغرات الأمنية.
    *   عدم كفاءة الأداء.
    *   الالتزام بمعايير كتابة الكود لفريقك.

3.  **استخدمه لـ "أول 80%":** الوضع الوكيل رائع لإنجاز الجزء الأكبر من المهمة المتكررة أو المفهومة جيدًا بسرعة. توقع أن تصقل الـ 20% النهائية بنفسك.

4.  **كرر على الحل:** إذا لم تكن النتيجة الأولى مثالية، لا ترفضها فحسب. استخدم الدردشة لتقديم ملاحظات: "هذا جيد، ولكن من فضلك أضف معالجة الأخطاء إلى endpoint API الذي أنشأته."

5.  **حافظ على قاعدة الكود الخاصة بك نظيفة:** يعمل الوكيل بشكل أفضل عندما يكون مشروعك منظمًا جيدًا وكودك نظيفًا. قاعدة الكود الفوضوية يمكن أن تربكه وتؤدي إلى نتائج سيئة.

### **الخلاصة: Copilot القياسي مقابل الوضع الوكيل**

| الميزة | Copilot القياسي (المساعد) | الوضع الوكيل (الطيار الآلي) |
| :--- | :--- | :--- |
| **الدور** | زميل برمجة | مبرمج متدرب |
| **التفاعل** | سطرًا بسطر، اقتراحات مضمنة | موجه نحو الهدف، أوامر مدفوعة بالدردشة |
| **النطاق** | ملف واحد، السياق الحالي | ملفات متعددة، مساحة العمل بأكملها |
| **التحكم** | لديك تحكم دقيق في كل اقتراح | تفوض مهمة وتراجع النتيجة النهائية |
| **الأفضل لـ** | البرمجة اليومية، المقاطع السريعة، إكمال الأفكار | الميزات المعقدة، إعادة الهيكلة، كتابة مجموعات الاختبار، إصلاح الأخطاء |

يمثل الوضع الوكيل قفزة كبيرة نحو تطوير برمجيات أكثر استقلالية. من خلال فهم آلياته واستخدامه بشكل استراتيجي، يمكنك تفريغ مهام البرمجة المملة والمعقدة، مما يسمح لك بالتركيز على التصميم عالي المستوى وحل المشكلات والابتكار.