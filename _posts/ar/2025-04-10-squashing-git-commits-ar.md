---
audio: false
generated: true
image: false
lang: ar
layout: post
model: x-ai/grok-code-fast-1
title: سحق عمليات Git حسب المؤلف
translated: true
type: note
---

### فهم الهدف
لا يحتوي Git على أمر مدمج "لدمج المحفوظات حسب المؤلف"، ولكن يمكنك تحقيق ذلك باستخدام إعادة التوجيه التفاعلية لتجميع ودمج المحفوظات يدويًا. الفكرة هي أخذ آخر 10 محفوظات (بافتراض أنها تشمل 3 مؤلفين متميزين) ودمج محفوظات كل مؤلف في محفوظة واحدة لكل مؤلف، مما ينتج عنه 3 محفوظات إجمالاً.

هذا يفترض:
- أنك على الفرع الذي يحتوي على تلك المحفوظات (مثل الفرع الرئيسي main أو فرع الميزة feature branch).
- أن المحفوظات خطية (لا توجد عمليات دمج).
- أنك تعرف المؤلفين مسبقًا.

إذا كانت المحفوظات غير خطية أو معقدة، فقد يتطلب ذلك معالجة دقيقة لتجنب التعارضات.

### خطوات دمج المحفوظات حسب المؤلف
1. **التحقق من آخر 10 محفوظات**  
   نفّذ `git log --oneline -10` لرؤية آخر 10 محفوظات، بما في ذلك تجزئاتها ومؤلفيها ورسائلها. حدد المؤلفين (على سبيل المثال، عبر `git log --format="%an" -10 | sort | uniq` لإدراج المؤلفين الفريدين).

2. **بدء إعادة توجيه تفاعلية**  
   حدد المحفوظة التي تسبق المحفوظة العاشرة. إذا كانت أحدث محفوظة لديك عند HEAD، ويوجد 10 محفوظات، فإن الأساس هو `HEAD~10`. نفّذ:  
   ```
   git rebase -i HEAD~10
   ```  
   يفتح هذا محررًا (vim افتراضيًا) يحتوي على قائمة آخر 10 محفوظات. تبدو هكذا:  
   ```
   pick abc123 First commit by Author A  
   pick def456 Second commit by Author A  
   pick ghi789 Commit by Author B  
   pick jkl012 Commit by Author C  
   ... (المزيد من المحفوظات)
   ```  
   - يبدأ كل سطر بـ `pick`.

3. **تحديد المحفوظات المراد دمجها حسب المؤلف**  
   لكل مؤلف، غيّر `pick` إلى `s` (squash) في جميع محفوظاته باستثناء أول محفوظة تريد الاحتفاظ بها لذلك المؤلف. قرر بشأن:
   - محفوظة "احتفاظ" واحدة لكل مؤلف (اختر الأقدم أو الأكثر صلة كأساس).
   - غيّر الباقي من ذلك المؤلف إلى `s` لدمجهم فيها.  
   مثال (لـ 3 مؤلفين):  
   ```
   pick abc123 First commit by Author A (احتفظ بهذه)  
   s    def456 Second commit by Author A (ادمج في الأعلى)  
   pick ghi789 Commit by Author B (احتفظ بهذه)  
   pick jkl012 First commit by Author C (احتفظ بهذه)  
   s    mno345 Second commit by Author C (ادمج في الأعلى)  
   ```  
   احفظ واخرج من المحرر. يبدأ هذا عملية إعادة التوجيه.

4. **تحرير رسائل المحفوظات أثناء إعادة التوجيه**  
   لكل عملية دمج، سيتوقف Git ويسمح لك بتحرير رسالة المحفوظة (الجمع بين المحفوظات المدمجة). قم بتحديثها إلى شيء مثل "محفوظات مدموجة بواسطة Author A: الوصف". احفظ واستمر.  
   إذا كان هناك المزيد من عمليات الدمج، كرر لكل مؤلف. نفّذ `git rebase --continue` بعد كل تحرير.  
   إذا نشأت تعارضات (نادرًا في الدمج البسيط)، قم بحلها باستخدام `git add <file>` ثم `git rebase --continue`.

5. **التحقق والدفع**  
   بعد اكتمال إعادة التوجيه، تحقق من السجل: `git log --oneline -10`. يجب أن ترى 3 محفوظات، كل واحدة من مؤلف.  
   قم بالدفع القسري إذا كنت تدفع إلى فرع مشترك (إعادة توجيه مدمرة): `git push --force-with-lease origin branch-name`.  
   **تحذير:** قم بالدفع القسري فقط إذا كنت متأكدًا من أن المحفوظات القديمة غير مطلوبة في مكان آخر، لأن هذا يعيد كتابة التاريخ.

### نصائح وتحذيرات
- إذا كان للمؤلفين العديد من المحفوظات، فقم بتجميعهم بكفاءة في قائمة إعادة التوجيه (كل محفوظات المؤلف A معًا، إلخ).
- للأتمتة، يمكن أن تساعد أدوات مثل `git-interactive-rebase-tool` أو البرامج النصية، لكن إعادة التوجيه اليدوية مباشرة.
- إذا كنت بحاجة إلى التصفية حسب المؤلف الدقيق، استخدم `git log --author="Author Name"` مسبقًا للتأكد.
- اختبر أولاً على فرع احتياطي لتجنب فقدان البيانات.

لمزيد من المعلومات حول إعادة التوجيه: `git help rebase`. إذا كان هذا لا يتطابق مع سيناريو محفوظاتك بالضبط، قدم المزيد من التفاصيل حول هيكل المحفوظات.