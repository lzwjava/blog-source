---
audio: false
generated: true
lang: ar
layout: post
title: 'إتقان JMeter: اختبار الأداء'
translated: true
type: note
---

Apache JMeter هو أداة مفتوحة المصدر قوية مصممة في المقام الأول لاختبار الأداء، على الرغم من أنه يمكن استخدامها أيضًا للاختبار الوظيفي. تُستخدم على نطاق واسع لاختبار أداء تطبيقات الويب وواجهات برمجة التطبيقات (APIs) وقواعد البيانات والخدمات الأخرى من خلال محاكاة مستخدمين متعددين وقياس كيفية استجابة النظام تحت الحمل. فيما يلي دليل خطوة بخطوة حول كيفية استخدام JMeter بفعالية، بدءًا من التثبيت وحتى تشغيل اختبار أساسي وتحليل النتائج.

---

## الخطوة 1: تثبيت JMeter
قبل أن تتمكن من استخدام JMeter، تحتاج إلى تثبيته على جهازك. إليك الطريقة:

1. **المتطلبات الأساسية**:  
   JMeter هو تطبيق يعتمد على جافا، لذا يجب أن يكون لديك Java Development Kit (JDK) أو Java Runtime Environment (JRE) مثبتًا. يُوصى بالإصدار 8 أو أعلى. يمكنك التحقق من ذلك عن طريق تشغيل الأمر `java -version` في الطرفية أو موجه الأوامر. إذا لم تكن جافا مثبتة، قم بتنزيلها وتثبيتها من [موقع جافا الرسمي](https://www.java.com).

2. **تنزيل JMeter**:  
   قم بزيارة [موقع Apache JMeter](https://jmeter.apache.org/download_jmeter.cgi) وقم بتنزيل أحدث إصدار ثنائي (عادةً ما يكون ملف `.zip` أو `.tgz`).

3. **استخراج الملف**:  
   قم بفك ضغط الملف الذي تم تنزيله إلى دليل من اختيارك (مثل `C:\JMeter` على Windows أو `~/JMeter` على أنظمة Unix). يحتوي المجلد المستخرج على جميع الملفات اللازمة لتشغيل JMeter.

4. **تشغيل JMeter**:  
   - انتقل إلى مجلد `bin` داخل الدليل المستخرج (مثل `C:\JMeter\apache-jmeter-5.x\bin`).
   - قم بتشغيل الملف التنفيذي المناسب:
     - على **Windows**: انقر نقرًا مزدوجًا فوق `jmeter.bat` أو قم بتشغيله عبر موجه الأوامر.
     - على **Unix/Linux/macOS**: نفذ `./jmeter.sh` في الطرفية.
   - يفتح هذا واجهة المستخدم الرسومية (GUI) لـ JMeter، حيث ستقوم بإنشاء خطط الاختبار وإدارتها.

---

## الخطوة 2: إنشاء خطة اختبار
**خطة الاختبار** في JMeter تحدد ما تريد اختباره وكيفية ذلك. إنها المخطط التفصيلي لاختبار الأداء الخاص بك. إليك كيفية إعداد خطة اختبار أساسية:

### إضافة مجموعة الخيوط (Thread Group)
1. في واجهة JMeter الرسومية، انقر بزر الماوس الأيمن على عقدة **Test Plan** في الجزء الأيسر وحدد **Add > Threads (Users) > Thread Group**.
2. قم بتكوين مجموعة الخيوط:
   - **Number of Threads (Users)**: عدد المستخدمين الظاهريين لمحاكاتهم (مثال: 10).
   - **Ramp-Up Period (seconds)**: الوقت الذي يستغرقه JMeter لبدء جميع الخيوط (مثال: 10 ثوانٍ تعني بدء خيط واحد في الثانية لمدة 10 خيوط).
   - **Loop Count**: عدد المرات التي يكرر فيها كل خيط الاختبار (مثال: 1 للتشغيل لمرة واحدة، أو حدد "Forever" للتكرار المستمر).

تقوم مجموعة الخيوط بمحاكاة حركة مرور المستخدمين. على سبيل المثال، 10 خيوط مع فترة تهيئة مدتها 10 ثوانٍ وتكرار واحد تعني أن 10 مستخدمين سيتصلون بالتطبيق على مدى 10 ثوانٍ، ويقوم كل منهم بتنفيذ الاختبار مرة واحدة.

### إضافة عينة (Sampler)
تحدد العينات الطلبات التي يرسلها JMeter إلى النظام المستهدف. لاختبار الويب، الأكثر شيوعًا هي عينة طلب HTTP:
1. انقر بزر الماوس الأيمن على مجموعة الخيوط وحدد **Add > Sampler > HTTP Request**.
2. قم بتكوين طلب HTTP:
   - **Protocol**: `http` أو `https`.
   - **Server Name or IP**: النطاق أو عنوان IP للنظام المستهدف (مثال: `example.com`).
   - **Port Number**: عادةً `80` لـ HTTP أو `443` لـ HTTPS (اتركه فارغًا إذا كان قياسيًا).
   - **Method**: `GET`، `POST`، إلخ، اعتمادًا على نوع الطلب.
   - **Path**: نقطة النهاية أو الصفحة المحددة (مثال: `/` للصفحة الرئيسية).
   - أضف معلمات أو نص طلب إذا لزم الأمر (مثال: لطلبات POST).

تخبر هذه العينة JMeter بالإجراء الذي يجب أن ينفذه كل مستخدم ظاهري.

### إضافة مستمع (Listener)
يجمع المستمعون نتائج الاختبار ويعرضونها:
1. انقر بزر الماوس الأيمن على مجموعة الخيوط وحدد **Add > Listener > View Results Tree** (أو مستمع آخر مثل **Summary Report**).
2. يعرض **View Results Tree** نتائج مفصلة لكل طلب، بما في ذلك أوقات الاستجابة ورموز الحالة وبيانات الاستجابة.

المستمعون ضروريون لتحليل أداء تطبيقك أثناء الاختبار.

### حفظ خطة الاختبار
انقر على **File > Save Test Plan As** واحفظ ملف `.jmx` الخاص بك (مثال: `mytest.jmx`). يسمح لك هذا بإعادة استخدامه أو تعديله لاحقًا.

---

## الخطوة 3: تشغيل الاختبار
لتنفيذ الاختبار الخاص بك:
1. في واجهة JMeter الرسومية، انقر على زر **Play** الأخضر (▶) في شريط الأدوات، أو انتقل إلى **Run > Start**.
2. سيقوم JMeter بمحاكاة المستخدمين المحددين في مجموعة الخيوط، وإرسال طلبات HTTP المُكونة.
3. شاهد النتائج تظهر في المستمع (مثل View Results Tree) أثناء تشغيل الاختبار.

للاختبارات الصغيرة، يكون التشغيل عبر واجهة المستخدم الرسومية جيدًا. للاختبارات الأكبر، راجع قسم "الاستخدام المتقدم" أدناه للحصول على الوضع غير الرسومي.

---

## الخطوة 4: تحليل النتائج
بعد اكتمال الاختبار، استخدم المستمع لمراجعة النتائج:
- **View Results Tree**: يُظهر نجاح/فشل كل طلب، ووقت الاستجابة، وبيانات الاستجابة.
- **Summary Report**: يوفر مقاييس مجمعة مثل متوسط وقت الاستجابة، والإنتاجية (الطلبات في الثانية)، ومعدل الخطأ.

تساعدك هذه المقاييس في تقييم أداء التطبيق (مثال: مدى سرعة استجابته تحت الحمل أو إذا فشل عند عدد معين من المستخدمين).

---

## مثال: اختبار صفحة ويب بسيطة
لنختبر `example.com` مع 10 مستخدمين:
1. شغّل JMeter.
2. أضف مجموعة خيوط:
   - الخيوط: 10
   - فترة التهيئة: 10 ثوانٍ
   - عدد التكرارات: 1
3. أضف عينة طلب HTTP:
   - البروتوكول: `http`
   - اسم الخادم: `example.com`
   - الطريقة: `GET`
   - المسار: `/`
4. أضف مستمع View Results Tree.
5. احفظ واشغل الاختبار.
6. تحقق من النتائج في View Results Tree لرؤية أوقات الاستجابة ورموز الحالة (مثال: 200 OK).

يقيس هذا الاختبار البسيط أداء `example.com` مع 10 مستخدمين في وقت واحد.

---

## استخدام متقدم
للحالات الأكثر تعقيدًا، تقدم JMeter ميزات إضافية:

### استخدام المعلمات (Parameterization)
استخدم **CSV Data Set Config** لإدخال بيانات مختلفة (مثل أسماء المستخدمين، كلمات المرور) في اختبارك من ملف CSV:
1. أضف **Config Element > CSV Data Set Config** إلى مجموعة الخيوط.
2. حدد مسار الملف وأسماء المتغيرات (مثال: `${username}`)، ثم استخدم هذه المتغيرات في طلب HTTP الخاص بك.

### الارتباط (Correlation)
معالجة القيم الديناميكية (مثل معرفات الجلسة، الرموز المميزة):
1. أضف **Post-Processor > Regular Expression Extractor** أو **JSON Extractor** بعد طلب.
2. استخرج قيمة (مثل رمز مميز) إلى متغير (مثال: `${token}`).
3. استخدم `${token}` في الطلبات اللاحقة (مثال: في الرؤوس أو المعلمات).

### التأكيدات (Assertions)
التحقق من صحة الاستجابات:
1. أضف **Assertion > Response Assertion** إلى العينة.
2. تحقق من نص محدد، أو رموز استجابة (مثال: 200)، أو استخدم JSONPath لاختبار API.

### الوضع غير الرسومي (Non-GUI Mode)
للاختبارات الكبيرة أو الأتمتة:
- شغّل JMeter من سطر الأوامر:
  ```
  jmeter -n -t mytest.jmx -l results.jtl
  ```
  - `-n`: الوضع غير الرسومي.
  - `-t`: ملف خطة الاختبار.
  - `-l`: ملف سجل النتائج (مثال: `.jtl`).
- إنشاء تقرير HTML:
  ```
  jmeter -n -t mytest.jmx -l results.jtl -e -o report_folder
  ```
  - `-e`: إنشاء التقرير.
  - `-o`: مجلد الإخراج لتقرير HTML.

### الاختبار الموزع (Distributed Testing)
للأحمال العالية:
1. قم بإعداد عدة مثيلات لـ JMeter على أجهزة مختلفة.
2. قم بتكوين ملف `jmeter.properties` على الجهاز الرئيسي لتضمين عناوين IP العبيد.
3. شغّل الاختبار من الجهاز الرئيسي لتنسيق توليد الحمل.

---

## نصائح إضافية
- **البروتوكولات المدعومة**: إلى جانب HTTP، يدعم JMeter FTP و JDBC و JMS والمزيد، مما يجعله متعدد الاستخدامات للأنظمة المختلفة.
- **مراقبة الخادم**: قم بإقران JMeter مع أدوات من جانب الخادم (مثل PerfMon) لمراقبة أداء وحدة المعالجة المركزية والذاكرة وقاعدة البيانات أثناء الاختبارات.
- **المحاكاة الواقعية**: أضف **HTTP Cookie Manager** أو **HTTP Cache Manager** أو **Timers** لمحاكاة سلوك المتصفح أو وقت تفكير المستخدم.
- **الاختبار الوظيفي**: استخدم التأكيدات للتحقق من صحة الاستجابة، وليس الأداء فقط.

---

## الخلاصة
لاستخدام JMeter:
1. قم بتثبيته مع جافا وشغّل الواجهة الرسومية.
2. أنشئ خطة اختبار تحتوي على مجموعة خيوط وعينات ومستمعين.
3. قم بتكوين عناصر الاختبار (المستخدمين، الطلبات، إلخ).
4. شغّل الاختبار وقم بتحليل النتائج.

للبدء بشكل بسيط، اختبر صفحة ويب مثل `example.com` كما هو موضح أعلاه. مع اكتساب الخبرة، استكشف الميزات المتقدمة مثل استخدام المعلمات والارتباط والاختبار الموزع للتعامل مع السيناريوهات المعقدة والواقعية. تجعل مرونة JMeter وتوثيقه الواسع منه أداة قيمة لكل من المبتدئين والمختبرين المتقدمين.