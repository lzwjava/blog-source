---
audio: false
generated: true
image: false
lang: ar
layout: post
model: x-ai/grok-4-fast
title: تكوين خوادم DNS لبرنامج Docker Daemon
translated: true
type: note
---

لتكوين خوادم DNS لبرنامج Docker daemon (والتي ستستخدمها الحاويات ما لم يتم التجاوز عنها على مستوى الحاوية)، يمكنك تعديل ملف `/etc/docker/daemon.json`. يسمح لك هذا الملف بتخصيص سلوك وقت تشغيل Docker.

### خطوات تكوين DNS

1. **تحرير ملف daemon.json**:
   - إذا كان الملف غير موجود، قم بإنشائه بامتيازات root (على سبيل المثال، باستخدام `sudo nano /etc/docker/daemon.json` أو محررك المفضل).
   - أضف أو حدّث مفتاح `dns` كمصفوفة من عناوين IP لخوادم DNS. على سبيل المثال، لاستخدام DNS العام من Google (8.8.8.8 و 8.8.4.4):

     ```json
     {
       "dns": ["8.8.8.8", "8.8.4.4"]
     }
     ```

     - يمكنك إضافة المزيد من الخوادم إذا لزم الأمر (مثل 1.1.1.1 من Cloudflare).
     - يطبق هذا الإعداد على جميع الحاويات المنشأة باستخدام الشبكة الافتراضية ما لم يُحدد خلاف ذلك.

2. **التحقق من صحة JSON**:
   - تأكد من أن الملف بصيغة JSON صحيحة. يمكنك استخدام أداة مثل `jq` للتحقق: `jq . /etc/docker/daemon.json`. إذا أظهر خطأ، قم بإصلاح بناء الجملة.

3. **إعادة تشغيل خدمة Docker**:
   - طبق التغييرات عن طريق إعادة تشغيل Docker:
     ```
     sudo systemctl restart docker
     ```
     - على الأنظمة التي لا تستخدم systemd (مثل توزيعات Linux القديمة)، استخدم `sudo service docker restart`.
   - تحقق من الحالة: `sudo systemctl status docker`.

4. **اختبار التكوين**:
   - شغّل حاوية اختبار وتحقق من حل أسماء DNS الخاص بها:
     ```
     docker run --rm busybox nslookup google.com
     ```
     - يجب أن يحل الأسماء باستخدام خوادم DNS التي قمت بتكوينها.

### ملاحظات
- **النطاق**: يقوم هذا بتكوين DNS لبرنامج Docker daemon على المضيف، مما يؤثر على حل أسماء الصادر للحاويات. لا يغير DNS نظام المضيف.
- **التجاوزات**: إذا كانت الحاوية تحتاج إلى DNS مختلف (على سبيل المثال، عبر وسيط `--dns` في أمر `docker run`)، فسيتجاوز هذا إعداد مستوى الـ daemon.
- **الأمان**: استخدام DNS عام مثل 8.8.8.8 جيد لمعظم الحالات، ولكن فكر في استخدام DNS داخلي لبيئات المؤسسات.
- **التوثيق**: لمزيد من الخيارات (مثل نطاقات بحث DNS)، راجع [وثائق Docker الرسمية حول daemon.json](https://docs.docker.com/engine/reference/commandline/dockerd/#daemon-configuration-file).

إذا واجهت أخطاء (مثل مشاكل الأذونات أو تحليل JSON)، شارك التفاصيل لمزيد من استكشاف الأخطاء وإصلاحها.