---
audio: false
generated: true
lang: ar
layout: post
title: 'فهم جي بي جي: أداة اتصال آمنة'
translated: true
type: note
---

## ما هو GPG؟
GPG، أو جنو برايفسي جارد، هو تطبيق مفتوح المصدر لمعيار OpenPGP (بريتي جود برايفسي). إنه أداة للاتصال الآمن، توفر التشفير وفك التشفير والتوقيعات الرقمية وإدارة المفاتيح. يُستخدم GPG على نطاق واسع لتأمين البريد الإلكتروني والملفات وبيانات أخرى، مما يضمن السرية والنزاهة والأصالة.

GPG متاح على معظم أنظمة التشغيل، بما في ذلك Linux وmacOS وWindows. يعتمد على سطر الأوامر ولكن يمكن دمجه مع أدوات واجهة المستخدم الرسومية أو عملاء البريد الإلكتروني مثل Thunderbird.

---

## كيف يعمل GPG
يستخدم GPG مزيجًا من **التشفير بالمفتاح المتناظر** و**التشفير بالمفتاح العام** لتأمين البيانات:

1.  **التشفير بالمفتاح المتناظر**:
    *   يستخدم مفتاحًا واحدًا لكل من التشفير وفك التشفير.
    *   يستخدم GPG خوارزميات المفتاح المتناظر (مثل AES) لتشفير البيانات الفعلية لأنها أسرع لمجموعات البيانات الكبيرة.
    *   يتم إنشاء مفتاح جلسة عشوائي لكل عملية تشفير.

2.  **التشفير بالمفتاح العام**:
    *   يستخدم زوجًا من المفاتيح: **مفتاح عام** للتشفير و**مفتاح خاص** لفك التشفير.
    *   يدعم GPG خوارزميات مثل RSA أو ECDSA لأزواج المفاتيح.
    *   يقوم المفتاح العام بتشفير مفتاح الجلسة، والذي يستخدم بعد ذلك لتشفير البيانات. يستخدم المستلم مفتاحه الخاص لفك تشفير مفتاح الجلسة، والذي يستخدم بعد ذلك لفك تشفير البيانات.

3.  **التوقيعات الرقمية**:
    *   يسمح GPG للمستخدمين بتوقيع البيانات باستخدام مفتاحهم الخاص لإثبات الأصالة والنزاهة.
    *   يقوم المستلم بالتحقق من التوقيع باستخدام المفتاح العام للمرسل.

4.  **إدارة المفاتيح**:
    *   يدير GPG المفاتيح في keyring، والذي يقوم بتخزين المفاتيح العامة والخاصة.
    *   يمكن إنشاء المفاتيح واستيرادها وتصديرها ونشرها على خوادم المفاتيح.

### عملية تشفير GPG
عند تشفير ملف أو رسالة:
1.  يقوم GPG بإنشاء **مفتاح جلسة** عشوائي للتشفير المتناظر.
2.  يتم تشفير البيانات بمفتاح الجلسة باستخدام خوارزمية متناظرة (مثل AES-256).
3.  يتم تشفير مفتاح الجلسة باستخدام **المفتاح العام** للمستلم باستخدام خوارزمية غير متناظرة (مثل RSA).
4.  يتم دمج مفتاح الجلسة المشفر والبيانات المشفرة في ملف أو رسالة إخراج واحدة.

عند فك التشفير:
1.  يستخدم المستلم **مفتاحه الخاص** لفك تشفير مفتاح الجلسة.
2.  يتم استخدام مفتاح الجلسة لفك تشفير البيانات باستخدام الخوارزمية المتناظرة.

يجمع هذا النهج الهجين بين سرعة التشفير المتناظر وأمان التشفير غير المتناظر.

---

## تثبيت GPG
GPG مثبت مسبقًا على العديد من توزيعات Linux. لأنظمة أخرى:
- **Linux**: قم بالتثبيت عبر مدير الحزم:
  ```bash
  sudo apt install gnupg  # Debian/Ubuntu
  sudo yum install gnupg  # CentOS/RHEL
  ```
- **macOS**: قم بالتثبيت عبر Homebrew:
  ```bash
  brew install gnupg
  ```
- **Windows**: قم بتنزيل Gpg4win من [gpg4win.org](https://gpg4win.org/).

التحقق من التثبيت:
```bash
gpg --version
```

---

## إنشاء مفاتيح GPG
لاستخدام GPG، تحتاج إلى زوج مفاتيح (مفاتيح عامة وخاصة).

### إنشاء المفاتيح خطوة بخطوة
شغّل الأمر التالي لإنشاء زوج مفاتيح:
```bash
gpg --full-generate-key
```

1.  **اختر نوع المفتاح**:
    *   الافتراضي هو RSA و RSA (الخيار 1).
    *   RSA مستخدم على نطاق واسع وآمن لمعظم الأغراض.

2.  **حجم المفتاح**:
    *   موصى به: 2048 أو 4096 بت (4096 أكثر أمانًا ولكنه أبطأ).
    *   مثال: اختر 4096.

3.  **انتهاء صلاحية المفتاح**:
    *   اختر تاريخ انتهاء صلاحية (مثل سنة واحدة) أو اختر 0 لعدم انتهاء الصلاحية.
    *   تعزز المفاتيح منتهية الصلاحية الأمان عن طريق تحديد عمر المفتاح الافتراضي.

4.  **معرف المستخدم**:
    *   أدخل اسمك، والبريد الإلكتروني، وتعليقًا اختياريًا.
    *   مثال: `John Doe <john.doe@example.com>`.

5.  **عبارة المرور**:
    *   عيّن عبارة مرور قوية لحماية المفتاح الخاص.
    *   مطلوب استخدام عبارة المرور هذه لفك التشفير والتوقيع.

مثال على الناتج بعد تشغيل الأمر:
```
gpg: key 0x1234567890ABCDEF marked as ultimately trusted
gpg: generated key pair
```

### تصدير المفاتيح
- **تصدير المفتاح العام**:
  ```bash
  gpg --armor --output public-key.asc --export john.doe@example.com
  ```
  ينشئ هذا ملفًا (`public-key.asc`) يحتوي على مفتاحك العام بتنسيق ASCII.

- **تصدير المفتاح الخاص** (كن حذرًا، احتفظ به بأمان):
  ```bash
  gpg --armor --output private-key.asc --export-secret-keys john.doe@example.com
  ```

---

## تشفير وفك تشفير الملفات
### تشفير ملف
لتشفير ملف لمستلم:
1.  تأكد من وجود المفتاح العام للمستلم في keyring الخاص بك:
    ```bash
    gpg --import recipient-public-key.asc
    ```
2.  قم بتشفير الملف:
    ```bash
    gpg --encrypt --recipient john.doe@example.com --output encrypted-file.gpg input-file.txt
    ```
    - `--recipient`: يحدد البريد الإلكتروني أو معرف المفتاح للمستلم.
    - `--output`: يحدد ملف الإخراج.
    - الناتج هو `encrypted-file.gpg`، والذي لا يمكن فك تشفيره إلا من قبل المستلم.

### فك تشفير ملف
لفك تشفير ملف مشفر لك:
```bash
gpg --decrypt --output decrypted-file.txt encrypted-file.gpg
```
- أدخل عبارة المرور الخاصة بك عند المطالبة.
- يتم حفظ المحتوى الذي تم فك تشفيره في `decrypted-file.txt`.

---

## توقيع والتحقق من البيانات
### توقيع ملف
يثبت التوقيع أصالة البيانات وسلامتها.
- **توقيع واضح** (يضمن توقيعًا يمكن للبشر قراءته):
  ```bash
  gpg --clearsign input-file.txt
  ```
  الناتج: `input-file.txt.asc` مع محتوى الملف والتوقيع.

- **توقيع منفصل** (ملف توقيع منفصل):
  ```bash
  gpg --detach-sign input-file.txt
  ```
  الناتج: `input-file.txt.sig`.

### التحقق من التوقيع
للتحقق من ملف موقّع:
```bash
gpg --verify input-file.txt.asc
```
للتوقيع المنفصل:
```bash
gpg --verify input-file.txt.sig input-file.txt
```
تحتاج إلى المفتاح العام للموقّع في keyring الخاص بك.

---

## إنشاء كلمات المرور باستخدام GPG
يمكن لـ GPG إنشاء بيانات عشوائية، والتي يمكن استخدامها لإنشاء كلمات مرور آمنة. بينما لا يُعتبر GPG مولد كلمات مرور أساسي، فإن توليده للأرقام العشوائية آمن تشفيريًا.

### أمر إنشاء كلمة مرور
```bash
gpg --gen-random --armor 1 32
```
- `--gen-random`: يولد بايتات عشوائية.
- `--armor`: يُخرج الناتج بتنسيق ASCII.
- `1`: مستوى الجودة (1 مناسب للأغراض التشفيرية).
- `32`: عدد البايتات (اضبطه لطول كلمة المرور المطلوب).

مثال على الناتج:
```
4eX9j2kPqW8mZ3rT5vY7nL9xF2bC6dA8
```
لجعله أكثر شبهاً بكلمة مرور، يمكنك تمريره عبر محول base64 أو hex، أو تقليمه إلى الطول المطلوب.

### مثال: إنشاء كلمة مرور مكونة من 20 حرفًا
```bash
gpg --gen-random --armor 1 15 | head -c 20
```
يولد هذا سلسلة عشوائية مكونة من 20 حرفًا.

---

## إدارة المفاتيح
### سرد المفاتيح
- سرد المفاتيح العامة:
  ```bash
  gpg --list-keys
  ```
- سرد المفاتيح الخاصة:
  ```bash
  gpg --list-secret-keys
  ```

### نشر المفاتيح العامة
شارك مفتاحك العام عبر خادم مفاتيح:
```bash
gpg --keyserver hkps://keys.openpgp.org --send-keys 0x1234567890ABCDEF
```
استبدل `0x1234567890ABCDEF` بمعرف المفتاح الخاص بك.

### استيراد المفاتيح
استورد مفتاحًا عامًا من ملف:
```bash
gpg --import public-key.asc
```
أو من خادم مفاتيح:
```bash
gpg --keyserver hkps://keys.openpgp.org --recv-keys 0x1234567890ABCDEF
```

### إبطال المفتاح
إذا تم اختراق المفتاح أو انتهت صلاحيته:
1.  قم بإنشاء شهادة إبطال (افعل ذلك عند إنشاء المفتاح):
    ```bash
    gpg --output revoke.asc --gen-revoke john.doe@example.com
    ```
2.  قم باستيراد ونشر الإبطال:
    ```bash
    gpg --import revoke.asc
    gpg --keyserver hkps://keys.openpgp.org --send-keys john.doe@example.com
    ```

---

## أفضل الممارسات
1.  **نسخ احتياطي للمفاتيح**:
    *   قم بتخزين المفاتيح الخاصة وشهادات الإبطال بأمان (مثل محرك أقراص USB مشفر).
    *   لا تشارك المفاتيح الخاصة أبدًا.

2.  **استخدم عبارات مرور قوية**:
    *   استخدم عبارة مرور طويلة وفريدة للمفتاح الخاص بك.

3.  **قم بتحديث المفاتيح بانتظام**:
    *   حدد تاريخ انتهاء صلاحية وقم بتدوير المفاتيح بشكل دوري.

4.  **تحقق من بصمات المفاتيح**:
    *   قبل الوثوق بمفتاح عام، تحقق من بصمته مع المالك:
        ```bash
        gpg --fingerprint john.doe@example.com
        ```

5.  **استخدم خوادم المفاتيح بأمان**:
    *   استخدم خوادم مفاتيح موثوقة مثل `hkps://keys.openpgp.org`.

6.  **وقّع المفاتيح الموثوقة فقط**:
    *   عند توقيع مفتاح شخص آخر، تحقق من هويته شخصيًا أو عبر قناة موثوقة.

---

## ملخص أوامر GPG الشائعة
إليك مرجع سريع لأوامر GPG الشائعة:
- إنشاء زوج مفاتيح: `gpg --full-generate-key`
- تشفير ملف: `gpg --encrypt --recipient <email> --output <output.gpg> <input.txt>`
- فك تشفير ملف: `gpg --decrypt --output <output.txt> <input.gpg>`
- توقيع ملف: `gpg --clearsign <input.txt>` أو `gpg --detach-sign <input.txt>`
- التحقق من التوقيع: `gpg --verify <file.asc>` أو `gpg --verify <file.sig> <file>`
- تصدير المفتاح العام: `gpg --armor --output public-key.asc --export <email>`
- استيراد مفتاح: `gpg --import <key.asc>`
- إنشاء كلمة مرور عشوائية: `gpg --gen-random --armor 1 <bytes>`

---

## استكشاف الأخطاء وإصلاحها
- **خطأ "No secret key"**: تأكد من أن المفتاح الخاص موجود في keyring الخاص بك (`gpg --list-secret-keys`) ومطابق للمفتاح العام للمستلم.
- **نسيان عبارة المرور**: إذا فقدت عبارة المرور الخاصة بك، يجب عليك إبطال المفتاح وإنشاء مفتاح جديد.
- **لم يتم العثور على المفتاح**: قم باستيراد المفتاح العام للمستلم أو تحقق من خادم المفاتيح.
- **مشكلات إصدار GPG**: تأكد من أن جميع الأطراف تستخدم إصدارات متوافقة من GPG (تحقق باستخدام `gpg --version`).

---

## الميزات المتقدمة
1.  **دمج البريد الإلكتروني**:
    *   استخدم GPG مع عملاء البريد الإلكتروني مثل Thunderbird عبر الإضافات (مثل Enigmail أو OpenPGP المدمج).