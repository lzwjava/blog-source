---
audio: false
generated: true
image: false
lang: ar
layout: post
model: x-ai/grok-code-fast-1
title: توليد أرقام عشوائية آمن باستخدام مكتبة سيكريتس في بايثون
translated: true
type: note
---

### مقدمة عن وحدة `secrets`

وحدة `secrets` (التي أُدخلت في بايثون 3.6) هي جزء من المكتبة القياسية وتوفر وصولاً إلى توليد أرقام عشوائية قوية من الناحية التشفيرية. على عكس وحدة `random` المناسبة للمحاكاة أو الألعاب، تم تصميم `secrets` للمهام المتعلقة بالأمان مثل إنشاء كلمات المرور أو الرموز المميزة أو الأسرار، حيث تستخدم مولّد الأرقام العشوائية الآمن التابع لنظام التشغيل (مثل `/dev/urandom` في أنظمة يونكس).

لاستخدامها، قم باستيرادها ببساطة:
```python
import secrets
```

### الوظائف الرئيسية وطريقة الاستخدام

إليك الوظائف الرئيسية في `secrets`، مع شرح موجز وأمثلة. تُنتج هذه الدوال قيماً عشوائية يصعب توقعها.

| الوظيفة | الغرض | مثال للاستخدام |
|----------|---------|---------------|
| `secrets.token_bytes(n)` | يُولّد `n` بايت عشوائي. مفيد لإنشاء مفاتيح ثنائية. | `key = secrets.token_bytes(16)`  # 16 بايت عشوائي |
| `secrets.token_hex(n)` | يُولّد `n` بايت عشوائي ويعيدها كسلسلة نصية ست عشرية (بطول ضعف `n` بسبب الترميز الست عشري). مثالي للرموز المميزة الست عشرية. | `hex_key = secrets.token_hex(16)`  # سلسلة ست عشرية مكونة من 32 حرفًا |
| `secrets.token_urlsafe(n)` | يُولّد `n` بايت عشوائي، مُرمَّزة بـ base64 لاستخدامات آمنة في العناوين (مثل الرموز المميزة على الويب). | `url_token = secrets.token_urlsafe(32)`  # سلسلة مكونة من ~43 حرفًا |
| `secrets.randbelow(n)` | يُعيد عدداً صحيحاً عشوائياً بين 0 و `n-1` (شاملاً). بديل آمن لـ `random.randint`. | `num = secrets.randbelow(100)`  # عدد صحيح عشوائي من 0 إلى 99 |
| `secrets.choice(seq)` | يُعيد عنصراً عشوائياً من تسلسل غير فارغ `seq`. بديل آمن لـ `random.choice`. | `item = secrets.choice(['a', 'b', 'c'])`  # اختيار عشوائي من القائمة |

### أمثلة عملية

1. **إنشاء كلمة مرور آمنة**:
   اجمع بين `secrets.choice` والثوابت النصية لإنشاء كلمة مرور عشوائية.
   ```python
   import string
   import secrets

   alphabet = string.ascii_letters + string.digits + string.punctuation
   password = ''.join(secrets.choice(alphabet) for _ in range(12))
   print(password)  # على سبيل المثال، "X8f#9L&pW2c%"
   ```

2. **إنشاء رموز API مميزة**:
   استخدم `token_urlsafe` لإنشاء سلاسل نصية عشوائية آمنة للويب.
   ```python
   token = secrets.token_urlsafe(32)
   print(token)  # على سبيل المثال، "e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"
   ```

3. **اختيارات عشوائية للألعاب أو المحاكاة (مع الأمان)**:
   ```python
   winners = secrets.choice(['Alice', 'Bob', 'Charlie'])
   print(f"الفائز: {winners}")
   ```

### أفضل الممارسات والملاحظات

- **المنطق الأمني**: تتجنب `secrets` القدرة على التنبؤ، مما يجعلها مقاومة للهجمات. لا تستخدم `random` مطلقاً لكلمات المرور أو الرموز المميزة، لأنه يمكن تحديد بذرتها وتوقعها.
- **الأداء**: قد تكون استدعاءاتها أبطأ من `random`، ولكن هذا مقبول للبرمجة الحرجة أمنياً—لا تفرط في استخدامها في الحلقات للمهام غير الحرجة.
- **الحالات الخاصة**: ترفع `secrets.choice` استثناء `ValueError` للتسلسلات الفارغة؛ وترفع `randbelow(0)` استثناء `ValueError`.
- **التبعيات**: لا حاجة لمكتبات خارجية؛ فهي مدمجة.
- لمزيد من التفاصيل، راجع [الوثائق الرسمية لبايثون](https://docs.python.org/3/library/secrets.html). إذا كان لديك حالة استخدام محددة، قدم المزيد من السياق للحصول على نصيحة مخصصة!