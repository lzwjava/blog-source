---
audio: false
generated: true
image: false
lang: ar
layout: post
model: x-ai/grok-4-fast
title: مراقبة حركة مرور شبكة الموجه
translated: true
type: note
---

### مراقبة طلبات HTTP والاتصالات TCP على راوتر 360 Wi-Fi 6 T7

يعمل جهاز 360 T7 على نظام تشغيل مخصص قائم على لينكس (ليس نظام OpenWrt كاملاً بشكل افتراضي)، لذا فإن إمكانيات المراقبة محدودة في الإعداد الأصلي مقارنة ببيئة لينكس كاملة. مع صلاحيات المدير (عبر واجهة المستخدم على الويب)، يمكنك الوصول إلى السجلات الأساسية. من أجل "الاختراق" الأعمق مثل تسجيل طلبات HTTP في الوقت الفعلي أو تتبع اتصالات TCP، فإن النهج الأخلاقي الأفضل هو تثبيت نظام OpenWrt (الذي يدعمه رسمياً)، وتمكين SSH، واستخدام أدوات لينكس القياسية. **تحذير: تثبيت نظام تشغيل مخصص يبطل الضمان ويعرض الجهاز للتلف — قم بعمل نسخة احتياطية أولاً واتبع الأدلة بعناية. افعل هذا فقط على جهازك الخاص.**

#### 1. **الوصول إلى صلاحيات المدير على نظام التشغيل الأصلي**
   - اتصل بشبكة Wi-Fi الخاصة بالراوتر أو عبر كابل Ethernet.
   - افتح متصفحاً واذهب إلى `http://ihome.360.cn` أو `http://192.168.0.1` (IP الافتراضي).
   - تسجيل الدخول: اسم المستخدم الافتراضي `admin`، كلمة المرور مطبوعة على ملصق الراوتر (غالباً `admin` أو سلسلة فريدة مثل `360XXXXXX` — تحقق من الملصق في الأسفل).
   - بعد الدخول، انتقل إلى **System > Log** أو **Security > Log** للوصول إلى السجلات الأساسية للنظام والحركة. هذا يعرض حظر الجدار الناري، والاتصالات، وبعض نشاط HTTP (مثل المواقع المحظورة أو محاولات الاختراق)، ولكن ليس تفاصيل طلبات HTTP الكاملة.

   **المراقبة الأساسية عبر واجهة الويب:**
   - **سجلات النظام**: عرض الأحداث الأخيرة، بما في ذلك محاولات اتصال TCP والأخطاء. تصدير السجلات (قد يتطلب كلمة مرور الملصق لفك التشفير).
   - **إحصائيات الحركة**: تحت **Status > Network** أو **Advanced > Traffic Monitor**، يمكنك رؤية استخدام النطاق الترددي لكل جهاز/IP، ولكن ليس بتفصيل HTTP/TCP.
   - القيود: لا توجد إمكانية لفحص حمولة HTTP في الوقت الفعلي؛ السجلات عامة عالية المستوى ولا يمكن تصديرها بدون مصادقة.

#### 2. **المراقبة المتقدمة: تثبيت OpenWrt للوصول إلى سطر الأوامر**
   يدعم نظام OpenWrt 23.05+ جهاز 360 T7 (شريحة MT7981B). تثبيت OpenWrt يمنحك وصولاً كاملاً إلى سطر الأوامر كمسؤول عبر SSH، حيث يمكنك تشغيل أدوات مثل `tcpdump` لالتقاط الحزم و `logread` للسجلات.

   **خطوات تثبيت OpenWrt (مستوى عالٍ؛ استخدم الدليل الرسمي):**
   1. حمل صورة النظام من موقع OpenWrt (ابحث عن "Qihoo 360T7 sysupgrade.bin" أو صورة المصنع).
   2. احفظ نسخة احتياطية من نظام التشغيل الأصلي: في واجهة الويب، انتقل إلى **System > Backup** وحمل الإعدادات/النظام.
   3. الرفع عبر واجهة الويب: **System > Firmware Upgrade**، اختر ملف .bin، وقم بالتطبيق (يعيد الراوتر التشغيل مع OpenWrt).
   4. ما بعد التثبيت: الوصول إلى واجهة الويب على `http://192.168.1.1` (واجهة LuCI)، اسم المستخدم `root`، لا توجد كلمة مرور في البداية — قم بتعيين واحدة فوراً عبر SSH أو الواجهة.
   5. تمكين SSH: مفعل بشكل افتراضي على المنفذ 22. اتصل من جهاز الكمبيوتر الخاص بك: `ssh root@192.168.1.1` (استخدم PuTTY على Windows).

   **تخفيف المخاطر**: إذا علقت، استخدم استعادة TFTP (اضغط مع الاستمرار على زر إعادة الضبط أثناء التمهيد) أو منفذ تسلسلي (يتطلب محول UART).

#### 3. **المراقبة على OpenWrt (عبر سطر أوامر SSH)**
   بمجرد الاتصال عبر SSH كمسؤول، يعمل الراوتر كنظام لينكس مصغر. قم بتثبيت الحزم إذا لزم الأمر عبر `opkg update && opkg install tcpdump` (سعة التخزين المدمجة 128 ميجابايت، لذا حافظ على خفتها).

   - **سرد جميع اتصالات TCP الحالية (عرض ثابت):**
     ```
     ss -tunap
     ```
     - يظهر مقابس TCP النشطة/المنتظرة، المنافذ، العمليات (مثال: `tcp ESTAB 0 0 192.168.1.1:80 192.168.1.100:54321 users:(("uhttpd",pid=1234,fd=3))`).
     - للوقت الفعلي: `watch -n 1 'ss -tunap'`.

   - **التقاط حركة TCP في الوقت الفعلي:**
     قم بالتثبيت إذا لزم الأمر: `opkg update && opkg install tcpdump`.
     ```
     tcpdump -i any tcp -n -v
     ```
     - `-i any`: جميع الواجهات (br-lan للشبكة المحلية، eth0.2 للإنترنت).
     - تصفية HTTP: `tcpdump -i any tcp port 80 -n -v -A` (`-A` يظهر حمولة ASCII لعناوين/طلبات HTTP).
     - حفظ في ملف: `tcpdump -i any tcp -w /tmp/capture.pcap` (حمل عبر SCP: `scp root@192.168.1.1:/tmp/capture.pcap .`).
     - لـ HTTPS (المنفذ 443)، لاحظ أن الحمولات مشفرة — استخدم Wireshark للتحليل لاحقاً.

   - **مراقبة سجلات طلبات HTTP:**
     - سجلات النظام (تشمل خادم الويب إذا كنت تستخدم uhttpd): `logread | grep uhttpd` أو `logread -f` للوقت الفعلي.
     - تمكين تسجيل HTTP مفصل: عدل `/etc/config/uhttpd` (إعدادات خادم الويب)، أضف `option log_file '/var/log/uhttpd.log'`، ثم `/etc/init.d/uhttpd restart`. تابع السجل: `tail -f /var/log/uhttpd.log` (يظهر طلبات GET/POST، عناوين IP، روابط URL).
     - لحركة HTTP الكاملة على الشبكة: استخدم `tcpdump` كما ورد أعلاه، أو قم بتثبيت `ngrep` (`opkg install ngrep`): `ngrep -d any 'GET|POST|HTTP' -O /tmp/http.pcap`.

   - **سجلات الجدار الناري/الاتصالات:**
     - تمكين التسجيل على القواعد: `uci set firewall.@rule[0].log='1'; uci commit; /etc/init.d/firewall restart`.
     - عرض: `logread | grep fw` (يظهر اتصالات TCP المرفوضة/المقبولة).

#### نصائح للـ"اختراق" الأخلاقي
- **الأمان**: بعد الإعداد، غيّر كلمة مرور المسؤول (`passwd`)، عطّل المصادقة بكلمة المرور في `/etc/ssh/sshd_config` لاستخدام المفاتيح فقط، واقصر وصول SSH على الشبكة المحلية فقط عبر الجدار الناري.
- **الأداء**: لدى T7 ذاكرة وصول عشوائي 256 ميجابايت — تجنب عمليات الالتقاط الثقيلة طويلة الأمد لمنع نفاد الذاكرة.
- **العودة إلى النظام الأصلي**: حمل نظام التشغيل الرسمي من موقع 360، وارفعه عبر sysupgrade في OpenWrt (باستخدام `--force` إذا لزم الأمر).
- اختبر في بيئة آمنة؛ لتحليل واجهة المستخدم، انقل ملف .pcap إلى جهاز الكمبيوتر الخاص بك وافتحه في Wireshark.

هذا يمنحك رؤية شاملة. إذا كانت واجهة المستخدم الأصلية كافية للاحتياجات الأساسية، التزم بها لتجنب تثبيت نظام جديد.

[OpenWrt Techdata: Qihoo 360T7](https://openwrt.org/toh/hwdata/qihoohardware/qihoohardware_360t7)  
[دليل 360 T7U (قسم السجلات)](https://ipc-pr-cdn.jia.360.cn/ipc-pr/luyouqiT7U.pdf)  
[دليل تسجيل OpenWrt](https://openwrt.org/docs/guide-user/base-system/log.essentials)  
[منتدى 360: تصدير السجلات](https://bbs.360.cn/forum-7007-1.html)