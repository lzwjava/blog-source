---
audio: false
generated: true
lang: ar
layout: post
title: محرك الاستعلامات
translated: true
type: note
---

محرك الاستعلام هو مكون من نظام إدارة قواعد البيانات (DBMS) الذي يفسر وينفذ استعلامات قاعدة البيانات (المكتوبة عادةً بلغة SQL أو لغة مشابهة). وظيفته الرئيسية هي معالجة الاستعلامات وإرجاع النتائج المناسبة. إليك تفصيل لكيفية عمله:

### 1. **تحليل الاستعلام:**
   - **التحليل المعجمي:** الخطوة الأولى هي تحليل الاستعلام للتحقق من صياغته النحوية. يستخدم المحرك محللاً معجمياً لتقسيم الاستعلام إلى وحدات (مثل الكلمات المفتاحية، والمعرفات، والعوامل).
   - **التحليل النحوي:** ثم يحلل الوحدات إلى شجرة استعلام أو شجرة تحليل للتحقق من أن هيكل الاستعلام صحيح. يتحقق مما إذا كان الاستعلام يتبع القواعد النحوية الصحيحة وما إذا كانت الجداول والأعمدة والشروط المشار إليها صالحة.

### 2. **التحسين:**
   - **إعادة كتابة الاستعلام:** بعد التحليل، قد يعيد المحرك كتابة الاستعلام لتحسينه. قد يتضمن ذلك تبسيط أجزاء معينة من الاستعلام (مثل إزالة الشروط الزائدة عن الحاجة أو دمج الاستعلامات الفرعية).
   - **التحسين القائم على التكلفة:** يولد محسن الاستعلام خطط تنفيذ متعددة، ثم يقيم "التكلفة" (بناءً على عوامل مثل قراءة/كتابة القرص، واستخدام وحدة المعالجة المركزية، إلخ) لكل خطة. يتم اختيار الخطة ذات التكلفة الأقل للتنفيذ. قد يختار المحسن الفهارس، وطرق الربط (مثل الحلقات المتداخلة، أو الربط بالتجزئة)، ومسارات الوصول بناءً على إحصائيات البيانات.

### 3. **إنشاء خطة التنفيذ:**
   - يختار محرك الاستعلام خطة التنفيذ المثلى. وهذا يشمل تحديد كيفية جلب البيانات (باستخدام الفهارس، أو المسح التسلسلي، إلخ) وكيفية ربط جداول متعددة.
   - قد تتضمن الخطة أيضًا عمليات مثل الفرز، والتصفية، والتجميع، والتجميع الإحصائي.

### 4. **التنفيذ:**
   - ينفذ المحرك الخطة من خلال أداء العمليات اللازمة بتسلسل محدد. على سبيل المثال، إذا كان يحتاج إلى ربط جدولين، فقد يستخدم ربط تجزئة أو ربط حلقي متداخل اعتمادًا على الخطة التي اختارها المحسن.
   - أثناء التنفيذ، قد يقوم المحرك بجلب البيانات من القرص (إذا لم تكن مخزنة مؤقتاً) ومعالجة النتائج.

### 5. **إرجاع النتائج:**
   - بعد التنفيذ، يُرجع محرك الاستعلام النتائج إلى المستخدم أو التطبيق. يمكن أن تكون النتائج على شكل مجموعة من الصفوف والأعمدة (للاستعلامات SELECT)، أو إقرارًا (للاستعلامات INSERT/UPDATE)، أو رسالة خطأ إذا حدث خطأ ما.

### المكونات الرئيسية لمحرك الاستعلام:
- **المحلل:** يتحقق من صحة استعلامات SQL ويحللها إلى شكل داخلي.
- **المحسن:** يجد أفضل خطة تنفيذ ممكنة للاستعلام.
- **منفذ التنفيذ:** ينفذ الخطة المختارة ويسترد البيانات من قاعدة البيانات.
- **ذاكرة التخزين المؤقت:** قد يتم تخزين البيانات التي يتم الوصول إليها بشكل متكرر مؤقتًا لتسريع تنفيذ الاستعلامات اللاحقة.

### مثال:
لنفترض أنك قمت بتشغيل استعلام مثل:
```sql
SELECT name, age FROM users WHERE age > 30 ORDER BY age;
```

1. **التحليل:** يتم تحليل الاستعلام إلى شجرة صياغة نحوية.
2. **التحسين:** قد يحدد المحسن أفضل طريقة لتصفية المستخدمين الأكبر من 30 عامًا وربما استخدام فهرس على عمود `age` إذا كان متاحًا.
3. **التنفيذ:** يسترجع المحرك الصفوف ذات الصلة من جدول `users`، ويطبق عامل التصفية، ويفرز النتائج حسب `age`.
4. **إرجاع النتائج:** يُرجع المحرك النتائج المفروزة (مثل قائمة بالمستخدمين الأكبر من 30 عامًا).

هل ترغب في التعمق أكثر في أي جزء محدد من هذه العملية؟