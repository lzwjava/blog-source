---
audio: false
generated: true
lang: ar
layout: post
title: إعدادات التزامن في GitHub Actions
translated: true
type: note
---

إعداد سير عمل GitHub Actions الحالي لديك يحتوي بالفعل على `cancel-in-progress: false`، مما يعني أنه *لا ينبغي* إلغاء الوظائف قيد التنفيذ لمجموعة التزامن `gh-pages`. إذا كانت الوظائف لا تزال تُلغى، فقد يكون هناك مشكلة أخرى أو إعداد خاطئ يتسبب في هذا السلوك. فيما يلي خطوات للتحقق من المشكلة وإصلاحها:

### 1. **تأكيد إعدادات التزامن**
إعداداتك تبدو صحيحة لمنع إلغاء الوظائف:

```yaml
concurrency:
  group: 'gh-pages'
  cancel-in-progress: false
```

- **وظيفة هذا الإعداد**: مفتاح `concurrency` مع `cancel-in-progress: false` يضمن أن عمليات تشغيل سير العمل المتعددة لنفس مجموعة `gh-pages` يمكن أن تعمل في وقت واحد دون إلغاء بعضها البعض.
- **مكان وضعه**: تأكد من تعريف كتلة `concurrency` هذه على **مستوى سير العمل** (المستوى الأعلى لملف YAML، وليس داخل وظيفة أو خطوة). على سبيل المثال:

```yaml
name: Deploy to GitHub Pages
on:
  push:
    branches: [ main ]
concurrency:
  group: 'gh-pages'
  cancel-in-progress: false
jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      # خطواتك هنا
```

إذا كانت كتلة `concurrency` في غير مكانها الصحيح (مثل أن تكون داخل وظيفة)، فلن تعمل كما هو متوقع. انقلها إلى المستوى الأعلى إذا لزم الأمر.

### 2. **التحقق من وجود إعدادات تزامن متضاربة**
- **سير عمل متعددة**: إذا كان لديك سير عمل متعددة (مثل ملفات YAML منفصلة) تتفاعل مع فرع `gh-pages`، تأكد من أن *جميع* سير العمل ذات الصلة تحتوي على `cancel-in-progress: false`. سير عمل واحدة تحتوي على `cancel-in-progress: true` (أو تفتقر إلى `concurrency`) يمكنها إلغاء الوظائف من سير العمل الأخرى.
- **إعدادات المستودع**: تحقق مما إذا كانت أي إعدادات على مستوى المستودع أو إجراءات GitHub الطرف الثالث تفرض عمليات الإلغاء. على سبيل المثال، قد تتجاوز بعض تكاملات CI/CD أو الإجراءات المخصصة سلوك التزامن.

### 3. **التحقق من مشغلات سير العمل**
قد يبدو أن الوظائف "أُلغيت" إذا كانت المشغلات معينة بشكل خاطئ أو إذا كانت هناك حالات تنافس. تحقق من قسم `on` في سير العمل الخاص بك:
- تأكد من أن سير العمل يُشغل فقط عندما يكون مقصودًا (مثل `on: push: branches: [ main ]` أو `on: pull_request`).
- إذا تم تعريف مشغلات متعددة (مثل `push` و `pull_request`)، فقد تنشئ عمليات تشغيل متداخلة. استخدم أسماء `concurrency.group` فريدة للمشغلات المختلفة إذا لزم الأمر، مثل:

```yaml
concurrency:
  group: 'gh-pages-${{ github.event_name }}'
  cancel-in-progress: false
```

هذا ينشئ مجموعات تزامن منفصلة لأحداث `push` و `pull_request`، مما يمنعها من التداخل.

### 4. **التحقق من سجلات GitHub Actions**
- انتقل إلى علامة التبويب **Actions** في مستودع GitHub الخاص بك واراجع سجلات الوظائف الملغاة.
- ابحث عن الرسائل التي تشير إلى سبب إلغاء الوظيفة (مثل "Canceled due to concurrency" أو أسباب أخرى مثل انتهاء المهلة، أو الإلغاء اليدوي، أو حالات الفشل).
- إذا ذكرت السجلات التزامن، فتحقق مرة أخرى من أن *جميع* سير العمل التي تتعامل مع فرع `gh-pages` تحتوي على `cancel-in-progress: false`.

### 5. **التعامل مع عمليات الإلغاء اليدوية**
إذا ألغى شخص ما يدويًا تشغيل سير عمل عبر واجهة GitHub، فسيوقف ذلك جميع الوظائف في هذا التشغيل، بغض النظر عن `cancel-in-progress: false`. تأكد من أن فريقك يعلم بعدم إلغاء عمليات التشغيل يدويًا إلا إذا كان ذلك ضروريًا.

### 6. **ضع في الاعتبار تبعيات سير العمل**
إذا كانت الوظائف تُلغى بسبب التبعيات أو حالات الفشل في الخطوات السابقة:
- تحقق من وجود كلمات أساسية `needs` في سير العمل الخاص بك. إذا فشلت وظيفة واحدة، قد يتم تخطي الوظائف المعتمدة عليها أو إلغاؤها.
- استخدم `if: always()` لضمان تشغيل الوظائف اللاحقة حتى إذا فشلت الوظائف السابقة:

```yaml
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      # خطوات البناء
  deploy:
    needs: build
    if: always()
    runs-on: ubuntu-latest
    steps:
      # خطوات النشر
```

### 7. **اختبار باستخدام سير عمل مصغرة**
إذا استمرت المشكلة، أنشئ سير عمل اختبار مصغرة لعزل المشكلة:

```yaml
name: Test Concurrency
on:
  push:
    branches: [ main ]
concurrency:
  group: 'gh-pages'
  cancel-in-progress: false
jobs:
  test-job:
    runs-on: ubuntu-latest
    steps:
      - name: Sleep to simulate long job
        run: sleep 60
      - name: Print message
        run: echo "Job completed!"
```

ادفع عدة commits لتحفيز عمليات التشغيل المتزامنة وتحقق مما إذا اكتملت الوظائف دون إلغاء.

### 8. **التحقق من حالة GitHub Actions**
في حالات نادرة، قد تواجه GitHub Actions مشاكل على مستوى المنصة. تحقق من [صفحة حالة GitHub](https://www.githubstatus.com/) أو المنشورات الحديثة على X حول انقطاعات الخدمة في GitHub Actions.

### 9. **نصائح لتصحيح الأخطاء**
- أضف خطوة لتسجيل معرف تشغيل سير العمل ومجموعة التزامن لتصحيح الأخطاء:

```yaml
steps:
  - name: Log run details
    run: echo "Run ID: ${{ github.run_id }}, Concurrency Group: ${{ github.workflow }}-${{ github.event_name }}"
```

- استخدم GitHub Actions API لفحص سير العمل قيد التشغيل برمجيًا إذا لزم الأمر (يتطلب إعدادًا متقدمًا).

### إذا كانت لا تزال لا تعمل
إذا كانت الوظائف لا تزال تُلغى:
- شارك ملف YAML الكامل لسير العمل و لقطة شاشة أو وصف لرسالة الإلغاء من سجلات GitHub Actions.
- أعلمني إذا كنت تستخدم إجراءات محددة (مثل `actions/checkout`، `peaceiris/actions-gh-pages`) أو إذا كان لديك سير عمل متعددة تتفاعل مع `gh-pages`.

سيساعد هذا في تحديد المشكلة بالضبط. دعني أعرف كيف يمكنني المساعدة أكثر!