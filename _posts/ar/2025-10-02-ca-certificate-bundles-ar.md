---
audio: false
generated: true
image: false
lang: ar
layout: post
model: x-ai/grok-code-fast-1
title: فهم حزم شهادات هيئة الشهادات
translated: true
type: note
---

### ما هو cacert.pem؟

`cacert.pem` (أو ملفات ذات أسماء مشابهة مثل `ca-bundle.crt`، أو `ca-bundle.pem`، أو `ca-certificates.pem`) يشير إلى ملف يحتوي على واحدة أو أكثر من شهادات الجذر لسلطة الشهادات (CA) بصيغة PEM. PEM تعني بريد معزّز الخصوصية، وهو معيار ترميز نصي (يستخدم Base64) يغلّف بيانات الشهادة بين عناوين مثل `-----BEGIN CERTIFICATE-----` و `-----END CERTIFICATE-----`.

- **الغرض**: هذه الملفات عبارة عن حزم لشهادات الجذر الموثوقة من سلطات الشهادات الرئيسية (مثل Let's Encrypt، DigiCert، GlobalSign). تسمح هذه الحزم للبرمجيات (مثل متصفحات الويب، الخوادم، أو الأدوات) بالتحقق من صحة شهادات SSL/TLS التي تقدمها مواقع الويب أو الخوادم أثناء الاتصالات الآمنة (HTTPS).
- **في مثالك**: المحتوى الذي تم لصقه هو ملف `ca-bundle.crt` قديم (من أكتوبر 2012) تم استخراجه من متصفح موزيلا فايرفوكس. وهو يتضمن شهادات جذر مثل "GTE CyberTrust Global Root" و "Thawte Server CA"، والتي كانت موثوقة في ذلك الوقت ولكنها انتهت صلاحيتها أو تم استبدالها منذ ذلك الحين. يتم تحديث حزم سلطات الشهادات الحديثة بانتظام (على سبيل المثال، عبر تحديثات نظام التشغيل أو الحزم).

العديد من الأنظمة والأدوات تستخدم ملفات مماثلة:
- على لينكس: غالباً ما توجد في `/etc/ssl/certs/ca-certificates.crt` (ديبيان/أوبنتو) أو `/etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem` (ريد هات).
- على macOS: جزء من سلسلة المفاتيح (keychain) الخاصة بالنظام.
- على ويندوز: مخزنة في مستودع الشهادات (certificate store).

الدليل على سبب ثقتنا بهذه الشهادات: شهادات سلطات الشهادات موقعة من قبل كيانات موثوقة، وحزم مثل هذه تضمن تصفح الويب الآمن. بدونها، ستفشل عملية التحقق من SSL، مما يعرض المستخدم لخطر هجمات الرجل في المنتصف (man-in-the-middle). للتحديثات، تنشر موزيلا البيانات الحالية على https://wiki.mozilla.org/CA.

### لماذا نحتاج إليه؟

حزم شهادات سلطات الشهادات ضرورية لتشفير SSL/TLS (المستخدم في HTTPS، البريد الإلكتروني الآمن، وغير ذلك) لأنها:
- **تحقق من الصحة**: عندما تتصل بموقع مثل https://example.com، يرسل الخادم شهادته. يستخدم عميلك (المتصفح، curl، إلخ) حزمة سلطات الشهادات للتحقق مما إذا كانت الشهادة موقعة من قبل جذر موثوق. إذا لم تكن كذلك، يحذر أو يمنع الاتصال.
- **تمنع الهجمات**: بدون التحقق، يمكن لأي شخص تزوير الشهادات، مما يؤدي إلى ثغرات أمنية مثل التصيد أو اعتراض البيانات.
- **تمكن الاتصال الآمن**: تضمن التشفير من طرف إلى طرف والثقة في الشهادات الرقمية، وهو أمر بالغ الأهمية للتجارة الإلكترونية، الخدمات المصرفية، وأي خدمة عبر الإنترنت.
- **السياق التاريخي**: في أوائل التسعينيات، تم تطوير SSL، وأصبحت حزم سلطات الشهادات معيارية (على سبيل المثال، موثوقة من قبل معايير IETF مثل RFC 5280 لشهادات X.509).

إذا كان نظامك يفتقر إلى حزمة محدثة، فقد تظهر المواقع الآمنة أخطاء (مثل "certificate not trusted"). معظم أنظمة التشغيل تحافظ على هذه الحزم وتحدثها تلقائياً.

### كيف تستخدمه؟

يعتمد الاستخدام على الأداة أو البرنامج. فيما يلي أمثلة شائعة:

#### 1. **في Curl (أداة سطر الأوامر)**
   - يستخدم Curl حزم سلطات الشهادات افتراضياً (من مستودع نظامك)، ولكن يمكنك تحديد ملف مخصص للتحقق.
   - مثال: قم بتنزيل حزمة مخصصة واستخدمها لطلبات HTTPS.
     ```
     wget https://curl.se/ca/cacert.pem  # احصل على حزمة سلطات شهادات محدثة من موقع curl
     curl --cacert cacert.pem https://api.github.com  # تحقق مقابل هذه الحزمة
     ```
     - بدون `--cacert`، قد يقوم curl بالتحميل من `/etc/ssl/certs/ca-certificates.crt` على لينكس.

#### 2. **في Apache/Nginx (خوادم الويب)**
   - قم بالتكوين لمصادقة شهادات العميل أو التحقق من SSL.
   - في `httpd.conf` لـ Apache أو الاستضافة الافتراضية (virtual host):
     ```
     SSLCACertificateFile /مسار/إلى/ca-bundle.crt
     ```
     - هذا يخبر Apache باستخدام الحزمة للثقة في شهادات العملاء أو للتحقق من الاتصالات المنبع (upstream connections).

#### 3. **في PHP أو اللغات الأخرى**
   - لـ cURL في PHP:
     ```
     $ch = curl_init();
     curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, true);  // تمكين التحقق
     curl_setopt($ch, CURLOPT_CAINFO, '/مسار/إلى/cacert.pem');  // حدد الحزمة
     // قم بإجراء الطلب...
     ```
   - Node.js أو Python (مكتبة requests) لديها خيارات مشابهة لتعيين مسارات سلطات الشهادات المخصصة.

#### 4. **الاستخدام في المتصفحات**
   - تتضمن المتصفحات (كروم، فايرفوكس) حزم سلطات الشهادات مدمجة ولا تتطلب عادةً تكويناً يدوياً. يمكنك إضافة سلطات شهادات مخصصة عبر الإعدادات إذا لزم الأمر (على سبيل المثال، لمواقع تطوير ذاتية التوقيع).

#### 5. **نصائح عامة**
   - **حافظ على تحديثه**: شهادات سلطات الشهادات تنتهي صلاحيتها أو يتم إلغاؤها. قم بتنزيل حزم جديدة من مصادر مثل https://mkcert.dev (للتطوير) أو مدير الحزم الخاص بنظام التشغيل الخاص بك (مثل `sudo apt-get update ca-certificates` على أوبنتو).
   - **ملاحظة أمنية**: استخدم فقط الحزم الموثوقة لتجنب قبول شهادات غير صالحة. للاختبار، يمكنك إنشاء شهادات ذاتية التوقيع باستخدام OpenSSL (مثل `openssl req -x509 -newkey rsa:2048 -keyout key.pem -out cert.pem -days 365`).
   - **تحقق من الصلاحية**: استخدم `openssl x509 -in cacert.pem -text -noout` لفحص تفاصيل الشهادة.

إذا كان هذا لتطبيق محدد، قدم المزيد من التفاصيل للحصول على نصائح مخصصة! إذا كنت ترى أخطاء (مثل "SSL certificate verify failed")، فقد يعني ذلك أن حزمتك قديمة أو مفقودة.