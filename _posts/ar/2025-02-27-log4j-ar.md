---
audio: false
generated: true
lang: ar
layout: post
title: استخدام Log4j للتسجيل
translated: true
type: note
---

يبدو أنك تسأل عن كيفية استخدام Log4j للتسجيل في تطبيق Java. أفترض أنك تقصد "تسجيل Log4j" – دعني أرشدك خلال أساسيات إعداده واستخدامه بفعالية.

Log4j هو إطار عمل تسجيل شائع لـ Java يسمح لك بتسجيل الرسائل بمستويات مختلفة (مثل DEBUG، INFO، WARN، ERROR) إلى مخرجات متنوعة (وحدة التحكم، الملفات، إلخ). إليك تفصيل خطوة بخطوة للبدء:

### 1. إضافة Log4j إلى مشروعك
إذا كنت تستخدم Maven، أضف التبعية التالية إلى ملف `pom.xml` الخاص بك:
```xml
<dependency>
    <groupId>org.apache.logging.log4j</groupId>
    <artifactId>log4j-core</artifactId>
    <version>2.23.1</version> <!-- تحقق من أحدث إصدار -->
</dependency>
<dependency>
    <groupId>org.apache.logging.log4j</groupId>
    <artifactId>log4j-api</artifactId>
    <version>2.23.1</version>
</dependency>
```
أما إذا كنت تستخدم Gradle، فأضف:
```gradle
implementation 'org.apache.logging.log4j:log4j-core:2.23.1'
implementation 'org.apache.logging.log4j:log4j-api:2.23.1'
```

### 2. تكوين Log4j
تحتاج إلى ملف تكوين لإخبار Log4j بكيفية التعامل مع السجلات. أنشئ ملفًا باسم `log4j2.xml` (أو `log4j2.properties`) في الدليل `src/main/resources` الخاص بك. إليك مثالًا بسيطًا لملف `log4j2.xml`:
```xml
<?xml version="1.0" encoding="UTF-8"?>
<Configuration status="WARN">
    <Appenders>
        <!-- إخراج وحدة التحكم -->
        <Console name="Console" target="SYSTEM_OUT">
            <PatternLayout pattern="%d{yyyy-MM-dd HH:mm:ss} %-5p %c{1}:%L - %m%n" />
        </Console>
        <!-- إخراج الملف -->
        <File name="File" fileName="logs/app.log">
            <PatternLayout pattern="%d{yyyy-MM-dd HH:mm:ss} %-5p %c{1}:%L - %m%n" />
        </File>
    </Appenders>
    <Loggers>
        <Root level="info">
            <AppenderRef ref="Console" />
            <AppenderRef ref="File" />
        </Root>
    </Loggers>
</Configuration>
```
هذا التكوين يسجل إلى كل من وحدة التحكم وملف (`logs/app.log`) مع الطابع الزمني، ومستوى السجل، واسم الفئة، ورقم السطر، والرسالة.

### 3. استخدام Log4j في كود Java الخاص بك
في فئة Java الخاصة بك، استورد Log4j وأنشئ مثيل مسجل. إليك مثال:
```java
import org.apache.logging.log4j.LogManager;
import org.apache.logging.log4j.Logger;

public class MyApp {
    private static final Logger logger = LogManager.getLogger(MyApp.class);

    public static void main(String[] args) {
        logger.debug("هذه رسالة تصحيح");
        logger.info("تم بدء التطبيق بنجاح");
        logger.warn("هذا تحذير");
        logger.error("حدث خطأ", new Exception("استثناء نموذجي"));
    }
}
```

### 4. تشغيل تطبيقك
عند تشغيل هذا الكود، سترى المخرجات في وحدة التحكم وملف `logs/app.log` (إذا كان الدليل موجودًا). تقوم مستويات السجل بتصفية ما يتم تسجيله بناءً على الإعداد `level="info"` في التكوين – لن تظهر رسائل DEBUG إلا إذا قمت بتغييرها إلى `level="debug"`.

### نصائح رئيسية
- **مستويات السجل**: استخدم `debug` للاستكشاف التفصيلي للأخطاء، و `info` للتحديثات العامة، و `warn` للمشكلات المحتملة، و `error` للفشل.
- **مرونة التكوين**: يمكنك تخصيص التخطيط، أو إضافة معالجي ملفات متداولة، أو إرسال السجلات إلى أنظمة بعيدة – تحقق من وثائق Log4j للمزيد.
- **الأداء**: Log4j 2 أسرع من Log4j 1.x، لذلك التزم بأحدث إصدار.

إذا كنت تعمل مع إعداد محدد (مثل تطبيق ويب أو لغة مختلفة)، فأخبرني، ويمكنني تخصيص هذا further! هل هناك أي شيء آخر تود الخوض فيه؟