---
audio: false
generated: true
lang: ar
layout: post
title: بدائل لإنشاء خطافات Git السابقة للإضافة
translated: true
type: note
---

لا يحتوي Git على خطاف `pre-add` مدمج، ولكن هناك عدة طرق يمكنك من خلالها تحقيق وظيفة مماثلة. إليك بعض النهج:

### 1. **الأسماء المستعارة في Git (النهج الموصى به)**
يمكنك إنشاء اسم مستعار لـ Git يقوم بتشغيل عمليات الفحص الخاصة بك قبل استدعاء `git add`:

```bash
git config --global alias.safe-add '!your-pre-add-script.sh && git add'
```

ثم استخدم `git safe-add` بدلاً من `git add`.

### 2. **سكريبت غلاف**
أنشئ سكريبت باسم `git-pre-add` في المسار PATH الخاص بك يقوم بما يلي:
1. بتشغيل عمليات فحص pre-add الخاصة بك
2. باستدعاء `git add` إذا نجحت عمليات الفحص

```bash
#!/bin/bash
# منطق التحقق قبل الإضافة هنا
if [ some_condition ]; then
  git add "$@"
else
  echo "فشلت عمليات الفحص قبل الإضافة"
  exit 1
fi
```

### 3. **استخدام الخطافات الموجودة**
يمكنك الاستفادة من الخطافات الموجودة بطرق إبداعية:
- **pre-commit**: بينما يعمل هذا بعد `add` ولكن قبل `commit`، يمكنك فحص الملفات المؤقتة هنا
- **prepare-commit-msg**: مشابه لـ pre-commit ولكنه في مرحلة مبكرة من العملية

### 4. **مراقبة نظام الملفات**
للاحتياجات الأكثر تقدمًا، يمكنك استخدام:
- **inotifywait** (لينكس) لمراقبة دليل العمل الخاص بك
- **fswatch** (ماك) لوظيفة مماثلة

### مثال لسكريبت فحص قبل الإضافة
إليك مثالًا بسيطًا يمنع إضافة الملفات التي تحتوي على مسافات بيضاء زائدة في النهاية:

```bash
#!/bin/bash
# .git/hooks/pre-commit (ولكنه يعمل على الملفات المؤقتة)

# التحقق من أخطاء المسافات البيضاء
if git diff --cached --check; then
  exit 0
else
  echo "تم العثور على أخطاء في المسافات البيضاء في الملفات المؤقتة"
  exit 1
fi
```

تذكر جعل أي سكريبتات خطاف قابلة للتنفيذ (`chmod +x script.sh`).

هل ترغب في أن أشرح أي نهج معين لحالة الاستخدام الخاصة بك؟