---
audio: false
generated: true
lang: ar
layout: post
title: تجربة DeepSearch داخل Grok
translated: true
---

### النقاط الرئيسية
- يبدو أن إضافة أمر `create-original` إلى النص سيؤدي إلى إنشاء ملفات Markdown مباشرة في دليل `_posts/en` بنفس الشكل الذي يستخدمه ملفات المسودة، بما في ذلك التاريخ في اسم الملف.
- تشير الأبحاث إلى أن الأمر الجديد سيستخدم التاريخ الحالي (27 فبراير 2025) ويتبع اتفاقية تسمية `{date_str}-{name}-en.md`، مما يتوافق مع عملية إنشاء المسودة.
- يشير الدليل إلى أن المادة الأمامية ستظل متطابقة مع المسودة، مع حقول مثل `audio: false`, `lang: en`, `layout: post`, `title: {name}`, و `translated: false`.

### الإجابة المباشرة

#### نظرة عامة
يضيف هذا الإجابة أمر `create-original` إلى النص الخاص بك، مما يسمح لك بإنشاء ملفات Markdown مباشرة في دليل `_posts/en`، مع تجاوز عملية المسودة. سيتم أن تكون الملفات بنفس الشكل الذي يستخدمه ملفات المسودة، بما في ذلك التاريخ الحالي في اسم الملف، وتحتفظ بنفس بنية المادة الأمامية.

#### كيفية العمل
سيقوم الأمر الجديد `create-original` بالآتي:
- استخدام اليوم، 27 فبراير 2025، مع تنسيق `YYYY-MM-DD` (على سبيل المثال، `2025-02-27`).
- إنشاء الملفات في دليل `_posts/en` مع أسماء مثل `2025-02-27-{name}-en.md`، حيث `{name}` هو الاسم المقدم (على سبيل المثال، `test-post` يصبح `2025-02-27-test-post-en.md`).
- تضمين نفس المادة الأمامية التي في ملفات المسودة، مثل:
  ```
  ---
  audio: false
  lang: en
  layout: post
  title: {name}
  translated: false
  ---
  ```
- التأكد من وجود دليل `_posts/en`، وإدخاله إذا لزم الأمر.

#### التفاصيل غير المتوقعة
من الجيد أن نلاحظ أن ملفات المسودة والملفات الأصلية الجديدة تشترك في نفس اتفاقية تسمية بناءً على التاريخ، ولكن الوظيفة الحالية `delete_md` تبحث عن ملفات بدون تاريخ (على سبيل المثال، `{name}-en.md`)، مما قد يسبب عدم التوافق في إدارة الملفات. قد تحتاج إلى تحديث منطق الحذف لتعامل مع أسماء الملفات التي تحتوي على تاريخ لتحقيق التوافق الكامل.

---

### ملاحظة الاستطلاع: تحليل مفصل لإضافة أمر `create-original`

يقدم هذا القسم تحليلًا شاملًا لتطبيق أمر `create-original` في النص المقدم، ويوسع في الإجابة المباشرة مع رؤى مفصلة حول بنية النص، الأسباب وراء التطبيق، والتأثيرات المحتملة. يعتمد التحليل على الوظيفة الحالية للنص والمطلب من المستخدم لإضافة أمر جديد يخلق ملفات مباشرة في "original dir" بنفس الشكل الذي يستخدمه ملفات المسودة.

#### الخلفية والسياق
يوجد النص في دليل "scripts" ويطلق عليه "file.py"، ويقوم بإدارة إنشاء وحذف ملفات Markdown لموقع ويب متعدد اللغات أو نظام إدارة المحتوى، ربما باستخدام مولد مواقع استاتيكية مثل Jekyll. يدعم النص حاليًا ثلاثة أوامر:
- `create`: يخلق ملف Markdown مسودة في دليل `_drafts` مع اسم ملف يتضمن التاريخ الحالي، على سبيل المثال، `2025-02-27-{name}-en.md`.
- `create-note`: يخلق ملف ملاحظات في دليل `notes`، أيضًا مع اسم ملف بناءً على التاريخ.
- `delete`: يحذف ملفات Markdown، PDF، وملفات صوتية من دليل `_posts` ومداخل الأصول المرتبطة لمتعدد اللغات، يبحث عن ملفات باسم `{name}-{lang}.md` بدون تاريخ.

طلب المستخدم إضافة أمر `create-original` يخلق ملفات مباشرة في "original dir"، ويحتفظ بنفس الشكل الذي يستخدمه الأمر الافتراضي لإنشاء المسودة (`create`). بناءً على السياق، يُفهم "original dir" على أنه `_posts/en`، دليل المنشورات باللغة الإنجليزية، بناءً على بنية النص وسلوك وظيفة `delete_md`.

#### تفاصيل التنفيذ
للتوفيق مع الطلب، تم تصميم وظيفة جديدة `create_original`، تتشابه مع وظيفة `create_md` ولكن تستهدف دليل `_posts/en`. تفاصيل التنفيذ هي كما يلي:

- **معالجة التاريخ**: تسترجع الوظيفة التاريخ الحالي باستخدام `datetime.date.today()`، والذي في 27 فبراير 2025، الساعة 04:00 صباحًا بتوقيت المحيط الهادئ، ينتج عن ذلك `2025-02-27`. يتم تنسيق هذا التاريخ على شكل `YYYY-MM-DD` للحفاظ على التوافق مع أسماء ملفات المسودة.
- **دليل ومسار الملف**: تحدد الوظيفة ما إذا كان دليل `_posts/en` موجودًا، وإدخاله إذا لزم الأمر باستخدام `os.makedirs`. ثم يتم إنشاء الملف في `os.path.join('_posts', 'en', f"{date_str}-{name}-en.md")`، مما يضمن أن اسم الملف يتضمن التاريخ، على سبيل المثال، `2025-02-27-test-post-en.md` لاسم `test-post`.
- **المادة الأمامية**: المادة الأمامية متطابقة مع تلك في `create_md`، وتحدد على النحو التالي:
  ```
  ---
  audio: false
  lang: en
  layout: post
  title: {name}
  translated: false
  ---
  ```
  وهذا يضمن التوافق مع ملفات المسودة، وحفظ حقول مثل `audio: false` لمرفق صوتي، `lang: en` للإنجليزية، و `title: {name}` للعنوان.
- **إنشاء الملف**: يتم كتابة الملف باستخدام `open(file_path, 'w', encoding='utf-8')`، مما يضمن تنسيق UTF-8 للحفاظ على التوافق الواسع، ويطبع رسالة تأكيد، على سبيل المثال، `Created original file: _posts/en/2025-02-27-test-post-en.md`.

تم تحديث الجزء الرئيسي من النص لتضمين `create-original` كعملية صالحة، وتعديل رسالة الاستخدام إلى:
```
Usage: python scripts/file.py <create|create-note|create-original|delete> <name>
```
وإضافة شرط لإدخال `create_original(name)` عندما تكون العملية `create-original`.

#### مقارنة مع الوظائف الحالية
لإظهار الاختلافات والتشابهات، فلتنظر في الجدول التالي الذي يقيّم `create_md`, `create_note`, و `create_original` الجديد:

| الوظيفة         | الدليل       | تنسيق اسم الملف               | حقول المادة الأمامية                     | ملاحظات                                      |
|------------------|-----------------|-------------------------------|-----------------------------------------|--------------------------------------------|
| `create_md`      | `_drafts`      | `{date_str}-{name}-en.md`     | audio, lang, layout, title, translated  | يخلق ملفات مسودة للمنشورات باللغة الإنجليزية      |
| `create_note`    | `notes`        | `{date_str}-{name}-en.md`     | title, lang, layout, audio, translated  | يخلق ملفات ملاحظات، المادة الأمامية مشابهة   |
| `create_original`| `_posts/en`    | `{date_str}-{name}-en.md`     | audio, lang, layout, title, translated  | أمر جديد، نفس الشكل الذي يستخدمه المسودة، في المنشورات|

يوضح هذا الجدول أن `create_original` يتوافق مع `create_md` في تنسيق اسم الملف والمادة الأمامية، ولكن يستهدف دليل `_posts/en`، مع تجاوز المرحلة المسودة.

#### الآثار المحتملة والتفاصيل
على الرغم من أن التنفيذ يفي بالمطلب من المستخدم، هناك آثار ملحوظة، خاصة مع وظيفة `delete_md` الحالية:
- **اختلاف في اسم الملف**: وظيفة `delete_md` تبحث عن ملفات باسم `{name}-{lang}.md` في `_posts/lang`، على سبيل المثال، `_posts/en/test-post-en.md`، بدون تاريخ. ومع ذلك، يخلق `create_original` ملفات مع تاريخ، على سبيل المثال، `_posts/en/2025-02-27-test-post-en.md`. هذه الفروق تعني أن `delete_md` قد لا تجد ملفات تم إنشاؤها بواسطة `create_original` إلا إذا تم تعديلها لتعامل مع أسماء الملفات التي تحتوي على تاريخ، مما قد يتطلب استخدام `glob.glob` مع نماذج مثل `*{-en,-zh,...}.md` لتناول التاريخ.
- **هيكل الموقع**: يشير النص إلى نظام متعدد اللغات مع أدلاع فرعية في `_posts` لكل لغة (`en`, `zh`، إلخ)، وغياب التاريخ في نمط `delete_md` يعني أن المنشورات في `_posts` قد لا تعتمد على تاريخ اسم الملف لتحديد الترتيب، ربما باستخدام المادة الأمامية أو بيانات أخرى. وهذا غير عادي لمواقع Jekyll، حيث عادةً ما يحدد تاريخ اسم الملف تاريخ المنشورات، ولكن يتوافق مع سلوك النص الحالي.
- **نطاق اللغة**: التركيز على اللغة الإنجليزية (`lang: en`)، كما يشير `create_md` ومطلب المستخدم. إذا كان المستخدم يحتاج إلى `create-original` لغات أخرى، فسيحتاج إلى توسيع الوظيفة، مثل كيفية معالجة `delete_md` لغات متعددة.

#### التفكير والتقرير
كان تفسير "نفس الشكل مع إنشاء المسودة الافتراضي" حاسمًا. في البداية، كان هناك شك في ما إذا كان يشير إلى تنسيق اسم الملف (بما في ذلك التاريخ) أو المادة الأمامية. بناءً على تأكيد المستخدم على "الشكل" و "create_md" (الذي يتضمن التاريخ في أسماء الملفات)، تم اتخاذ قرار بأن `create_original` يجب أن يستخدم `{date_str}-{name}-en.md`، مما يضمن التوافق. ومع ذلك، يوضح هذا القرار وجود تناقض محتمل مع `delete_md`، مما يشير إلى أن تعديلات مستقبلية قد تكون ضرورية لإدارة الملفات.

تم استنتاج "original dir" على أنه `_posts/en` بناءً على بنية النص، خاصة سلوك `delete_md` في `_posts/lang`. وهذا الاستنتاج يتوافق مع تركيبات المواقع التي تكون فيها المنشورات في `_posts`، و `/en` الفرعية تتوافق مع السياق متعدد اللغات.

#### الخاتمة
يضيف إضافة أمر `create-original` إلى النص، مما يتيح إنشاء ملفات Markdown مباشرة في `_posts/en` بنفس المادة الأمامية التي تستخدمها المسودة. في 27 فبراير 2025، يعني ذلك أن ملفات مثل `2025-02-27-{name}-en.md` سيتم إنشاؤها، مما يضمن التوافق مع أشكال المسودة. ومع ذلك، يجب أن يكون المستخدمون على علم من احتمالية عدم التوافق في أسماء الملفات مع وظيفة `delete_md`، والتي قد تحتاج إلى تعديلات لتحقيق التوافق الكامل.

#### الإشارات الرئيسية
- [Python os Module Documentation](https://docs.python.org/3/library/os.html)
- [Python datetime Module Documentation](https://docs.python.org/3/library/datetime.html)
- [Jekyll Posts Documentation](https://jekyllrb.com/docs/posts/)