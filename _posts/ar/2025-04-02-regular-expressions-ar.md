---
audio: false
generated: true
lang: ar
layout: post
title: التعبيرات النمطية
translated: true
type: note
---

التعبيرات النمطية (Regular Expressions)، التي تُختصر غالبًا إلى "regex" أو "regexp"، هي أداة قوية ومتعددة الاستخدامات لمطابقة الأنماط في النص. فهي تقدم طريقة موجزة ومرنة للبحث في السلاسل النصية ومعالجتها والتحقق من صحتها بناءً على أنماط محددة. بينما قد يبدو التركيب النحوي صعبًا في البداية، فإن إتقان regex يمكن أن يعزز بشكل كبير قدراتك في معالجة النص في مختلف لغات البرمجة ومحررات النص وأدوات سطر الأوامر.

سيأخذك هذا الدليل من الأساسيات إلى المفاهيم الأكثر تقدمًا في التعبيرات النمطية.

**I. الأساسيات: اللبنات الأساسية لـ Regex**

في جوهرها، الـ regex هي سلسلة من الأحرف تحدد نمط بحث. يمكن أن تكون هذه الأحرف حرفية (تطابق نفسها) أو خاصة (لها معاني محددة).

**أ. الأحرف الحرفية (Literal Characters):**

معظم الأحرف في الـ regex تطابق نفسها حرفيًا. على سبيل المثال:

* `abc` ستطابق التسلسل المحدد "abc" في سلسلة نصية.
* `123` ستطابق التسلسل المحدد "123".
* `hello` ستطابق التسلسل المحدد "hello".

**ب. الأحرف الفوقية (Metacharacters): القوى الخاصة**

الأحرف الفوقية هي اللبنات الأساسية التي تمنح الـ regex قوته. لها معاني خاصة ولا تطابق نفسها حرفيًا. فيما يلي أكثرها شيوعًا:

1.  **`.` (النقطة):** تطابق أي حرف مفرد *ما عدا* حرف سطر جديد (`\n` افتراضيًا).
    * `a.c` ستطابق "abc"، "adc"، "a1c"، "a c"، ولكن لن تطابق "ac" أو "abbc".

2.  **`^` (الإشارة):**
    * **داخل مجموعة أحرف (انظر أدناه):** تنفي المجموعة، وتطابق أي حرف *ليس* في المجموعة.
    * **خارج مجموعة أحرف:** تطابق بداية السلسلة النصية (أو بداية السطر في وضع متعدد الأسطر).
        * `^hello` ستطابق "hello world" ولكن لن تطابق "say hello".

3.  **`$` (علامة الدولار):** تطابق نهاية السلسلة النصية (أو نهاية السطر في وضع متعدد الأسطر).
    * `world$` ستطابق "hello world" ولكن لن تطابق "world hello".

4.  **`*` (العلامة النجمية):** تطابق الحرف أو المجموعة السابقة صفر أو أكثر من المرات.
    * `ab*c` ستطابق "ac"، "abc"، "abbc"، "abbbc"، وهكذا.

5.  **`+` (علامة الجمع):** تطابق الحرف أو المجموعة السابقة مرة واحدة أو أكثر.
    * `ab+c` ستطابق "abc"، "abbc"، "abbbc"، ولكن لن تطابق "ac".

6.  **`?` (علامة الاستفهام):**
    * تطابق الحرف أو المجموعة السابقة صفر أو مرة واحدة (مما يجعلها اختيارية).
        * `ab?c` ستطابق "ac" و "abc"، ولكن لن تطابق "abbc".
    * تُستخدم كمعدِّل كمي (quantifier) لجعل المطابقة غير جشعة (انظر قسم المحددات الكمية).

7.  **`{}` (الأقواس المعقوفة):** تحدد العدد الدقيق أو نطاق التكرارات للحرف أو المجموعة السابقة.
    * `a{3}` تطابق ثلاث "a" بالضبط (مثل "aaa").
    * `a{2,4}` تطابق ما بين اثنين إلى أربعة "a" (مثل "aa"، "aaa"، "aaaa").
    * `a{2,}` تطابق اثنين أو أكثر من "a" (مثل "aa"، "aaa"، "aaaa"، ...).

8.  **`[]` (الأقواس المربعة):** تحدد مجموعة أحرف، وتطابق أي حرف مفرد داخل الأقواس.
    * `[abc]` ستطابق إما "a"، أو "b"، أو "c".
    * `[a-z]` ستطابق أي حرف صغير من "a" إلى "z" (نطاق).
    * `[0-9]` ستطابق أي رقم من "0" إلى "9".
    * `[A-Za-z0-9]` ستطابق أي حرف أبجدي رقمي.
    * `[^abc]` (مع `^` في البداية) ستطابق أي حرف *ما عدا* "a"، أو "b"، أو "c".

9.  **`\` (شرطة مائلة عكسية):** تهرب من الحرف التالي، مما يعامل الحرف الفوقي كحرف حرفي أو يقدم تسلسل أحرف خاص.
    * `\.` ستطابق نقطة حرفية ".".
    * `\*` ستطابق علامة نجمية حرفية "*".
    * `\d` تطابق أي رقم (ما يعادل `[0-9]`).
    * `\D` تطابق أي حرف غير رقمي (ما يعادل `[^0-9]`).
    * `\s` تطابق أي حرف مسافة بيضاء (مسافة، جدولة، سطر جديد، إلخ).
    * `\S` تطابق أي حرف ليس مسافة بيضاء.
    * `\w` تطابق أي حرف كلمة (أبجدي رقمي والشرطة السفلية، ما يعادل `[a-zA-Z0-9_]`).
    * `\W` تطابق أي حرف ليس حرف كلمة (ما يعادل `[^a-zA-Z0-9_]`).
    * `\b` تطابق حد كلمة (الموضع بين حرف كلمة وحرف ليس حرف كلمة).
    * `\B` تطابق حد ليس بكلمة.
    * `\n` تطابق حرف سطر جديد.
    * `\r` تطابق حرف إرجاع إلى بداية السطر.
    * `\t` تطابق حرف جدولة.

10. **`|` (رمز الأنبوب):** يعمل كمشغل "OR"، ويطابق إما التعبير قبل الأنبوب أو التعبير بعده.
    * `cat|dog` ستطابق إما "cat" أو "dog".

11. **`()` (الأقواس):**
    * **التجميع:** تجمع أجزاء من الـ regex معًا، مما يسمح لك بتطبيق محددات كمية أو مشغل OR على المجموعة بأكملها.
        * `(ab)+c` ستطابق "abc"، "ababc"، "abababc"، وهكذا.
        * `(cat|dog) food` ستطابق "cat food" أو "dog food".
    * **مجموعات الالتقاط (Capturing Groups):** تلتقط النص الذي طابقه التعبير داخل الأقواس. يمكن الرجوع إلى هذه المجموعات الملتقطة لاحقًا (على سبيل المثال، للاستبدال أو الاستخراج).

**II. المحددات الكمية (Quantifiers): التحكم في التكرار**

تحدد المحددات الكمية عدد المرات التي يمكن أن يحدث فيها العنصر السابق (حرف، مجموعة، أو مجموعة أحرف).

* `*`: صفر أو أكثر من المرات
* `+`: مرة واحدة أو أكثر
* `?`: صفر أو مرة واحدة
* `{n}`: بالضبط `n` مرة
* `{n,}`: `n` مرة أو أكثر
* `{n,m}`: ما بين `n` و `m` مرة (شامل)

**المطابقة الجشعة مقابل غير الجشعة (Greedy vs. Non-Greedy):**

بشكل افتراضي، المحددات الكمية **جشعة**، مما يعني أنها تحاول مطابقة أكبر قدر ممكن من السلسلة النصية. يمكنك جعل المحدد الكمي **غير جشع** (أو كسول) بإضافة `?` بعده. تحاول المحددات الكمية غير الجشعة مطابقة أقصر سلسلة نصية ممكنة.

* `a.*b` (جشعة) على "axxbxb" ستطابق "axxbxb".
* `a.*?b` (غير جشعة) على "axxbxb" ستطابق "axb" ثم "xb".

**III. المراسي (Anchors): تحديد الموضع**

المراسي لا تطابق أي أحرف بحد ذاتها، ولكنها تؤكد وجود موضع داخل السلسلة النصية.

* `^`: تطابق بداية السلسلة النصية (أو السطر).
* `$`: تطابق نهاية السلسلة النصية (أو السطر).
* `\b`: تطابق حد كلمة.
* `\B`: تطابق حد ليس بكلمة.

**IV. فئات الأحرف (Character Classes): مجموعات محددة مسبقًا**

توفر فئات الأحرف اختصارًا للمجموعات شائعة الاستخدام من الأحرف.

* `\d`: تطابق أي رقم (0-9).
* `\D`: تطابق أي حرف غير رقمي.
* `\s`: تطابق أي حرف مسافة بيضاء (مسافة، جدولة، سطر جديد، إرجاع إلى بداية السطر، تغذية النموذج).
* `\S`: تطابق أي حرف ليس مسافة بيضاء.
* `\w`: تطابق أي حرف كلمة (أبجدي رقمي والشرطة السفلية: a-zA-Z0-9_).
* `\W`: تطابق أي حرف ليس حرف كلمة.

**V. التجميع والالتقاط (Grouping and Capturing)**

تخدم الأقواس `()` غرضين رئيسيين:

* **التجميع:** يسمح لك بتطبيق محددات كمية أو مشغل OR على تسلسل من الأحرف.
* **الالتقاط:** تنشئ مجموعة التقاط، والتي تخزن الجزء من السلسلة النصية الذي طابق التعبير داخل الأقواس. يمكن الوصول إلى هذه المجموعات الملتقطة واستخدامها للإحالات المرجعية الخلفية أو الاستبدالات.

**الإحالات المرجعية الخلفية (Backreferences):**

يمكنك الرجوع إلى المجموعات الملتقطة سابقًا داخل نفس الـ regex باستخدام `\1`، `\2`، `\3`، وهكذا، حيث يتوافق الرقم مع ترتيب قوس الفتح لمجموعة الالتقاط.

* `(.)\1` ستطابق أي حرف يليه نفس الحرف (مثل "aa"، "bb"، "11").
* `(\w+) \1` ستطابق كلمة تليها مسافة ثم نفس الكلمة (مثل "hello hello").

**المجموعات غير الملتقطة (Non-Capturing Groups):**

إذا كنت بحاجة إلى تجميع أجزاء من الـ regex دون إنشاء مجموعة التقاط، يمكنك استخدام `(?:...)`. هذا مفيد لأسباب تتعلق بالوضوح أو الأداء.

* `(?:ab)+c` ستطابق "abc"، "ababc"، إلخ، ولكن لن تلتقط "ab".

**VI. Lookarounds: تأكيدات بدون استهلاك**

الـ Lookarounds هي تأكيدات عرضها صفر تتحقق من وجود نمط قبل أو بعد الموضع الحالي في السلسلة النصية دون تضمين جزء الـ lookaround المطابق في المطابقة الإجمالية.

* **ال Lookahead الإيجابي `(?=...)`:** يؤكد أن النمط داخل الأقواس يجب أن يلي الموضع الحالي.
    * `\w+(?=:)` ستطابق أي كلمة تليها نقطتان، ولكن النقطتين نفسيهما لن يكونا جزءًا من المطابقة (على سبيل المثال، في "name:"، ستطابق "name").

* **ال Lookahead السلبي `(?!...)`:** يؤكد أن النمط داخل الأقواس يجب *ألا* يلي الموضع الحالي.
    * `\w+(?!:)` ستطابق أي كلمة لا تليها نقطتان (على سبيل المثال، في "name value"، ستطابق "name" و "value").

* **ال Lookbehind الإيجابي `(?<=...)`:** يؤكد أن النمط داخل الأقواس يجب أن يسبق الموضع الحالي. يجب أن يكون للنمط داخل الـ lookbehind عرض ثابت (بدون محددات كمية متغيرة مثل `*` أو `+`).
    * `(?<=\$)\d+` ستطابق واحدًا أو أكثر من الأرقام التي تسبقها علامة دولار، ولكن علامة الدولار نفسها لن تكون جزءًا من المطابقة (على سبيل المثال، في "$100"، ستطابق "100").

* **ال Lookbehind السلبي `(?<!...)`:** يؤكد أن النمط داخل الأقواس يجب *ألا* يسبق الموضع الحالي. يجب أن يكون للنمط داخل الـ lookbehind عرض ثابت.
    * `(?<!\$)\d+` ستطابق واحدًا أو أكثر من الأرقام التي لا تسبقها علامة دولار (على سبيل المثال، في "100$"، ستطابق "100").

**VII. الأعلام (المعدلات) (Flags/Modifiers): التحكم في سلوك الـ Regex**

تُستخدم الأعلام (أو المعدلات) لتغيير سلوك محرك التعبيرات النمطية. يتم تحديدها عادةً في بداية أو نهاية نمط الـ regex، اعتمادًا على التنفيذ. تشمل الأعلام الشائعة:

* **`i` (عدم التحسس لحالة الأحرف):** يجعل المطابقة غير حساسة لحالة الأحرف. `[a-z]` ستطابق كل من الأحرف الصغيرة والكبيرة.
* **`g` (عام):** يجد جميع المطابقات في السلسلة النصية، وليس فقط الأولى.
* **`m` (متعدد الأسطر):** يجعل `^` و `$` تطابق بداية ونهاية كل سطر (محددة بـ `\n` أو `\r`) بدلاً من مجرد بداية ونهاية السلسلة النصية بأكملها.
* **`s` (Dotall / سطر واحد):** يجعل الحرف الفوقي `.` يطابق أي حرف، بما في ذلك أحرف السطر الجديد.
* **`u` (يونيكود):** يمكّن الدعم الكامل لليونيكود لفئات الأحرف والميزات الأخرى.
* **`x` (ممتد / مطوّل):** يسمح لك بكتابة regex أكثر قابلية للقراءة من خلال تجاهل المسافات البيضاء والتعليقات داخل النمط (مفيد للـ regex المعقد).

**VIII. التطبيقات العملية لـ Regex**

يُستخدم الـ regex على نطاق واسع في مجالات مختلفة:

* **محررات النص (مثل Notepad++، Sublime Text، VS Code):** البحث عن النص واستبداله بناءً على الأنماط.
* **لغات البرمجة (مثل Python، JavaScript، Java، C#):**
    * التحقق من صحة إدخال المستخدم (مثل عناوين البريد الإلكتروني، وأرقام الهواتف، وعناوين URL).
    * استخراج معلومات محددة من النص (مثل التواريخ، والأرقام، والوسوم).
    * استبدال أجزاء من سلسلة نصية بناءً على نمط.
    * تحليل ملفات السجلات أو بيانات النص المنظمة الأخرى.
* **أدوات سطر الأوامر (مثل `grep`، `sed`، `awk`):** البحث في ملفات النص ومعالجتها.
* **تطوير الويب:** التحقق من صحة النماذج، توجيه URL، معالجة المحتوى.
* **علم البيانات:** تنظيف البيانات، استخراج البيانات، التعرف على الأنماط.
* **الأمان:** كشف التسلل، تحليل السجلات.

**IX. الـ Regex في لغات البرمجة المختلفة**

معظم لغات البرمجة الحديثة لها دعم مدمج للتعبيرات النمطية، على الرغم من أن التركيب النحوي والميزات المحددة قد تختلف قليلاً. ستجد عادةً وظائف الـ regex في المكتبات القياسية أو الوحدات النمطية.

* **Python:** وحدة `re`.
* **JavaScript:** كائن `RegExp` المدمج وطرق السلسلة النصية مثل `match()`، `replace()`، `search()`، `split()`.
* **Java:** حزمة `java.util.regex`.
* **C# (.NET):** نطاق `System.Text.RegularExpressions`.
* **PHP:** دوال مثل `preg_match()`، `preg_replace()`، `preg_match_all()`.

**X. نصائح لكتابة Regex فعال**

* **ابدأ ببساطة:** ابدأ بنمط أساسي وأضف التعقيد تدريجيًا.
* **اختبر بشكل متكرر:** استخدم مختبرات الـ regex عبر الإنترنت أو أدوات الـ regex الخاصة بلغة البرمجة الخاصة بك لاختبار أنماطك مقابل بيانات نموذجية.
* **كُن محددًا:** تجنب الأنماط الواسعة جدًا التي قد تطابق نصًا غير مقصود.
* **استخدم فئات الأحرف والمحددات الكمية بحكمة:** فهي قوية ولكن يمكن أن تؤدي أيضًا إلى سلوك غير متوقع إذا لم تُستخدم بشكل صحيح.
* **افهم المطابقة الجشعة مقابل غير الجشعة:** اختر السلوك المناسب لاحتياجاتك.
* **استخدم التجميع والالتقاط بحكمة:** التقط فقط ما تحتاجه. استخدم المجموعات غير الملتقطة عندما لا يكون الالتقاط مطلوبًا.
* **وثّق الـ regex الخاص بك:** بالنسبة للأنماط المعقدة، أضف تعليقات (خاصة عند استخدام علم `x`) لشرح الغرض منها.
* **ضع في الاعتبار الحالات الطرفية:** فكر في الاختلافات المختلفة لنص الإدخال وتأكد من أن الـ regex الخاص بك يتعامل معها بشكل صحيح.
* **قسّم المشكلات المعقدة:** إذا كانت لديك مهمة مطابقة معقدة للغاية، ففكر في تقسيمها إلى أنماط regex أبسط متعددة.

**XI. موارد التعلم**

* **مختبرات الـ Regex عبر الإنترنت:** regex101.com, regexr.com, regextester.com
* **الوثائق الخاصة باللغة:** راجع وثائق الـ regex للغة البرمجة التي اخترتها.
* **الدروس والدورات عبر الإنترنت:** تقدم منصات مثل Coursera وUdemy وYouTube دورات شاملة في الـ regex.
* **الكتب:** كتاب "Mastering Regular Expressions" لجيفري فريدل هو مصدر موصى به بشدة.

**الخلاصة**

التعبيرات النمطية هي أداة لا غنى عنها لأي شخص يعمل مع بيانات النص. بينما قد يبدو منحنى التعلم الأولي حادًا، فإن القدرة على البحث في النص ومعالجته والتحقق من صحته بكفاءة بناءً على أنماط معقدة هي مهارة قيمة. من خلال فهم المفاهيم الأساسية، والأحرف الفوقية، والمحددات الكمية، والميزات الأخرى لـ regex، يمكنك تعزيز إنتاجيتك وقدراتك على حل المشكلات بشكل كبير في مجموعة واسعة من التطبيقات. الممارسة هي المفتاح لإتقان الـ regex، لذا لا تتردد في التجربة واستكشاف أنماط مختلفة لمهام معالجة النص المتنوعة.