---
audio: false
generated: true
image: false
lang: ar
layout: post
model: x-ai/grok-4-fast
title: تكوين مشغلات فروع Azure DevOps
translated: true
type: note
---

تمكّنك Azure DevOps Pipelines من تكوين الفروع التي تُطلق عمليات البناء والنشر. يتم ذلك بشكل أساسي من خلال **مشغلات التكامل المستمر (CI)** (لعمليات البناء عند دفع التعليمات البرمجية) و**مشغلات طلبات السحب (PR)** (لطلبات السحب). يختلف التكوين قليلاً بين خطوط أنابيب YAML (المُوصى بها للتحكم في الإصدار) وخطوط الأنابيب الكلاسيكية. أدناه، سأركز أولاً على YAML لأنها الطريقة الحديثة، ثم سأغطي الكلاسيكية بإيجاز. تفترض جميع الأمثلة مستودع Git.

## خطوط أنابيب YAML: تكوين مشغلات الفروع

تحدد خطوط أنابيب YAML المشغلات مباشرة في ملف `azure-pipelines.yml` الخاص بك. بشكل افتراضي، يتم تشغيل خطوط الأنابيب عند الدفع إلى **جميع الفروع** (ما يعادل `trigger: branches: include: - '*'`). يمكنك تخصيص هذا للتحكم الدقيق.

### الخطوة ١: الإعداد الأساسي
١. في مشروع Azure DevOps الخاص بك، انتقل إلى **Pipelines > Builds** (أو **Releases** للتسليم المستمر CD).
٢. أنشئ خط أنابيب أو حرره واختر **YAML** كقالب.
٣. في محرر YAML، أضف قسم `trigger` في المستوى الأعلى.

### الخطوة ٢: تضمين الفروع البسيط
استخدم قائمة بسيطة للتشغيل على فروع أو أنماط محددة:
```yaml
trigger:
- main          # يتم التشغيل عند الدفع إلى 'main'
- develop       # وأيضًا 'develop'
- releases/*    # أي فرع يبدأ بـ 'releases/' (مثل releases/v1.0)
```
- احفظ ملف YAML وقم بإيداعه في مستودعك. سيعمل خط الأنابيب الآن فقط لهذه الفروع.
- الرموز العامة مثل `*` (صفر أو أكثر من الأحرف) و `?` (حرف واحد) مدعومة. ضع الأنماط التي تبدأ بـ `*` بين علامتي اقتباس (مثال: `*-hotfix`).

### الخطوة ٣: التضمين/الاستبعاد المتقدم
للاستبعاد أو لمزيد من الدقة:
```yaml
trigger:
  branches:
    include:
    - main
    - releases/*
    - feature/*
    exclude:
    - releases/old-*     # يستبعد 'releases/old-v1'، إلخ.
    - feature/*-draft    # يستبعد ميزات المسودة
```
- **التضمين (include)**: الفروع التي *يمكنها* التشغيل (يبدأ بالجميع إذا تم حذفه).
- **الاستبعاد (exclude)**: يُخرج من قائمة التضمين (يُطبق بعد التضمين).
- إذا حددت أي بند `branches`، فإنه يتجاوز الإعداد الافتراضي (جميع الفروع) — فقط عمليات التضمين الصريحة هي التي ستشغل.
- للعلامات (tags): استخدم `refs/tags/v1.*` في عمليات التضمين.

### الخطوة ٤: عوامل تصفية المسارات (اختياري)
اجمع مع مسارات الملفات للتحكم الدقيق:
```yaml
trigger:
  branches:
    include:
    - main
  paths:
    include:
    - src/*.cs          # فقط إذا كانت هناك تغييرات في مجلد 'src'
    exclude:
    - docs/*.md         # تجاهل تغييرات الوثائق
```
- المسارات نسبية لجذر المستودع وحساسة لحالة الأحرف.

### الخطوة ٥: التجميع والانسحاب
- **عمليات التشغيل المجمعة (Batch runs)**: لتحويل عمليات الدفع المتعددة إلى بناء واحد (يقلل الضوضاء):
  ```yaml
  trigger:
    batch: true
    branches:
      include:
      - main
  ```
- **تعطيل المشغلات**: عيّن `trigger: none` لعدم وجود تكامل مستمر.
- **تخطي لكل commit**: أضف `[skip ci]` أو `***NO_CI***` إلى رسائل commit.

### مشغلات طلبات السحب (PR)
لطلبات السحب، أضف قسم `pr`:
```yaml
pr:
  branches:
    include:
    - main
    - develop
  paths:
    include:
    - src/*
```
- هذا يتحقق من صحة طلبات السحب المستهدفة لهذه الفروع.

### الاختبار
- ادفع إلى فرع مطابق: يعمل خط الأنابيب تلقائيًا.
- اعرض عمليات التشغيل في **Pipelines > Runs** وتحقق من تفاصيل المشغل.

## خطوط الأنابيب الكلاسيكية: تكوين مشغلات الفروع
لخطوط الأنابيب الكلاسيكية (المعتمدة على واجهة المستخدم):
١. حرر خط الأنابيب الخاص بك في **Pipelines > Builds**.
٢. انتقل إلى **Triggers > Continuous integration**.
٣. حدد **Enable continuous integration**.
٤. تحت **Branch filters**، أضف عمليات تضمين (مثال: `main`) أو استبعاد (مثال: `develop`).
٥. للمسارات: استخدم **Path filters** في نفس علامة التبويب.
٦. لطلبات السحب: انتقل إلى **Triggers > Pull request validation** وعيّن عوامل تصفية الفروع.

انتقل إلى YAML للحصول على قابلية صيانة أفضل.

## أفضل الممارسات
- ابدأ ببساطة: شغّل على `main` و `develop` فقط.
- استخدم الاستبعاد للفروع المزعجة مثل `*-hotfix`.
- قم بتأمينها باستخدام سياسات الفروع (Repos > Branches > Policies) للمراجعين المطلوبين.
- راقب: استخدم تحليلات خط الأنابيب لمعرفة تكرار التشغيل.

للحصول على أحدث التفاصيل، راجع الوثائق الرسمية.

[بناء مستودعات Azure Repos Git](https://learn.microsoft.com/en-us/azure/devops/pipelines/repos/azure-repos-git?view=azure-devops&tabs=yaml)  
[المشغلات في Azure Pipelines](https://learn.microsoft.com/en-us/azure/devops/pipelines/build/triggers?view=azure-devops&tabs=yaml)