---
audio: false
generated: true
lang: es
layout: post
title: Guía Completa de Cron
translated: true
type: note
---

Cron es un poderoso programador de trabajos basado en tiempo en sistemas operativos tipo Unix que permite a los usuarios programar comandos o scripts para que se ejecuten automáticamente en momentos o intervalos específicos. Aquí tienes una guía completa para entender y usar cron de manera efectiva.

## ¿Qué es Cron?

Cron es un daemon (servicio en segundo plano) que ejecuta comandos programados. Lee archivos de configuración llamados "crontabs" (tablas cron) para determinar cuándo ejecutar comandos particulares. Cron es ideal para:
- Mantenimiento rutinario del sistema
- Copias de seguridad automatizadas
- Programar procesamiento de datos periódico
- Ejecutar scripts en momentos específicos
- Cualquier tarea que necesite ejecutarse regularmente sin intervención manual

## Componentes de Cron

### El Archivo Crontab

El crontab (tabla cron) es un archivo de configuración que especifica comandos de shell para ejecutar periódicamente. Cada usuario puede tener su propio crontab, y también hay un crontab para todo el sistema.

Para editar tu crontab personal:
```bash
crontab -e
```

Para ver tu crontab actual:
```bash
crontab -l
```

Para eliminar tu crontab:
```bash
crontab -r
```

### Sintaxis de Crontab

Cada línea en un archivo crontab representa un trabajo programado y sigue este formato:

```
* * * * * comando-a-ejecutar
│ │ │ │ │
│ │ │ │ └─── Día de la semana (0-6, Domingo=0)
│ │ │ └───── Mes (1-12)
│ │ └─────── Día del mes (1-31)
│ └───────── Hora (0-23)
└─────────── Minuto (0-59)
```

Cada posición puede contener:
- Un número específico
- Un rango (ej., `1-5`)
- Una lista de valores (ej., `1,3,5`)
- Un asterisco (`*`) que significa "cada"
- Un valor de paso (`*/n`) que significa "cada n"

Después de los cinco campos de tiempo/fecha viene el comando a ejecutar.

## Ejemplos Comunes de Programación Cron

# Ejemplos Comunes de Programación Cron

## Intervalos de Tiempo Básicos

| Expresión Cron | Descripción | Ejemplo |
|----------------|-------------|---------|
| `* * * * *` | Ejecutar cada minuto | `* * * * * date >> /tmp/date_log.txt` |
| `*/5 * * * *` | Ejecutar cada 5 minutos | `*/5 * * * * /scripts/check_server.sh` |
| `0 * * * *` | Ejecutar al inicio de cada hora | `0 * * * * /scripts/hourly_backup.sh` |
| `0 0 * * *` | Ejecutar a medianoche diariamente | `0 0 * * * /scripts/daily_backup.sh` |
| `0 0 * * 0` | Ejecutar a medianoche los domingos | `0 0 * * 0 /scripts/weekly_maintenance.sh` |
| `0 0 1 * *` | Ejecutar a medianoche el primer día de cada mes | `0 0 1 * * /scripts/monthly_report.sh` |
| `0 0 1 1 *` | Ejecutar a medianoche el 1 de enero (anualmente) | `0 0 1 1 * /scripts/yearly_cleanup.sh` |

## Tiempos Específicos

| Expresión Cron | Descripción | Ejemplo |
|----------------|-------------|---------|
| `30 8 * * 1-5` | Ejecutar a las 8:30 AM en días laborables (Lunes-Viernes) | `30 8 * * 1-5 /scripts/workday_start.sh` |
| `0 18 * * 1-5` | Ejecutar a las 6:00 PM en días laborables | `0 18 * * 1-5 /scripts/workday_end.sh` |
| `0 9-17 * * *` | Ejecutar al inicio de cada hora durante el horario comercial (9 AM - 5 PM) | `0 9-17 * * * /scripts/hourly_check.sh` |
| `0 0,12 * * *` | Ejecutar a medianoche y mediodía | `0 0,12 * * * /scripts/twice_daily.sh` |

## Especificaciones Múltiples de Tiempo

| Expresión Cron | Descripción | Ejemplo |
|----------------|-------------|---------|
| `0 */4 * * *` | Ejecutar cada 4 horas | `0 */4 * * * /scripts/periodic_task.sh` |
| `0 4,16 * * *` | Ejecutar a las 4:00 AM y 4:00 PM | `0 4,16 * * * /scripts/twice_daily_at_4.sh` |
| `15,45 * * * *` | Ejecutar a los 15 y 45 minutos de cada hora | `15,45 * * * * /scripts/quarter_hourly.sh` |

## Especificaciones de Tiempo Especiales

| Expresión Cron | Descripción | Ejemplo |
|----------------|-------------|---------|
| `@reboot` | Ejecutar una vez al arrancar | `@reboot /scripts/startup_task.sh` |
| `@yearly` o `@annually` | Ejecutar una vez al año (`0 0 1 1 *`) | `@yearly /scripts/annual_task.sh` |
| `@monthly` | Ejecutar una vez al mes (`0 0 1 * *`) | `@monthly /scripts/monthly_task.sh` |
| `@weekly` | Ejecutar una vez a la semana (`0 0 * * 0`) | `@weekly /scripts/weekly_task.sh` |
| `@daily` o `@midnight` | Ejecutar una vez al día (`0 0 * * *`) | `@daily /scripts/daily_task.sh` |
| `@hourly` | Ejecutar una vez por hora (`0 * * * *`) | `@hourly /scripts/hourly_task.sh` |

## Ejemplos Complejos

| Expresión Cron | Descripción | Ejemplo |
|----------------|-------------|---------|
| `0 0 */2 * *` | Ejecutar a medianoche cada dos días | `0 0 */2 * * /scripts/every_other_day.sh` |
| `0 3 * * 1,3,5` | Ejecutar a las 3:00 AM los lunes, miércoles y viernes | `0 3 * * 1,3,5 /scripts/mwf_task.sh` |
| `30 23 * * 2,4` | Ejecutar a las 11:30 PM los martes y jueves | `30 23 * * 2,4 /scripts/tue_thu_night.sh` |
| `45 11 1-7 * *` | Ejecutar a las 11:45 AM durante la primera semana de cada mes | `45 11 1-7 * * /scripts/first_week_task.sh` |
| `0 20 * 10,11,12 *` | Ejecutar a las 8:00 PM durante octubre, noviembre y diciembre | `0 20 * 10,11,12 * /scripts/q4_evening_task.sh` |
| `0 9-17/2 * * 1-5` | Ejecutar cada dos horas durante el horario comercial en días laborables | `0 9-17/2 * * 1-5 /scripts/biweekly_workday.sh` |


## Cadenas Especiales de Cron

Cron también admite varias cadenas especiales para especificaciones de tiempo comunes:

- `@reboot`: Ejecutar una vez al arrancar
- `@yearly` o `@annually`: Ejecutar una vez al año (equivalente a `0 0 1 1 *`)
- `@monthly`: Ejecutar una vez al mes (equivalente a `0 0 1 * *`)
- `@weekly`: Ejecutar una vez a la semana (equivalente a `0 0 * * 0`)
- `@daily` o `@midnight`: Ejecutar una vez al día (equivalente a `0 0 * * *`)
- `@hourly`: Ejecutar una vez por hora (equivalente a `0 0 * * *`)

## Manejo de Salida y Errores

Por defecto, cron envía la salida de los comandos por correo electrónico al usuario que posee el crontab. Puedes redirigir la salida a un archivo o descartarla:

```bash
# Añadir salida a un archivo de registro
30 5 * * * /path/to/script.sh >> /path/to/logfile.log 2>&1

# Descartar toda la salida
0 12 * * * /path/to/script.sh > /dev/null 2>&1
```

## Variables de Entorno en Cron

Los trabajos de cron se ejecutan con un entorno mínimo, lo que puede hacer que los scripts fallen. Puedes establecer variables en el archivo crontab:

```bash
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
SHELL=/bin/bash
MAILTO=your-email@example.com

# Los trabajos usarán ahora estas variables de entorno
0 5 * * * /path/to/script.sh
```

## Consideraciones de Seguridad de Cron

1. Usa rutas absolutas para todos los comandos y scripts
2. Restringe los permisos del archivo crontab
3. Usa el principio de privilegio mínimo al configurar trabajos cron
4. Registra y monitorea la salida de los trabajos cron para depuración
5. Considera usar un usuario dedicado para trabajos cron sensibles

## Solución de Problemas de Trabajos Cron

Los problemas comunes con los trabajos cron incluyen:

1. **El trabajo no se ejecuta**: Verifica permisos y rutas
2. **Problemas de tiempo**: Verifica que el formato de tiempo sea correcto
3. **Problemas de entorno**: Asegúrate de que las variables necesarias estén establecidas
4. **Errores de script**: Prueba el script manualmente primero

Revisa los registros del sistema para mensajes relacionados con cron:
```bash
grep CRON /var/log/syslog
```

## Alternativas a Cron

Aunque cron es prevalente, existen alternativas:

- **Anacron**: Mejor para sistemas que no están en funcionamiento 24/7
- **Systemd Timers**: Alternativa moderna en sistemas basados en systemd
- **Fcron**: Cron mejorado con características similares a anacron
- **Schedule**: Programadores de trabajos de alto nivel usados a menudo en aplicaciones web

## Uso Avanzado de Cron

### Ejecutar Trabajos Como Diferentes Usuarios

Para editar el crontab de otro usuario (requiere root):
```bash
sudo crontab -u username -e
```

### Crontabs de Todo el Sistema

Los trabajos cron de todo el sistema se pueden añadir a:
- `/etc/crontab`
- Archivos en `/etc/cron.d/`
- Directorios como `/etc/cron.daily/`, `/etc/cron.hourly/`, etc.

La sintaxis para crontabs del sistema incluye un campo de usuario adicional:
```
* * * * * usuario comando-a-ejecutar
```

### Ejecutar Trabajos Cron con Entorno Específico

Crea un script wrapper para configurar el entorno antes de ejecutar tu comando real:

```bash
#!/bin/bash
source /home/user/.profile
cd /path/to/working/directory
/path/to/actual/command
```

Luego llama a este script wrapper desde cron.

## Mejores Prácticas para Trabajos Cron

1. **Documenta tus trabajos cron**: Añade comentarios para explicar qué hace cada trabajo
2. **Usa nombres de script descriptivos**: Facilita el mantenimiento
3. **Registra las salidas**: Guarda las salidas de los trabajos para solución de problemas
4. **Monitorea la ejecución de trabajos**: Implementa monitoreo para trabajos críticos
5. **Maneja fallos con gracia**: Añade manejo de errores a tus scripts
6. **Usa archivos de bloqueo**: Evita la ejecución superpuesta cuando los trabajos tardan más de lo esperado
7. **Considera las zonas horarias**: Ten en cuenta la configuración de la zona horaria del sistema

Siguiendo esta guía, deberías poder configurar, administrar y solucionar problemas de trabajos cron de manera efectiva en tu sistema tipo Unix.