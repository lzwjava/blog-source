---
audio: false
generated: true
image: false
lang: es
layout: post
model: x-ai/grok-4-fast
title: Paquetes de Usuario de Python Deshabilitados
translated: true
type: note
---

El paquete **ya está instalado** en tu directorio de usuario (`~/.local/lib/python3.13/site-packages`), pero cuando ejecutas el script con `python3 ./scripts/train/extract_wiki.py`, Python **no está buscando en el directorio user site-packages** por alguna razón.

Este es un problema muy común con Python 3.11+ en muchas distribuciones de Linux (Ubuntu 22.04/24.04, Debian, Arch, etc.) porque el `python3` predeterminado a menudo tiene la variable de entorno `PYTHONNOUSERSITE=1` configurada o la bandera `-I` (aislado) habilitada por el gestor de paquetes del sistema, lo que **deshabilita completamente la ruta user site-packages**.

### Formas rápidas de verificar que este es el problema

Ejecuta estos dos comandos:

```bash
python3 -c "import sys, pathlib; print('user site:', pathlib.Path(sys.path[-1]).resolve() if 'site-packages' in sys.path[-1] else 'DISABLED')"
python3 -c "import site; print(site.ENABLE_USER_SITE)"
```

Si ves `DISABLED` o `False` o `None`, ese es exactamente el problema.

### Soluciones (elige una)

#### Opción 1 – Usa `python3 -m pip` y ejecuta con el mismo Python (recomendado)

```bash
# Siempre usa la forma de módulo para estar 100% seguro en qué Python estás instalando
python3 -m pip install --user --upgrade mediawiki-dump

# Luego ejecuta tu script con el mismo Python
python3 ./scripts/train/extract_wiki.py
```

Si eso aún falla, fuerza a que user site esté activado:

```bash
python3 -s ./scripts/train/extract_wiki.py
# o
PYTHONNOUSERSITE=0 python3 ./scripts/train/extract_wiki.py
```

#### Opción 2 – Usa un entorno virtual (mejor práctica de todos modos)

```bash
cd /home/lzw/projects/blog-source
python3 -m venv .venv
source .venv/bin/activate
pip install --upgrade pip
pip install mediawiki-dump   # se instalará en el venv, sin problemas de permisos
python ./scripts/train/extract_wiki.py   # ahora definitivamente lo encontrará
```

#### Opción 3 – Forzar la habilitación permanente de user site (no recomendado para el Python del sistema)

Añade esto a tu `~/.bashrc` o `~/.zshrc`:

```bash
export PYTHONNOUSERSITE=
```

o crea `~/.config/pythonstartup.py` con:

```python
import site
import os
os.environ["PYTHONNOUSERSITE"] = ""
```

### Prueba rápida de una línea ahora mismo

Solo ejecuta esto en tu shell actual:

```bash
python3 -s -c "from mediawiki_dump.tokenizer import WikiTokenizer; print('Works!')"
```

Si eso imprime "Works!", entonces la solución es simplemente usar siempre `python3 -s` o crear un venv.

Haz lo de la opción del entorno virtual (Opción 2) — te ahorrará un sinfín de dolores de cabeza con todos los demás paquetes también. ¡Avísame si aparece algún nuevo error después de eso!