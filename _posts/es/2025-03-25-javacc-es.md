---
audio: false
generated: true
lang: es
layout: post
title: Definición y Compilación de Gramática JavaCC
translated: true
type: note
---

Crearé un artefacto completo que demuestre JavaCC (Java Compiler Compiler) con ejemplos de definición de gramática, declaraciones de variables y compilación.

```java
/* Ejemplo de Gramática Básica para JavaCC */

// Opciones y declaración de la clase parser
options {
    STATIC = false;  // Permitir múltiples instancias del parser
    LOOKAHEAD = 2;   // Establecer anticipación sintáctica a 2 tokens
}

PARSER_BEGIN(SimpleParser)
public class SimpleParser {
    public static void main(String[] args) throws ParseException {
        SimpleParser parser = new SimpleParser(System.in);
        parser.Start();
    }
}
PARSER_END(SimpleParser)

// Especificaciones Léxicas (Tokens)
TOKEN : {
    // Palabras clave
    < VAR: "var" >
    < INT: "int" >
    < BOOLEAN: "boolean" >
    < STRING: "string" >

    // Literales e Identificadores
    < NUMBER: (["0"-"9"])+ >
    < IDENTIFIER: ["a"-"z","A"-"Z","_"] (["a"-"z","A"-"Z","0"-"9","_"])* >

    // Operadores y Puntuación
    < ASSIGN: "=" >
    < SEMICOLON: ";" >
    < PLUS: "+" >
    < MINUS: "-" >
    < MULTIPLY: "*" >
    < DIVIDE: "/" >
    < LPAREN: "(" >
    < RPAREN: ")" >
}

// Omitir espacios en blanco y comentarios
SKIP : {
    " " | "\t" | "\n" | "\r"
    | <SINGLE_LINE_COMMENT: "//" (~["\n","\r"])* ("\n"|"\r"|"\r\n")>
    | <MULTI_LINE_COMMENT: "/*" (~["*"])* "*" ("*" | (~["*","/"] (~["*"])* "*"))* "/">
}

// Reglas de la Gramática
void Start() : {} {
    (Statement())* <EOF>
}

void Statement() : {} {
    VariableDeclaration()
    | Expression()
    | AssignmentStatement()
}

void VariableDeclaration() : {} {
    // Sintaxis: var [tipo] [identificador] (= [expresión])?;
    <VAR> Type() <IDENTIFIER> 
    ( <ASSIGN> Expression() )? 
    <SEMICOLON>
}

void Type() : {} {
    <INT> | <BOOLEAN> | <STRING>
}

void Expression() : {} {
    AdditiveExpression()
}

void AdditiveExpression() : {} {
    MultiplicativeExpression() 
    (
        <PLUS> MultiplicativeExpression()
        | <MINUS> MultiplicativeExpression()
    )*
}

void MultiplicativeExpression() : {} {
    PrimaryExpression() 
    (
        <MULTIPLY> PrimaryExpression()
        | <DIVIDE> PrimaryExpression()
    )*
}

void PrimaryExpression() : {} {
    <NUMBER>
    | <IDENTIFIER>
    | <LPAREN> Expression() <RPAREN>
}

void AssignmentStatement() : {} {
    <IDENTIFIER> <ASSIGN> Expression() <SEMICOLON>
}

```

Ahora, proporcionaré una explicación completa de JavaCC y cómo trabajar con esta gramática:

### Descripción General de JavaCC
JavaCC (Java Compiler Compiler) es un generador de parsers que te ayuda a crear analizadores sintácticos y léxicos para lenguajes personalizados o lenguajes específicos de dominio.

### Componentes Clave en el Ejemplo:

1. **Bloque de Opciones**
   - `STATIC = false`: Permite crear múltiples instancias del parser
   - `LOOKAHEAD = 2`: Configura el parser para mirar hacia adelante 2 tokens para desambiguación

2. **Definiciones de Tokens**
   - Define tokens como palabras clave, identificadores, números y operadores
   - Utiliza expresiones regulares para coincidir con patrones de tokens
   - Ejemplos de tokens:
     - `< NUMBER: (["0"-"9"])+ >` coincide con uno o más dígitos
     - `< IDENTIFIER: ["a"-"z","A"-"Z","_"] (["a"-"z","A"-"Z","0"-"9","_"])* >` coincide con nombres de variables

3. **Especificaciones de Omisión**
   - Define qué ignorar durante el análisis sintáctico (espacios en blanco, comentarios)
   - Incluye manejo de comentarios de una sola línea y múltiples líneas

4. **Reglas de Gramática**
   - Definen la sintaxis y estructura del lenguaje
   - Utilizan análisis sintáctico por descenso recursivo
   - Reglas como `VariableDeclaration()`, `Expression()` definen construcciones del lenguaje

### Pasos de Compilación y Uso

1. **Generar el Parser**
   ```bash
   javacc SimpleParser.jj
   ```
   Este comando genera:
   - `SimpleParserConstants.java`
   - `SimpleParserTokenManager.java`
   - `ParseException.java`
   - `SimpleParser.java`

2. **Compilar los Archivos Generados**
   ```bash
   javac *.java
   ```

3. **Ejecutar el Parser**
   ```bash
   java SimpleParser
   ```

### Ejemplo de Entrada
```
var int x = 10;
var int y = 20;
x = x + y;
```

### Características Demostradas
- Declaración de variables con inicialización opcional
- Expresiones aritméticas básicas
- Sistema de tipos (int, boolean, string)
- Sentencias de asignación
- Operaciones aritméticas (+, -, *, /)

### Limitaciones de Este Ejemplo
- Manejo básico de errores
- Verificación de tipos limitada
- Gramática simplificada

### Consejos de Uso Avanzado
- Usa acciones semánticas (código Java en `{}`) para análisis sintáctico más complejo
- Implementa recuperación personalizada de errores
- Añade verificación de tipos y análisis semántico

¿Te gustaría que profundice en algún aspecto específico de JavaCC o de este ejemplo de gramática?