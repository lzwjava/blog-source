---
audio: false
generated: true
image: false
lang: ja
layout: post
model: x-ai/grok-4-fast
title: ハイパーバイザと仮想マシン管理
translated: true
type: note
---

**ハイパーバイザ**（**仮想マシンモニター** または VMM とも呼ばれる）は、物理ホストコンピュータ上で**仮想マシン（VM）** を作成、実行、管理する中核となるソフトウェア（場合によってはファームウェア/ハードウェア）です。物理ハードウェアリソース（CPU、メモリ、ストレージ、ネットワークなど）を抽象化し、複数の分離された仮想マシン間で共有することで、仮想化を可能にします。

### ハイパーバイザの2つの主要なタイプ

| タイプ | 説明 | ハードウェア上で直接実行？ | 例 | 長所 | 短所 |
|------|-------------|-----------------------------|----------|------|------|
| **Type 1 (ベアメタル)** | 物理ハードウェアに直接インストールされ、実行される。ハイパーバイザの下にホストOSは存在しない。 | はい | VMware ESXi、Microsoft Hyper-V（ハイパーバイザモード）、Xen、KVM（ベアメタルで使用される場合）、Proxmox VE、Oracle VM Server | 最高のパフォーマンス、セキュリティが高い、オーバーヘッドが低い、プロダクション/データセンター環境で使用される | 初心者には管理が難しい、組み込みのドライバ/ツールが少ない |
| **Type 2 (ホスト型)** | 従来のオペレーティングシステム（Windows、macOS、Linux）上でアプリケーションとして実行される。ハードウェアはホストOSが所有する。 | いいえ（ホストOS上で実行） | VMware Workstation、VMware Fusion、VirtualBox、Parallels Desktop、QEMU（ホストOSと共に使用される場合） | インストールと使用が容易、デスクトップ/ラップトップに最適、ホストOSのドライバとツールを利用できる | パフォーマンスがやや劣る、ホストOSがあるため攻撃対象領域が広い |

### ハイパーバイザの仕組み（簡略化）

1.  **リソース抽象化** – ハイパーバイザは、各VMに仮想CPU（vCPU）、仮想RAM、仮想ディスク、仮想NICなどを提供します。
2.  **分離** – 各VMは完全に分離されている。1つのVMがクラッシュしたり侵害を受けても、通常は他に影響を与えません。
3.  **スケジューリング** – ハイパーバイザは、どのVMがいつ物理CPU/RAMを使用するかをスケジュールします（タイムシェアリング）。
4.  **トラップ・アンド・エミュレート** – VMが特権命令（ページテーブルの変更、ハードウェアへのアクセスなど）を実行しようとすると、CPUがハイパーバイザにトラップし、ハイパーバイザが要求を安全にエミュレートまたは処理します。
5.  **ハードウェアアクセラレーション** – 現代のCPUには仮想化拡張機能（Intel VT-x、AMD-V）があり、トラップ・アンド・エミュレートのプロセスを極めて高速にします（ネイティブに近いパフォーマンス）。

### 一般的なユースケース

-   サーバー統合（1台の物理サーバーで数十のVMを実行）
-   クラウドコンピューティング（AWS EC2、Azure VMs、GCP Compute Engineはすべて内部でハイパーバイザを使用）
-   開発/テスト環境
-   デスクトップ仮想化（macOS上でWindowsを実行、または複数のLinuxディストリビューションを並行して実行）
-   セキュリティサンドボックスとマルウェア分析

### 現在（2025年）人気のハイパーバイザ

-   **VMware ESXi** – エンタープライズで支配的（現在はBroadcomの一部）
-   **Microsoft Hyper-V** – Windows Server および Windows 10/11 Pro に組み込み
-   **KVM** – Linuxのデフォルト、ほとんどのOpenStackおよびパブリッククラウド（Google Cloud、AWS Nitroなど）を支える
-   **Proxmox VE** – Debian + KVM + LXC ベースのオープンソースType-1
-   **Xen** – Oracle Cloud、AWS（旧世代）、XCP-ng で使用
-   **VirtualBox** – Oracleによる無料のType-2、個人利用で非常に人気
-   **Nutanix AHV** – HCI向けのAcropolis Hypervisor（KVMベース）

要約すると、ハイパーバイザは、複数のオペレーティングシステムが同じ物理コンピュータを安全かつ効率的に共有できるようにする「オーケストラの指揮者」です。Type 1はデータセンターやクラウドで見られ、Type 2はデスクトップユーザーが通常インストールするものです。