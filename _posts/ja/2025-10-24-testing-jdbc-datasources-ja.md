---
audio: false
generated: true
image: false
lang: ja
layout: post
model: x-ai/grok-4-fast
title: WebSphereにおけるJDBCデータソースのテスト
translated: true
type: note
---

### IBM WebSphere Application Server (WAS) 管理コンソールでの JDBC データソースのテスト

IBM WebSphere Application Server (WAS) では、統合ソリューションコンソール（管理コンソール）の「接続のテスト」機能を使用して、JDBC データソースが正しく構成され、基盤となるデータベースに接続できることを確認できます。これは、アプリケーションをデプロイせずに接続の問題をトラブルシューティングするのに便利です。

以下にステップバイステップのガイドを示します（WAS Traditional または完全なコンソールを備えた Liberty を使用していることを前提としています。バージョン（v8.5、v9.x など）によって多少異なる場合があります）。

#### 前提条件
- WAS サーバーおよびコンソールへの管理者アクセス権があることを確認してください。
- データソースが（リソース > JDBC > データソース の下で）JNDI 名、JDBC プロバイダー、データベース URL、ユーザー名、パスワードなどの詳細とともに既に構成されている必要があります。
- データベースサーバーが実行中であり、WAS サーバーからアクセス可能である必要があります（ファイアウォール、ネットワークなどを確認してください）。
- セキュアな設定（SSL など）を使用している場合は、証明書が構成されていることを確認してください。

#### 接続をテストする手順

1.  **管理コンソールにログインします**:
    - Web ブラウザーを開き、コンソール URL (`http://<was-host>:<admin-port>/ibm/console`) に移動します（デフォルトの管理ポートは HTTP の場合は 9060、HTTPS の場合は 9043 です。実際のホストとポートに置き換えてください）。
    - 管理者資格情報を使用してログインします。

2.  **JDBC データソースに移動します**:
    - 左側のナビゲーションペインで、**リソース** > **JDBC** を展開します。
    - **データソース** をクリックします。

3.  **適切なスコープを選択します**:
    - コンソールは、まだ設定されていない場合（セル、ノード、サーバー、クラスターなど）にスコープを選択するよう促します。データソースが定義されているスコープを選択してください。
    - **OK** または **続行** をクリックして進みます。

4.  **データソースを見つけます**:
    - データソースのリストで、テストしたいデータソース（例: `jdbc/myDataSource` のような JNDI 名で）を見つけて選択します。
    - リストにない場合は、データソースが作成され保存されていることを確認してください。必要に応じて、**新規** から作成できます。

5.  **接続テスト機能にアクセスします**:
    - データソースを選択した状態で、**接続のテスト** をクリックします（このボタンは通常、データソースの詳細ページの上部にあります）。
    - ボタンが灰色表示されているか、利用できない場合:
        - データソースが有効になっているか確認してください（無効になっている場合は「有効化」オプションを探してください）。
        - JDBC プロバイダーが関連付けられていることを確認してください（リソース > JDBC > JDBC プロバイダーの下）。
        - 一部の設定では、サーバーを停止/起動するか、最初に構成を保存する必要がある場合があります。

6.  **テストを実行します**:
    - コンソールは、構成された設定（URL、ドライバー、資格情報など）を使用して接続を確立しようと試みます。
    - 結果が表示されるまで待ちます（ネットワーク/データベースの応答に応じて数秒かかる場合があります）。
    - **成功**: 「サーバー <ServerName> ノード <NodeName> 上のデータソース <Name> の接続テストが成功しました。」のようなメッセージが表示されます。
    - **失敗**: 詳細を含むエラーメッセージが表示されます。例:
        - 接続が拒否されました（ネットワークの問題）。
        - 無効な資格情報（ユーザー名/パスワードが間違っている）。
        - ドライバーが見つかりません（JDBC プロバイダーの設定ミス）。
        - データベースからの SQLException の詳細。

7.  **確認とトラブルシューティング**:
    - 失敗した場合は、コンソールの **メッセージ** 領域（ページ上部）で詳細を確認してください。
    - サーバーログを表示します: **トラブルシューティング** > **ログとトレース** > 該当サーバーを選択 > **JVM ログ** または **アプリケーションログ** に移動して、スタックトレースを確認します。
    - 一般的な修正:
        - データベース URL の形式を確認します（例: Oracle の場合は `jdbc:oracle:thin:@localhost:1521:orcl`）。
        - SQL*Plus や DBeaver などのデータベースツールを使用して資格情報を手動でテストします。
        - JDBC ドライバー JAR が正しい場所にデプロイされていることを確認します（例: JDBC プロバイダー経由）。
        - コネクションプールの場合、**コネクションプールプロパティー** の下の最小/最大接続数などの設定を確認します。

#### 追加のヒント
- **セキュリティ**: データソースがコンテナー管理認証を使用している場合は、**セキュリティ** > **グローバルセキュリティー** または JAAS 経由で資格情報が設定されていることを確認してください。
- **カスタムプロパティ**: データソースページで、**コネクションプール**、**コンテナー管理認証エイリアス**、**カスタムプロパティ** などのタブを確認して問題がないか調べてください。
- **複数のサーバー/クラスター**: テストは選択した特定のサーバー/ノードに対して実行されます。クラスターの場合は、必要に応じて各メンバーでテストしてください。
- **WAS Liberty Profile**: Liberty を使用している場合、プロセスは同様ですが、`server.xml` ファイルまたは Liberty Admin Center を使用します。`adminCenter-1.0` フィーチャーを有効にし、`http://localhost:9080/adminCenter` からアクセスします。テストは **サーバー** > 該当サーバー > **リソース** > **データソース** の下で行います。
- **自動化**: スクリプトの場合、`dsId` がデータソース構成 ID である `AdminConfig.testConnection(dsId)` のような wsadmin (Jython/Python) コマンドを使用します。

特定のエラーメッセージや WAS のバージョンで問題が発生した場合は、詳細を提供して具体的なヘルプを得てください！ 公式ドキュメントについては、使用している WAS バージョンの IBM Knowledge Center を参照してください。