---
audio: false
generated: true
image: false
lang: ja
layout: post
title: Windows Tracert ネットワークパス診断ガイド
translated: true
type: note
---

Windowsでは、**`tracert`**（*trace route*の略）は、コンピュータから宛先ホスト（WebサイトやIPアドレスなど）までパケットがたどる経路を追跡するための診断用コマンドラインツールです。ネットワーク経路上で遅延や接続問題が発生している場所を特定するために主に使用されます。

仕組みをステップバイステップで説明します：

### 1. TTLを増加させながら送信するICMPエコー要求

* `tracert`は**ICMPエコー要求パケット**（`ping`と同様）を送信します。
* IPヘッダーの**Time-To-Live (TTL)** フィールドを操作します。
* TTLは1から始まり、プローブごとに（2、3、4、…）と増加します。

### 2. TTLの期限切れと「時間超過」応答

* ルーターがパケットを受信すると、TTLを1減らします。
* TTLが**0**になると、ルーターはパケットを破棄し、送信元に**ICMP時間超過**メッセージを返します。
* これにより、`tracert`はそのルーターの識別情報（IP/ホスト名）を知ることができます。

### 3. 経路の構築

* TTL = 1の場合、最初のホップ（デフォルトゲートウェイ）が表示されます。
* TTL = 2の場合、次のルーターが表示され、以下同様に続きます。
* これは以下のいずれかになるまで継続されます：

  * 宛先ホストが**ICMPエコー応答**で応答する
  * 最大ホップ制限（デフォルト30）に達する

### 4. 遅延の計測

* `tracert`はホップごとに**3つのプローブ**を（デフォルトで）送信します。
* 各プローブに対する**往復遅延時間（RTT）** をミリ秒単位で表示します。
* ルーターが応答しない場合、時間の代わりに`*`が表示されます。

### 5. 出力例

```text
example.com [93.184.216.34] へのルートをトレースしています
最大 30 ホップで:

  1     1 ms    <1 ms     1 ms  192.168.1.1
  2    10 ms     9 ms    11 ms  isp-gateway.example.net [203.0.113.1]
  3    25 ms    23 ms    24 ms  core-router.example.net [198.51.100.1]
  ...
  8    45 ms    46 ms    47 ms  example.com [93.184.216.34]
```

### 6. 動作に関する注意点

* ICMP応答をブロックまたは優先度を下げるルーターもあるため、`* * *`が表示されることがあります。
* **Windows**の`tracert`はICMPエコー要求を使用しますが、Linux/Unixの`traceroute`は（変更可能ですが）多くの場合**UDPプローブ**を使用します。
* ファイアウォールやISPのフィルタリングにより、経路の一部が隠されることがあります。

---

👉 `tracert`結果で`* * *`や大きな遅延が表示される場合の**解釈方法**も説明しましょうか？実際のトラブルシューティングに役立てることができます。