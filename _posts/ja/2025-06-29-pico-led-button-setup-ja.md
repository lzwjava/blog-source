---
audio: false
generated: true
lang: ja
layout: post
title: ラズベリーパイ ピコ LED ボタン セットアップ
translated: true
type: note
---

提供されたMicroPythonコード（ボタン押下に基づいてLEDを制御する）を実行するためにRaspberry Pi Picoをセットアップするには、以下の手順に従ってください。

### 必要なハードウェア
- **Raspberry Pi Pico** (または Pico W)
- **LED** (適切な電流制限抵抗（例: 220–330オーム）と共に)
- **プッシュボタンスイッチ**
- **ジャンパワイヤ**
- **ブレッドボード** (任意、接続を容易にするために)
- **USBケーブル** (Picoをコンピュータに接続するために)

### ハードウェアのセットアップ
1. **LEDの接続**:
   - LEDのアノード（長い方の足）をPicoの **GPIO 25** (物理ピン 30) に接続します。
   - LEDのカソード（短い方の足）を、電流を制限するための220–330オームの抵抗を介して **グランド (GND)** ピン（例: 物理ピン 3）に接続します。

2. **ボタンの接続**:
   - プッシュボタンの一方の側を **GPIO 14** (物理ピン 19) に接続します。
   - ボタンのもう一方の側を **3.3V** ピン（例: 物理ピン 36, 3V3(OUT)）に接続します。
   - コードは内部プルダウン抵抗 (`Pin.PULL_DOWN`) を使用するため、外部のプルダウン抵抗は必要ありません。ボタンが押されると、GPIO 14はHIGH (1)を読み取り、押されていないときはLOW (0)を読み取ります。

3. **接続の確認**:
   - すべての接続が確実であることを確認してください。ブレッドボードまたは直接配線を使用し、LEDの極性が正しく、抵抗が適切に配置されていることを再確認してください。
   - ピン割り当てを確認するために、Picoのピン配置図（オンラインまたはPicoのデータシートで入手可能）を参照してください。

### ソフトウェアのセットアップ
1. **PicoにMicroPythonをインストール**:
   - [公式MicroPythonウェブサイト](https://micropython.org/download/rp2-pico/)からRaspberry Pi Pico用の最新のMicroPython UF2ファームウェアをダウンロードします。
   - **BOOTSEL** ボタンを押しながら、USBケーブルでPicoをコンピュータに接続します。
   - PicoはUSBドライブ (RPI-RP2) として表示されます。ダウンロードした `.uf2` ファイルをこのドライブにドラッグ＆ドロップします。
   - PicoはMicroPythonがインストールされた状態で自動的に再起動します。

2. **開発環境のセットアップ**:
   - **Thonny**（初心者におすすめ）などのMicroPython互換IDEをインストールします:
     - [thonny.org](https://thonny.org)からThonnyをダウンロードしてインストールします。
     - Thonnyで、**ツール > オプション > インタープリタ** に移動し、**MicroPython (Raspberry Pi Pico)** を選択し、適切なポート（例: Windowsでは `COMx`、Linux/macOSでは `/dev/ttyACM0`）を選択します。
   - 代替として、`rshell`、`ampy`、またはMicroPython拡張機能を備えたVisual Studio Codeなどのツールを使用できます。

3. **コードのアップロードと実行**:
   - 提供されたコードを `main.py` という名前のファイルにコピーします:
     ```python
     from machine import Pin
     import time

     led = Pin(25, Pin.OUT)
     button = Pin(14, Pin.IN, Pin.PULL_DOWN)

     while True:
         if button.value():
             led.on()
         else:
             led.off()
         time.sleep(0.05)
     ```
   - Thonnyの場合:
     - 新しいファイルを開き、コードを貼り付け、Picoに `main.py` として保存します（MicroPythonは起動時に自動的に `main.py` を実行します）。
     - **実行** ボタンをクリックするか、**F5** を押してコードをアップロードおよび実行します。
   - 代替として、`ampy` を使用してファイルをアップロードします:
     ```bash
     ampy --port /dev/ttyACM0 put main.py
     ```
     `/dev/ttyACM0` をあなたのPicoのポートに置き換えてください。

4. **プログラムのテスト**:
   - コードがアップロードされると、ボタンが押されたときにLEDが点灯し、離されたときに消灯するはずです。`time.sleep(0.05)` は、ボタンのチャタリング防止とCPU負荷軽減のために50msの遅延を追加します。

### トラブルシューティング
- **LEDが点灯しない**:
  - LEDの極性（アノードをGPIO 25、カソードを抵抗を介してGNDに）を確認してください。
  - GPIOピン (25) がコードおよび物理的な接続と一致していることを確認してください。
  - LEDと抵抗が機能していることを確認してください（マルチメータまたは別の回路でテスト）。
- **ボタンが動作しない**:
  - GPIO 14が正しく接続されており、ボタンが押されたときに3.3Vに接続されていることを確認してください。
  - `Pin.PULL_DOWN` が適切であることを確認してください。ボタンの配線が異なる場合（例: GNDに接続）、コードを `Pin.PULL_UP` を使用するように調整し、ロジックを反転させてください (`if not button.value()`)。
- **コードが実行されない**:
  - MicroPythonが正しくインストールされていることを確認してください。
  - ファイルがPico上で `main.py` として保存されていることを確認してください。
  - USB接続とIDEのポート設定を確認してください。

### 注意点
- このコードは、ボタンが押されたときにGPIO 14を3.3Vに接続することを想定しています。ボタンがGNDに接続されている場合は、コードを `Pin.PULL_UP` を使用するように修正し、ロジックを反転させてください:
  ```python
  button = Pin(14, Pin.IN, Pin.PULL_UP)
  while True:
      if not button.value():  # ボタン押下 = LOW
          led.on()
      else:
          led.off()
      time.sleep(0.05)
  ```
- ボタンのチャタリング（LEDのちらつき）が発生する場合は、`time.sleep` の値を増やすか、ソフトウェアによるチャタリング防止を実装してください。
- Pico Wの場合、セットアップは同一ですが、ピン配置が同じであるため、正しいGPIOピンを使用していることを確認してください。

具体的な問題についてさらに説明や助けが必要な場合は、お知らせください！