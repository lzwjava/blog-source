---
audio: false
generated: true
lang: ja
layout: post
title: トランスポート層
translated: true
type: note
---

以下は、中国高等教育自学試験（自考）システムにおける「コンピュータネットワーク技術（02141）」のようなコースで**トランスポート層**の章を学ぶための詳細なチュートリアルです。このチュートリアルは、トランスポート層の機能（エンドツーエンド通信、信頼性、輻輳制御）、プロトコル（TCPとUDP）、ポート番号と多重化、フロー制御およびエラー制御メカニズムに焦点を当てています。包括的で初心者に優しく、このようなコースで期待される技術的深さに沿った内容となっています。

---

### ステップ 1: トランスポート層の役割を理解する
**トランスポート層**は、OSIモデルの第4層、TCP/IPモデルの第3層です。これは、下位層（物理的なデータ転送を扱う）と上位層（ユーザーアプリケーション）の間の橋渡し役を果たします。その主な仕事は、データが（必要であれば）効率的かつ確実に一つのデバイスから別のデバイスに届くようにすることです。

- **重要性:** トランスポート層がなければ、Webブラウザや電子メールクライアントのようなアプリケーションは、インターネットを介してデータを適切に送受信する方法を知りません。

---

### ステップ 2: トランスポート層の機能を学ぶ
トランスポート層にはいくつかの重要な責任があります。分解して見ていきましょう：

#### 1. エンドツーエンド通信
- **意味:** 途中のネットワークに関係なく、データが送信元デバイスから宛先デバイスに移動することを保証します。
- **仕組み:** 送信側のトランスポート層は、受信側のトランスポート層と直接通信し、ルーターやスイッチの複雑な詳細（ネットワーク層が処理）を無視します。
- **例え:** 友達に手紙を直接郵送するようなもので、経由する郵便局は気にしません。

#### 2. 信頼性
- **意味:** （プロトコルによって要求される場合）データが完全に、順序通りに、エラーなく到着することを保証します。
- **仕組み:** 一部のプロトコル（例：TCP）は、失われたデータや破損したデータをチェックし、必要に応じて再送信します。他のプロトコル（例：UDP）は速度のためにこれを省略します。
- **例え:** 宅配便が荷物が無事に届いたことを確認するのと、単に柵越しに投げ入れることの違いです。

#### 3. 輻輳制御
- **意味:** ネットワークが過剰なデータで圧迫されるのを防ぎます。
- **仕組み:** ネットワークの状況（例：TCPはトラフィックが多いと速度を落とす）に基づいてデータ送信レートを調整します。
- **例え:** 渋滞を避けるために車の速度を落とすようなものです。

---

### ステップ 3: トランスポート層プロトコルを探る
トランスポート層は、**TCP** と **UDP** という2つの主要なプロトコルを使用します。それぞれ異なるアプローチを持っています。

#### 1. TCP (Transmission Control Protocol) – コネクション型
- **機能:** 信頼性の高い、順序通りのデータ配信を保証します。
- **主な特徴:**
  - **コネクション確立:** 3ウェイハンドシェイク（SYN → SYN-ACK → ACK）を使用してコネクションを確立します。
  - **信頼性:** 失われたパケットを再送信し、重複や順序不同のデータがないことを保証します。
  - **フロー制御:** 送信レートを受信側の容量に合わせて調整します。
  - **輻輳制御:** ネットワークが混雑していると速度を落とします。
- **例:** Webブラウジング (HTTP/HTTPS)、電子メール (SMTP)、ファイル転送 (FTP)。
- **例え:** 電話の通話—両側が準備ができていることを確認し、順番に話し、きれいに切ります。

#### 2. UDP (User Datagram Protocol) – コネクションレス型
- **機能:** 保証なしでデータを素早く送信します。
- **主な特徴:**
  - **コネクション不要:** 設定なしでパケット（データグラム）を送信するだけです。
  - **信頼性なし:** 失われたデータや順序不同のデータをチェックしません。
  - **高速:** オーバーヘッドが最小限で、時間に敏感なタスクに理想的です。
- **例:** ビデオストリーミング、オンラインゲーム、DNSクエリ。
- **例え:** はがきを郵送する—到着の確認はありませんが、速くてシンプルです。

**比較表:**

| **特徴**         | **TCP**             | **UDP**            |
|---------------------|---------------------|--------------------|
| **コネクション**      | あり (ハンドシェイク) | なし                 |
| **信頼性**     | あり (再送信)   | なし                 |
| **速度**           | 遅い (オーバーヘッド) | 速い (軽量) |
| **順序保証**           | 保証される          | 保証されない     |
| **使用例**        | Web, 電子メール          | ストリーミング, ゲーム  |

---

### ステップ 4: ポート番号と多重化を理解する
トランスポート層は、同じデバイス上の複数のアプリケーションを管理するために**ポート番号**を使用します。

#### 1. ポート番号
- **概要:** デバイス上の特定のアプリケーションまたはサービスを識別する16ビットの数字（0–65,535）。
- **種類:**
  - **ウェルノウンポート (0–1023):** 一般的なサービス用に予約（例：80はHTTP、443はHTTPS、25はSMTP）。
  - **登録済みポート (1024–49151):** 特定のアプリケーションが使用。
  - **動的/プライベートポート (49152–65535):** 一時的、クライアント側の接続に割り当て。
- **例え:** 建物の部屋番号のようなもの—各アプリが独自の「アドレス」を取得します。

#### 2. 多重化と逆多重化
- **多重化 (送信側):** 複数のアプリからのデータを1つのストリームに結合してネットワーク経由で送信します。各パケットには、そのアプリを識別するポート番号が付けられます。
- **逆多重化 (受信側):** 受信したデータを分割し、ポート番号に基づいて正しいアプリに配信します。
- **仕組み:** トランスポート層は、各パケットに送信元ポート番号と宛先ポート番号を含むヘッダーを追加します。
- **例:** あなたのブラウザ（ポート50000）とメールクライアント（ポート50001）は、同じネットワーク接続を同時に使用できます。

**重要な洞察:** IPアドレスはデータを正しいデバイスに届け、ポート番号はそのデバイス上の正しいアプリに届けます。

---

### ステップ 5: フロー制御とエラー制御メカニズムを深く知る
これらのメカニズムは、（主にTCPで）データがスムーズかつ正確に移動することを保証します。

#### 1. フロー制御
- **意味:** 送信側が受信側を圧倒するのを防ぎます。
- **仕組み:**
  - **スライディングウィンドウ:** TCPは、送信側が確認応答（ACK）を必要とする前に送信できるデータの「ウィンドウ」を使用します。受信側はそのウィンドウサイズ（処理能力）を通知します。
  - **動的調整:** 受信側のバッファがいっぱいになるとウィンドウは縮小し、準備ができているとウィンドウは拡大します。
- **例え:** グラスに水を注ぐようなもの—溢れそうになったら速度を落とします。

#### 2. エラー制御
- **意味:** データ伝送中のエラーを検出し、修正します。
- **仕組み:**
  - **シーケンス番号:** 各TCPセグメントには、順序を追跡し、欠落データを検出するための番号が付けられています。
  - **確認応答 (ACK):** 受信側が受信を確認します。ACKがない場合は再送信をトリガーします。
  - **チェックサム:** データから計算された値で、破損を検出します。一致しない場合、パケットは再送信されます。
- **例え:** 買い物リストを確認するようなもの—不足または破損したアイテムは再注文されます。

**UDP 注意:** UDPはフロー制御もエラー制御も行いません—必要であれば、それはアプリケーションに任せます。

---

### ステップ 6: 自考（自学試験）のための学習のヒント
1. **主要概念を暗記する:**
   - 機能: エンドツーエンド、信頼性、輻輳制御。
   - プロトコル: TCP (信頼性)、UDP (高速)。
   - ポート: ウェルノウン (例: 80, 443)、動的。
2. **視覚化する:**
   - TCPの3ウェイハンドシェイクを描く (SYN → SYN-ACK → ACK)。
   - 多重化の図を描く: 複数アプリ → ポート → 1つのネットワークストリーム。
3. **練習問題を解く:**
   - TCPとUDPの違いは何ですか？
   - トランスポート層はどのようにポート番号を使用しますか？
   - TCPが信頼性をどのように保証するか説明してください。
4. **語呂合わせを使用する:** 「TCP = Total Control Protocol (信頼性)」; 「UDP = Ultra Datagram Protocol (高速)」。
5. **実世界の例に関連付ける:** ブラウジング (TCP) 対 ストリーミング (UDP)。

---

### ステップ 7: 理解度をテストする
理解度を確認するために以下に答えてください：
1. どのプロトコルが3ウェイハンドシェイクを使用しますか？ (TCP)
2. 多重化におけるポート番号の役割は何ですか？ (アプリを識別)
3. TCPは失われたパケットをどのように処理しますか？ (シーケンス番号とACKを使用して再送信)
4. TCPよりもUDPが好まれる理由は何ですか？ (速度、低オーバーヘッド)

---

### 追加リソース
- **書籍:** “Computer Networking: A Top-Down Approach” (Kurose & Ross) – トランスポート層の章。
- **オンライン:** Ciscoのトランスポート層チュートリアル、YouTube (例: 「PowerCert」のTCP対UDP動画)。
- **ツール:** Wiresharkを使用してTCP/UDPパケットをキャプチャし、ポート番号の動作を確認する。

---

このチュートリアルは、トランスポート層について詳細にカバーしています。各セクションを学習し、概念を説明する練習をし（自考の口頭準備に最適）、フロー制御や多重化などの難しい領域を再訪してください。より多くの例や説明が必要な場合は、お気軽にお尋ねください！学習の成功を祈っています！