---
audio: false
generated: true
lang: ja
layout: post
title: OpenShift ガイド
translated: true
---

OpenShiftは、クラウド環境でアプリケーションのビルド、デプロイ、管理を簡素化する強力なプラットフォームです。Red Hatによって開発され、Kubernetesというリーディングなオープンソースコンテナオーケストレーションシステムの機能を活用して、開発者や企業にとって堅牢でスケーラブルなソリューションを提供します。開発者がワークフローを効率化するためのツールや機能を提供します。

このブログ記事では、OpenShiftの概要、主要な機能、使い始め方、効果的な使用方法について探ります。また、ベストプラクティスとリアルワールドの使用例を紹介して、その可能性を理解する手助けをします。それでは、始めましょう！

---

## OpenShiftの紹介

OpenShiftは、アプリケーションの開発とデプロイをスムーズにするためのPlatform-as-a-Service（PaaS）です。Kubernetesの上に構築され、エンタープライズ向けのコンテナ管理に特化した追加ツールを提供しています。OpenShiftは、開発者がコードの作成に集中しながら、デプロイ、スケーリング、メンテナンスの複雑さを自動化します。

このプラットフォームは、Java、Node.js、Python、Rubyなどのプログラミング言語、フレームワーク、データベースをサポートしており、さまざまなアプリケーションタイプに対応しています。また、オンプレミス、パブリック、ハイブリッドクラウドインフラ間で一貫した環境を提供し、現代的なソフトウェア開発に柔軟性とスケーラビリティを提供します。

---

## OpenShiftの主要な機能

OpenShiftは、コンテナ化されたアプリケーション管理を簡素化する豊富な機能セットで特徴付けられています。以下にハイライトを挙げます：

- **コンテナ管理**：Kubernetesによって動作し、クラスター間でコンテナのデプロイ、スケーリング、運用を自動化します。
- **開発者向けツール**：JenkinsなどのCI/CDツールが統合され、開発パイプラインがスムーズになります。
- **マルチ言語サポート**：Java、Node.js、Python、Rubyなどの言語でアプリケーションを構築し、好みのフレームワークを使用します。
- **セキュリティ**：RBAC、ネットワークポリシー、イメージスキャンなどの組み込み機能により、アプリケーションのセキュリティが保たれます。
- **スケーラビリティ**：アプリケーションを水平（インスタンスの増加）または垂直（リソースの増加）にスケーリングして、需要に対応します。
- **モニタリングとロギング**：Prometheus、Grafana、Elasticsearch、Kibanaなどのツールが、アプリケーションのパフォーマンスとログに関する洞察を提供します。

これらの機能により、OpenShiftは開発から運用までのアプリケーションライフサイクル全体を管理するための一元化されたソリューションとなります。

---

## OpenShiftの使い始め方

OpenShiftの使い始めは簡単です。以下の手順に従って環境をセットアップし、最初のアプリケーションをデプロイします。

### ステップ1：OpenShiftにサインアップまたはインストール

- **クラウドオプション**：[Red Hat OpenShift Online](https://www.openshift.com/products/online/)に無料アカウントを作成して、クラウド上でOpenShiftを使用します。
- **ローカルオプション**：[Minishift](https://docs.okd.io/latest/minishift/getting-started/installing.html)をインストールして、開発用にローカルでシングルノードOpenShiftクラスターを実行します。

### ステップ2：OpenShift CLIをインストール

OpenShiftコマンドラインインターフェース（CLI）は、`oc`と呼ばれ、ターミナルからプラットフォームとやり取りするためのものです。[公式OpenShift CLIページ](https://docs.openshift.com/container-platform/4.6/cli_reference/openshift_cli/getting-started-cli.html)からダウンロードし、オペレーティングシステムに応じたインストール手順に従います。

### ステップ3：ログインとプロジェクトの作成

- CLIを使用してOpenShiftクラスターにログインします：
  ```bash
  oc login <cluster-url> --token=<your-token>
  ```
  `<cluster-url>`と`<your-token>`を、OpenShiftインスタンスが提供する詳細に置き換えます。
- アプリケーションを整理するために新しいプロジェクトを作成します：
  ```bash
  oc new-project my-first-project
  ```

### ステップ4：アプリケーションのデプロイ

`oc new-app`コマンドを使用して、Node.jsアプリなどのサンプルアプリケーションをデプロイします：
```bash
oc new-app nodejs~https://github.com/sclorg/nodejs-ex.git
```
これにより、OpenShiftのSource-to-Image（S2I）機能がGitリポジトリからアプリをビルドおよびデプロイします。

### ステップ5：アプリケーションの公開

URLを介してアプリケーションにアクセスできるようにするためにルートを作成します：
```bash
oc expose svc/nodejs-ex
```
`oc get route`を実行してURLを取得し、ブラウザで訪れてアプリをライブで確認します！

---

## OpenShiftの深掘り

OpenShiftをセットアップしたら、その機能を活用してアプリケーションを効果的に管理できます。以下に、そのコア機能の使用方法を示します。

### アプリケーションのデプロイ

OpenShiftは、アプリケーションのデプロイ方法に柔軟性を提供します：
- **Source-to-Image（S2I）**：ソースコードから自動的にビルドおよびデプロイします。例えば：
  ```bash
  oc new-app python~https://github.com/example/python-app.git
  ```
- **Dockerイメージ**：事前構築されたイメージをデプロイします：
  ```bash
  oc new-app my-image:latest
  ```
- **テンプレート**：MySQLなどの一般的なサービスをデプロイします：
  ```bash
  oc new-app --template=mysql-persistent
  ```

### コンテナの管理

CLIまたはWebコンソールを使用してコンテナのライフサイクルを管理します：
- **ビルドの開始**：`oc start-build <buildconfig>`
- **アプリのスケーリング**：`oc scale --replicas=3 dc/<deploymentconfig>`
- **ログの表示**：`oc logs <pod-name>`

### アプリケーションのスケーリング

アプリケーションの容量を簡単に調整できます。3つのインスタンスにスケーリングするには：
```bash
oc scale --replicas=3 dc/my-app
```
OpenShiftは、これらのレプリカ間でロードバランスを自動的に処理します。

### モニタリングとロギング

アプリケーションの状態を把握するための組み込みツールを使用します：
- **Prometheus**：CPUやメモリ使用量などのメトリクスを監視します。
- **Grafana**：パフォーマンスデータを視覚化します。
- **ElasticsearchとKibana**：ログを集中化および分析します。
OpenShift Webコンソールからリアルタイムの洞察を得ることができます。

---

## OpenShiftのベストプラクティス

OpenShiftのポテンシャルを最大限に引き出すためには、以下のベストプラクティスに従ってください：

- **CI/CDで自動化**：OpenShiftの組み込みJenkinsを使用するか、好みのCI/CDツールを統合してワークフローをスムーズにします。
- **テンプレートで標準化**：一貫したデプロイのために再利用可能なテンプレートを作成します。
- **セキュリティを優先**：RBACを実装し、イメージの脆弱性をスキャンし、ネットワークポリシーを使用します。
- **リソースの最適化**：Prometheusで使用状況を監視し、パフォーマンスとコストのバランスを取るためにリソース制限を調整します。
- **ラベルで整理**：リソースにラベルを付けて（例：`app=my-app`）、管理が簡単になります。

これらのベストプラクティスにより、アプリケーションがセキュアで効率的でスケーラブルになることを保証します。

---

## OpenShiftの使用例

OpenShiftは、さまざまなシナリオで活躍します：
- **マイクロサービス**：組み込みのサービス発見とロードバランスでマイクロサービスを管理およびスケーリングします。
- **DevOps**：CI/CDと自動化ツールで開発と運用を橋渡しします。
- **ハイブリッドクラウド**：オンプレミスとクラウド環境間でアプリケーションをシームレスにデプロイします。
- **レガシーのモダナイズ**：古いアプリケーションをコンテナ化して、搬送性とスケーラビリティを向上させます。

これらの使用例は、OpenShiftの現代的なソフトウェア開発における多様な機能を示しています。

---

## 結論

OpenShiftは、アプリケーションの開発と管理を簡素化するためのゲームチェンジャーです。Kubernetesの基盤、豊富な機能セット、多様なワークフローのサポートにより、アプリケーションを簡単にビルド、デプロイ、スケーリングできます。ローカルのMinishiftセットアップを試すか、クラウド上で本番ワークロードを実行するか、OpenShiftはすべてをカバーします。

始める準備ができましたか？[公式OpenShiftドキュメント](https://docs.openshift.com/)を探索するか、上記の手順に従って最初のアプリケーションをデプロイしてください。OpenShiftを使用することで、コードから本番までの旅はこれまでになくスムーズになります！