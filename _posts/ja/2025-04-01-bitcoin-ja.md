---
audio: false
generated: true
lang: ja
layout: post
title: ビットコインの仕組み
translated: true
type: note
---

技術的には、ビットコインは暗号技術、ピアツーピアネットワーク、そしてProof-of-Work（PoW）と呼ばれるコンセンサスメカニズムの組み合わせによって機能しています。以下に、主要な構成要素とプロセスの詳細を説明します：

**1. 暗号技術の基盤：**

* **ハッシュ関数（SHA-256）：** ビットコインはSHA-256暗号ハッシュ関数に大きく依存しています。この関数は任意の入力データを受け取り、固定サイズの256ビットの出力（ハッシュ）を生成します。ビットコインで使用されるSHA-256の主な特性は以下の通りです：
    * **決定的：** 同じ入力は常に同じ出力を生成します。
    * **一方向性：** 出力から入力を逆算して見つけることは計算上非現実的です。
    * **衝突耐性：** 同じ出力を生成する2つの異なる入力を見つけることは極めて困難です。
* **デジタル署名（ECDSA）：** ビットコインはトランザクションのセキュリティ確保のために楕円曲線デジタル署名アルゴリズム（ECDSA）を使用します。各ビットコインユーザーは一対の暗号鍵を持ちます：
    * **秘密鍵：** ユーザーがトランザクションを承認（署名）することを可能にする秘密の鍵。
    * **公開鍵：** 秘密鍵から導出され、他の人と共有できる鍵。対応する秘密鍵によって署名されたトランザクションの真正性を検証するために使用されます。
* **ビットコインアドレス：** これらは一連のハッシュ化とエンコードのステップを経て公開鍵から導出されます。これらはユーザーがビットコインを受け取るために共有する「アドレス」です。

**2. ブロックチェーン：**

* **分散型台帳：** ビットコインは、ブロックチェーンと呼ばれる公開された分散型台帳を維持します。この台帳はすべてのビットコイントランザクションを時系列かつ透明性を持って記録します。
* **ブロック：** トランザクションはブロックにグループ化されます。各ブロックは以下を含みます：
    * 検証済みの一連のトランザクション。
    * チェーン内の**前のブロック**のハッシュへの参照。これにより鎖状の構造が作成されます。
    * **ナンス：** マイニングプロセスで使用される乱数。
    * **タイムスタンプ**。
    * 現在のブロック自体のハッシュ。
* **不変性：** ブロックがブロックチェーンに追加されると、それを改ざんすることは極めて困難になります。なぜなら、そうするためにはそのブロックとそれ以降のすべてのブロックのハッシュを再計算する必要があり、それはネットワークの計算能力の51%未満を制御する攻撃者にとって計算上非現実的だからです。

**3. トランザクション：**

* **構造：** ビットコイントランザクションは通常以下を含みます：
    * **インプット：** 送信者が現在使用しているビットコインを受け取った以前のトランザクションへの参照。これらは本質的に特定の「未使用トランザクションアウトプット（UTXO）」へのポインタです。
    * **アウトプット：** 受信者のビットコインアドレスとそれぞれに送信されるビットコインの量を指定します。トランザクションは複数のアウトプットを持つことができます。
    * **署名：** 送信者の秘密鍵を使用して作成されたデジタル署名。これにより、ビットコインの所有者がトランザクションを承認したことが証明されます。
* **ブロードキャスト：** トランザクションが作成され署名されると、ビットコインのピアツーピアネットワークにブロードキャストされます。

**4. マイニングとProof-of-Work：**

* **マイナー：** これらはビットコインネットワーク内のノードで、トランザクションを検証しブロックチェーンに新しいトランザクションを追加する作業を実行します。
* **トランザクション検証：** マイナーはネットワークから保留中の未確認トランザクションを収集し、それらの有効性（例：送信者が使用するのに十分なビットコインを持っているか、デジタル署名が有効か）を検証します。
* **ブロックの作成：** マイナーはこれらの検証済みトランザクションを新しいブロックにまとめます。また、新しく鋳造されたビットコインと、ブロックに含まれるトランザクションの送信者によって支払われたトランザクション手数料をマイナーに報酬として与える「コインベーストランザクション」と呼ばれる特別なトランザクションも含めます。
* **Proof-of-Work（PoW）：** 新しいブロックをブロックチェーンに追加するために、マイナーはSHA-256アルゴリズムを使用して計算上困難なパズルを解かなければなりません。このプロセスは「マイニング」と呼ばれます。
    * マイナーはブロックヘッダー内の**ナンス**（乱数）を繰り返し変更します。
    * 各ナンスに対して、ブロックヘッダー全体のSHA-256ハッシュを計算します。
    * 目標は、特定の数の先頭ゼロで始まるハッシュをもたらすナンスを見つけることです。必要な先頭ゼロの数は、ビットコインネットワークの**難易度**によって決定されます。
    * そのようなハッシュを見つけることは試行錯誤の問題であり、相当な計算能力を必要とします。
* **ブロック検証とコンセンサス：** マイナーが有効なハッシュ（「プルーフ・オブ・ワーク」）を見つけると、新しいブロックをネットワークの残りの部分にブロードキャストします。ネットワーク上の他のノードはその後以下を検証します：
    * ブロック内のトランザクションが有効であること。
    * ブロックのハッシュが正しいこと。
    * ハッシュが現在の難易度ターゲットを満たしていること。
    * 前のブロックのハッシュ参照が正しいこと。
* **ブロックチェーンへの追加：** ブロックが有効であれば、他のノードはそれを受け入れ、自身のブロックチェーンのコピーに追加してチェーンを延長します。このプロセスにより、すべてのノードがトランザクションの順序と有効性について合意することが保証されます。最も長いチェーンが信頼できるバージョンと見なされます。

**5. インセンティブ：**

* **ブロック報酬：** 新しいブロックのマイニングに成功したマイナーは、新しく作成された一定量のビットコイン（現在は3.125 BTC。「半減期」と呼ばれるイベントで約4年ごとに半減します）で報われます。
* **トランザクション手数料：** マイナーはまた、ユーザーがビットコインを送信する際に自発的に含めるトランザクション手数料も徴収します。これらの手数料は、マイナーが特定のトランザクションを優先するようにインセンティブを与えます。

**6. 分散化とセキュリティ：**

* **ピアツーピアネットワーク：** ビットコインは分散型ピアツーピアネットワーク上で動作します。つまり、それを制御する中央機関は存在しません。トランザクションとブロックは世界中の多くのコンピュータに伝搬されます。
* **検閲耐性：** ブロックチェーンは分散されており、改ざんするには相当な計算能力を必要とするため、単一の主体がトランザクションを検閲したりネットワークを制御したりすることは非常に困難です。
* **暗号技術によるセキュリティ：** 強力な暗号技術の使用により、トランザクションとブロックチェーンのセキュリティと完全性が確保されます。秘密鍵によりユーザーは自身のビットコインを制御でき、デジタル署名によりトランザクションの改ざんが防止されます。Proof-of-Workメカニズムにより、悪意のある行為者がトランザクション履歴を書き換えることは計算コストが高くなります。

**まとめると、ビットコインの技術的運用は、暗号技術、分散化され透明性のある台帳、そして計算集約的なコンセンサスメカニズムの高度に複雑な相互作用に依存しており、これによりセキュリティ、不変性、分散化が確保されています。**