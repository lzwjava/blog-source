---
audio: false
generated: true
lang: ja
layout: post
title: メモリシステムチュートリアル
translated: true
type: note
---

このチュートリアルでは、メモリシステムの主要概念について、メモリの分類、RAM/ROMの原理、アドレスデコード技術に焦点を当てて解説します。包括的なセクションに分けて説明します。

## 1. メモリの分類

コンピュータメモリは大きく2つの主要カテゴリに分類できます：

### 1.1 機能による分類
- **主記憶装置**：CPUが直接アクセス可能
  - RAM（ランダムアクセスメモリ）：一時的な記憶
  - ROM（リードオンリメモリ）：永続的な記憶
- **補助記憶装置**：外部ストレージデバイス（ハードドライブ、SSDなど）

### 1.2 データ保持による分類
- **揮発性メモリ**：電源オフ時にデータを失う（ほとんどのRAM）
- **不揮発性メモリ**：電源なしでデータを保持（ROM、フラッシュ）

### 1.3 アクセス方法による分類
- **ランダムアクセス**：任意の場所に直接アクセス可能（RAM、ROM）
- **シーケンシャルアクセス**：順番にデータにアクセス（磁気テープ）

## 2. RAMの動作原理

RAM（ランダムアクセスメモリ）はコンピュータの主要な作業メモリです。

### 2.1 DRAM（ダイナミックRAM）
- 各ビットを小さなコンデンサとトランジスタに保存
- データ保持のために定期的なリフレッシュが必要（通常数ミリ秒ごと）
- 高密度、低コスト、主記憶装置で一般的
- 動作サイクル：行アドレスストローブ（RAS）→列アドレスストローブ（CAS）→データアクセス

### 2.2 SRAM（スタティックRAM）
- フリップフロップ回路を使用して各ビットを保存
- リフレッシュ不要、電源供給中はデータを保持
- 高速だが、DRAMより高価で低密度
- キャッシュメモリに使用

### 2.3 RAMの構成
- 行と列のマトリックス形式で構成
- 各セルは一意のアドレス（行＋列）を持つ
- データビットは通常ワード長（8、16、32、64ビット）で構成

## 3. ROMの動作原理

ROM（リードオンリメモリ）は永続的または半永続的なデータを保存します。

### 3.1 ROMの種類
- **マスクROM**：製造時にプログラムされ、変更不可
- **PROM（プログラマブルROM）**：ユーザーが一度プログラム可能
- **EPROM（イレーサブルPROM）**：紫外線で消去して再プログラム可能
- **EEPROM（電気的EPROM）**：電気的に消去して再プログラム可能
- **フラッシュメモリ**：EEPROMの現代的な形態、ブロック単位での消去を許可

### 3.2 ROMの操作
- 製造時またはプログラミング時に事前書き込みされたデータを含む
- 読み取り：アドレス→デコーダ→センスアンプ→出力バッファ
- 書き込み（書込み可能タイプの場合）：より高い電圧を使用して記憶セルを変更

## 4. メモリ拡張

プログラムが複雑になるにつれ、メモリ拡張がしばしば必要になります。

### 4.1 容量拡張
- **チップ選択**：複数のメモリチップを使用して総メモリを増加
- **ワード長拡張**：チップを組み合わせてデータバス幅を増加
- **アドレス空間拡張**：アドレス可能なメモリ空間を増加

### 4.2 メモリバンク
- 独立してアクセス可能なバンクに編成されたメモリ
- インタリーブを可能にし、平均アクセス時間を削減
- 現代アーキテクチャでの並列操作を容易にする

## 5. アドレスデコード技術

アドレスデコードは正しいメモリ位置にアクセスするために重要です。

### 5.1 線形選択（完全デコード）
- 各アドレス線が直接1つのメモリ位置に接続
- 単純だが大容量メモリ空間には非効率的
- 例：16アドレス線のシステムでは、2^16（65,536）個の個別接続が必要

### 5.2 デコーダベース選択
- **アドレスデコーダ**：バイナリアドレスをワンホット選択信号に変換
- **2対4デコーダ**：2アドレスビットを受け、4出力線の1つを活性化
- **3対8デコーダ**：3アドレスビットを受け、8出力線の1つを活性化
- 一般的なIC：74LS138（3対8）、74LS154（4対16）

### 5.3 部分デコード
- すべてのアドレスビットがデコードされず、ハードウェアを節約
- 複数のメモリ位置が同じ物理位置にマッピングされる可能性
- メモリ「シャドウ」または「ミラー」を作成

### 5.4 メモリマッピング
- **連続マッピング**：メモリブロックを順次配置
- **ページマッピング**：メモリを固定サイズのページに分割
- **セグメントマッピング**：メモリを可変サイズのセグメントに分割

## 6. 実装例

### 6.1 簡単なRAM拡張例
32K × 8 RAMシステムを128K × 8に拡張するには：
1. 4つの32K × 8 RAMチップを使用
2. 2つの上位アドレスビットを使用して4つのチップを選択
3. 残りのアドレス線をすべてのチップに並列接続
4. チップ選択に2対4デコーダを使用

### 6.2 アドレスデコード回路

アドレス範囲0x8000-0x9FFFにマッピングされたシステムの場合：
1. アドレス線A15-A13は「100」でなければならない（0x8000-0x9FFF用）
2. このパターンを検出するためにANDゲートを使用
3. このパターンが検出されたときに適切なメモリチップを有効化

これで、メモリシステムの概要、特に分類、動作原理、拡張技術に焦点を当てた解説を完了します。これらの概念を理解することは、コンピュータシステムを効果的に設計し操作するための基礎となります。