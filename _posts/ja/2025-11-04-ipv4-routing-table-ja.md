---
audio: false
generated: true
image: false
lang: ja
layout: post
model: x-ai/grok-4-fast
title: IPv4ルーティングテーブルの出力の理解
translated: true
type: note
---

### `ip route` の出力を理解する

これはあなたの Linux システムの IPv4 ルーティングテーブルです（おそらく iproute2 の `ip` コマンドを使用）。宛先 IP に基づいて、あなたのマシンがパケットの送信先をどのように決定するかを示しています。ルートは最長プレフィックス（最も具体的なものから順に）で照合され、デフォルトルートがその他すべてを捕捉します。

以下に、明確にするためにエントリーごとに表で分解し、全体として何を意味するかを要約します。これは以前のチャットの内容に繋がります：ローカルサブネット用の接続済みルートと、インターネット用のデフォルトゲートウェイを持つ、シンプルなルーティングテーブルの実例です。

| 宛先             | ゲートウェイ (ネクストホップ) | デバイス             | プロトコル | スコープ | ソース IP    | メトリック | 注記 |
|-------------------|--------------------|-------------------|----------|-------|---------------|--------|-------|
| **0.0.0.0/0** (デフォルト) | 192.168.1.1       | enp4s0           | dhcp     | global| (なし)       | 100   | 他のルートに一致しないすべてのトラフィックはここへ向かいます。イーサネットインターフェース enp4s0 上のあなたのルーター（おそらく家庭用ゲートウェイ）を指します。DHCP によって発見されました。 |
| **169.254.0.0/16** | (直接)            | enp4s0           | kernel   | link  | (なし)       | 1000  | DHCP が失敗したときの自動設定用のリンクローカル (APIPA) 範囲です。メトリックが高いため、フォールバック（より良いルートがない場合にのみ使用される）であることを意味します。 |
| **172.17.0.0/16** | (直接)            | docker0          | kernel   | link  | 172.17.0.1   | (なし)| Docker のデフォルトブリッジネットワークです。"linkdown" はインターフェースがダウンしている（アクティブなコンテナがない？）ことを意味します。あなたのホストがこのサブネットのゲートウェイとして機能します。 |
| **172.18.0.0/16** | (直接)            | br-c33e38e216df  | kernel   | link  | 172.18.0.1   | (なし)| 別の Docker ブリッジ（ユーザー定義ネットワーク？）です。アクティブなので、このブリッジ上のコンテナは 172.18.0.1 を介してホストに到達できます。 |
| **192.168.1.0/24** | (直接)           | enp4s0           | kernel   | link  | 192.168.1.35 | 100   | あなたのローカル LAN サブネットです。enp4s0 を介して直接接続されています — 192.168.1.x 上の他のデバイスへのパケットはローカルに留まります（例：.1 のあなたのルーターへ）。あなたのマシンの IP は 192.168.1.35 です。 |

#### 主な洞察
- **ローカル/接続済みルート**: 172.x.x.x および 192.168.1.0/24 のエントリは、直接接続されたネットワーク用の「カーネル」ルートです（ネクストホップゲートウェイは不要）。これはあなたが説明したシンプルな反復処理と一致します — あなたのシステムは宛先 IP がこれらの範囲に含まれるかどうかをチェックし、一致するデバイス（例：LAN 用の enp4s0）を通じて送信します。
- **Docker の影響**: Docker がインストール/実行されており、仮想ブリッジ（docker0 と br-...）を作成しています。これらにより、コンテナが独自の分離されたネットワークを持つことができます。docker0 の "linkdown" は、現在デフォルトブリッジを使用しているコンテナがないことを示唆しています。
- **デフォルトルート**: その他すべて（例：google.com）は、enp4s0 上の 192.168.1.1 を経由します。メトリック 100 は低く（優先）、リンクローカルは 1000 で優先度が下げられています。
- **リモートルートなし**: このテーブルは基本的です — 遠隔ネットワークへのエントリを追加する動的ルーティングプロトコル（OSPF など）はありません。192.168.1.0/24 の外の何かに ping を実行すると、デフォルトルートにヒットします。

#### 検証するための簡単なテスト
- `ping 192.168.1.1` → enp4s0 のローカルルートを使用するはずです。
- `ping 8.8.8.8` → デフォルトルートを使用します。経路を確認するには `traceroute 8.8.8.8` を使用します。
- `ip addr show enp4s0` → あなたのインターフェース IP を確認します。
- Docker が関係している場合: `docker network ls` でブリッジをリスト表示します。

これがあなたの設定からのもので、何かが機能していない（例：インターネットに接続できない）場合、一般的な修正方法：ケーブル/DHCP 更新を確認（`dhclient enp4s0`）、またはルートをフラッシュ（`ip route flush cache`）。何が起こっていますか — 接続性のトラブルシューティングですか、それとも特定のエントリについて単に興味があるだけですか？