---
audio: false
generated: true
image: false
lang: ja
layout: post
title: AI CLIデザイン原則の解明
translated: true
type: note
---

### プロンプトからの主要な学び

このプロンプトは、ソフトウェアエンジニアリングタスクに焦点を当てたAI搭載CLIツール（Claude Code）のシステム概要を示しています。効果的なAIアシスタントを設計する上で学べる点は以下の通りです：

#### 1. **安全性と倫理の優先**
   - 防御的セキュリティを重視：悪意のあるコード（例：エクスプロイト作成）を含むタスクは拒否するが、脆弱性分析や検出ルール作成などの防御的タスクは許可する
   - 学び：特にコーディングのような現実世界に影響を与え得る分野では、悪用を防ぐために早期に倫理的ガードレールを組み込む

#### 2. **応答スタイルと簡潔さ**
   - 超短文応答（詳細要求がない限り4行以内）を義務付け、「2 + 2」への回答を単に「4」とする例を示す
   - 前置き、説明、絵文字は要求がない限り避け、CLI表示に適した直接的なトークン効率の良い出力に焦点
   - 学び：インターフェースに合わせて通信を調整（例：CLIでは煩雑さを避けるため簡潔さが重要）。これにより認知負荷が軽減され、対話型ツールの使いやすさが向上

#### 3. **境界線のある積極性**
   - 積極的行動（例：コマンド実行、タスク計画）を許可するがユーザー主導の場合のみ。ユーザーを驚かせないよう警告
   - 自律性（例：テストによる解決策の検証）とユーザー制御（例：明示的な要求なしに変更をコミットしない）のバランスを取る
   - 学び：AIは越権行為なく効率的に支援し、信頼を育むべき。進捗を透明に追跡するため計画ツール（TodoWriteなど）を活用

#### 4. **ツール統合とワークフロー**
   - 一連のツール（例：実行用Bash、ドキュメント用WebFetch、コードベース用検索ツール）を提供し、並列使用とバッチ処理のポリシーを設定
   - タスク分解のための頻繁なTodo管理、lint/型チェックによる検証、コード規約の遵守（例：既存スタイルの模倣、ライブラリの確認）を推奨
   - フック、リダイレクト、環境認識（例：git status、OS詳細）などのエッジケースを処理
   - 学び：複雑なタスクにはモジュール式ツールをAIに装備。効率性のために逐次/並列使用を推進。常に文脈に基づいて行動（例：仮定する前に検索）

#### 5. **ドメイン特化のカスタマイズ**
   - ソフトウェアエンジニアリング向けに調整：計画、検索、実装、検証。コード位置を正確に参照（例：「file_path:line_number」）
   - フィードバックチャネルとヘルプコマンドを含む。フックなどのユーザー設定に適応
   - 学び：プロンプトをドメインに合わせてカスタマイズ―ここではコーディング規約により慣用的で安全な出力を確保。ユーザーを力づける自助メカニズムを提供

#### 6. **プロンプトエンジニアリングの一般的な知見**
   - 明確さのためにセクション（例：トーン、積極性、ツール）と例で構造化
   - リマインダーにXML風タグを使用。知識カットオフとモデル詳細を明記
   - 学び：効果的なプロンプトは、行動を導くためにモジュール式で例駆動、制約重視。これにより幻覚を減らし一貫性を確保

全体として、このプロンプトは厳格なルール、ツール、計画を組み合わせることで、信頼性が高くユーザー中心のAIツールを作成する方法を示しています―これはプログラミングやその他の分野で同様のシステムを構築する際に価値があります。