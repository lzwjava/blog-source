---
audio: false
date: 2025-09-11
generated: true
image: false
lang: ja
layout: post
model: openai/gpt-5
title: JaCoCoランタイム実行ファイルの動作
translated: true
type: note
---

**WebSphere Liberty Profile** で **JaCoCo エージェント** を `exec` モードで実行する場合、JaCoCo エージェントは実行時に元の `.exec` ファイルを**変更しません**。以下にその仕組みを説明します。

---

### `exec` モードにおける JaCoCo の動作
- **目的**: JaCoCo エージェントは、アプリケーションの実行中に**コードカバレッジデータ**を収集します。
- **出力**: カバレッジデータを `.exec` ファイル (例: `jacoco.exec`) に書き込みます。
- **ファイルの挙動**:
  - ファイルが**存在しない**場合、JaCoCo がファイルを作成します。
  - ファイルが**既に存在する**場合、JaCoCo は新しいカバレッジデータをファイルに**追加します** (明示的にリセットまたはマージしない限り、既存のデータを上書きまたは変更することはありません)。
  - 元の `.exec` ファイルは、その構造を壊したり変更したりするような方法では**変更されません**—新しいデータが追加されるだけです。

---

### `.exec` ファイルは変更されますか？
- **はい、ただしデータの追加のみ**: アプリケーションを JaCoCo エージェントと共に実行するたびに、ファイルは新しいカバレッジ情報で更新されます。
- **構造的な変更はなし**: `.exec` ファイルのフォーマットは変わりません。これはカバレッジデータを含むバイナリファイルです。

---

### ベストプラクティス
- **マージまたはリセット**: 新しく始めたい場合は、アプリケーションを再度実行する前に `.exec` ファイルを削除するか名前を変更してください。
- **複数実行のマージ**: 必要に応じて、`jacoco:merge` ゴール (Maven の場合) または `org.jacoco.agent.rt.RT` クラスを使用して、複数の `.exec` ファイルをマージしてください。

---

### Liberty 設定の例
Liberty の `server.env` または `jvm.options` では、以下のような設定を確認できます:
```bash
-javaagent:/path/to/jacocoagent.jar=destfile=/path/to/jacoco.exec,append=true
```
- `append=true` は、新しいデータが既存のファイルに追加されることを保証します。

---