---
audio: false
generated: true
image: false
lang: ja
layout: post
model: x-ai/grok-4-fast
title: Azure Monitor アラートの概要
translated: true
type: note
---

### Azure アラートの概要

Azure Monitor アラートは、Azure リソースで特定の条件が満たされたときに事前に通知し、ユーザーに影響を与える前に問題を検出して解決するのに役立つ Azure Monitor の機能です。これは、メトリック、ログ、またはアクティビティ ログからのデータを事前定義されたルールに対して評価することで動作します。条件がトリガーされると（例：CPU 使用率が 80% を超える）、アラートが発生し、メール、SMS を介した通知の送信や、スクリプトの実行などの自動化されたアクションのトリガーが行われます。

アラートは、構成に応じて、ステートフル（問題が解消されると自動的に解決される）またはステートレス（手動で閉じられるまで繰り返し発生する）になります。単一または複数のリソースにわたる監視をサポートし、監視される時系列の数に基づいて課金されます。

#### アラートの種類
Azure Monitor は、さまざまなデータソースに合わせていくつかのアラートの種類をサポートしています：

| アラートの種類              | 説明 | 最適な用途 |
|-------------------------|-------------|----------|
| **メトリック アラート**      | 数値メトリック（例：CPU パーセンテージ、ディスク空き容量）を定期的に評価します。静的または動的しきい値（AI ベース）をサポートします。 | VM、データベース、アプリのパフォーマンス監視。 |
| **ログ検索アラート**  | Log Analytics データに対してクエリを実行し、ログ内のパターンを検出します。 | アプリケーション ログ内のエラー急増など、複雑なイベント分析。 |
| **アクティビティ ログ アラート**| 管理または操作イベント（例：リソースの作成/削除）でトリガーされます。 | セキュリティおよびコンプライアンス監査。 |
| **スマート検出アラート** | Application Insights を介した Web アプリ向けの AI 駆動の異常検出。 | アプリ内の自動的な問題発見。 |
| **Prometheus アラート**  | AKS などのマネージド サービス内の Prometheus メトリックをクエリします。 | コンテナおよび Kubernetes 環境。 |

ほとんどのユースケースでは、メトリック アラートまたはログ アラートから始めてください。

### 前提条件
- 監視対象のアクティブなリソースを含む Azure サブスクリプション。
- アクセス許可：ターゲット リソースに対する閲覧者ロール、アラート ルール用のリソース グループに対する共同作成者、およびアクション グループに対する閲覧者。
- Azure ポータル (portal.azure.com) の使用に慣れていること。

### メトリック アラート ルールを作成して使用する方法 (ステップバイステップ)
メトリック アラートは一般的な出発点です。Azure ポータルで作成する方法は次のとおりです。このプロセスには約 5～10 分かかります。

1.  **Azure ポータルにサインインする**: [portal.azure.com](https://portal.azure.com) にアクセスしてログインします。

2.  **アラートに移動する**:
    - ホーム ページから、**Monitor** を検索して選択します。
    - 左側のメニューで、**Insights** の下の **アラート** を選択します。
    - **+ 作成** > **アラート ルール** をクリックします。

    *代替方法*: 特定のリソース（例：VM）から、左側のメニューで **アラート** を選択し、次に **+ 作成** > **アラート ルール** を選択します。これによりスコープが自動設定されます。

3.  **スコープを設定する**:
    - **リソースの選択** ペインで、サブスクリプション、リソースの種類（例：仮想マシン）、および特定のリソースを選択します。
    - **適用** をクリックします。（複数リソースのアラートの場合、1 つのリージョン内で同じ種類の複数のリソースを選択します。）

4.  **条件を構成する**:
    - **条件** タブで、**シグナル名** をクリックし、メトリック（例：VM の "Percentage CPU"）を選択します。
      - **すべてのシグナルを表示** を使用して、種類（例：プラットフォーム メトリック）でフィルタリングします。
    - データのプレビュー：時間範囲（例：過去 24 時間）を設定して履歴値を確認します。
    - **アラート ロジック** を設定します：
      - **しきい値**: 静的（例：> 80）または動的（履歴に基づいて AI 調整）。
      - **演算子**: より大きい、より小さいなど。
      - **集計**: 評価期間中の平均、合計、最小、最大。
      - 動的の場合：感度（低/中/高）を選択します。
    - （オプション）**ディメンションで分割**: インスタンス名などの属性でフィルタリングし、詳細なアラート（例：セット内の VM ごと）を作成します。
    - **評価**: 1～5 分ごとにチェック。5～15 分前までさかのぼって確認。
    - **完了** をクリックします。

5.  **アクションを追加する（オプションだが推奨）**:
    - **アクション** タブで、**アクション グループの追加** を選択します。
    - 既存のグループ（メール/SMS 用）を選択するか、新規作成します：
      - 受信者を追加します（例：管理者へのメール）。
      - 自動化のための Logic Apps や統合のための webhook などのアクションを追加します。
    - **完了** をクリックします。

6.  **ルールの詳細を設定する**:
    - **詳細** タブで：
      - **サブスクリプション** と **リソース グループ**: 自動入力。必要に応じて変更。
      - **重大度**: Sev 0 (重大) から Sev 4 (詳細) 。
      - **アラート ルール名**: 例: "High CPU Alert - Prod VM"。
      - **説明**: オプションのメモ。
    - **詳細オプション**:
      - 作成時にルールを有効にする。
      - アラートを自動解決する（ステートフルにします）。
    - 整理のために必要に応じてタグを追加。

7.  **確認と作成**:
    - **確認と作成** に進みます。
    - 検証します（無効なしきい値などのエラーを修正）。
    - **作成** をクリックします。有効になっている場合、ルールは直ちにアクティブになります。

作成されると、条件が満たされたときにアラートが発生し、通知を送信し、そのステータス（例：「発生済み」から「解決済み」）を更新します。

#### アラートの管理
-   **アラートを表示**: Monitor > アラート で、アクティブな/発生したアラートを確認します。時間、重大度、またはリソースでフィルタリング。
-   **ルールを編集**: Monitor > アラート > アラート ルール に移動し、ルールを選択して **編集** をクリックします。
-   **テスト**: ステップ 4 のプレビューを使用してシミュレートします。
-   **スケーリング**: 複数のリソースの場合、Azure CLI/PowerShell または ARM テンプレートを使用します。リソースの分析情報を介して組み込みの推奨ルールを有効にします。

### ベスト プラクティス
-   シンプルに始める：最初はルールごとに 1 つの条件。
-   ノイズの多いメトリックには動的しきい値を使用して、誤検知を減らします。
-   自動修復（例：VM のスケールアップ）のためにアクション グループと統合します。
-   コストを監視：監視される系列に基づきます（基本的な使用は無料。価格を確認）。
-   ログの場合、作成時に **ログ アラート** を選択し、KQL クエリを記述する以外は同様の手順に従います。

ログ アラートやその他の種類の場合、プロセスは類似しています—条件をクエリに置き換えてください。

[Azure Monitor アラートの概要](https://learn.microsoft.com/ja-jp/azure/azure-monitor/alerts/alerts-overview)  
[メトリック アラート ルールを作成する](https://learn.microsoft.com/ja-jp/azure/azure-monitor/alerts/alerts-create-metric-alert-rule)  
[ログ アラート ルールを作成する](https://learn.microsoft.com/ja-jp/azure/azure-monitor/alerts/alerts-create-log-alert-rule)  
[Azure Monitor の価格](https://azure.microsoft.com/ja-jp/pricing/details/monitor/)