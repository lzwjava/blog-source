---
audio: false
generated: true
image: false
lang: ja
layout: post
model: x-ai/grok-4-fast
title: Viでのファイル内容のコピー
translated: true
type: note
---

## Viでファイルの全内容を新しいファイルにコピー（または移動）する方法

あなたのviの使用状況から、ファイルの全内容を選択してコピー/削除し、新しいファイルに貼り付ける方法をお探しと推測します。ViにはGUIエディタのような直接的な「すべて選択」機能はありませんが、**コマンドモード**（`Esc`を押して確実にコマンドモードにしてください）で効率的にこれを実現できます。**コピー**（元のファイルをそのまま残す）と**カット/削除**（内容を移動する）の両方について説明します。

### ステップバイステップ：全内容を新しいファイルにコピーする方法
1. ソースファイルを開く：  
   ```
   vi oldfile.txt
   ```

2. ファイル全体をヤンク（コピー）する：  
   - `gg`と入力（ファイルの先頭に移動）。  
   - 次に `yG`と入力（現在位置からファイル末尾までヤンク）。  
   *代替方法（Vim固有、Red Hatのvimで動作）：* `:1,$y`と入力して`Enter`を押す（1行目から最終行までヤンク）。

3. 新しいファイルを開く：  
   - `:e newfile.txt`と入力して`Enter`を押す（新しいファイルを作成/開く）。

4. 内容を貼り付け：  
   - `p`と入力（カーソルの後に貼り付け；空のファイルなので先頭に貼り付けられる）。  
   *代替方法：* `P`と入力してカーソルの前に貼り付け。

5. 新しいファイルを保存して終了：  
   - `:wq`と入力して`Enter`を押す。

元のファイルは変更されずに残ります。

### ステップバイステップ：全内容を削除して新しいファイルに貼り付ける方法（移動）
これはコピー後に元の内容を削除します。

1. ソースファイルを開く：  
   ```
   vi oldfile.txt
   ```

2. まずファイル全体をヤンク（コピー）する：  
   - `gg` 次に `yG`（または `:1,$y`）。

3. 全内容を削除：  
   - `gg`と入力（先頭に移動）。  
   - 次に `dG`と入力（現在位置からファイル末尾まで削除）。  
   *代替方法：* `:%d`と入力して`Enter`を押す（全行を削除）。  
   必要に応じて保存：`:w`（これで空のファイルを上書き）。

4. 新しいファイルを開く：  
   - `:e newfile.txt`と入力して`Enter`を押す。

5. 貼り付け：  
   - `p`と入力。

6. 保存して終了：  
   - `:wq`。

### クイックヒント
- ヤンクせずに誤って削除してしまった場合は、`u`で元に戻せます。
- 毎回新しいファイルを開かずにこれを行うには：最初のファイルでヤンクし、次に `vi newfile.txt` で新しいファイルを開き、貼り付けて保存します。
- 大きなファイルの場合、viがバッファを効率的に処理するため、これらのコマンドは高速です。

テストファイルで練習してコツをつかんでください！

[Vimでテキストを別のファイルにコピーする方法](https://stackoverflow.com/questions/1239801/how-to-copy-to-the-end-of-the-line-in-vim)  
[Vim: ファイル全体をヤンク（コピー）する](https://vim.fandom.com/wiki/Yank_%28copy%29_the_entire_file)