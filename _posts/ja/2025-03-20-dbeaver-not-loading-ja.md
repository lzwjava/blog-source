---
audio: false
generated: true
lang: ja
layout: post
title: DBeaverでスキーマが読み込めない問題の解決策
translated: true
type: note
---

WindowsでSquirrel SQLを使用してIBM DB2データベースのスキーマを表示できるのに、DBeaverで「loading item 0%」で停止する場合、この問題はDBeaverとSquirrel SQLのメタデータ取得方法の違いに起因している可能性が高いです。以下に問題のトラブルシューティングと解決手順を段階的に説明します：

---

#### 1. DBeaverのDB2ドライバーを確認する
DBeaverはIBM DB2データベースに接続するために正しいドライバーを必要とします。誤ったドライバー（例：「Db2 for LUW」と「Db2 for z/OS」）を使用すると、スキーマの読み込みに問題が発生する可能性があります。

- **手順**:
  1. DBeaverを開き、データベースナビゲーターでDB2接続を右クリックします。
  2. **接続の編集**を選択します。
  3. 「ドライバー」セクションで、選択されているドライバーがDB2環境（例：Linux/Unix/Windowsの場合は「Db2 for LUW」、メインフレームの場合は「Db2 for z/OS」）と一致していることを確認します。
  4. 不明な場合は、データベース管理者またはドキュメントを参照して正しいドライバーが選択されていることを確認してください。
  5. **接続テスト**をクリックして動作を確認します。

---

#### 2. 「Metadata Source」プロパティを調整する
DBeaverはスキーマとテーブル情報の取得方法を制御する「metadata source」プロパティを使用します。DB2の場合、この設定を調整することでスキーマ読み込みの問題が解決されることがあります。

- **手順**:
  1. DBeaverでDB2接続設定を開きます（接続を右クリック > **接続の編集**）。
  2. **ドライバープロパティ**タブに移動します。
  3. 「metadata source」プロパティを見つけます（リストにない場合は追加します）。
  4. 値を`0`に設定します。
  5. **OK**をクリックして変更を保存します。
  6. データベースに再接続し、スキーマが読み込まれるか確認します。

- **この対策が有効な理由**：「metadata source」を`0`に設定すると、DBeaverがメタデータを取得する方法が簡素化され、DB2のスキーマ取得に特有の問題を回避できる可能性があります。

---

#### 3. ユーザー権限を確認する
Squirrel SQLではスキーマが表示される場合でも、DBeaverは異なる方法でデータベースにクエリを行うため、メタデータにアクセスするための特定の権限が必要になる場合があります。

- **手順**:
  1. データベース管理者に確認し、ユーザーアカウントがDB2でスキーマとメタデータを表示する権限（例：`SYSCAT.SCHEMATA`などのシステムカタログテーブルに対する`SELECT`権限）を持っていることを確認します。
  2. 権限が不十分な場合は、DBAに必要な権限の付与を依頼してください。
  3. DBeaverで再接続テストを行います。

---

#### 4. ネットワークまたはファイアウォールの問題を排除する
ネットワーク制限やファイアウォールが、Squirrel SQLでは動作するにも関わらず、DBeaverがスキーマデータを完全に取得するのを妨げている可能性があります。

- **手順**:
  1. DB2サーバーがWindowsマシンから到達可能であることを確認します（例：サーバーへのpingやポートのテスト）。
  2. ネットワークチームに確認し、DBeaverの接続をブロックするファイアウォールルールがないことを確認します。
  3. 可能であれば、問題を切り分けるために別のマシンからDBeaverをテストします。

---

#### 5. DBeaverを最新バージョンに更新する
DBeaverの古いバージョンには、DB2スキーマの読み込みに影響するバグがある可能性があります。

- **手順**:
  1. DBeaverで、**ヘルプ** > **アップデートの確認**に移動します。
  2. 利用可能なアップデートをインストールします。
  3. DBeaverを再起動し、データベースに再接続します。

- **代替案**：アップデートが利用できない場合は、[DBeaver公式サイト](https://dbeaver.io/)から最新バージョンをダウンロードして再インストールします。

---

#### 6. 詳細なトラブルシューティングのためにデバッグログを有効にする
上記の手順で問題が解決しない場合は、デバッグログを有効にしてスキーマ読み込み中の特定のエラーを特定します。

- **手順**:
  1. **ウィンドウ** > **設定** > **DBeaver** > **ログ記録**に移動します。
  2. 詳細なログ記録を有効にし、設定を保存します。
  3. データベースに再接続し、スキーマの読み込みを試みます。
  4. ログファイル（通常はDBeaverワークスペースフォルダ内）でDB2スキーマ取得に関連するエラーメッセージを確認します。
  5. 必要に応じて、ログをDBeaverサポートまたはフォーラムに共有してさらなる支援を依頼します。

---

### 問題の原因
- **DBeaverとSquirrel SQLの違い**：DBeaverはより機能豊富なツールであり、Squirrel SQLのシンプルなアプローチと比較して追加のメタデータを取得します。これにより、設定が最適化されていない場合にDB2との互換性問題が発生する可能性があります。
- **一般的な修正方法**：「metadata source」を`0`に調整することは、DBeaverでのDB2スキーマ読み込み問題に対する既知の回避策です。

---

### 次のステップ
最も可能性の高い修正方法である手順1と2（ドライバーの確認とmetadata sourceの調整）から開始してください。問題が解決しない場合は、残りの手順を進めてください。どれも効果がない場合は、デバッグログを[DBeaverコミュニティ](https://github.com/dbeaver/dbeaver/issues)に投稿して追加の支援を求めることを検討してください。

これにより「loading item 0%」問題が解決し、Squirrel SQLと同様にDBeaverでスキーマを表示できるようになるはずです！