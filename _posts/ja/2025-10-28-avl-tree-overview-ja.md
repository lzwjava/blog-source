---
audio: false
generated: true
image: false
lang: ja
layout: post
model: x-ai/grok-4-fast
title: AVLツリー概説
translated: true
type: note
---

### AVLツリーとは？

AVLツリーは、**自己平衡二分探索木（BST）** の一種で、1962年に Georgy Adelson-Velsky と Evgenii Landis によって発明されました（名前の由来）。すべてのBSTと同様に、データをソートされた状態で保持します。左部分木のすべてのノードは親ノードより小さく、右部分木のすべてのノードは親ノードより大きいです。その主な特徴は、挿入や削除の後に構造を自動的に調整して平衡状態を保つことです。

### 仕組み

- **平衡係数**: すべてのノードについて、左部分木の高さから右部分木の高さを引いた「平衡係数」を計算します。この値は常に -1、0、+1 のいずれかでなければなりません（つまり、部分木の高さの差は最大でも1レベル）。
- **平衡のための回転**: 挿入または削除によって平衡係数の条件が破られた場合：
  - **単回転**（左または右）は、不均衡が近い子ノードにある場合に対処します。
  - **双回転**（左-右または右-左）は、不均衡が遠い子ノードにある場合に対処します。
- これらの回転操作は、BSTの性質を保ちながら平衡を回復し、操作あたり O(1) 時間で実行されます。

例：ソートされた順序でノードを通常のBSTに挿入すると、連結リスト（不平衡）になります。AVLツリーでは、回転によってほぼ高さ平衡な状態が保たれます。以下は簡略化された前後の状態です：

```
不平衡（挿入後: 1,2,3）:
    2
   /
  1
 /
3  (実際には右に歪んでいる: 1->2->3)

回転後:
  2
 / \
1   3
```

### なぜ特別なのか？

- **効率性の保証**: 最悪の場合（例：リストのように歪む）にO(n)になりうる通常のBSTとは異なり、AVLツリーは検索、挿入、削除において、平均的および最悪の場合でも **O(log n)** の時間を保証します。これは、データベースやシンボルテーブルのような一貫した性能を必要とするアプリケーションに理想的です。
- **トレードオフ**: AVLツリーは他の平衡木（例：赤黒木）よりも厳格です（赤黒木は、より高速な挿入/削除のために若干の不平衡を許容します）。AVLは変更速度よりも検索速度を優先します。
- **空間**: ノードごとに高さ/平衡を追跡するための追加のフィールドを使用しますが、それは些細なものです。

要するに、AVLツリーはその厳密な自己平衡機能により、潜在的に混沌としたBSTを信頼性の高い対数的パフォーマンスを持つものに変える点で「特別」です。

詳細はこちら: [AVL Tree on Wikipedia](https://en.wikipedia.org/wiki/AVL_tree)