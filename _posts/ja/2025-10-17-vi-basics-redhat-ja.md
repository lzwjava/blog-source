---
audio: false
generated: true
image: false
lang: ja
layout: post
model: x-ai/grok-4-fast
title: Red Hat Linux のための Vi エディタ基礎
translated: true
type: note
---

ViはLinuxシステム（Red Hat Enterprise Linux (RHEL)を含む）で標準の、キーボード操作中心の強力なテキストエディタです。設定ファイルやスクリプトなどの編集に軽量で効率的です。Red Hatでは、`vi`コマンドは通常`vim`（Vi IMproved）を指し、シンタックスハイライトなどの機能が追加されています。このガイドでは初心者向けの基本を説明します。

## インストール
ViはほとんどのRed Hatシステムにプリインストールされています。完全な`vim`パッケージが必要な場合（または不足している場合）は、パッケージマネージャーでインストールします：

- RHEL 7/8の場合：  
  ```
  sudo yum install vim
  ```

- RHEL 9以降の場合：  
  ```
  sudo dnf install vim
  ```

インストール後、`vi`と`vim`は同じように使用できます。

## Viの起動
1. ターミナルを開きます。
2. `vi filename.txt`を実行します（`filename.txt`はファイルパスに置き換えてください）。  
   - ファイルが存在する場合は編集用に開かれます。  
   - 存在しない場合は新しい空のファイルが作成されます。  
3. ファイルを指定せずに開く場合（練習用）：`vi`。  
Viは**コマンドモード**（デフォルト）で起動します。空白の画面またはファイルの内容が左上にカーソル表示されます。

## モードの理解
Viには3つの主要モードがあります—これらを切り替えることが重要です：
- **コマンドモード**：ナビゲーション、削除、ほとんどの操作のデフォルトモード。他のモードからは`Esc`を押して入る／戻ります。
- **挿入モード**：テキストの入力／編集用。コマンドモードから（例：`i`を押して）入ります。
- **Exモード**：保存などの高度なコマンド用。コマンドモードで`:`を入力して入ります。

コマンドは大文字と小文字を区別します。数値を前置して操作を繰り返します（例：`3dd`で3行削除）。

## 基本ナビゲーション（コマンドモード）
カーソル移動にはホームポジションのキーを使用—マウス不要：
- `h`：左に1文字
- `j`：下に1行
- `k`：上に1行
- `l`：右に1文字
- `w`：前方に1単語
- `b`：後方に1単語
- `0`（ゼロ）：行頭
- `$`：行末
- `gg`：ファイル先頭
- `G`：ファイル末尾
- `Ctrl + F`：ページダウン
- `Ctrl + B`：ページアップ

## 挿入モードへの移行と編集
コマンドモードから、以下のいずれかを押して挿入モードに切り替え、入力開始：
- `i`：カーソル前に挿入
- `I`：行頭に挿入
- `a`：カーソル後に追加
- `A`：行末に追加
- `o`：下に新しい行
- `O`：上に新しい行

挿入モードを終了：`Esc`を押す（コマンドモードに戻る）。

一般的な編集コマンド（コマンドモード）：
- **削除**：
  - `x`：カーソル下の文字を削除
  - `X`：カーソル前の文字を削除
  - `dd`：現在の行を削除
  - `dw`：現在の単語を削除
  - `D`：行末まで削除
- **コピー（ヤンク）**：
  - `yy`：現在の行をコピー
  - `y`：選択範囲をコピー（`v`で選択後）
- **貼り付け**：
  - `p`：カーソル後に貼り付け
  - `P`：カーソル前に貼り付け
- **元に戻す**：
  - `u`：最後の変更を元に戻す
  - `U`：現在の行へのすべての変更を元に戻す
- **繰り返し**：`.`（最後のコマンドを繰り返す）

## 保存と終了
これらは**Exコマンド**—コマンドモードで`:`を入力し、コマンドを入力して`Enter`を押します：
- `:w`：変更を保存（書き込み）
- `:q`：終了（変更がない場合）
- `:wq`または`ZZ`（コマンドモード）：保存して終了
- `:q!`：保存せずに終了（変更を強制破棄）
- `:w filename`：新しいファイルとして保存

行き詰まった場合は、`:q!`で安全に終了できます。

## 検索と置換
- 前方検索：`/pattern`（例：`/error`）、次に`n`で次の一致、`N`で前の一致。
- 後方検索：`?pattern`。
- すべて置換：`:%s/old/new/g`（グローバル置換；確認を追加するには`c`を付加、例：`:%s/old/new/gc`）。

## Red Hatユーザー向けのヒント
- `~/.vimrc`でカスタマイズ（必要に応じて作成）：  
  ```
  set number          # 行番号を表示
  syntax on           # シンタックスハイライト
  set tabstop=4       # タブ幅
  set autoindent      # 自動インデント
  ```
  `vi ~/.vimrc`で編集、行を追加し、`:wq`で保存。
- 複数ファイルの場合：`vi file1.txt file2.txt`、`:n`（次）または`:prev`（前）で切り替え。
- システムファイルでのミスを避けるため、テストファイルで練習してください。

Viは練習が必要ですが、直感的になります。シンプルに始めて、`Esc`を頻繁に使用しましょう！

## 参考文献
[How to get started with the Vi editor - Red Hat](https://www.redhat.com/en/blog/get-started-vi-editor)  
[LFCS #2: How to Install and Use Vi/Vim as a Full Text Editor in Linux](https://www.tecmint.com/vi-editor-usage/)  
[vi Editor in Linux - GeeksforGeeks](https://www.geeksforgeeks.org/linux-unix/vi-editor-unix/)