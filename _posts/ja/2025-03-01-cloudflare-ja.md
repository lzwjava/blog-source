---
audio: false
generated: true
lang: ja
layout: post
title: クラウドフレアを始める
translated: true
---

Cloudflareは、ウェブサイトのパフォーマンス、セキュリティ、信頼性を向上させるためのさまざまなツールを提供する人気のあるサービスです。小さなブログから大規模なECサイトまで、Cloudflareの機能（DNS管理、コンテンツ配信ネットワーク（CDN）、セキュリティ保護など）は大きな違いをもたらします。このブログ記事では、DNSの設定、Aレコードの管理、IP地域の禁止という3つの主要なタスクを説明します。これらのタスクは、Cloudflareを最大限に活用するために欠かせないもので、設定するのは思ったよりも簡単です！

### **Cloudflareを使う理由**

まずは、Cloudflareがなぜ価値があるのかを簡単に説明します：
- **DNS管理**: Cloudflareは高速で信頼性の高いDNSサービスを提供し、ウェブサイトが常にアクセス可能であることを保証します。
- **CDN**: サイトを速くするために、コンテンツを訪問者に近い場所にキャッシュします。
- **セキュリティ**: CloudflareはDDoS保護、SSL/TLS暗号化、悪意のあるトラフィックをブロックするツールを提供します。
- **使いやすさ**: さらに、Cloudflareには小さなウェブサイトやブログに最適な無料プランがあります。

それでは、具体的な内容に入りましょう。

---

### **ステップ1: CloudflareでDNSを設定する**

DNS（ドメイン名システム）は、インターネットの電話帳のようなもので、ドメイン名（例：`example.com`）をサーバーが理解できるIPアドレスに変換します。Cloudflareを使用すると、プラットフォームを通じてDNSレコードを管理でき、追加の速度とセキュリティが得られます。

#### **Cloudflare DNSの設定方法:**
1. **Cloudflareにサインアップ**: まだアカウントがない場合は、[Cloudflareのウェブサイト](https://www.cloudflare.com/)にアクセスして無料アカウントにサインアップします。
2. **ドメインを追加**: ログイン後、「サイトを追加」をクリックし、ドメイン名（例：`example.com`）を入力します。Cloudflareは既存のDNSレコードをスキャンします。
3. **DNSレコードを確認**: スキャン後、Cloudflareは現在のDNSレコードのリストを表示します。すべてが正しいことを確認します。
4. **ネームサーバーを変更**: CloudflareのDNSを使用するには、ドメインのネームサーバーをドメイン登録業者（例：GoDaddy、Namecheap）で更新する必要があります。Cloudflareは2つのネームサーバー（例：`ns1.cloudflare.com`と`ns2.cloudflare.com`）を提供します。登録業者のダッシュボードにログインし、ドメインのネームサーバー設定を探し、既存のネームサーバーをCloudflareのものに置き換えます。
5. **プロパゲーションを待つ**: DNSの変更には最大24時間かかることがありますが、通常はそれよりも早いです。完了すると、ドメインはCloudflareのDNSを使用します。

**重要な注意**: Cloudflareが提供するネームサーバーを正確にコピーしてください。間違ったネームサーバーはサイトがオフラインになる原因となります。

---

### **ステップ2: CloudflareでAレコードを管理する**

Aレコードは、ドメイン（またはサブドメイン）をIPv4アドレスにマッピングするDNSレコードの種類です。例えば、インターネットに`example.com`は`192.0.2.1`を指すように指示します。Cloudflareは、Aレコードを追加、編集、削除するのを簡単にします。

#### **Aレコードの管理方法:**
1. **Cloudflareにログイン**: Cloudflareダッシュボードにアクセスし、管理したいドメインを選択します。
2. **DNSに移動**: 上部メニューの「DNS」タブをクリックします。
3. **Aレコードを追加**:
   - 「レコードを追加」をクリックします。
   - タイプのドロップダウンから「A」を選択します。
   - 名前（例：`www`は`www.example.com`、ルートドメインの場合は空白にします）を入力します。
   - 指すIPv4アドレスを入力します。
   - レコードをCloudflareを通じてプロキシするかどうかを選択します（以下で詳しく説明）。
   - TTL（タイム・トゥ・ライブ）を設定します。プロキシされたレコードの場合、デフォルトは300秒です。
   - 「保存」をクリックします。
4. **Aレコードを編集**: 既存のAレコードをリストから見つけ、「編集」をクリックし、変更を加え、「保存」をクリックします。
5. **Aレコードを削除**: レコードの横の「編集」をクリックし、「削除」をクリックし、削除を確認します。

**プロキシ vs. DNSのみ**:
- **プロキシ（オレンジの雲）**: トラフィックはCloudflareを通過し、CDN、セキュリティ、パフォーマンス機能が有効になります。
- **DNSのみ（グレーの雲）**: トラフィックは直接サーバーに行き、Cloudflareの保護をバイパスします。Cloudflareの機能が不要なレコード（例：メールサーバー）に使用します。

**クイックチップ**: CloudflareはIPv6アドレス用のAAAAレコードもサポートしています。管理方法はAレコードと同じです。

---

### **ステップ3: CloudflareでIP地域を禁止する**

Cloudflareを使用すると、特定の国や地域からのトラフィックをブロックすることができ、スパム、ボット、悪意のある攻撃を減らすことができます。この機能は、特定の地域からの不要なトラフィックがあった場合に特に有用です。

#### **IP地域を禁止する方法:**
1. **Cloudflareにログイン**: Cloudflareダッシュボードにアクセスし、ドメインを選択します。
2. **セキュリティに移動**: 「セキュリティ」タブをクリックし、「WAF」（Web Application Firewall）を選択します。
3. **ルールを作成**:
   - 「ファイアウォールルールを作成」をクリックします。
   - ルールに名前を付けます（例：「特定の国をブロック」）。
   - ルールを訪問者の国に基づいてトラフィックをブロックするように設定します。例えば：
     - フィールド: 「国」
     - 演算子: 「in」
     - 値: ブロックしたい国を選択します。
   - アクションを「ブロック」に設定します。
   - 「デプロイ」をクリックします。
4. **ブロックされたトラフィックを監視**: 「セキュリティ」タブの「イベント」でブロックされたリクエストを表示できます。

**重要な注意**: この機能は慎重に使用してください。地域全体をブロックすると、誤って正当なユーザーがサイトにアクセスできなくなることがあります。トラフィックを監視し、必要な場合にのみ地域をブロックすることをお勧めします。

---

### **追加のヒントとベストプラクティス**

- **Cloudflareの無料プランを使用**: 小さなウェブサイトに最適で、DNS管理、CDN、基本的なセキュリティ機能を含む。
- **レコードをプロキシ**: 最適なパフォーマンスとセキュリティのため、可能な限りAとAAAAレコードをCloudflareを通じてプロキシします。
- **SSL/TLSを設定**: Cloudflareは、訪問者とサイト間のトラフィックを暗号化するための無料SSL証明書を提供します。これを「SSL/TLS」タブで有効にします。
- **キャッシュを設定**: Cloudflareのキャッシュはサイトを大幅に速くします。「キャッシュ」タブで設定を確認してください。
- **サイトを監視**: Cloudflareの分析を使用して、トラフィック、脅威、パフォーマンスを監視します。

---

### **まとめ**

Cloudflareは、ウェブサイトの速度、セキュリティ、信頼性を向上させる強力なツールです。このガイドに従って、DNSを設定し、Aレコードを管理し、IP地域を禁止することで、サイトを簡単に保護できます。覚えておいてください：
- **DNS設定**: ダウンタイムを避けるために、正しくネームサーバーを更新します。
- **Aレコード**: ドメインをサーバーのIPアドレスにマッピングし、追加の利点を得るためにプロキシすることを検討します。
- **IP地域のブロック**: 正当なユーザーをブロックしないように、この機能を慎重に使用します。

Cloudflareには、SSL/TLS暗号化、キャッシュ、高度なセキュリティツールなど、他にも多くの機能があります。基本的な操作に慣れたら、これらのオプションを探索して、プラットフォームからさらに多くを引き出してください。