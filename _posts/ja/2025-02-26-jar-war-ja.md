---
audio: false
generated: true
lang: ja
layout: post
title: JAR vs WAR
translated: true
---

Javaのパッケージングにおいて、**JAR** (Java ARchive) と **WAR** (Web ARchive) は、どちらもZIP構造に基づいたアーカイブファイル形式ですが、異なる目的と特性を持っています。以下にその違いについて詳しく説明します。

---

### 1. 目的
- **JAR**: JARファイルは、Javaクラス、ライブラリ、またはスタンドアロンアプリケーションをパッケージ化するための一般的なアーカイブです。再利用可能なライブラリ（例：ユーティリティクラス）や、Java仮想マシン（JVM）上で実行できる実行可能なJavaプログラムを配布するために一般的に使用されます。
- **WAR**: WARファイルは、特定のWebアプリケーションのために設計されています。サーブレット、JSP（JavaServer Pages）、HTML、CSS、JavaScript、設定ファイルなど、Webアプリケーションに必要なすべてのコンポーネントを1つの単位にパッケージ化し、Webサーバーまたはアプリケーションサーバー（例：Apache Tomcat、JBoss）にデプロイします。

---

### 2. 内容
- **JAR**: Javaクラスファイル（`.class`）、`META-INF`ディレクトリ内の`MANIFEST.MF`ファイル（実行可能なJARのメインクラスなどのメタデータを提供）、オプションのリソース（設定ファイル、画像、プロパティファイルなど）を含みます。
- **WAR**: Web特有のコンポーネントを含み、定義された構造を持ちます：
  - **WEB-INF/**: 必須のディレクトリで、以下を含みます：
    - `web.xml`（サーブレット、マッピングなどの設定のためのデプロイメント記述子）
    - `classes/`（コンパイルされたJavaクラス）
    - `lib/`（Webアプリケーションで使用される依存関係のJARファイル）
  - 静的リソース（例：HTML、CSS、JavaScript）は通常、`WEB-INF`の外側のルートディレクトリまたはサブディレクトリに配置されますが、JSPは直接アクセスを制限するために`WEB-INF`内に配置することもできます。

---

### 3. 構造
- **JAR**: クラスファイルとリソースからなる平坦な構造で、メタデータを指定するマニフェストファイルがあります。例：
  ```
  myapp.jar
  ├── META-INF/
  │   └── MANIFEST.MF
  ├── com/
  │   └── example/
  │       └── MyClass.class
  └── resources/
      └── config.properties
  ```
- **WAR**: Webアプリケーションのために設計された階層的な構造を持ちます。例：
  ```
  mywebapp.war
  ├── index.html
  ├── css/
  │   └── style.css
  ├── WEB-INF/
  │   ├── web.xml
  │   ├── classes/
  │   │   └── com/
  │   │       └── example/
  │   │           └── MyServlet.class
  │   └── lib/
  │       └── dependency.jar
  ```

---

### 4. デプロイと使用
- **JAR**:
  - アプリケーションのクラスパスに含まれ、ライブラリや再利用可能なコードを提供します。
  - 実行可能（マニフェストに`Main-Class`が指定されている場合）、`java -jar myapp.jar`を使用して直接実行できます。
- **WAR**:
  - サーブレットコンテナまたはアプリケーションサーバー（例：Tomcat）にデプロイされ、Webアプリケーションが特定のURL（コンテキストパス）でアクセス可能になります。
  - 独立して実行できないため、サーバーがそのライフサイクルを管理します。

---

### 5. 依存関係の処理
- **JAR**: 依存関係を内部的に含むことはなく、外部で管理されます（例：クラスパスまたはMavenなどのビルドツール）。
- **WAR**: 依存関係のJARを`WEB-INF/lib/`ディレクトリ内にバンドルすることができ、Webアプリケーションが特定のライブラリのバージョンを使用し、同じサーバー上の他のアプリケーションから隔離されます。

---

### 6. 作成
JARおよびWARファイルは、JDKの`jar`コマンドラインツールまたはMavenやGradleなどの現代的なビルドツールを使用して作成できます：
- **JARの例**: `jar cvf myapp.jar -C classes .`
- **WARの例**: `jar cvf mywebapp.war .`（`WEB-INF`などのディレクトリが構造化されていることを前提に）
- **Maven**では、`pom.xml`でパッケージングタイプを指定します：
  - `<packaging>jar</packaging>` for JAR.
  - `<packaging>war</packaging>` for WAR.

---

### 要約表

| 特徴            | JAR                              | WAR                                   |
|--------------------|----------------------------------|---------------------------------------|
| **フルネーム**      | Java ARchive                    | Web ARchive                          |
| **目的**        | ライブラリ、スタンドアロンアプリ | Webアプリケーション                     |
| **内容**       | クラス、マニフェスト、リソース    | サーブレット、JSP、HTML、WEB-INFなど  |
| **構造**      | 平坦                            | 階層的（WEB-INFなど）         |
| **デプロイ**     | クラスパスまたは`java -jar`        | Webサーバー（例：Tomcat）            |
| **依存関係**   | 外部                        | `WEB-INF/lib/`にバンドル            |

---

### 要点
要するに、**JAR**は一般的なJavaコード用の柔軟なアーカイブであり、**WAR**はWebアプリケーション用の専用アーカイブで、Webサーバーへのデプロイに適した構造とコンポーネントを持っています。その異なる役割を理解することで、Javaの開発とデプロイシナリオでの適切な使用が可能になります。