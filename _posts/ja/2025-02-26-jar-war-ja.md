---
audio: false
generated: true
lang: ja
layout: post
title: JARとWAR
translated: true
type: note
---

Javaのパッケージングにおいて、**JAR**（Java ARchive）と**WAR**（Web ARchive）はどちらもZIP構造に基づくアーカイブファイル形式ですが、目的と特性が異なります。以下にそれぞれの違いを詳しく説明します：

---

### 1. 目的
- **JAR**: JARファイルは、Javaクラス、ライブラリ、またはスタンドアロンアプリケーションをパッケージ化するための汎用アーカイブです。再利用可能なライブラリ（ユーティリティクラスなど）やJava仮想マシン（JVM）上で実行可能なJavaプログラムを配布するためによく使用されます。
- **WAR**: WARファイルは、Webアプリケーション専用に設計されています。サーブレット、JSP（JavaServer Pages）、HTML、CSS、JavaScript、設定ファイルなど、Webアプリに必要なすべてのコンポーネントを単一のユニットにパッケージ化し、Webサーバーやアプリケーションサーバー（Apache Tomcat、JBossなど）にデプロイするために使用されます。

---

### 2. 内容物
- **JAR**: Javaクラスファイル（`.class`）、メタデータ（実行可能JARの場合はメインクラスなど）を提供する`META-INF`ディレクトリ内の`MANIFEST.MF`ファイル、および設定ファイル、画像、プロパティファイルなどのオプションのリソースを含みます。
- **WAR**: Web固有のコンポーネントと定義された構造を含みます：
  - **WEB-INF/**: 必須のディレクトリで、以下を含みます：
    - `web.xml`（サーブレット、マッピングなどを設定するためのデプロイメント記述子）、
    - `classes/`（コンパイルされたJavaクラス）、
    - `lib/`（Webアプリで依存関係として使用されるJARファイル）。
  - 静的リソース（HTML、CSS、JavaScriptなど）は通常、ルートディレクトリまたは`WEB-INF`外のサブディレクトリに配置されますが、JSPは直接アクセスを制限するために`WEB-INF`内に配置されることもあります。

---

### 3. 構造
- **JAR**: クラスファイルとリソースを主とするフラットな構造を持ち、メタデータはマニフェストファイルで指定されます。例：
  ```
  myapp.jar
  ├── META-INF/
  │   └── MANIFEST.MF
  ├── com/
  │   └── example/
  │       └── MyClass.class
  └── resources/
      └── config.properties
  ```
- **WAR**: Webアプリケーションに特化した階層構造に従います。例：
  ```
  mywebapp.war
  ├── index.html
  ├── css/
  │   └── style.css
  ├── WEB-INF/
  │   ├── web.xml
  │   ├── classes/
  │   │   └── com/
  │   │       └── example/
  │   │           └── MyServlet.class
  │   └── lib/
  │       └── dependency.jar
  ```

---

### 4. デプロイメントと使用方法
- **JAR**:
  - ライブラリや再利用可能なコードを提供するために、アプリケーションのクラスパスに含められます。
  - 実行可能な場合（マニフェストで`Main-Class`が指定されている）、`java -jar myapp.jar`で直接実行できます。
- **WAR**:
  - サーブレットコンテナやアプリケーションサーバー（Tomcatなど）にデプロイされ、サーバーがそれを展開して特定のURL（コンテキストパス）でWebアプリケーションをアクセス可能にします。
  - スタンドアロンでは実行できず、そのライフサイクルはサーバーによって管理されます。

---

### 5. 依存関係の扱い
- **JAR**: 他のJARを本質的には含まず、依存関係は外部で管理されます（クラスパスやMavenなどのビルドツール経由）。
- **WAR**: 依存するJARを`WEB-INF/lib/`ディレクトリ内にバンドルでき、Webアプリケーションが特定のバージョンのライブラリを使用することを保証し、同じサーバー上の他のアプリケーションから分離されます。

---

### 6. 作成方法
JARファイルとWARファイルはどちらも、JDKの`jar`コマンドラインツールやMavenやGradleなどのモダンなビルドツールを使用して作成できます：
- **JARの例**: `jar cvf myapp.jar -C classes .`
- **WARの例**: `jar cvf mywebapp.war .`（ディレクトリが`WEB-INF`などで構造化されていることを想定）。
- **Maven**では、パッケージングタイプは`pom.xml`で指定されます：
  - JARの場合は`<packaging>jar</packaging>`。
  - WARの場合は`<packaging>war</packaging>`。

---

### まとめ表

| 特徴             | JAR                              | WAR                                   |
|------------------|----------------------------------|---------------------------------------|
| **正式名称**     | Java ARchive                    | Web ARchive                          |
| **目的**         | ライブラリ、スタンドアロンアプリ | Webアプリケーション                   |
| **内容物**       | クラス、マニフェスト、リソース   | サーブレット、JSP、HTML、WEB-INFなど  |
| **構造**         | フラット                         | 階層的（WEB-INFなど）                 |
| **デプロイメント**| クラスパスまたは`java -jar`      | Webサーバー（例：Tomcat）             |
| **依存関係**     | 外部管理                         | `WEB-INF/lib/`にバンドル              |

---

### 重要なポイント
本質的に、**JAR**は汎用Javaコードのための多目的アーカイブであり、**WAR**はWebサーバーへのデプロイに特化した構造とコンポーネントを備えたWebアプリケーション専用のアーカイブです。それぞれの役割の違いを理解することで、Java開発とデプロイメントのシナリオで適切に使用することができます。