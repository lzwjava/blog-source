---
audio: false
lang: ja
layout: post
title: InsomniaでのSSL証明書の検証
translated: true
---

Insomniaで「SSLピア証明書またはSSHリモートキーが正しくありません」エラーを修正するには、このエラーは通常、Insomniaが接続しようとしているサーバーのSSL証明書を検証できない場合に発生します。以下に、この問題を解決するためのステップバイステップのソリューションを示します：

### 1. **SSL証明書の検証を無効にする（ローカル開発専用）**
ローカル開発サーバーで自署名または無効なSSL証明書を使用している場合、Insomniaで証明書の検証を無効にすることができます：
- Insomniaを開き、**アプリケーション** > **設定**に移動します。
- **リクエスト/レスポンス**セクションに移動します。
- **証明書を検証する**というラベルの付いたチェックボックスを外します。
- リクエストを再試行します。

**重要**: このオプションはセキュリティチェックをバイパスし、テストまたはローカル開発のみで使用してください。生産環境では使用しないでください。接続が脆弱になるためです。

---

### 2. **サーバーのSSL証明書を検証する**
このエラーは、サーバーのSSL証明書に問題があることを示す場合があります（例：期限切れ、自署名、またはホスト名の不一致）。確認するには：
- サーバーのURLを開きます。
- アドレスバーの鍵アイコンをクリックして証明書の詳細を表示します。
- 証明書が有効で、期限切れでなく、ドメイン名と一致していることを確認します。
- 証明書が無効または誤って設定されている場合は、サーバー管理者に連絡して修正してください。

---

### 3. **クライアント証明書をインポートする（必要な場合）**
サーバーが認証のためにクライアント証明書を要求する場合、Insomniaで設定する必要があります：
- Insomniaで、**クライアント証明書**に移動します（メインダッシュボードまたは設定からアクセス可能）。
- **証明書を追加**をクリックします。
- 証明書ファイルをインポートします（サポートされる形式にはPFXまたはPEMが含まれます）。
- 特定のドメインまたはホスト名に割り当てます。
- リクエストを再試行します。

---

### 4. **Insomniaを更新する**
SSL関連の問題は、Insomniaの古いバージョンのバグによる場合があります。最新バージョンであることを確認するには：
- **アプリケーション** > **バージョン情報**で更新を確認するか、公式のInsomniaウェブサイトから最新リリースをダウンロードします。
- 更新をインストールし、リクエストを再試行します。

---

### 5. **Curlでテストする**
上記の手順で問題が解決しない場合は、Insomniaの外部でリクエストをテストして問題を特定します：
- ターミナルを開き、同じURLとパラメータを使用して`curl`コマンドを実行します（例：`curl -v https://example.com`）。
- `curl`も失敗する場合、問題はサーバーの設定にある可能性が高いです。
- `curl`が成功する場合、Insomniaの特定の問題を示す可能性があり、サポートチームに報告できます。

---

### まとめ
まず、ローカルサーバーの場合はSSL検証を無効にし、次にサーバーの証明書を検証するか、必要に応じてクライアント証明書を設定します。Insomniaが最新であることを確認し、必要に応じて`curl`を使用してさらにトラブルシューティングを行います。これらの手順で「SSLピア証明書またはSSHリモートキーが正しくありません」エラーの大多数のケースが解決されます。

問題が解決しない場合、サーバーサイドの設定ミスまたはInsomniaの稀なバグが原因である可能性があります。さらにサポートが必要な場合はお知らせください！