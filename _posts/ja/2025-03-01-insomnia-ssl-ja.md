---
audio: false
generated: true
lang: ja
layout: post
title: インソムニアにおけるSSL証明書の検証
translated: true
type: note
---

Insomniaで「SSL peer certificate or SSH remote key was not OK」エラーを修正するには、このエラーは通常、Insomniaが接続先サーバーのSSL証明書を検証できない場合に発生します。以下に問題を解決するためのステップバイステップの解決策を示します：

### 1. **SSL証明書の検証を無効にする（ローカル開発環境のみ）**
自己署名または無効なSSL証明書を使用するローカル開発サーバーで作業している場合、Insomniaで証明書の検証を無効にできます：
- Insomniaを開き、**Application** > **Preferences**に移動します。
- **Request / Response**セクションに進みます。
- **Validate certificates**とラベル付けされたボックスのチェックを外します。
- リクエストを再試行します。

**重要**：このオプションはセキュリティチェックをバイパスするため、**テストまたはローカル開発のみで使用してください**。接続が脆弱になるため、本番環境では使用しないでください。

---

### 2. **サーバーのSSL証明書を確認する**
このエラーは、サーバーのSSL証明書（期限切れ、自己署名、ホスト名の不一致など）に問題があることを示している可能性があります。確認するには：
- サーバーのURLをWebブラウザで開きます。
- アドレスバーの鍵アイコンをクリックして証明書の詳細を表示します。
- 証明書が有効で、期限切れでなく、ドメイン名と一致していることを確認します。
- 証明書が無効または設定が間違っている場合は、サーバー管理者に連絡して修正を依頼してください。

---

### 3. **クライアント証明書をインポートする（必要な場合）**
サーバーが認証にクライアント証明書を要求する場合、Insomniaで設定する必要があります：
- Insomniaで、**Client Certificates**（メインダッシュボードまたは設定からアクセス可能）に移動します。
- **Add Certificate**をクリックします。
- 証明書ファイル（PFXまたはPEM形式など）をインポートします。
- 特定のドメインまたはホスト名に割り当てます。
- リクエストを再度テストします。

---

### 4. **Insomniaを更新する**
SSL関連の問題は、Insomniaの古いバージョンのバグが原因である可能性があります。最新バージョンを使用していることを確認するには：
- **Application** > **About**で更新を確認するか、公式Insomniaウェブサイトから最新リリースをダウンロードします。
- 更新をインストールし、リクエストを再試行します。

---

### 5. **Curlでテストする**
上記の手順で問題が解決しない場合、Insomniaの外部でリクエストをテストして問題を切り分けます：
- ターミナルを開き、同じURLとパラメータで`curl`コマンドを使用します（例：`curl -v https://example.com`）。
- `curl`も失敗する場合、問題はInsomniaではなくサーバーの設定にある可能性が高いです。
- `curl`が成功する場合、Insomniaに特定の問題がある可能性があり、サポートチームに報告できます。

---

### まとめ
ローカルサーバーの場合はSSL検証の無効化から始め、次にサーバーの証明書を確認するか、必要に応じてクライアント証明書を設定します。Insomniaが最新であることを確認し、必要に応じて`curl`を使用してさらにトラブルシューティングを行います。これらの手順により、「SSL peer certificate or SSH remote key was not OK」エラーのほとんどのケースが解決するはずです。

問題が解決しない場合は、サーバー側の設定ミスまたはInsomniaの稀なバグが原因である可能性があります。さらにサポートが必要な場合はお知らせください！