---
audio: false
generated: true
image: false
lang: ja
layout: post
title: 韓国人を中国人と誤認するバリデータの修正
translated: true
type: note
---

了解しました — このデバッグ出力では：

```
Debug: raw langdetect output: [('ko', 0.9999995211930662)]
...
Detected languages: [('ko', 0.9999995211930662)]
```

コード **`ko`** は **韓国語** の ISO 639-1 言語コードです。 🇰🇷

つまり `langdetect` は以下のように判断しています：

* テキストは韓国語 (`ko`) である
* 確率 ≈ **0.9999995** (ほぼ100%)

これがエラーの説明になります：あなたのバリデータは `"zh-tw"` (繁体字中国語) を期待していましたが、検出器は入力が韓国語のように見えると判断しました。

👉 `langdetect` / ISO 639-1 からの簡単なマッピングの復習：

* `zh` → 中国語 (指定なし)
* `zh-cn` → 簡体字中国語 (中国)
* `zh-tw` (またはあなたのマッピングでは `hant`) → 繁体字中国語 (台湾)
* `ja` → 日本語
* `ko` → 韓国語
* `ne` → ネパール語
* `hi` → ヒンディー語

`langdetect` が誤分類した場合 (例えば、対象の文字が明らかに中国語なのにコードが `ko` として返された場合にフォールバックを許可するなど) にバリデータが失敗しないように、**バリデータを強化する方法**を提案しましょうか？