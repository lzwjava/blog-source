---
audio: false
generated: true
lang: ja
layout: post
title: VS Code ソース管理ガイド
translated: true
type: note
---

Visual Studio Code (VS Code) はソース管理に対する強力な組み込みサポートを提供しており、開発者が Git、Mercurial などのバージョン管理システム (VCS) をエディタ内で直接管理できるようにします。このガイドでは、VS Code でのソース管理の使用法について包括的に概説し、最も一般的に使用される VCS である Git に焦点を当て、セットアップ、主な機能、ワークフロー、高度な使用法をカバーします。

### VS Code でのソース管理の概要
VS Code のソース管理ビューは、バージョン管理システムと対話するための直感的なインターフェースを提供します。デフォルトで Git と統合され、他の VCS の拡張機能をサポートします。ソース管理ビューは変更を表示し、ステージング、コミット、ブランチ作成、マージなどをエディタを離れることなく実行できます。以下は、ソース管理を効果的に活用するためのステップバイステップガイドです。

### 1. **VS Code でのソース管理のセットアップ**
ソース管理を使用するには、Git がインストールされ、リポジトリが初期化されている必要があります。セットアップ方法は以下の通りです。

#### 前提条件
- **Git のインストール**: [git-scm.com](https://git-scm.com/) から Git をダウンロードしてインストールします。ターミナルで `git --version` を実行してインストールを確認します。
- **Git の設定**:
  ```bash
  git config --global user.name "Your Name"
  git config --global user.email "your.email@example.com"
  ```
- **VS Code のインストール**: [code.visualstudio.com](https://code.visualstudio.com/) から最新バージョンの VS Code をインストールします。

#### Git リポジトリの初期化
1. VS Code でプロジェクトフォルダを開きます。
2. ターミナル (Ctrl+` または macOS では Cmd+`) を開き、以下を実行します:
   ```bash
   git init
   ```
   これにより、プロジェクト内に `.git` フォルダが作成され、Git リポジトリとして初期化されます。
3. または、既存のリポジトリをクローンします:
   ```bash
   git clone <repository-url>
   ```
   その後、クローンしたフォルダを VS Code で開きます。

#### ソース管理ビューの有効化
- アクティビティバーのソース管理アイコン (上から3番目の分岐に似たアイコン) をクリックするか、`Ctrl+Shift+G` (Windows/Linux) または `Cmd+Shift+G` (macOS) を押してソース管理ビューを開きます。
- Git リポジトリが検出されると、VS Code は変更を管理するためのオプションを含むソース管理ビューを表示します。

### 2. **ソース管理ビューの使用**
ソース管理ビューは、バージョン管理タスクの中心的なハブです。以下を表示します:
- **変更**: 前回のコミット以降に変更、追加、または削除されたファイル。
- **ステージされた変更**: コミットの準備ができたファイル。
- **コミットメッセージボックス**: コミットメッセージを入力する場所。
- **アクション**: コミット、更新などのボタン。

#### 一般的なワークフロー
1. **変更の作成**: プロジェクト内のファイルを編集します。VS Code は変更を自動的に検出し、ソース管理ビューの「変更」の下にリストします。
2. **変更のステージング**:
   - ファイルの横にある `+` アイコンをクリックしてステージするか、「すべての変更をステージ」オプション (3点メニュー > すべての変更をステージ) を使用します。
   - ステージングは、変更を次のコミットの準備を整えます。
3. **コミットメッセージの記述**:
   - ソース管理ビューの上部にあるテキストボックスに説明的なメッセージを入力します。
   - 例: `ユーザー認証機能を追加`。
4. **変更のコミット**:
   - チェックマークアイコンをクリックするか、`Ctrl+Enter` (Windows/Linux) または `Cmd+Enter` (macOS) を押して、ステージされた変更をコミットします。
   - 3点メニューを使用して、「すべてをコミット」、「ステージされた変更をコミット」、または「すべてをコミットしてプッシュ」を選択します。
5. **リモートへのプッシュ**:
   - リモートリポジトリ (例: GitHub) に接続されている場合、3点メニューの「プッシュ」オプションを使用するか、ターミナルで `git push` を実行して変更をプッシュします。

### 3. **VS Code のソース管理の主な機能**
VS Code は、バージョン管理を効率化するいくつかの機能を提供します:

#### Diff ビュー
- 「変更」の下のファイルをクリックして、前回のコミットと比較した変更を表示する並列 diff ビューを開きます。
- インラインアクションを使用して、特定の行をステージまたは破棄します。

#### ブランチ管理
- ブランチの切り替え: 左下ステータスバーのブランチ名をクリックするか、ソース管理ビューのブランチメニュー (3点 > ブランチ > チェックアウト先...) を使用します。
- 新しいブランチの作成: ブランチメニューから「ブランチを作成」を選択し、名前を入力して確認します。
- ブランチのマージ: 「ブランチ > ブランチをマージ」を使用し、現在のブランチにマージするブランチを選択します。

#### プルとフェッチ
- **プル**: 3点メニューの「プル」オプションを使用して、リモートリポジトリから変更を同期します。
- **フェッチ**: 「フェッチ」を使用して、マージせずにリモートの変更を取得します。

#### 競合の解決
- マージまたはプル時に競合が発生することがあります。VS Code はファイル内の競合を強調表示し、インライン競合解決インターフェースを提供します:
  - 「現在の変更を承認」、「受信した変更を承認」、「両方の変更を承認」を選択するか、ファイルを手動で編集します。
  - 解決したファイルをステージしてコミットします。

#### Git Lens 拡張機能
高度な Git 機能については、**GitLens** 拡張機能をインストールします:
- コミット履歴、注釈 (blame)、ファイル変更を表示します。
- 最近のコミットやスタッシュなどのリポジトリインサイトにアクセスします。
- 拡張機能ビュー (`Ctrl+Shift+X` または `Cmd+Shift+X`) からインストールします。

### 4. **高度な使用法**
#### 変更のスタッシュ
- 未コミットの変更を一時的に保存します:
  - 3点メニュー > スタッシュ > スタッシュに移動します。
  - 後で同じメニューからスタッシュを適用またはポップします。
- 未完了の作業をコミットせずにブランチを切り替える場合に便利です。

#### ターミナルでの Git コマンド
- UI で直接サポートされていないタスクの場合、統合ターミナルを使用します:
  ```bash
  git rebase <branch>
  git cherry-pick <commit>
  git log --oneline
  ```

#### ソース管理のカスタマイズ
- **設定**: VS Code 設定 (`Ctrl+,` または `Cmd+,`) でソース管理の動作を調整します:
  - `git.autoRepositoryDetection`: 自動 Git リポジトリ検出を有効/無効にします。
  - `git.enableSmartCommit`: ファイルがステージされていない場合にすべての変更をコミットします。
- **SCM プロバイダー**: Mercurial や SVN などの他の VCS の拡張機能をインストールします。

#### GitHub 統合
- **GitHub Pull Requests and Issues** 拡張機能を使用して、PR と issue を VS Code で直接管理します。
- アカウントメニュー (左下隅) で GitHub で認証し、GitHub リポジトリからプッシュ/プルします。

### 5. **サンプルワークフロー: 機能ブランチの作成とプッシュ**
以下は、VS Code での一般的な Git ワークフローの実用的な例です:

# VS Code でのサンプル Git ワークフロー

## 機能ブランチを作成してプッシュする手順

1. **新しいブランチの作成**:
   - ソース管理ビューで、ステータスバーのブランチ名をクリックするか、3点メニュー > ブランチ > ブランチを作成を使用します。
   - ブランチに名前を付けます (例: `feature/add-login`)。
   - VS Code は新しいブランチに切り替わります。

2. **変更の作成とステージング**:
   - ファイルを編集します (例: `src/Login.js` にログインコンポーネントを追加)。
   - ソース管理ビューで、ファイルが「変更」の下に表示されます。
   - `+` アイコンをクリックして変更をステージするか、「すべての変更をステージ」を選択します。

3. **変更のコミット**:
   - コミットメッセージを入力します (例: `ログインコンポーネントを追加`)。
   - チェックマークをクリックするか、`Ctrl+Enter` (Windows/Linux) または `Cmd+Enter` (macOS) を押してコミットします。

4. **ブランチのプッシュ**:
   - リモートが存在しない場合、追加します:
     ```bash
     git remote add origin <repository-url>
     ```
   - ブランチをプッシュします: 3点メニュー > プッシュ、または以下を実行します:
     ```bash
     git push -u origin feature/add-login
     ```

5. **プルリクエストの作成**:
   - GitHub を使用している場合、ブラウザでリポジトリを開くか、GitHub Pull Requests 拡張機能を使用して PR を作成します。
   - PR を `feature/add-login` ブランチにリンクします。

## ヒント
- 競合を避けるために、メインブランチから定期的に更新をプルします。
- より良いコラボレーションのために、説明的なコミットメッセージを使用します。
- 強化されたコミット履歴と注釈ビューのために GitLens をインストールします。

### 6. **一般的な問題のトラブルシューティング**
- **Git が検出されない**: Git がインストールされ、システム PATH に追加されていることを確認します。インストール後、VS Code を再起動します。
- **認証エラー**: SSH キーを設定するか、GitHub/GitLab に個人アクセストークンを使用します。アカウントメニューで認証します。
- **マージ競合**: インライン競合解決ツールを使用するか、ファイルを手動で編集し、その後ステージしてコミットします。
- **パフォーマンスの低下**: 大規模なプロジェクトでは `git.autoRepositoryDetection` を無効にするか、最適化された Git 操作のために GitLens を使用します。

### 7. **ベストプラクティス**
- **頻繁にコミット**: 進捗を追跡するために、小さく論理的なコミットを行います。
- **説明的なメッセージを使用**: `<タイプ>(<スコープ>): <説明>` (例: `feat(auth): ログインエンドポイントを追加`) のような規約に従います。
- **定期的にプル**: 競合を最小限にするために、リモートリポジトリと同期を保ちます。
- **スタッシュのバックアップ**: スタッシュを適用する前に、重要な変更を上書きしないことを確認します。
- **拡張機能の活用**: 強化された機能のために GitLens、Git History、または Git Graph を使用します。

### 8. **追加リソース**
- **VS Code ドキュメント**: [VS Code でのバージョン管理](https://code.visualstudio.com/docs/editor/versioncontrol)
- **Git ドキュメント**: [git-scm.com/doc](https://git-scm.com/doc)
- **GitLens 拡張機能**: VS Code マーケットプレースで利用可能。
- **GitHub Pull Requests 拡張機能**: PR と issue を管理するため。

このガイドは、VS Code でのソース管理の基本と高度な機能をカバーし、Git に焦点を当てています。これらの手順とベストプラクティスに従うことで、エディタ内で直接バージョン管理ワークフローを効率的に管理できます。