---
audio: false
generated: true
image: false
lang: ja
layout: post
model: x-ai/grok-4-fast
title: Jenkinsにおけるロールベースアクセス制御
translated: true
type: note
---

### エンタープライズ Jenkins (CloudBees CI) におけるロールベースアクセス制御 (RBAC)

エンタープライズ Jenkins (CloudBees CI 搭載) は、CloudBees ロールベースアクセス制御 (RBAC) プラグインを使用して、きめ細かいロールベースの権限を実装します。これにより、管理者はカスタムロールを定義し、それらをユーザーまたはグループに割り当て、グローバル、フォルダ、またはジョブレベルでアクセスを制御できます。チームベースの分離には Folders プラグインと統合され、グループ管理には LDAP や Active Directory などの外部 ID プロバイダーをサポートします。権限は、ユーザーのグループに割り当てられたすべてのロールから集約され、ピン留めまたはフィルタリングされない限り、子オブジェクト (サブフォルダなど) に伝播します。

RBAC は Jenkins の組み込みのマトリックスベースの認証を置き換えるか強化し、システム全体へのアクセス権なしに管理を委任できるようにします。これは、**Jenkinsの管理 > セキュリティの管理 > 認証** で設定され、「ロールベースのマトリックス承認戦略」を選択します。

#### 主要な権限とアクセス権
権限は、ユーザーが Jenkins オブジェクト (ジョブ、フォルダ、エージェント、ビューなど) に対して実行できる個々のアクションを定義します。エンタープライズ Jenkins には、コアの Jenkins 権限に加えて、プラグインによって拡張された権限が含まれます。権限は階層的であり、一部の権限は他の権限を暗示します (例: `ジョブ/設定` は `ジョブ/読み取り` を暗示)。

以下に、ビルド/読み取りに焦点を当てた一般的な権限カテゴリと例の表を示します:

| カテゴリー          | 権限の例                                                                                  | 説明 |
|-------------------|-----------------------------------------------------------------------------------------|-------------|
| **読み取り/読み取り専用** | - `全体/読み取り`<br>- `ジョブ/読み取り`<br>- `ビュー/読み取り`<br>- `エージェント/読み取り` | 設定、ビルド、ログ、アーティファクトへの表示アクセスを許可します (変更は不可)。監査役や閲覧者に有用です。Extended Read Permission プラグインは、きめ細かい読み取り制御 (ビルド権限なしでワークスペースを表示するなど) を追加します。 |
| **ビルド/実行** | - `ジョブ/ビルド`<br>- `ジョブ/キャンセル`<br>- `ジョブ/ワークスペース`<br>- `ジョブ/読み取り (アーティファクト用)` | ビルドの開始、停止、またはビルド出力へのアクセスを許可します。特定のジョブ/フォルダにスコープを設定できます。 |
| **設定/変更** | - `ジョブ/設定`<br>- `ジョブ/作成`<br>- `ジョブ/削除`<br>- `フォルダ/設定` | ジョブパラメータの編集、トリガーの追加、子アイテムの管理を可能にします。 |
| **管理** | - `全体/管理`<br>- `全体/設定`<br>- `グループ/管理`<br>- `ロール/表示` | システム全体の制御、またはロール/グループの管理などの委任されたタスク。`全体/管理` はスーパーユーザー権限です。 |
| **その他**         | - `SCM/タグ`<br>- `認証情報/表示`<br>- `エージェント/起動`<br>- `スクリプト実行` | SCM 操作、認証情報へのアクセス、ノード管理、スクリプト実行。否定 (例: `-ジョブ/ビルド`) を使用して継承された権限を制限できます。 |

アクセス権は複数のスコープで制御されます:
- **グローバル**: インスタンス全体に適用されます (例: ルートレベルのグループ経由)。
- **オブジェクト固有**: ジョブ、フォルダ、エージェントで上書きされます (例: チームは自分のフォルダ内でのみビルド可能)。
- **伝播**: ロールは、「ピン留め」 (ローカルでの上書き) またはフィルタリング (例: ロールからプロジェクトを非表示) されない限り、自動的に子に継承されます。
- **暗示**: 特定の権限は、従属する権限を自動的に付与します (セキュリティのために最近のバージョンでは設定可能)。

管理者は、伝播を防ぐためにロールをフィルタリングできます (例: ジョブの **ロール > フィルター** 経由)。または、強制されたグローバルアクセスのためにフィルタリング不可のロールを使用できます。

#### ユーザーロールの管理
ロールは、事前に定義された権限のセットです:
1. **Jenkinsの管理 > ロールの管理** に移動します。
2. **ロールの追加** をクリックし、名前を付けます (例: "Developer")。
3. チェックボックスをオンにして権限を割り当てます (一括処理には「すべてチェック」または「すべてクリア」を使用)。 "anonymous" (認証されていないユーザー用) や "authenticated" (ログイン済みユーザー用) などのシステムロールは事前に組み込まれており、削除できません。
4. 保存します。ロールは「フィルタリング不可」としてマークでき、常にグローバルに適用されます。

ユーザーは、自分のグループに割り当てられたロールから権限を継承します。ユーザーに直接ロールを割り当てることはありません。スケーラビリティのため、グループベースです。

#### グループとユーザーへのロールの割り当て
グループはユーザーとロールを束ね、委任を容易にします:
1. オブジェクト (ルート、フォルダ、ジョブなど) で、**グループ > 新しいグループ** に移動します。
2. グループ名を入力します (例: "DevTeam")。
3. ロールをチェックして割り当てます (デフォルトでは子に伝播します。チェックを外すとローカルにピン留めされます)。
4. メンバーを追加します (下記参照)。
5. 保存します。

グループはネスト (サブグループなど) と外部統合 (LDAP グループなど) をサポートします。

#### 管理者がユーザーをグループに追加する方法
`グループ/管理` 権限を持つ管理者は、メンバーシップを編集できます:
1. グループの設定 (ルートまたはオブジェクトの **グループ** など) に移動します。
2. 「メンバー」セクションで、**ユーザーの追加** (外部/ネストされたグループの場合は **グループの追加**) をクリックします。
3. ユーザー ID (Jenkins のユーザーデータベースのユーザー名、LDAP DN、外部グループ名など) を入力します。ID を確認するには `/whoAmI` を使用します。
4. **追加** をクリックし、保存します。必要に応じてプロンプトで確認して削除します。
5. 一括/自動化の場合:
   - CLI を使用: `java -jar jenkins-cli.jar group-membership <オブジェクトパス> <グループ名> <ユーザーID>` (メンバーをリスト/設定)。
   - REST API: JSON ペイロードを使用して `/rbac/api/v1/groups/<グループ>/members` に POST。

ループを防ぐために、循環グループメンバーシップは避けてください。外部レルム (Active Directory など) の場合、**セキュリティの管理 > セキュリティレルム** で最初にセキュリティレルムを設定します。

この設定により、安全でスケーラブルな制御が確保されます。例えば、開発者は自分のフォルダ内で `ジョブ/ビルド` + `ジョブ/読み取り` を取得し、管理者はすべてを処理します。

[ロールベースアクセス制御でアクセスを制限し、管理を委任する](https://docs.cloudbees.com/docs/cloudbees-ci/latest/secure/rbac)