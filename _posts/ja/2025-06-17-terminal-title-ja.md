---
audio: false
generated: true
lang: ja
layout: post
title: GNOME端末カスタムディレクトリタイトル
translated: true
type: note
---

GNOME Terminalのタブタイトルを、デフォルトの形式（例: `lzw@lzw-MS:~/Projects/blog-server`）ではなく、現在のディレクトリのみ（例: `blog-server`）を表示するようにカスタマイズするには、ターミナルのプロンプトやタイトル設定を変更します。以下にその方法を説明します。

### GNOME Terminalのタブタイトルを現在のディレクトリのみ表示する手順

1. **Bash設定ファイルを編集する**:
   GNOME TerminalはデフォルトでBashシェルを使用し、タブタイトルは多くの場合`PS1`（プロンプト）や特定のタイトル設定コマンドから取得されます。タイトルをカスタマイズするには、`~/.bashrc`ファイルを変更します。

2. **ターミナルタイトルを変更する**:
   `~/.bashrc`にターミナルタイトルを現在のディレクトリに設定するコマンドを追加します。テキストエディタでファイルを開きます:

   ```bash
   nano ~/.bashrc
   ```

   ファイルの末尾に以下の行を追加します:

   ```bash
   # ターミナルタブタイトルを現在のディレクトリに設定
   case "$TERM" in
   xterm*|rxvt*)
       PS1="\[\e]0;\W\a\]$PS1"
       ;;
   *)
       ;;
   esac
   ```

   **説明**:
   - `\e]0;...`はターミナルタイトルを設定します。
   - `\W`は現在のディレクトリのベース名を表します（例: フルパス`~/Projects/blog-server`ではなく`blog-server`）。
   - `\a`はタイトル文字列を終了するベル文字です。
   - このコードは、ターミナルが`xterm`互換（GNOME Terminalは該当）かどうかをチェックしてから変更を適用します。

3. **変更を適用する**:
   ファイルを保存し、Bash設定をリロードします:

   ```bash
   source ~/.bashrc
   ```

   または、ターミナルを閉じて再度開いて変更を適用します。

4. **結果を確認する**:
   ディレクトリに移動し（例: `cd ~/Projects/blog-server`）、ターミナルタブタイトルが`blog-server`のみを表示することを確認します。

### 代替方法: GNOME Terminalプロファイル設定を変更する
さらにタイトルをカスタマイズしたい場合や`~/.bashrc`の編集を避けたい場合は、GNOME Terminalのプロファイル設定を使用できます:

1. GNOME Terminalを開きます。
2. **編集** > **設定**（またはバージョンによっては**ターミナル** > **設定**）に移動します。
3. 使用しているプロファイル（例: 「Unnamed」やカスタムプロファイル）を選択します。
4. **コマンド**タブに移動します。
5. **タイトルとコマンド**で以下を設定します:
   - **初期タイトル**: 空白のままにするか、一般的なタイトルを設定します。
   - **コマンド終了時**: **初期タイトルを保持**または**コマンド出力で置換**を選択します。
6. **コマンド**セクションで、**シェルの代わりにカスタムコマンドを実行する**を有効にし、コマンドを以下に設定します:

   ```bash
   bash --rcfile <(echo '. ~/.bashrc; PS1="\[\e]0;\W\a\]$PS1"')
   ```

   これにより、タイトルを現在のディレクトリに設定するカスタムプロンプトを使用するようターミナルが確実になります。

7. ダイアログを閉じ、新しいタブを開くかディレクトリに移動してテストします。

### 注意点
- Bash以外のシェル（例: Zsh）を使用する場合は、同等の設定ファイル（例: `~/.zshrc`）を変更し、構文を適宜調整する必要があります。Zshの場合、以下を追加できます:

  ```zsh
  precmd() { echo -ne "\e]0;${PWD##*/}\a" }
  ```

- タイトルが期待通りに更新されない場合は、ターミナルエミュレータが`xterm`互換であること、および他のスクリプト（例: `~/.bashrc`内のカスタム`PS1`設定）がタイトルを上書きしていないことを確認してください。
- すべてのターミナルで変更を永続的にするには、設定がユーザーのシェルプロファイルまたはGNOME Terminal設定にあることを確認してください。

これにより、`blog-server`のような現在のディレクトリ名のみを表示するタブタイトルが得られます。さらに説明が必要な場合はお知らせください！