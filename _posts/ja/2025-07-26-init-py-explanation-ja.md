---
audio: false
generated: true
lang: ja
layout: post
title: Pythonに__init__.pyが必要な理由
translated: true
type: note
---

### タイプミスの修正
おそらく `__int__.py` ではなく、`__init__.py`（「初期化」を意味する "initialization" の略）のことを指していると思われます。もし違う場合は、お気軽にご説明ください！`__init__.py` であると仮定して、以下に説明します。

### Python がディレクトリに `__init__.py` を必要とする理由
Pythonでは、ディレクトリがPythonファイルを含んでいるという理由だけで、自動的にモジュールやパッケージとして扱われるわけではありません。コードを再利用可能なパッケージ（基本的に関連するモジュールのディレクトリ）に整理するためには、Pythonはそのディレクトリに `__init__.py` ファイルを必要とします。その理由は以下の通りです：

- **ディレクトリをパッケージとしてマークする**: `__init__.py` が存在することで、Pythonはそのディレクトリをパッケージと見なします。これにより、`import mypackage.mymodule` のようなドット表記を使って、そのディレクトリからモジュールをインポートできるようになります。これがない場合（標準的なケースでは）、Pythonはそのディレクトリを通常のフォルダとして扱い、そこからのインポートを許可しません。

- **名前の衝突を防ぐ**: これにより、モジュールの意図しない隠蔽（シャドウイング）を回避できます。例えば、`string` という名前のディレクトリがある場合、`__init__.py` がないと、インポートパス内のPython組み込みの `string` モジュールを誤って隠してしまう可能性があります。

- **初期化とカスタマイズ**: このファイルは空でも構いません（単純なパッケージでは一般的です）が、パッケージがインポートされたときに実行されるコードを含めることもできます。これは、サブモジュールの自動インポートなどのセットアップ作業に便利です。さらに、`__init__.py` 内に `__all__` という特別な変数を定義して、誰かが `from mypackage import *` を実行したときに何がインポートされるかを制御できます（例: `__all__ = ['module1', 'module2']`）。

### 歴史的およびバージョン固有のコンテキスト
- この要件は、モジュールシステムを明示的かつ整理された状態に保つために、Pythonの初期から存在しています。
- Python 3.3から、「名前空間パッケージ」が導入され、`__init__.py` を必要としなくなりました。これにより、`pkgutil` や `importlib` などのツールを使用して、ファイルなしで（例えば配布目的のために）複数のディレクトリにパッケージを分割できるようになりました。ただし、これは高度な機能と見なされており、日常的な使用ケースのほとんどでは、通常のパッケージには `__init__.py` が依然として推奨され、広く使用されています。

Python 3.3以上を使用している場合は、名前空間パッケージを試すこともできますが、初心者にとっては `__init__.py` を使い続ける方がより簡単で分かりやすいです。

[Python Tutorial: Modules](https://docs.python.org/3/tutorial/modules.html#packages)