---
audio: false
generated: true
image: false
lang: ja
layout: post
model: x-ai/grok-4-fast
title: 巡回冗長検査によるエラー検出
translated: true
type: note
---

### CRCとは？

はい、正しい理解です！CRCは**巡回冗長検査**（Cyclic Redundancy Check）を表します。データリンク層（OSIモデルで同じネットワーク上のノード間配送について言及された通り）で広く使用されている誤り検出技術です。単純なパリティチェック（奇数/偶数の誤りを検出するために1ビットを追加するだけ）とは正確には異なりますが、**冗長ビット**（チェックサムまたは剰余と呼ばれる）を使用して、より広範囲の伝送誤りを検出します。簡単に説明しましょう。

#### CRCの仕組み（概要説明）
1. **設定**:
   - データをバイナリ数値（例：イーサネットフレームのペイロード）として想像してください。
   - 固定の「生成多項式」（事前に定義されたバイナリ値、例：CRC-4の場合1011）を選択します。これは数学の除数に似ています。
   - データは大きなバイナリ多項式として扱われ、**k個の冗長ビット**（ゼロ）が追加されます。ここでkは生成多項式の長さから1を引いた値です（例：4ビット生成多項式の場合3つのゼロ）。

2. **計算**:
   - 生成多項式を使用して、拡張データに対して**モジュロ2除算**（XORベースの除算、通常の数学のような借り/繰り上げなし）を実行します。
   - この除算からの剰余がCRCチェックサムになります。
   - この剰余を元のデータに追加し、フレーム全体を送信します。

3. **受信側で**:
   - 受信者は受信したフレーム（データ＋CRC）に対して同じモジュロ2除算を実行します。
   - 剰余が**ゼロ**の場合、データはほぼ誤りがないと見なされます。ゼロでない場合、誤りが発生したことになります（例：伝送中のビット反転）。
   - CRCが検出できるもの:
     - 単一ビット誤り
     - バースト誤り（生成多項式の長さまで）
     - ほとんどの複数ビット誤り（誤検出率は非常に低い）

多項式数学で円のように循環するため「巡回」と呼ばれ、ハードウェア実装（例：NICやスイッチ）に効率的です。

#### CRCとパリティチェックの比較
- **パリティチェック**: 非常に単純 — 1ビット追加（偶数/奇数パリティ）して**奇数個のビット誤りのみ検出**。偶数誤りやバースト誤りを見逃す。
- **CRC**: より高度 — 8〜32+ビットの冗長性を使用して、フレーム内の一般的な誤りを**ほぼ完全に検出**（例：イーサネットはCRC-32を使用）。データに対するより強力な「指紋」のようなもの。

#### イーサネットでの実世界の例
イーサネットフレームでは：
- データ（ペイロード）＋いくつかのヘッダー → 32ビットCRCを追加
- ワイヤ上でノイズがビットを反転させると、受信側のCRCチェックが失敗 → フレーム破棄、再送要求

CRCは高速で、ハードウェアコストが低く、イーサネット、PPP、Wi-Fi、さらにはストレージ（例：ハードドライブ）などのプロトコルで標準的に使用されています。

CRC計算のコードデモや、フレーミング/MACへの適合についてさらに詳しく知りたい場合は、お知らせください！

#### 参考文献
- [巡回冗長検査 - Wikipedia](https://ja.wikipedia.org/wiki/%E5%B7%A1%E5%9B%9E%E5%86%97%E9%95%B7%E6%A4%9C%E6%9F%BB)
- [CRCによる誤り検出 - GeeksforGeeks](https://www.geeksforgeeks.org/cyclic-redundancy-check-crc-introduction/)