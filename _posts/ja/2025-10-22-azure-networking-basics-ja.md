---
audio: false
generated: true
image: false
lang: ja
layout: post
model: x-ai/grok-4-fast
title: Azure 仮想ネットワーキングの基礎
translated: true
type: note
---

### Azure Virtual Networking の基礎

Azure は、**Virtual Network (VNet)** サービスを通じて、スケーラブルで安全なネットワーク環境を提供します。これは AWS の VPC に相当する中核サービスです。VNet は、VM、App Services、Kubernetes クラスターなどのリソースのために、Azure クラウド内にプライベートで分離された空間を作成します。以下では、AWS との類似点と相違点を、簡単に比較できるように構成して、主要コンポーネント（仮想ネットワーク、ゲートウェイ、サブネットなど）について説明します。

#### 仮想ネットワーク (VNet)
- **概要**: Azure における基盤となる分離されたネットワークで、リージョンにまたがり、リソースがプライベートに通信できるようにします。CIDR ブロック（例: 10.0.0.0/16）を使用してそのアドレス空間を定義します。
- **主な機能**:
  - リソースに対するデフォルトのアウトバウンドインターネットアクセス（AWS のようにオプトインではない）。
  - IPv4 と IPv6 をサポート。デフォルトで分離されている。
  - VNet 自体にコストはかからない。ゲートウェイなどの接続リソースに対して課金される。
- **AWS VPC との類似点**: どちらもリソースの分離、スケーリング、接続性のためのプライベートクラウドです。Azure VNet は自動的にアベイラビリティゾーン (AZ) にまたがります。AWS VPC は明示的な AZ 設定を必要とします。
- **使用理由**: 安全なリソース間通信、インターネットアクセス、オンプレミス接続のため。すべての Azure サブスクリプションで利用可能ですが、制御のためにカスタム VNet を作成します。
- **例**: AWS VPC と同様に、クラウド内の「私設地」です。境界はユーザーが設定しますが、Azure はアウトバウンドインターネットなどのデフォルトをいくつか処理します。

#### サブネット
- **概要**: VNet のアドレス空間を分割したもので、リソースがデプロイされます。各サブネットは VNet にスコープされ、リージョン内のすべての AZ にまたがることができます。
- **種類**:
  - **パブリックサブネット**: リソースがパブリック IP を持ち、インバウンド/アウトバウンドのインターネットアクセスが可能（Azure Load Balancer またはパブリックエンドポイント経由）。
  - **プライベートサブネット**: 直接的なパブリックアクセスなし。データベースや内部アプリに最適。
- **主な機能**:
  - CIDR で定義（例: 10.0.1.0/24）。
  - セグメンテーションのために VNet ごとに複数作成可能。それらの間のトラフィックはフィルタリング可能。
- **AWS サブネットとの類似点**: どちらもセキュリティと整理のためにネットワークを分割します。Azure は自動的に AZ にまたがるため HA が簡素化されます。AWS はサブネットを特定の AZ に関連付けます。
- **使用理由**: ワークロードを分離するため。例: フロントエンドをパブリックサブネットに、バックエンドをプライベートサブネットに。
- **例**: サブネットは VNet という都市の「地区」のようなもの。パブリックなものは通りへのアクセス（インターネット）があり、プライベートなものは壁の内側にあります。

#### ゲートウェイ
Azure のゲートウェイは外部接続を処理しますが、AWS とは異なるデフォルトの動作があります。

- **インターネットゲートウェイ相当**:
  - **概要**: 直接の IGW は存在しない。VNet リソースに対するアウトバウンドインターネットはデフォルトで有効。インバウンドにはパブリック IP または Load Balancer が必要。
  - **動作**: トラフィックは Azure のシステムルート（0.0.0.0/0 がインターネット向け）経由でルーティングされる。双方向アクセスにはパブリック IP を使用。
  - **AWS IGW との類似点**: どちらもパブリックインターネットを可能にするが、Azure はアウトバウンドがより「常時オン」。AWS は明示的なアタッチとルート設定を必要とする。
  - **使用理由**: Web アプリのシンプルな公開のため。基本的なルーティングは無料。

- **NAT Gateway**:
  - **概要**: プライベートサブネットからのアウトバウンド専用インターネット（例: VM 更新）のための、パブリックサブネット内のマネージドサービス。
  - **動作**: Elastic IP を変換で共有。AZ 間で高可用性。
  - **AWS NAT Gateway との類似点**: どちらもインバウンド公開なしで安全なアウトバウンドを提供。Azure のものはより統合され、デフォルトでスケーラブル。
  - **使用理由**: 一方向アクセスを許可しながらプライベートリソースを保護するため。コストは約 $0.045/時間 + データ転送量。

- **その他のゲートウェイ**:
  - **VPN Gateway**: オンプレミスへのサイト間またはポイント対サイト VPN 用（AWS VGW と同様）。
  - **ExpressRoute Gateway**: オンプレミスへのプライベートな高帯域幅リンク用（AWS Direct Connect と同様）。

#### その他の関連コンポーネント（「など」）
- **ルートテーブル**: サブネットのトラフィックフローを制御（例: インターネットまたはピアリングされた VNet へ）。システムデフォルトが存在。カスタムルートテーブルは特定のルートでこれを上書き。AWS ルートテーブルと類似するが、Azure はオンプレミスからの BGP ルートを動的に伝播する。
- **ネットワーク セキュリティ グループ (NSG)**: サブネットまたはリソース用のステートフルファイアウォール。IP/ポート/プロトコルによるルールを持つ。AWS のセキュリティグループ（インスタンスレベル、ステートフル）と NACL（サブネットレベル、ただし Azure のはステートフル）の組み合わせに類似。論理的なタグ付けには Application Security Group を使用。
- **VNet ピアリング**: プライベートトラフィックのために VNet（同じ/異なるリージョン/アカウント）を接続。AWS VPC ピアリングと同様。
- **サービス エンドポイント / プライベート リンク**: インターネットを経由せずに Azure サービス（例: Storage）への安全なプライベートアクセスを提供。AWS VPC エンドポイントに類似。
- **ネットワーク仮想アプライアンス**: VNet 内の VM ベースのファイアウォールまたはルーター。AWS Network Firewall と同様。

#### 全体の構成
1.  CIDR で VNet を作成。
2.  AZ にまたがるサブネット（パブリック/プライベート）を追加。
3.  リソースはデフォルトでアウトバウンドインターネットを取得。インバウンドにはパブリック IP または Load Balancer を追加。
4.  プライベートなアウトバウンドには NAT Gateway を使用。
5.  トラフィック制御のためにルートテーブルと NSG を適用。
6.  ハイブリッド構成のために VNet をピアリングするかゲートウェイを追加。

Azure のモデルは、より迅速なセットアップのためにデフォルト（例: アウトバウンドインターネット）を重視していますが、AWS はより細かいオプトインを提供します。どちらもセキュリティと回復性を優先します。

ハンズオンでは、Azure ポータルの VNet ウィザードを試してみてください。

[Azure Virtual Network の概要](https://learn.microsoft.com/ja-jp/azure/virtual-network/virtual-networks-overview)