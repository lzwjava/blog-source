---
audio: false
generated: true
image: false
lang: ja
layout: post
model: x-ai/grok-code-fast-1
title: Gitフェッチとプルーン概要
translated: true
type: note
---

### `git fetch`とは？
`git fetch`は、リモートリポジトリからの最新の変更（コミット、ブランチ、タグ）をダウンロードしますが、現在のブランチにはマージしません。ローカルのリモート追跡ブランチ（例: `origin/main`）をリモートの状態に合わせて更新します。これによりローカルリポジトリは同期されますが、作業ファイルやローカルブランチは変更されません。

### `--prune`オプションとは？
`--prune`フラグは、リモート上に存在しなくなったリモート追跡ブランチをGitに削除するよう指示します。例えば、誰かがGitHubでブランチを削除した場合、プルーンしない限りローカルのコピー（例: `origin/old-branch`）は残り続けます。

### `git fetch --prune`の動作
- **実行**: `git fetch --prune`（または短縮形の `git fetch -p`）として実行します。フェッチとプルーンを1つのコマンドに結合しています。
- **ステップ**:
  1. Gitはリモートに接続し、更新をフェッチします。新しいコミット、追加されたブランチ、削除されたブランチを反映するようにリモート追跡ブランチを更新します。
  2. 古くなったリモート追跡ブランチ（リモートに対応物がないもの）をスキャンし、ローカルで削除します。
- **結果**: ローカルリポジトリは最新かつクリーンな状態に保たれます。マージは発生せず、読み取り専用の同期です。

### 実践例
以下の状態を想定します:
- ローカルブランチ: `main`（`origin/main`を追跡）
- 古くなったローカルのリモート追跡ブランチ: `origin/deleted-feature`

`origin`に対して`git fetch --prune`を実行すると:
- 新しいコミットがあればフェッチします。
- `origin/deleted-feature`を削除します（リモート上で削除されたため）。
- ローカルブランチには影響しません。

### 意味すること
これは「最新のリモートデータを取得し、ローカルリポジトリ内の古い参照をクリーンアップする」ことを意味します。古いブランチ参照による混乱を避けるために定期的に使用してください。`git fetch`に続けて`git remote prune origin`を実行するのと同等ですが、便利に1つに結合されています。安全のため、リモート追跡ブランチにのみ影響し、自身の作業内容には影響しません。