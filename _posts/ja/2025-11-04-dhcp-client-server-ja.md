---
audio: false
generated: true
image: false
lang: ja
layout: post
model: x-ai/grok-4-fast
title: DHCPクライアントとサーバーの役割
translated: true
type: note
---

いいえ、それはよくある混同ですが、DHCPはクライアントとルーターの両方で同じものを「実行」する必要はありません。これはクライアント-サーバープロトコルであり、それぞれに異なる役割があります。簡単に説明しましょう。

### DHCPの概要
DHCP（Dynamic Host Configuration Protocol）は、ネットワーク上のデバイスにIPアドレスやその他のネットワーク設定（サブネットマスク、ゲートウェイ、DNSなど）を自動的に割り当てます。手動設定を不要にします。

### 典型的な設定での役割
- **ルーター（またはDHCPサーバー）**: **DHCPサーバー**ソフトウェアを実行します。管理するプールからIPアドレスを割り当てる「親玉」です。ほとんどの家庭/ SOHOルーター（TP-Link、Netgearなど）にはこれがデフォルトで組み込まれ、有効になっています。
- **クライアント（例：ノートPC、スマートフォン、PC）**: **DHCPクライアント**（Linuxの`dhclient`やWindowsの自動IP設定など、OSに組み込まれている）を実行します。これはサーバーにIPを要求しますが、他のデバイスにIPを提供することはありません。

両者はハンドシェイクに不可欠ですが、同じ「DHCP」プロセスを実行しているわけではありません。一方は提供し、一方は要求します。

### 動作の流れ（基本）
1.  **クライアントが「DISCOVER」をブロードキャスト**: 新しいデバイスがネットワークに参加し、「ねえ、誰かIPアドレスくれない？」と叫びます。
2.  **サーバー（ルーター）が「OFFER」を提供**: 「もちろん、利用可能なIPと設定をどうぞ」
3.  **クライアントが「REQUEST」を要求**: 「それをお願いします」
4.  **サーバーが「ACK」で確認**: 「了解。それを使ってください」

ルーターのDHCPサーバーがオフの場合、クライアントは静的IPか別のサーバー（Pi-holeやエンタープライズ設定など）が必要になるかもしれません。

### 一般的なシナリオ

| 設定 | DHCPサーバーの場所 | クライアントの動作 |
|-------|----------------------|-----------------|
| **ホームネットワーク** | ルーター（有効） | すべてを自動設定 |
| **ルーターDHCPなし** | 手動/静的IPまたは外部サーバー | 応答がない場合、クライアントはAPIPA（169.254.x.x）にフォールバック |
| **エンタープライズ** | 専用のDHCPサーバー（ルーター以外） | 同じクライアント要求プロセス |

特定の問題（例：「デバイスがIPを取得できません」）をトラブルシューティングしている場合は、詳細を共有してください。デバッグをお手伝いします！さらに深く読みたい場合は、公式RFCを参照してください: [RFC 2131: Dynamic Host Configuration Protocol](https://datatracker.ietf.org/doc/html/rfc2131)。