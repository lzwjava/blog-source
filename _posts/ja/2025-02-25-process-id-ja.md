---
audio: false
generated: true
lang: ja
layout: post
title: 実行中のサーバーのプロセスID (PID)
translated: true
---

WebSphere Liberty Profile (WLP) バージョン 24.0.0.9 を使用しており、実行中のサーバーのプロセス ID (PID) を見つける必要がありますが、期待される `.pid` ファイルが `<WLP_HOME>/usr/servers/<serverName>/workarea/<serverName>.pid` に存在しないことを指摘しています。以下に、代替手法を使用して PID を特定する方法を示します。

標準的な手順は、サーバーが起動した後に Liberty が PID を `.pid` ファイルに保存することを前提としています。しかし、このファイルが存在しない場合（設定の問題、起動失敗、異なるインストール設定などの原因で）は、サーバーが実行中であることを前提に、システムツールを使用して PID を特定することができます。以下に、Unix 系システム（例：Linux）で PID を特定するための信頼性の高い手順を示します。Windows を使用している場合は、お知らせください。それに応じて手順を調整します。

### ステップ 1: サーバーが実行中であることを確認する
PID を検索する前に、Liberty サーバーがアクティブであることを確認してください。以下の方法で確認できます：
- **ログを確認する**: `<WLP_HOME>/usr/servers/<serverName>/logs/console.log` または `messages.log` に、起動メッセージ（例："Server <serverName> started."）を確認します。
- **サーバーにアクセスする**: ウェブアプリケーションをホストしている場合、ブラウザからアクセスしてみてください（例：`http://localhost:<port>`）。

サーバーが実行中でない場合、PID は存在しないため、このステップは重要です。

### ステップ 2: システムコマンドを使用して PID を特定する
`.pid` ファイルが利用できない場合、コマンドラインツールを使用して、Liberty サーバーに関連する Java プロセスを特定できます。Liberty は Java プロセスとして実行されるため、Java またはネットワークプロセスをリストアップするツールが役立ちます。以下に、2 つの効果的な方法を示します：

#### メソッド 1: `ps` を使用して Java プロセスをリストアップする
`ps` コマンドは実行中のプロセスを表示します。Java プロセスをフィルタリングするには、以下を実行します：
```bash
ps -ef | grep java
```
これにより、コマンドラインに "java" が含まれるすべてのプロセスがリストアップされます。出力は以下のようになります：
```
user  12345  1  0  10:00 ?  00:00:00 /path/to/java -jar /path/to/liberty/wlp/bin/tools/ws-server.jar <serverName>
```
- 2 番目の列（例：`12345`）が PID です。
- "liberty"、"wlp"、または `<serverName>`（例：`defaultServer`）を含む行を確認して、正しいプロセスを特定します。

さらに絞り込むには、サーバー名を知っている場合は以下を試してください：
```bash
ps -ef | grep <serverName>
```

#### メソッド 2: `jps`（Java 特有のツール）を使用する
Java Development Kit (JDK) がインストールされている場合、`jps` コマンドは Java プロセスをリストアップするためのより簡単な方法です。以下を実行します：
```bash
jps -l
```
出力は以下のようになります：
```
12345 com.ibm.ws.kernel.boot.Launcher
```
- 1 番目の列（例：`12345`）が PID です。
- Liberty に関連するクラス名（例：`com.ibm.ws.kernel.boot.Launcher`）を確認してください。これは通常、Liberty の起動に関連付けられています。

この方法は、`ps` よりも Java プロセスのみを表示するため、よりクリーンです。

### ステップ 3: オプション - ポート番号を使用する（知っている場合）
Liberty サーバーがリッスンしているポート番号（例：`server.xml` またはログから）を知っている場合、`netstat` を使用して PID を特定できます：
```bash
netstat -anp | grep <port_number>
```
出力には以下のようなものが含まれます：
```
tcp  0  0  0.0.0.0:<port_number>  0.0.0.0:*  LISTEN  12345/java
```
- ポート情報の後に PID（例：`12345`）が表示されます。

### 推奨
- **推奨方法**: JDK が利用可能な場合は、`jps -l` を使用してください。これは Java プロセスに特化しており、Liberty サーバーを明確に特定する可能性が高いです。
- **代替方法**: `jps` が利用できない場合は、`ps -ef | grep java` を使用し、コマンドの詳細を確認して手動で Liberty プロセスを特定してください。

### トラブルシューティングのヒント
どちらのコマンドも Liberty プロセスを見つけられない場合：
- サーバーが実行中であることを再確認してください（ステップ 1）。
- `<WLP_HOME>` と `<serverName>` のパスを確認し、プロセスが予期しないディレクトリを参照しているかどうかを確認してください。
- サーバーを `server start <serverName>` で再起動し、`.pid` ファイルが表示されるか、起動ログにヒントが含まれているかどうかを確認してください。

これらの手順を使用して、`.pid` ファイルが存在しない場合でも、実行中の Liberty 24.0.0.9 サーバーの PID を特定することができます。さらにサポートが必要な場合は、お知らせください！