---
audio: false
generated: true
image: false
lang: zh
layout: post
model: anthropic/claude-4.5-sonnet
title: TCP与UDP连接差异
translated: true
type: note
---

你的直觉完全正确！让我来详细说明关键区别：

## TCP 连接

当 TCP 连接**建立**时（通过三次握手），双方都会维护关于彼此的状态信息：

**每方存储的内容：**
- **远程 IP 地址和端口**（我正在与谁通信？）
- **本地 IP 地址和端口**（我的端点）
- **序列号**（用于排序和可靠性）
- **窗口大小**（用于流量控制）
- **连接状态**（已建立、正在关闭等）

所以没错，"已连接"意味着客户端和服务器都分配了内存和资源来追踪这个特定的会话。它们彼此了解，并维持这种关系直到连接关闭。

## UDP - 无连接

UDP 是**无连接的**。没有握手过程，没有存储状态：

- 客户端只是向某个 IP:端口发送数据包
- 服务器接收并处理它
- **双方都不维护任何关系信息**
- 每个数据包都是独立的
- 非常轻量 - 每个"连接"没有内存开销

## 关键区别

**TCP：** "你好，我是客户端 X。让我们开始对话。这是我的信息，我也有你的信息。我们现在已连接。" → **有状态**

**UDP：** "这是发给地址 Y:端口 Z 的数据包" → 发射后不管 → **无状态**

你完全正确，UDP 确实更加轻量，因为它不需要维护连接状态、管理缓冲区或追踪确认信息。代价是 TCP 提供了可靠性、排序和流量控制，而 UDP 提供了速度和简洁性。