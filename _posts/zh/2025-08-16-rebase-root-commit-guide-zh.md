---
audio: false
generated: true
image: false
lang: zh
layout: post
title: Rebase根提交操作指南
translated: true
type: note
---

`git rebase --root` 是一种特殊的变基操作，允许你重写仓库的**初始提交**。常规的 `git rebase` 需要基于某个父提交进行变基，而 `--root` 选项会将根提交（首个无父节点的提交）也纳入重写范围。

实际应用场景如下：

### 1. 标准变基与根变基对比

* **常规 `git rebase`**：将提交重新应用到另一分支或提交之上，改变选定基准点之后的历史。
* **`git rebase --root`**：直接重写根提交本身。你可以拆分它、与后续提交压缩合并，甚至完全替换它。

### 2. 典型使用场景

* **修改首次提交信息**
  若需修改项目的初始提交信息，可运行：
  ```bash
  git rebase --root -i
  ```
  并将首个提交的 `pick` 改为 `reword`。

* **将根提交与后续提交压缩**
  例如，若初始提交仅为脚手架文件（如 `README`），可将其与后续提交压缩以简化历史。

* **拆分根提交**
  如果初始提交包含内容过多（如完整的项目代码转储），可在交互式变基中将其拆分为多个逻辑提交。

### 3. 内部运行机制

* Git 会为根提交创建临时“虚拟”父提交，以便从头开始应用变基操作。
* 每个提交都会基于新的仓库起点重新演放。
* 这本质上是在重写仓库历史的基础层。

### 4. 操作示例

```bash
git rebase --root -i
```

你将看到如下编辑界面：
```
pick a1b2c3d 初始提交
pick d4e5f6g 新增功能 A
pick h7i8j9k 新增功能 B
```

此时你可以：
* 将根提交的 `pick` 改为 `reword` → 修改其提交信息
* 将 `pick` 改为 `squash` → 将根提交与后续提交合并
* 按需重新排序或拆分提交

### ⚠️ 重要提示

`git rebase --root` 会**重写历史记录**，因此仅适用于未推送/未共享的分支。若已推送，需后续执行强制推送。在共享分支上进行此操作可能导致协作者的历史记录混乱与冲突。

---

需要我通过**具体的历史记录示例**（含提交哈希值）来展示 `git rebase --root` 如何改变提交日志吗？