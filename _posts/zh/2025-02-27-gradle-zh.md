---
audio: false
generated: true
lang: zh
layout: post
title: Gradle：构建自动化工具
translated: true
type: note
---

Gradle 是一款强大的构建自动化工具，常用于 Java、Kotlin 和 Android 项目，但其灵活性也适用于其他语言。以下是为初学者准备的 Gradle 入门指南：

---

### 1. **安装 Gradle**
使用 Gradle 前需先安装：
- **Mac/Linux (使用 Homebrew)**：
  在终端运行 `brew install gradle`
- **Windows (或手动安装)**：
  从 [gradle.org](https://gradle.org/install/) 下载 Gradle 二进制文件
  解压至指定目录（如 `C:\Gradle` 或 `/opt/gradle`）
  将 Gradle 的 `bin` 目录（如 `C:\Gradle\gradle-8.x\bin`）添加到系统 PATH 环境变量
- **验证安装**：
  打开终端运行 `gradle -v`，应显示 Gradle 版本信息

若项目已包含 **Gradle Wrapper**（共享项目常见），无需全局安装 Gradle，直接在项目目录使用 `./gradlew` (Linux/Mac) 或 `gradlew.bat` (Windows) 即可

---

### 2. **理解 Gradle 基础**
Gradle 使用 **Groovy** 或 **Kotlin** 脚本（通常是 `build.gradle` 或 `build.gradle.kts`）定义项目构建方式：
- **项目**：一个 Gradle 构建可包含一个或多个项目（如单应用或多模块项目）
- **任务**：Gradle 执行的操作，如 `compileJava`、`test` 或 `build`
- **依赖**：Gradle 管理项目所需的库（可从 Maven Central 或 Google 仓库获取）

---

### 3. **创建简单 Gradle 项目**
通过基础 Java 项目体验 Gradle：
1. **创建项目文件夹**：
   新建目录（如 `my-gradle-project`）并在终端中进入该目录
2. **初始化 Gradle**：
   运行 `gradle init`
   根据提示选择 "application"、"Java" 和构建脚本语言（Groovy 或 Kotlin）
   这将生成包含 `build.gradle` 文件和示例代码的基础结构
3. **查看生成的 `build.gradle`**：
   ```groovy
   plugins {
       id 'java'
       id 'application'
   }

   repositories {
       mavenCentral()
   }

   dependencies {
       implementation 'org.slf4j:slf4j-api:1.7.36'
   }

   application {
       mainClass = 'com.example.App'  // 根据实际包路径调整
   }
   ```
   - `plugins`：添加 Java 支持和应用运行能力
   - `repositories`：Gradle 查找依赖的仓库（如 Maven Central）
   - `dependencies`：项目使用的库
   - `application`：指定运行的主类

4. **运行任务**：
   - 构建项目：`gradle build`
   - 运行应用：`gradle run`
   - 查看可用任务：`gradle tasks`

---

### 4. **常用 Gradle 命令**
核心命令列表：
- `gradle build`：编译并打包项目
- `gradle clean`：清理 `build` 目录重新构建
- `gradle test`：运行项目测试
- `gradle dependencies`：显示依赖关系树
- `./gradlew <task>`：使用项目专属的 Gradle Wrapper 而非全局安装版本

---

### 5. **添加依赖**
在 `build.gradle` 中添加外部库，例如添加 Gson（JSON 解析库）：
```groovy
dependencies {
    implementation 'com.google.code.gson:gson:2.10.1'
}
```
运行 `gradle build` 即可自动下载

---

### 6. **自定义构建**
可在 `build.gradle` 中添加自定义任务或调整配置。以下为自定义任务示例：
```groovy
task hello {
    doLast {
        println 'Hello, Gradle!'
    }
}
```
通过 `gradle hello` 运行该任务

---

### 7. **使用 Gradle Wrapper（团队协作推荐）**
Gradle Wrapper 可确保所有成员使用相同版本的 Gradle：
- 生成 Wrapper：`gradle wrapper`
- 使用方式：`./gradlew build`（Windows 系统使用 `gradlew.bat build`）

---

### 8. **实用技巧**
- **文档查阅**：参考 [Gradle 官方文档](https://docs.gradle.org/current/userguide/userguide.html) 获取深度指南
- **缓存机制**：Gradle 会缓存依赖和任务输出，后续构建速度将提升
- **插件生态**：探索各类插件（如 Spring Boot、Android 或代码质量检测）以扩展功能

---

### 示例：构建运行 Java 应用
若 `src/main/java/com/example/App.java` 内容如下：
```java
package com.example;
public class App {
    public static void main(String[] args) {
        System.out.println("Hello from Gradle!");
    }
}
```
运行 `gradle run` 即可查看输出结果

---

如需针对特定 Gradle 任务、项目配置或问题排查获得帮助，请随时告知！您正在开发什么类型的项目呢？