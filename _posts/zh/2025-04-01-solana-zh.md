---
audio: false
generated: true
lang: zh
layout: post
title: Solana
translated: true
type: note
---

Solana 是一款专为可扩展性和高速处理而设计的高性能区块链，旨在支持全球大规模应用。它通过八项核心技术的独特组合实现这一目标。以下是 Solana 技术原理的详细解析：

**核心原则与目标：**

* **高吞吐量：** Solana 目标实现每秒数万笔交易的处理能力，远高于许多其他区块链。
* **低费用：** 保持低廉的交易成本是实现普惠应用的关键目标。
* **可扩展性：** 其架构设计确保在用户增长时仍能保持性能，无需牺牲效率。

**"八大创新"：**

Solana 通过一系列相互关联的技术实现其高性能，这些技术常被统称为"八大创新"：

1.  **历史证明（PoH）：** 这项关键创新相当于一个去中心化时钟。
    * **工作原理：** PoH 是一种高频可验证延迟函数（VDF）。VDF 需要按顺序执行特定数量的计算步骤，其结果可被高效验证。
    * **Solana 的实现：** 领导者节点（负责提议下一个区块的节点）按顺序计算 SHA-256 哈希值，形成可验证事件时间间隔的历史记录。
    * **优势：** PoH 提供了无需信任的事件顺序验证，无需依赖单个节点的时间戳，显著降低了共识所需的通信开销。

2.  **塔式BFT：** Solana 的共识机制是 PoH 与权益证明（PoS）变体——塔式拜占庭容错（BFT）的混合方案。
    * **工作原理：** 验证者对账本状态进行投票。PoH 作为全局时钟，使验证者能就记录在 PoH 序列中的事件时间和顺序达成一致。
    * **罚没机制：** 对违背 PoH 历史记录的验证者进行惩罚，激励其保持诚实。
    * **优势：** 塔式 BFT 利用 PoH 提供的时间同步特性，实现兼具高容错性的快速共识。

3.  **涡轮（Turbine）：** 这是 Solana 的区块传播协议。
    * **工作原理：** 领导者将区块分解为最多 64,000 个数据包，而非将完整区块发送给每个节点。每个验证者从领导者处接收区块的一小部分，随后将其传播给相邻节点。
    * **优势：** 显著降低单个验证者的带宽需求，使网络能在不造成区块传播瓶颈的前提下扩展至更多节点。

4.  **湾流（Gulf Stream）：** 这是 Solana 的无内存池交易转发协议。
    * **工作原理：** 验证者将接收到的交易直接转发给预期下一任领导者，而非等待交易在内存池中打包。这使得下任领导者可在当前区块最终确认前就开始执行交易。
    * **优势：** 通过提前处理交易大幅缩短交易确认时间。

5.  **海平面（Sealevel）：** 这是 Solana 的并行交易处理引擎。
    * **工作原理：** Solana 能在多个 GPU 核心上并行处理数千笔交易。交易需声明其读写账户范围，Sealevel 据此识别无关联交易并并发执行。
    * **优势：** 这是实现高吞吐量的关键因素，可高效利用硬件资源。

6.  **流水线（Pipelining）：** Solana 通过将交易处理流程划分为不同阶段（获取、验证、执行、记录），并对不同交易重叠这些阶段来优化处理流水线。
    * **工作原理：** 当一组交易正在执行时，下一组交易可被获取，前一组交易可被记录，形成连续处理流。
    * **优势：** 最大化效率并减少处理流水线的空闲时间。

7.  **云裂（Cloudbreak）：** 这是 Solana 的水平扩展账户数据库。
    * **工作原理：** Solana 的状态（所有账户及其数据）存储在名为 Cloudbreak 的水平扩展数据库中，实现高效的网络读写操作。
    * **优势：** 该架构可处理海量账户和高并发数据访问需求。

8.  **归档者（Archivers）：** 这是 Solana 的链下账本存储解决方案。
    * **工作原理：** 随着时间推移，区块链账本数据急剧增长。为保持网络效率，Solana 使用归档者节点网络存储历史账本数据。验证者定期将部分账本发送至归档者，并通过复制证明（PoR）确保数据完整性和可用性。
    * **优势：** 减轻验证者的存储负担，使其专注于处理新交易。

**交易处理流程（简化版）：**

1.  用户提交交易
2.  验证者将交易转发给预期下一任领导者（湾流协议）
3.  领导者根据历史证明序列对交易排序
4.  领导者节点在多核架构上并行执行交易（海平面引擎）
5.  领导者创建包含有序交易、执行结果和 PoH 序列的区块
6.  区块被分解为数据包传播给验证者（涡轮协议）
7.  验证者验证区块并对其有效性投票（塔式 BFT），使用 PoH 序列作为可靠时间戳
8.  获得超多数验证者确认后，区块被最终确认并加入区块链

**关键技术特性：**

* **Rust 编程语言：** Solana 核心软件采用 Rust 编写，该语言以高性能、安全性和并发特性著称，非常适合构建高性能区块链基础设施。
* **libp2p：** Solana 使用 libp2p 网络库实现节点间的点对点通信。

**与其他区块链的对比：**

与许多按顺序处理交易的区块链不同，Solana 的并行处理能力（海平面引擎）和去中心化时钟（PoH）是实现其高吞吐量和低延迟的关键差异化特性。其他区块链可能更关注安全性或去中心化程度的权衡，而 Solana 优先考虑性能优化。

**优势与权衡：**

* **优势：** 极快的交易速度、低廉的交易费用、高可扩展性潜力
* **权衡：** 复杂架构可能导致验证者硬件要求更高。与历史更悠久的区块链相比，过去曾存在关于去中心化程度的讨论，不过该网络正在持续演进完善。

综上所述，Solana 通过实施一系列创新技术实现高性能，这些技术协同优化了从时间同步到交易执行、数据传播的区块链全流程。