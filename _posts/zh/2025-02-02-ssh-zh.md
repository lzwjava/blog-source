---
audio: false
lang: zh
layout: post
title: SSHéš§é“ä»£ç†
translated: true
---

```bash
% GIT_TRACE=1 GIT_CURL_VERBOSE=1 git push
21:32:14.216308 exec-cmd.c:139          trace: ä» Darwin çš„å †æ ˆä¸­è§£æå¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„: /Applications/Xcode.app/Contents/Developer/usr/bin/git
21:32:14.216594 exec-cmd.c:238          trace: è§£æçš„å¯æ‰§è¡Œæ–‡ä»¶ç›®å½•: /Applications/Xcode.app/Contents/Developer/usr/bin
21:32:14.216949 git.c:460               trace: å†…ç½®å‘½ä»¤: git push
21:32:14.218655 run-command.c:655       trace: è¿è¡Œå‘½ä»¤: unset GIT_PREFIX; ssh git@github.com 'git-receive-pack '\''lzwjava/lzwjava.github.io.git'\'''
Everything up-to-date

æˆ‘åœ¨ `git push` æ“ä½œä¸­é‡åˆ°äº†å»¶è¿Ÿï¼Œç‰¹åˆ«æ˜¯åœ¨ `ssh git@github.com` é˜¶æ®µã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘é…ç½®äº† SSH ä½¿ç”¨ä»£ç†ã€‚

è¦ä½¿ç”¨ `corkscrew` è¿›è¡Œ SSH é€šé“ï¼Œä½ é¦–å…ˆéœ€è¦å®‰è£…å®ƒã€‚åœ¨ macOS ä¸Šï¼Œä½ å¯ä»¥ä½¿ç”¨ Homebrew è¿è¡Œä»¥ä¸‹å‘½ä»¤: `brew install corkscrew`ã€‚

`~/.ssh/config`:

```bash
Host *
    UseKeychain yes
    AddKeysToAgent yes
    IdentityFile ~/.ssh/id_rsa
    ProxyCommand corkscrew localhost 7890 %h %p
```

æ—¥å¿—:

```bash
% ssh root@138.201.174.0 -vvv
ğŸš€ **æ£€æµ‹åˆ°ä»£ç†è®¾ç½®:**
   - HTTP_PROXY: http://127.0.0.1:7890
   - HTTPS_PROXY: http://127.0.0.1:7890

OpenSSH_9.8p1, LibreSSL 3.3.6
debug1: è¯»å–é…ç½®æ•°æ® /Users/lzwjava/.ssh/config
debug1: /Users/lzwjava/.ssh/config ç¬¬ 1 è¡Œ: åº”ç”¨æ‰€æœ‰é€‰é¡¹
debug1: è¯»å–é…ç½®æ•°æ® /etc/ssh/ssh_config
debug1: /etc/ssh/ssh_config ç¬¬ 21 è¡Œ: åŒ¹é…åˆ°çš„æ–‡ä»¶ä¸ºç©º
debug1: /etc/ssh/ssh_config ç¬¬ 54 è¡Œ: åº”ç”¨æ‰€æœ‰é€‰é¡¹
debug2: canonicalize: 138.201.174.0 æ˜¯ä¸€ä¸ªåœ°å€
debug3: æ‰©å±• UserKnownHostsFile '~/.ssh/known_hosts' -> '/Users/lzwjava/.ssh/known_hosts'
debug3: æ‰©å±• UserKnownHostsFile '~/.ssh/known_hosts2' -> '/Users/lzwjava/.ssh/known_hosts2'
debug1: Authenticator provider $SSH_SK_PROVIDER æœªè§£æ; ç¦ç”¨
debug3: æ¸…é™¤ channel_clear_timeouts
debug1: æ‰§è¡Œä»£ç†å‘½ä»¤: exec corkscrew localhost 7890 138.201.174.0 22
debug1: id_rsa æ–‡ä»¶ç±»å‹ 0
debug1: id_rsa-cert æ–‡ä»¶ç±»å‹ -1
debug1: å®¢æˆ·ç«¯ç‰ˆæœ¬å­—ç¬¦ä¸² SSH-2.0-OpenSSH_9.8
debug1: è¿œç¨‹åè®®ç‰ˆæœ¬ 2.0, è¿œç¨‹è½¯ä»¶ç‰ˆæœ¬ OpenSSH_9.6p1 Ubuntu-3ubuntu13.5
debug1: compat_banner: åŒ¹é… OpenSSH_9.6p1 Ubuntu-3ubuntu13.5 pat OpenSSH* compat 0x04000000
debug2: è®¾ç½® O_NONBLOCK fd 5
debug2: è®¾ç½® O_NONBLOCK fd 4
debug1: è®¤è¯åˆ° 138.201.174.0:22 ä½œä¸º 'root'
debug3: record_hostkey: æ‰¾åˆ° key ç±»å‹ ED25519 æ–‡ä»¶ /Users/lzwjava/.ssh/known_hosts:164
debug3: record_hostkey: æ‰¾åˆ° key ç±»å‹ RSA æ–‡ä»¶ /Users/lzwjava/.ssh/known_hosts:165
debug3: record_hostkey: æ‰¾åˆ° key ç±»å‹ ECDSA æ–‡ä»¶ /Users/lzwjava/.ssh/known_hosts:166
debug3: load_hostkeys_file: å·²ä» 138.201.174.0 åŠ è½½ 3 ä¸ªå¯†é’¥
debug1: fopen /Users/lzwjava/.ssh/known_hosts2: No such file or directory
debug1: fopen /etc/ssh/ssh_known_hosts: No such file or directory
debug1: fopen /etc/ssh/ssh_known_hosts2: No such file or directory
debug3: order_hostkeyalgs: æœ‰åŒ¹é…çš„æœ€ä½³ä¼˜å…ˆçº§å¯†é’¥ç±»å‹ ssh-ed25519-cert-v01@openssh.com, ä½¿ç”¨ HostkeyAlgorithms å­—é¢å€¼
debug3: å‘é€æ•°æ®åŒ…: ç±»å‹ 20
debug1: å‘é€ SSH2_MSG_KEXINIT
debug3: æ¥æ”¶æ•°æ®åŒ…: ç±»å‹ 20
debug1: æ¥æ”¶åˆ° SSH2_MSG_KEXINIT
debug2: æœ¬åœ°å®¢æˆ·ç«¯ KEXINIT æè®®
debug2: KEX ç®—æ³•: sntrup761x25519-sha512@openssh.com,curve25519-sha256,curve25519-sha256@libssh.org,ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,diffie-hellman-group-exchange-sha256,diffie-hellman-group16-sha512,diffie-hellman-group18-sha512,diffie-hellman-group14-sha256,ext-info-c,kex-strict-c-v00@openssh.com
debug2: ä¸»æœºå¯†é’¥ç®—æ³•: ssh-ed25519-cert-v01@openssh.com,ecdsa-sha2-nistp256-cert-v01@openssh.com,ecdsa-sha2-nistp384-cert-v01@openssh.com,ecdsa-sha2-nistp521-cert-v01@openssh.com,sk-ssh-ed25519-cert-v01@openssh.com,sk-ecdsa-sha2-nistp256-cert-v01@openssh.com,rsa-sha2-512-cert-v01@openssh.com,rsa-sha2-256-cert-v01@openssh.com,ssh-ed25519,ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521,sk-ssh-ed25519@openssh.com,sk-ecdsa-sha2-nistp256@openssh.com,rsa-sha2-512,rsa-sha2-256
debug2: ciphers ctos: chacha20-poly1305@openssh.com,aes128-ctr,aes192-ctr,aes256-ctr,aes128-gcm@openssh.com,aes256-gcm@openssh.com
debug2: ciphers stoc: chacha20-poly1305@openssh.com,aes128-ctr,aes192-ctr,aes256-ctr,aes128-gcm@openssh.com,aes256-gcm@openssh.com
debug2: MACs ctos: umac-64-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-sha1-etm@openssh.com,umac-64@openssh.com,umac-128@openssh.com,hmac-sha2-256,hmac-sha2-512,hmac-sha1
debug2: MACs stoc: umac-64-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-sha1-etm@openssh.com,umac-64@openssh.com,umac-128@openssh.com,hmac-sha2-256,hmac-sha2-512,hmac-sha1
debug2: å‹ç¼© ctos: none,zlib@openssh.com,zlib
debug2: å‹ç¼© stoc: none,zlib@openssh.com,zlib
debug2: è¯­è¨€ ctos:
debug2: è¯­è¨€ stoc:
debug2: first_kex_follows 0
debug2: reserved 0
debug2: peer server KEXINIT æè®®
debug2: KEX ç®—æ³•: sntrup761x25519-sha512@openssh.com,curve25519-sha256,curve25519-sha256@libssh.org,ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,diffie-hellman-group-exchange-sha256,diffie-hellman-group16-sha512,diffie-hellman-group18-sha512,diffie-hellman-group14-sha256,ext-info-s,kex-strict-s-v00@openssh.com
debug2: ä¸»æœºå¯†é’¥ç®—æ³•: rsa-sha2-512,rsa-sha2-256,ecdsa-sha2-nistp256,ssh-ed25519
debug2: ciphers ctos: chacha20-poly1305@openssh.com,aes128-ctr,aes192-ctr,aes256-ctr,aes128-gcm@openssh.com,aes256-gcm@openssh.com
debug2: ciphers stoc: chacha20-poly1305@openssh.com,aes128-ctr,aes192-ctr,aes256-ctr,aes128-gcm@openssh.com,aes256-gcm@openssh.com
debug2: MACs ctos: umac-64-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-sha1-etm@openssh.com,umac-64@openssh.com,umac-128@openssh.com,hmac-sha2-256,hmac-sha2-512,hmac-sha1
debug2: MACs stoc: umac-64-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-sha1-etm@openssh.com,umac-64@openssh.com,umac-128@openssh.com,hmac-sha2-256,hmac-sha2-512,hmac-sha1
debug2: å‹ç¼© ctos: none,zlib@openssh.com
debug2: å‹ç¼© stoc: none,zlib@openssh.com
debug2: è¯­è¨€ ctos:
debug2: è¯­è¨€ stoc:
debug2: first_kex_follows 0
debug2: reserved 0
debug3: kex_choose_conf: å°†ä½¿ç”¨ä¸¥æ ¼ KEX é¡ºåº
debug1: kex: ç®—æ³•: sntrup761x25519-sha512@openssh.com
debug1: kex: ä¸»æœºå¯†é’¥ç®—æ³•: ssh-ed25519
debug1: kex: å®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨çš„å¯†ç : chacha20-poly1305@openssh.com MAC: <implicit> å‹ç¼©: none
debug1: kex: æœåŠ¡å™¨åˆ°å®¢æˆ·ç«¯çš„å¯†ç : chacha20-poly1305@openssh.com MAC: <implicit> å‹ç¼©: none
debug3: å‘é€æ•°æ®åŒ…: ç±»å‹ 30
debug1: ç­‰å¾… SSH2_MSG_KEX_ECDH_REPLY
debug3: æ¥æ”¶æ•°æ®åŒ…: ç±»å‹ 31
debug1: æ¥æ”¶åˆ° SSH2_MSG_KEX_ECDH_REPLY
debug1: æœåŠ¡å™¨ä¸»æœºå¯†é’¥: ssh-ed25519 SHA256:+5SaMkJXG9yZrsYjXgxFfRZpvb6qjc/arFG2Nk4Vv48
debug3: record_hostkey: æ‰¾åˆ° key ç±»å‹ ED25519 æ–‡ä»¶ /Users/lzwjava/.ssh/known_hosts:164
debug3: record_hostkey: æ‰¾åˆ° key ç±»å‹ RSA æ–‡ä»¶ /Users/lzwjava/.ssh/known_hosts:165
debug3: record_hostkey: æ‰¾åˆ° key ç±»å‹ ECDSA æ–‡ä»¶ /Users/lzwjava/.ssh/known_hosts:166
debug3: load_hostkeys_file: å·²ä» 138.201.174.0 åŠ è½½ 3 ä¸ªå¯†é’¥
debug1: fopen /Users/lzwjava/.ssh/known_hosts2: No such file or directory
debug1: fopen /etc/ssh/ssh_known_hosts: No such file or directory
debug1: fopen /etc/ssh/ssh_known_hosts2: No such file or directory
debug1: ä¸»æœº '138.201.174.0' å·²çŸ¥å¹¶ä¸”ä¸ ED25519 ä¸»æœºå¯†é’¥åŒ¹é…ã€‚
debug1: åœ¨ /Users/lzwjava/.ssh/known_hosts:164 æ‰¾åˆ°å¯†é’¥
debug3: å‘é€æ•°æ®åŒ…: ç±»å‹ 21
debug1: ssh_packet_send2_wrapped: é‡ç½® send seqnr 3
debug2: ssh_set_newkeys: æ¨¡å¼ 1
debug1: åœ¨ 134217728 å—é‡æ–°åŠ å¯†
debug1: å‘é€ SSH2_MSG_NEWKEYS
debug1: å‘é€ SSH2_MSG_EXT_INFO
debug3: å‘é€æ•°æ®åŒ…: ç±»å‹ 7
debug1: ç­‰å¾… SSH2_MSG_NEWKEYS
debug3: æ¥æ”¶æ•°æ®åŒ…: ç±»å‹ 21
debug1: ssh_packet_read_poll2: é‡ç½® read seqnr 3
debug1: æ¥æ”¶åˆ° SSH2_MSG_NEWKEYS
debug2: ssh_set_newkeys: æ¨¡å¼ 0
debug1: åœ¨ 134217728 å—é‡æ–°åŠ å¯†
debug2: KEX ç®—æ³•: sntrup761x25519-sha512@openssh.com,curve25519-sha256,curve25519-sha256@libssh.org,ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,diffie-hellman-group-exchange-sha256,diffie-hellman-group16-sha512,diffie-hellman-group18-sha512,diffie-hellman-group14-sha256,ext-info-c,kex-strict-c-v00@openssh.com
debug2: ä¸»æœºå¯†é’¥ç®—æ³•: ssh-ed25519-cert-v01@openssh.com,ecdsa-sha2-nistp256-cert-v01@openssh.com,ecdsa-sha2-nistp384-cert-v01@openssh.com,ecdsa-sha2-nistp521-cert-v01@openssh.com,sk-ssh-ed25519-cert-v01@openssh.com,sk-ecdsa-sha2-nistp256-cert-v01@openssh.com,rsa-sha2-512-cert-v01@openssh.com,rsa-sha2-256-cert-v01@openssh.com,ssh-ed25519,ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521,sk-ssh-ed25519@openssh.com,sk-ecdsa-sha2-nistp256@openssh.com,rsa-sha2-512,rsa-sha2-256
debug2: ciphers ctos: chacha20-poly1305@openssh.com,aes128-ctr,aes192-ctr,aes256-ctr,aes128-gcm@openssh.com,aes256-gcm@openssh.com
debug2: ciphers stoc: chacha20-poly1305@openssh.com,aes128-ctr,aes192-ctr,aes256-ctr,aes128-gcm@openssh.com,aes256-gcm@openssh.com
debug2: MACs ctos: umac-64-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-sha1-etm@openssh.com,umac-64@openssh.com,umac-128@openssh.com,hmac-sha2-256,hmac-sha2-512,hmac-sha1
debug2: MACs stoc: umac-64-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-sha1-etm@openssh.com,umac-64@openssh.com,umac-128@openssh.com,hmac-sha2-256,hmac-sha2-512,hmac-sha1
debug2: å‹ç¼© ctos: none,zlib@openssh.com,zlib
debug2: å‹ç¼© stoc: none,zlib@openssh.com,zlib
debug2: è¯­è¨€ ctos:
debug2: è¯­è¨€ stoc:
debug2: first_kex_follows 0
debug2: reserved 0
debug3: å‘é€æ•°æ®åŒ…: ç±»å‹ 5
debug3: æ¥æ”¶æ•°æ®åŒ…: ç±»å‹ 7
debug1: æ¥æ”¶åˆ° SSH2_MSG_EXT_INFO
debug3: kex_input_ext_info: extension server-sig-algs
debug1: kex_ext_info_client_parse: server-sig-algs=<ssh-ed25519,ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521,sk-ssh-ed25519@openssh.com,sk-ecdsa-sha2-nistp256@openssh.com,rsa-sha2-512,rsa-sha2-256>
debug3: kex_input_ext_info: extension publickey-hostbound@openssh.com
debug1: kex_ext_info_check_ver: publickey-hostbound@openssh.com=<0>
debug3: kex_input_ext_info: extension ping@openssh.com
debug1: kex_ext_info_check_ver: ping@openssh.com=<0>
debug3: æ¥æ”¶æ•°æ®åŒ…: ç±»å‹ 6
debug2: service_accept: ssh-userauth
debug1: æ¥æ”¶ SSH2_MSG_SERVICE_ACCEPT
debug3: å‘é€æ•°æ®åŒ…: ç±»å‹ 50
debug3: æ¥æ”¶æ•°æ®åŒ…: ç±»å‹ 7
debug1: æ¥æ”¶åˆ° SSH2_MSG_EXT_INFO
debug3: kex_input_ext_info: extension server-sig-algs
debug1: kex_ext_info_client_parse: server-sig-algs=<ssh-ed25519,ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521,sk-ssh-ed25519@openssh.com,sk-ecdsa-sha2-nistp256@openssh.com,rsa-sha2-512,rsa-sha2-256>
debug3: æ¥æ”¶æ•°æ®åŒ…: ç±»å‹ 51
debug1: å¯ä»¥ç»§ç»­çš„èº«ä»½éªŒè¯: publickey,password
debug3: é‡æ–°å¼€å§‹ï¼Œä¼ é€’ä¸åŒçš„åˆ—è¡¨ publickey,password
debug3: ä¼˜å…ˆå…¬é’¥,äº¤äº’å¼å¯†ç ,å¯†ç 
debug3: æŸ¥æ‰¾å…¬é’¥
debug3: å‰©ä½™ä¼˜å…ˆé¡ºåº: äº¤äº’å¼å¯†ç ,å¯†ç 
debug3: å…¬é’¥èº«ä»½éªŒè¯æ˜¯å¯ç”¨çš„
debug1: ä¸‹ä¸€ä¸ªèº«ä»½éªŒè¯æ–¹æ³•: å…¬é’¥
debug3: ssh_get_authentication_socket_path: è·¯å¾„ '/private/tmp/com.apple.launchd.cTjjogIh4V/Listeners'
debug1: ç»‘å®šä»£ç†åˆ°ä¸»æœºå¯†é’¥
debug1: ä»£ç†è¿”å›äº† 3 ä¸ªå¯†é’¥
debug1: å°†å°è¯•å¯†é’¥: /Users/lzwjava/.ssh/id_rsa RSA SHA256:bF6g9+hPW6crim36xewb/0Pvl/Y34 explicit agent
debug1: å°†å°è¯•å¯†é’¥: lzwjava@Zhiweis-MacBook-Air.local RSA SHA256:ibpUGVDyOYKOQArPUs5ZSnp0oECaZJWSPWAthOYBX/8 agent
debug1: å°†å°è¯•å¯†é’¥: /Users/lzwjava/Downloads/LightsailDefaultKey-ap-northeast-1.pem RSA SHA256:AQCwUpsEP8cawJtCQNidQq0poQgAgkUuFYQMjxw8evI agent
debug2: å…¬é’¥å‡†å¤‡å®Œæˆ
debug1: æä¾›å…¬é’¥: /Users/lzwjava/.ssh/id_rsa RSA SHA256:bF6g9+hPW6crim36xewb/0Pvl/Y34 explicit agent
debug3: å‘é€æ•°æ®åŒ…: ç±»å‹ 50
debug2: æˆ‘ä»¬å‘é€äº†ä¸€ä¸ªå…¬é’¥åŒ…ï¼Œç­‰å¾…å›å¤
debug3: æ¥æ”¶æ•°æ®åŒ…: ç±»å‹ 60
debug1: æœåŠ¡å™¨æ¥å—å¯†é’¥: /Users/lzwjava/.ssh/id_rsa RSA SHA256:bF6g9+hPW6crim36xewb/0Pvl/Y34 explicit agent
debug3: sign_and_send_pubkey: ä½¿ç”¨å…¬é’¥-hostbound-v00@openssh.com ä¸ RSA SHA256:bF6g9+hPW6crim36xewb/0Pvl/Y34
debug3: sign_and_send_pubkey: ä½¿ç”¨ rsa-sha2-512 ç­¾å SHA256:bF6g9+hPW6crim36xewb/0Pvl/Y34
debug3: å‘é€æ•°æ®åŒ…: ç±»å‹ 50
debug3: æ¥æ”¶æ•°æ®åŒ…: ç±»å‹ 52
ä½¿ç”¨ "publickey" è®¤è¯åˆ° 138.201.174.0 é€šè¿‡ä»£ç†ã€‚