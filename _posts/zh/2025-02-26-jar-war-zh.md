---
audio: false
generated: true
lang: zh
layout: post
title: JAR与WAR对比
translated: true
type: note
---

在 Java 打包中，**JAR**（Java 归档文件）和 **WAR**（Web 归档文件）都是基于 ZIP 结构的归档文件格式，但它们用途不同且具有不同特性。以下是它们差异的详细说明：

---

### 1. 用途
- **JAR**：JAR 文件是通用归档文件，用于打包 Java 类、库或独立应用程序。通常用于分发可重用库（例如工具类）或可在 Java 虚拟机（JVM）上运行的可执行 Java 程序。
- **WAR**：WAR 文件专为 Web 应用程序设计。它将 Web 应用所需的所有组件（如 Servlet、JSP、HTML、CSS、JavaScript 和配置文件）打包成单一单元，以便部署到 Web 服务器或应用服务器（例如 Apache Tomcat、JBoss）。

---

### 2. 内容
- **JAR**：包含 Java 类文件（`.class`）、位于 `META-INF` 目录下的 `MANIFEST.MF` 文件（提供元数据，如可执行 JAR 的主类），以及可选的资源文件（如配置文件、图像或属性文件）。
- **WAR**：包含具有特定结构的 Web 专用组件：
  - **WEB-INF/**：必需目录，包含：
    - `web.xml`（用于配置 Servlet、映射等的部署描述符），
    - `classes/`（编译后的 Java 类），
    - `lib/`（Web 应用使用的依赖 JAR 文件）。
  - 静态资源（如 HTML、CSS、JavaScript）通常位于根目录或 `WEB-INF` 外的子目录中，但 JSP 文件可放在 `WEB-INF` 内以限制直接访问。

---

### 3. 结构
- **JAR**：具有扁平结构，主要由类文件和资源组成，清单文件用于指定元数据。示例：
  ```
  myapp.jar
  ├── META-INF/
  │   └── MANIFEST.MF
  ├── com/
  │   └── example/
  │       └── MyClass.class
  └── resources/
      └── config.properties
  ```
- **WAR**：遵循为 Web 应用程序定制的分层结构。示例：
  ```
  mywebapp.war
  ├── index.html
  ├── css/
  │   └── style.css
  ├── WEB-INF/
  │   ├── web.xml
  │   ├── classes/
  │   │   └── com/
  │   │       └── example/
  │   │           └── MyServlet.class
  │   └── lib/
  │       └── dependency.jar
  ```

---

### 4. 部署与使用
- **JAR**：
  - 包含在应用程序的类路径中，以提供库或可重用代码。
  - 如果是可执行的（在清单中指定了 `Main-Class`），可直接使用 `java -jar myapp.jar` 运行。
- **WAR**：
  - 部署到 Servlet 容器或应用服务器（例如 Tomcat），服务器会解包并使其在特定 URL（上下文路径）下可访问。
  - 无法独立运行；依赖服务器管理其生命周期。

---

### 5. 依赖处理
- **JAR**：本身不包含其他 JAR；依赖通过外部管理（例如通过类路径或 Maven 等构建工具）。
- **WAR**：可将依赖的 JAR 打包在 `WEB-INF/lib/` 目录中，确保 Web 应用使用特定版本的库，并与同一服务器上的其他应用隔离。

---

### 6. 创建方式
JAR 和 WAR 文件均可使用 JDK 的 `jar` 命令行工具或现代构建工具（如 Maven 或 Gradle）创建：
- **JAR 示例**：`jar cvf myapp.jar -C classes .`
- **WAR 示例**：`jar cvf mywebapp.war .`（假设目录已包含 `WEB-INF` 等结构）。
- 在 **Maven** 中，打包类型在 `pom.xml` 中指定：
  - `<packaging>jar</packaging>` 用于 JAR。
  - `<packaging>war</packaging>` 用于 WAR。

---

### 总结表格

| 特性             | JAR                              | WAR                                   |
|------------------|----------------------------------|---------------------------------------|
| **全称**         | Java 归档文件                   | Web 归档文件                         |
| **用途**         | 库、独立应用程序                | Web 应用程序                         |
| **内容**         | 类文件、清单文件、资源          | Servlet、JSP、HTML、WEB-INF 等       |
| **结构**         | 扁平结构                        | 分层结构（WEB-INF 等）               |
| **部署方式**     | 类路径或 `java -jar`            | Web 服务器（如 Tomcat）              |
| **依赖管理**     | 外部依赖                        | 内置在 `WEB-INF/lib/` 中             |

---

### 核心要点
本质上，**JAR** 是适用于通用 Java 代码的多功能归档文件，而 **WAR** 是专为 Web 应用程序设计的归档文件，具有为 Web 服务器部署定制的结构和组件。理解它们的独特角色可确保在 Java 开发和部署场景中的正确使用。