---
audio: false
generated: true
lang: zh
layout: post
title: 从Jekyll迁移至JBake
translated: true
type: note
---

将您的 Jekyll 博客迁移至基于 Java 的博客框架是一项值得投入的工作，特别是当您希望利用 Java 生态系统优势的同时，又能保持静态站点生成器的简洁性。最适合此过渡的方案是 **JBake**——一款基于 Java 的静态站点生成器，与 Jekyll 有许多相似之处，例如支持从 Markdown 或 AsciiDoc 编写的内容生成静态 HTML。接下来，我将指导您完成关键步骤和注意事项，确保迁移过程尽可能顺利。

### 为什么选择 JBake？
JBake 是绝佳选择的原因在于：
- 它是**静态站点生成器**，与 Jekyll 一样，可生成无需数据库或服务端处理的静态 HTML 文件。
- 支持 **Markdown**，您现有的内容只需极少改动即可迁移。
- **基于 Java 开发**，符合您转向 Java 框架的需求。
- 提供多种模板引擎（如 Freemarker、Groovy、Thymeleaf、Jade）的灵活性，方便您按需选择。

虽然还有其他基于 Java 的博客平台（如 Apache Roller），但它们属于动态框架，若您已习惯 Jekyll 的静态特性，这类平台可能带来不必要的复杂性。JBake 保持了简洁高效，自然成为迁移的理想选择。

### 从 Jekyll 迁移至 JBake 的步骤

#### 1. 新建 JBake 项目
- **安装 JBake**：按照 [JBake 官网](https://jbake.org) 的说明下载并安装。
- **创建新项目**：使用 JBake 命令行界面初始化项目：
  ```bash
  jbake -i
  ```
  这将生成基础项目结构，包含内容、模板和资源文件的目录。

#### 2. 选择模板引擎
- JBake 支持多种模板引擎，包括 **Freemarker**、**Groovy**、**Thymeleaf** 和 **Jade**。请选择您熟悉或与 Jekyll 模板最匹配的引擎。
- 若您初次接触这些引擎，**Freemarker** 作为广泛使用的选项，其简洁语法可能更易上手。

#### 3. 迁移内容
- **复制 Markdown 文件**：将文章从 Jekyll 的 `_posts` 目录转移至 JBake 的 `content` 目录。
- **Front matter**：Jekyll 使用 YAML front matter（如 `title`、`date`），而 JBake 支持 YAML、JSON 或属性格式。若您的 front matter 为 YAML 格式，通常无需修改即可在 JBake 中使用，但需确认所有元数据字段（如 `tags`、`categories`）均被识别。
- **文件命名**：Jekyll 使用 `YYYY-MM-DD-title.md` 格式的文件名。JBake 可兼容此约定，但您可能需要调整配置以保持 URL 结构（详见第 5 步）。

#### 4. 重写或适配模板
- **Jekyll 转 JBake 模板**：Jekyll 使用 Liquid 模板，而 JBake 使用您选择的模板引擎。请按新引擎的语法重写模板。
- **主题**：若您的 Jekyll 博客使用了主题，可以：
  - 为 JBake 寻找或创建相似主题。
  - 手动将 Liquid 模板转换为新引擎的语法。
- 此步骤可能耗时较长，尤其当模板包含复杂逻辑时。您需要学习新模板语法并复现站点的设计与功能。

#### 5. 配置站点
- **配置文件**：Jekyll 使用 `_config.yml`，而 JBake 使用 `jbake.properties`。请将设置（如站点标题、描述、基础 URL）转换为 JBake 格式。例如：
  ```
  site.title=我的博客
  site.description=基于 Java 的博客
  ```
- **固定链接**：为避免链接失效，请配置 JBake 的固定链接设置以匹配 Jekyll 的 URL 结构（如 `/YYYY/MM/DD/title/`）。这可能涉及自定义固定链接模式或确保 URL 中包含日期。

#### 6. 处理自定义功能或插件
- **插件**：若您的 Jekyll 博客依赖插件（如用于 SEO、重定向或语法高亮），请检查 JBake 是否提供等效功能或插件。否则，您可能需要实现自定义解决方案。
- **草稿**：对于未发布文章，Jekyll 使用 `_drafts` 目录。在 JBake 中，请在这些文章的 front matter 中设置 `status=draft`。

#### 7. 迁移资源文件（图片、CSS 等）
- **复制资源**：将资源目录（如 `images`、`css`、`js`）从 Jekyll 移至 JBake 的对应目录（通常为 `assets`）。
- **CSS 预处理器**：若您在 Jekyll 中使用 Sass 或其他预处理器，可以：
  - 将其预编译为 CSS 供 JBake 使用。
  - 使用外部工具（如 Webpack、Gulp）处理资源，因为 JBake 本身不支持 Sass，但可与此类工具集成。

#### 8. 生成并预览站点
- **构建站点**：生成静态文件：
  ```bash
  jbake -b
  ```
- **本地预览**：启动本地服务器检查站点：
  ```bash
  jbake -s
  ```
- 检查内容、模板或资源路径的问题，并按需调整。

#### 9. 部署站点
- **生成最终文件**：运行 `jbake -b` 生成静态 HTML 文件（位于 `build` 目录）。
- **托管**：将这些文件部署至托管服务：
  - 对于 **GitHub Pages**，将生成的 HTML 文件推送至仓库（与 Jekyll 不同，GitHub 不会自动构建站点）。
  - 或使用 Netlify、Vercel 等支持静态文件托管的服务或任意网页服务器。

### 潜在挑战
- **模板转换**：将 Liquid 模板适配至新引擎可能耗时，尤其对于复杂设计或逻辑。
- **URL 结构**：保持现有 URL 需仔细配置固定链接，以防链接失效。
- **内容调整**：虽然 Markdown 可轻松迁移，但您可能需要微调 front matter 或文件名以符合 JBake 的约定。
- **学习曲线**：您需要熟悉 JBake 的模板引擎和配置选项。

### 额外建议
- **自动化**：对于大型博客，可编写脚本在迁移过程中调整文件名或 front matter。
- **构建工具**：将 JBake 与 Gradle 或 Maven 集成以自动化构建，尤其当您熟悉 Java 生态系统时。
- **资源参考**：查阅 JBake 的[文档](https://jbake.org/docs)和社区论坛获取详细指南与示例。

### 结语
从 Jekyll 迁移至 JBake 涉及新建项目、转移内容与资源、重写模板、配置设置及部署静态站点。虽然需要付出努力——尤其是模板部分——但 Jekyll 与 JBake 作为静态站点生成器的相似性使这一过程变得可控。完成后，您将获得一个基于 Java 的博客框架，既符合您的目标，又保留了静态站点的简洁与性能。祝您迁移顺利！