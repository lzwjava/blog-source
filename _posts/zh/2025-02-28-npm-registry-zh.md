---
audio: false
generated: false
lang: zh
layout: post
title: 测试 NPM 仓库
translated: true
---

要测试你的NPM注册表是否正常工作，特别是它需要用户名和密码，你可以按照以下几个简单的步骤来验证其连接性、认证和提供包的能力。由于这是一个私有注册表（由凭证暗示），你需要在测试包安装之前确保认证正确设置。以下是测试你的注册表的完整指南，以及一些建议的NPM包来尝试安装。

---

### 测试注册表的步骤

1. **设置认证**
   - 由于注册表需要用户名和密码，你需要登录以认证你的NPM客户端。
   - 在终端中运行以下命令，将`<registry-url>`替换为你的注册表的实际URL：
     ```
     npm login --registry=<registry-url>
     ```
   - 你将被提示输入用户名和密码（可能还包括电子邮件，具体取决于注册表）。完成后，这将在你的`.npmrc`文件中存储一个认证令牌，允许访问注册表。

2. **验证注册表连接**
   - 使用`npm ping`命令来检查注册表是否可达：
     ```
     npm ping --registry=<registry-url>
     ```
   - 如果成功，此命令确认注册表服务器正在运行并响应。你通常会看到类似于“Ping success: <registry-url>”的输出。如果失败，可能存在连接问题或URL不正确。

3. **检查认证**
   - 要确保用户名和密码正确设置，使用`npm whoami`命令：
     ```
     npm whoami --registry=<registry-url>
     ```
   - 如果认证成功，这将返回你的用户名。如果失败或返回错误（例如，“未认证”），请双重检查你的凭证或登录步骤。

4. **测试包安装**
   - 尝试安装一个包以确认注册表可以提供包。由于这是一个私有注册表，你需要安装一个你知道存在于其上的包。不过，如果注册表代理公共NPM注册表（这是私有注册表如Verdaccio的常见设置），你可以使用流行的公共包进行测试。
   - 示例命令：
     ```
     npm install <package-name> --registry=<registry-url>
     ```
   - 将`<package-name>`替换为你的注册表上可用的包（更多包建议见下文）。

---

### 一些NPM包来尝试

由于这是一个私有注册表，我无法确切知道哪些包可用。不过，以下是基于常见场景的建议：

- **如果注册表代理公共NPM注册表：**
  - 许多私有注册表配置为镜像公共注册表，允许在认证后访问公共包。在这种情况下，你可以尝试安装知名的公共包：
    - `lodash`：一个流行的实用程序库。
      ```
      npm install lodash --registry=<registry-url>
      ```
    - `express`：一个广泛使用的Node.js Web框架。
      ```
      npm install express --registry=<registry-url>
      ```
    - `react`：一个流行的用于构建用户界面的库。
      ```
      npm install react --registry=<registry-url>
      ```
  - 如果这些安装成功，这确认了注册表正常工作并可以提供包。

- **如果注册表仅托管私有包：**
  - 你需要安装一个你知道存在于你的私有注册表上的包。与你的团队或注册表的文档/网络界面（如果可用）核实包名称。例如：
    - 如果有一个名为`my-org-utils`的包，尝试：
      ```
      npm install my-org-utils --registry=<registry-url>
      ```
  - 如果没有具体的包名称，我无法列出具体的私有包，因此使用与你的组织相关的包。

---

### 注意事项和故障排除

- **成功指标**：如果`npm ping`工作正常，`npm whoami`返回你的用户名，并且包安装没有错误，你的注册表正常工作。
- **常见问题**：
  - **认证错误**：如果`npm whoami`失败，重新运行`npm login`。
  - **找不到包**：确保包存在于注册表。如果使用公共包且失败，你的注册表可能不代理公共注册表。
  - **连接问题**：如果`npm ping`失败，双重检查`<registry-url>`和你的网络设置。
- **避免全局更改**：为了避免影响你的全局NPM配置，你可以在一个新目录中测试，该目录具有本地的`.npmrc`文件，但上述带有`--registry`标志的命令足以进行测试。

通过遵循这些步骤并尝试建议的包，你可以确认你的注册表正常运行并正确处理认证和包检索。如果你有特定的注册表包名称，使用它们而不是提供的公共示例。