---
audio: false
generated: true
image: false
lang: zh
layout: post
title: Windows Tracert网络路径诊断指南
translated: true
type: note
---

在 Windows 系统中，**`tracert`**（路由跟踪的缩写）是一个用于诊断的命令行工具，用于追踪数据包从您的计算机到目标主机（如网站或 IP 地址）所经过的路径。它主要用于识别网络路由中发生延迟或连接问题的位置。

以下是其逐步工作原理：

### 1. 使用递增 TTL 的 ICMP 回显请求

* `tracert` 发送 **ICMP 回显请求数据包**（类似于 `ping`）。
* 它操纵 IP 头中的 **生存时间（TTL）** 字段。
* TTL 从 1 开始，然后随着每次探测递增（2、3、4……）。

### 2. TTL 过期与“超时”响应

* 当路由器收到数据包时，会将 TTL 减 1。
* 如果 TTL 达到 **0**，路由器会丢弃该数据包并向发送方返回 **ICMP 超时** 消息。
* 这让 `tracert` 能够识别该路由器的身份（IP/主机名）。

### 3. 构建路由路径

* 当 TTL = 1 时，您看到的是第一跳（您的默认网关）。
* 当 TTL = 2 时，您看到的是下一个路由器，依此类推。
* 此过程持续进行，直到：
  * 目标主机响应 **ICMP 回显回复**，或
  * 达到最大跳数限制（默认为 30）。

### 4. 测量延迟

* `tracert` 默认对每一跳发送 **三次探测**。
* 它显示每次探测的 **往返时间（RTT）**，单位为毫秒。
* 如果路由器未响应，您将看到 `*` 而不是时间值。

### 5. 示例输出

```text
正在跟踪到 example.com [93.184.216.34] 的路由
最多经过 30 个跃点:

  1     1 ms    <1 ms     1 ms  192.168.1.1
  2    10 ms     9 ms    11 ms  isp-gateway.example.net [203.0.113.1]
  3    25 ms    23 ms    24 ms  core-router.example.net [198.51.100.1]
  ...
  8    45 ms    46 ms    47 ms  example.com [93.184.216.34]
```

### 6. 行为注意事项

* 某些路由器可能阻止或降低 ICMP 响应的优先级，导致显示 `* * *`。
* **Windows** 中的 `tracert` 使用 ICMP 回显请求，而 Linux/Unix 上的 `traceroute` 通常使用 **UDP 探测**（尽管可以更改）。
* 防火墙或 ISP 过滤有时可能会隐藏部分路由路径。

---

👉 您是否希望我进一步解释 **如何解读 `tracert` 结果中的 `* * *` 或高延迟情况**，以便您能实际用于故障排除？