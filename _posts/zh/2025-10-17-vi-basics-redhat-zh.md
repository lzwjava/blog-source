---
audio: false
generated: true
image: false
lang: zh
layout: post
model: x-ai/grok-4-fast
title: Red Hat Linux 的 Vi 编辑器基础
translated: true
type: note
---

Vi 是一款功能强大的键盘驱动文本编辑器，是 Linux 系统（包括 Red Hat Enterprise Linux/RHEL）的标准配置。它轻量高效，适用于编辑配置文件、脚本等。在 Red Hat 中，`vi` 命令通常指向 `vim`（Vi IMproved），后者增加了语法高亮等功能。本指南为初学者介绍基础知识。

## 安装
Vi 已预装在大多数 Red Hat 系统中。如需完整 `vim` 功能包（或系统未安装），可通过包管理器安装：

- RHEL 7/8 系统：  
  ```
  sudo yum install vim
  ```

- RHEL 9+ 系统：  
  ```
  sudo dnf install vim
  ```

安装完成后，`vi` 与 `vim` 可互换使用。

## 启动 Vi
1. 打开终端
2. 运行 `vi 文件名.txt`（将 `文件名.txt` 替换为实际路径）  
   - 文件存在时：打开编辑  
   - 文件不存在时：创建新空文件  
3. 无文件启动（练习用）：`vi`  
Vi 默认进入**命令模式**，界面显示空白屏幕或文件内容，光标位于左上角。

## 模式解析
Vi 有三种主要模式，熟练切换是关键：
- **命令模式**：默认模式，用于导航、删除等操作。按 `Esc` 键可从其他模式返回
- **插入模式**：用于输入/编辑文本。从命令模式按 `i` 等键进入
- **Ex 模式**：用于保存等高级命令。在命令模式按 `:` 进入

注意：命令区分大小写。数字前缀可重复操作（如 `3dd` 删除 3 行）

## 基础导航（命令模式）
使用 Home 行键位移动光标（无需鼠标）：
- `h`：左移一字
- `j`：下移一行
- `k`：上移一行
- `l`：右移一字
- `w`：前移一词
- `b`：后移一词
- `0`：行首
- `$`：行尾
- `gg`：文件顶部
- `G`：文件底部
- `Ctrl + F`：下翻页
- `Ctrl + B`：上翻页

## 进入插入模式与编辑
从命令模式按以下键进入插入模式并开始输入：
- `i`：光标前插入
- `I`：行首插入
- `a`：光标后追加
- `A`：行尾追加
- `o`：下方新建行
- `O`：上方新建行

退出插入模式：按 `Esc` 返回命令模式

常用编辑命令（命令模式）：
- **删除操作**：
  - `x`：删除光标处字符
  - `X`：删除光标前字符
  - `dd`：删除当前行
  - `dw`：删除当前词
  - `D`：删除至行尾
- **复制操作**：
  - `yy`：复制当前行
  - `y`：复制选中内容（需先按 `v` 进入选择模式）
- **粘贴操作**：
  - `p`：光标后粘贴
  - `P`：光标前粘贴
- **撤销操作**：
  - `u`：撤销上次操作
  - `U`：撤销当前行所有修改
- **重复操作**：`.` 重复上一条命令

## 保存与退出
这些是 **Ex 命令**，需在命令模式输入 `:` 后执行：
- `:w`：保存更改
- `:q`：退出（无修改时）
- `:wq` 或 `ZZ`（命令模式）：保存并退出
- `:q!`：强制退出（放弃更改）
- `:w 文件名`：另存为新文件

若操作受阻，`:q!` 可安全退出。

## 搜索与替换
- 向前搜索：`/关键词`（如 `/error`），按 `n` 下一处，`N` 上一处
- 向后搜索：`?关键词`
- 全局替换：`:%s/旧文本/新文本/g`（添加 `c` 可确认，如 `:%s/旧文本/新文本/gc`）

## Red Hat 用户贴士
- 通过 `~/.vimrc` 自定义配置（不存在时可创建）：  
  ```
  set number          # 显示行号
  syntax on           # 语法高亮
  set tabstop=4       # 制表符宽度
  set autoindent      # 自动缩进
  ```
  用 `vi ~/.vimrc` 编辑，添加配置后 `:wq` 保存
- 多文件操作：`vi 文件1.txt 文件2.txt`，用 `:n`（下一文件）或 `:prev`（上一文件）切换
- 建议在测试文件中练习，避免误改系统文件

Vi 需练习才能熟练，但掌握后极为高效。从简单操作开始，勤用 `Esc` 键！

## 参考资源
[Vi 编辑器入门指南 - Red Hat](https://www.redhat.com/en/blog/get-started-vi-editor)  
[LFCS 第二讲：Linux 中安装使用 Vi/Vim 完整教程](https://www.tecmint.com/vi-editor-usage/)  
[Linux 系统 vi 编辑器详解 - GeeksforGeeks](https://www.geeksforgeeks.org/linux-unix/vi-editor-unix/)