---
audio: false
generated: true
lang: zh
layout: post
title: GNOME终端自定义目录标题
translated: true
type: note
---

要将 GNOME 终端标签页标题设置为仅显示当前目录（例如 `blog-server`），而非默认格式（例如 `lzw@lzw-MS:~/Projects/blog-server`），您可以修改终端的提示符或标题设置。具体操作如下：

### 设置 GNOME 终端标签页标题仅显示当前目录的步骤

1. **编辑 Bash 配置文件**：
   GNOME 终端默认使用 Bash shell，标签页标题通常来自 `PS1`（提示符）或特定的标题设置命令。要自定义标题，可以修改 `~/.bashrc` 文件。

2. **修改终端标题**：
   在 `~/.bashrc` 中添加命令，将终端标题设置为当前目录。使用文本编辑器打开文件：

   ```bash
   nano ~/.bashrc
   ```

   在文件末尾添加以下行：

   ```bash
   # 设置终端标签页标题为当前目录
   case "$TERM" in
   xterm*|rxvt*)
       PS1="\[\e]0;\W\a\]$PS1"
       ;;
   *)
       ;;
   esac
   ```

   **说明**：
   - `\e]0;...` 用于设置终端标题。
   - `\W` 表示当前目录的基名（例如 `blog-server`，而非完整路径 `~/Projects/blog-server`）。
   - `\a` 是终止标题字符串的响铃字符。
   - 此代码在应用更改前检查终端是否为 `xterm` 兼容（GNOME 终端符合此条件）。

3. **应用更改**：
   保存文件并重新加载 Bash 配置：

   ```bash
   source ~/.bashrc
   ```

   或者关闭并重新打开终端以应用更改。

4. **验证结果**：
   导航到某个目录（例如 `cd ~/Projects/blog-server`），终端标签页标题现在应仅显示 `blog-server`。

### 替代方法：修改 GNOME 终端配置文件
如果您希望进一步自定义标题或避免编辑 `~/.bashrc`，可以使用 GNOME 终端的配置文件：

1. 打开 GNOME 终端。
2. 转到 **编辑** > **首选项**（或 **终端** > **首选项**，具体取决于您的版本）。
3. 选择您正在使用的配置文件（例如“未命名”或自定义配置文件）。
4. 转到 **命令** 选项卡。
5. 在 **标题和命令** 下设置：
   - **初始标题**：留空或设置为通用内容。
   - **命令退出时**：选择 **保持初始标题** 或 **替换为命令输出**。
6. 在 **命令** 部分，启用 **运行自定义命令而非我的 shell**，并将命令设置为：

   ```bash
   bash --rcfile <(echo '. ~/.bashrc; PS1="\[\e]0;\W\a\]$PS1"')
   ```

   这确保终端使用自定义提示符，将标题设置为当前目录。

7. 关闭对话框，通过打开新标签页或导航到目录进行测试。

### 注意事项
- 如果您使用非 Bash 的 shell（例如 Zsh），需要修改等效的配置文件（例如 `~/.zshrc`）并相应调整语法。对于 Zsh，可以添加：

  ```zsh
  precmd() { echo -ne "\e]0;${PWD##*/}\a" }
  ```

- 如果标题未按预期更新，请确保您的终端模拟器是 `xterm` 兼容的，并且没有其他脚本（例如 `~/.bashrc` 中的自定义 `PS1` 设置）覆盖标题。
- 要在所有终端中持久化更改，请确保配置位于用户的 shell 配置文件或 GNOME 终端设置中。

这样，您将获得仅显示当前目录名称的标签页标题，例如 `blog-server`。如有需要进一步说明，请告知！