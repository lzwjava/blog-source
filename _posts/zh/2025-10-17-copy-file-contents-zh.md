---
audio: false
generated: true
image: false
lang: zh
layout: post
model: x-ai/grok-4-fast
title: 在Vi中复制文件内容
translated: true
type: note
---

## 在 Vi 中将文件内容全部复制（或移动）到新文件

根据你对 vi 的使用习惯，我理解你想要选择并复制/删除文件的全部内容，然后粘贴到新文件中。Vi 不像图形界面编辑器那样有直接的"全选"功能，但你可以在**命令模式**下高效完成此操作（按 `Esc` 确保处于该模式）。我将同时介绍**复制**（保留原文件）和**剪切/删除**（移动内容）两种方式。

### 逐步操作：将所有内容复制到新文件
1. 打开源文件：  
   ```
   vi oldfile.txt
   ```

2. 拉取（复制）整个文件：  
   - 输入 `gg`（跳转到文件顶部）  
   - 然后输入 `yG`（从当前位置复制到文件末尾）  
   *替代方案（Vim 特有，适用于 Red Hat 的 vim）：* 输入 `:1,$y` 后按 `Enter`（复制第 1 行到末尾的所有行）

3. 打开新文件：  
   - 输入 `:e newfile.txt` 后按 `Enter`（创建/打开新文件）

4. 粘贴内容：  
   - 输入 `p`（在光标后粘贴；由于是空文件，会粘贴在顶部）  
   *替代方案：* 输入 `P` 在光标前粘贴

5. 保存并退出新文件：  
   - 输入 `:wq` 后按 `Enter`

原文件将保持不变。

### 逐步操作：删除所有内容并粘贴到新文件（移动）
此操作会在复制后删除原始内容。

1. 打开源文件：  
   ```
   vi oldfile.txt
   ```

2. 先拉取（复制）整个文件：  
   - `gg` 然后 `yG`（或 `:1,$y`）

3. 删除所有内容：  
   - 输入 `gg`（返回顶部）  
   - 然后 `dG`（从当前位置删除到文件末尾）  
   *替代方案：* 输入 `:%d` 后按 `Enter`（删除所有行）  
   如需保存可执行：`:w`（覆盖当前空文件）

4. 打开新文件：  
   - 输入 `:e newfile.txt` 后按 `Enter`

5. 粘贴：  
   - 输入 `p`

6. 保存并退出：  
   - `:wq`

### 实用技巧
- 如果误操作未复制就直接删除，可使用 `u` 撤销
- 若要在不同文件间操作而无需每次都打开新文件：在第一个文件中复制，然后使用 `vi newfile.txt` 打开新文件，粘贴后保存
- 对于大文件，这些命令运行很快，因为 vi 能高效处理缓冲区

建议在测试文件上练习掌握！

[如何在 Vim 中将文本复制到另一个文件](https://stackoverflow.com/questions/1239801/how-to-copy-to-the-end-of-the-line-in-vim)  
[Vim：拉取（复制）整个文件](https://vim.fandom.com/wiki/Yank_%28copy%29_the_entire_file)