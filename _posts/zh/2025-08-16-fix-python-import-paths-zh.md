---
audio: false
generated: true
image: false
lang: zh
layout: post
title: ä¿®å¤Pythonæ¨¡å—å¯¼å…¥è·¯å¾„
translated: true
type: note
---

ç®€å•å›ç­”ï¼šè¿™é‡Œéœ€è¦ `sys` æ˜¯ä¸ºäº†åœ¨æ‰§è¡Œ `from scripts.create.delete import delete_md` ä¹‹å‰ä¿®æ”¹ Python æ¨¡å—æœç´¢è·¯å¾„ï¼ˆ`sys.path`ï¼‰ã€‚

---

### ä¸ºä»€ä¹ˆéœ€è¦ `sys`

* Python ä¼šåœ¨ `sys.path` å­˜å‚¨çš„ç›®å½•åˆ—è¡¨ä¸­æŸ¥æ‰¾è¦å¯¼å…¥çš„æ¨¡å—/åŒ…ã€‚
* é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒåŒ…å«ï¼š

  * å½“å‰è„šæœ¬æ‰€åœ¨ç›®å½•
  * æ ‡å‡†åº“ç›®å½•
  * å·²å®‰è£…çš„ site-packages
* å¦‚æœä½ çš„ `scripts/create/delete.py` æ–‡ä»¶ä¸åœ¨è¿™äº›é»˜è®¤ä½ç½®ä¹‹ä¸€ï¼Œå¯¼å…¥å°±ä¼šå¤±è´¥å¹¶æç¤º `ModuleNotFoundError`ã€‚

å› æ­¤ä»£ç è¿™æ ·å¤„ç†ï¼š

```python
sys.path.append(
    os.path.dirname(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))
)
```

è¿™æ„å‘³ç€ï¼š

* è·å–å½“å‰æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ï¼ˆ`__file__`ï¼‰
* å‘ä¸Šè¿”å›ä¸‰çº§ç›®å½•
* å°†è¯¥ç›®å½•æ·»åŠ åˆ° `sys.path`

ä¹‹åï¼ŒPython å°±èƒ½åƒå¤„ç†å·²å®‰è£…æˆ–åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­çš„æ¨¡å—ä¸€æ ·è§£æ `scripts.create.delete`ã€‚

---

### ä¸ä½¿ç”¨ `sys` çš„æƒ…å†µ

å¦‚æœä½ çš„é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š

```
é¡¹ç›®/
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ create/
â”‚       â””â”€â”€ delete.py
â””â”€â”€ tools/
    â””â”€â”€ myscript.py   <-- ä½ æ­£åœ¨è¿è¡Œè¿™ä¸ªæ–‡ä»¶
```

å½“ä½ ç›´æ¥è¿è¡Œ `myscript.py` æ—¶ï¼ŒPython ä¸ä¼šè‡ªåŠ¨è¯†åˆ« `é¡¹ç›®/` ä¸ºæ ¹ç›®å½•ã€‚é™¤éä½ é‡‡å–ä»¥ä¸‹ä»»ä¸€æªæ–½ï¼Œå¦åˆ™å¯¼å…¥å°†å¤±è´¥ï¼š

* ä½¿ç”¨ `PYTHONPATH=...` è¿è¡Œï¼ˆä¾‹å¦‚ `PYTHONPATH=.. python myscript.py`ï¼‰
* å°†é¡¹ç›®æ‰“åŒ…å¹¶å®‰è£…ï¼ˆ`pip install -e .`ï¼‰
* åœ¨ä»£ç ä¸­ä½¿ç”¨ `sys.path.append(...)` åŠ¨æ€æ·»åŠ è·¯å¾„ï¼ˆå¦‚ç¤ºä¾‹æ‰€ç¤ºï¼‰

---

ğŸ‘‰ æ‰€ä»¥éœ€è¦ `sys` çº¯ç²¹æ˜¯ä¸ºäº†**åœ¨è¿è¡Œæ—¶æ“ä½œå¯¼å…¥è·¯å¾„**ï¼Œè®©ä½ èƒ½å¤Ÿå¯¼å…¥ç›¸å¯¹äºé¡¹ç›®æ ¹ç›®å½•çš„æ¨¡å—ã€‚

éœ€è¦æˆ‘ä¸ºä½ å±•ç¤ºä¸€äº›**æ›´ç®€æ´çš„æ›¿ä»£æ–¹æ¡ˆ**æ¥é¿å…æ‰‹åŠ¨ä¿®æ”¹ `sys.path` å—ï¼Ÿ