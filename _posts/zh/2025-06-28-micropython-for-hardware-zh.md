---
audio: false
generated: true
lang: zh
layout: post
title: MicroPython：面向微控制器的Python
translated: true
type: note
---

MicroPython 是一种精简高效的 Python 3 编程语言实现，专为微控制器、嵌入式系统和资源受限环境优化。它将 Python 的简洁性与多功能性引入硬件编程领域，使开发者能够为内存和处理能力有限的小型设备编写代码。以下是关于 MicroPython 的全面介绍，涵盖其起源、特性、应用场景等内容。

### 1. **什么是 MicroPython？**
MicroPython 是 Python 3 的轻量级开源版本，专为在微控制器和嵌入式设备上运行而设计。它保留了 Python 的大部分语法和核心功能，但可适配仅有 16KB RAM 和 256KB 存储空间的环境。由 Damien George 于 2013 年创建，旨在通过 Python 可读性强的语法替代 C 或汇编等底层语言，降低嵌入式编程的门槛。

与运行在资源充足的通用计算机上的标准 Python 不同，MicroPython 经过深度优化，可在物联网设备、传感器、机器人等嵌入式系统中常见的微控制器约束条件下运行。它包含紧凑的解释器、Python 标准库的子集，以及用于控制 GPIO 引脚、I2C、SPI、UART、PWM 等外设的硬件专用模块。

### 2. **MicroPython 核心特性**
MicroPython 融合了 Python 的易用性与嵌入式系统定制特性：
- **Python 3 语法**：支持大多数 Python 3 语法（函数、类、列表、字典、异常处理），方便 Python 开发者快速上手
- **小巧体积**：优化后可在低至 16KB RAM 和 256KB 存储的设备上运行
- **交互式 REPL**：通过串行连接或 USB 提供实时编程调试的读取-求值-输出循环
- **硬件专用模块**：内置 `machine` 和 `micropython` 等库用于控制 GPIO、ADC、定时器及通信协议
- **文件系统支持**：多数移植版本支持在闪存或 SD 卡上存储脚本数据的小型文件系统
- **跨平台**：兼容 ESP8266、ESP32、STM32、树莓派 Pico 等多种微控制器
- **可扩展性**：支持自定义模块，可集成 C/C++ 处理性能关键任务
- **低功耗**：针对能效优化，适合电池供电的物联网设备
- **开源**：采用 MIT 许可证，可自由使用、修改和分发

### 3. **发展历程**
MicroPython 由澳大利亚物理学家兼程序员 Damien George 通过 2013 年成功众筹项目创立，旨在让爱好者、教育者和专业人士更易进入嵌入式编程领域。首个稳定版于 2014 年发布，专为 PyBoard 微控制器开发板设计。

如今全球开发者共同贡献的生态已支持众多硬件平台，包含工具链、库和文档。项目持续活跃更新，不断优化性能、增加特性并适配新硬件。

### 4. **工作原理**
MicroPython 由两大核心组件构成：
- **解释器**：在微控制器上执行 Python 代码的紧凑型解释器，将脚本编译为字节码后在轻量级虚拟机运行
- **运行时与库**：提供 Python 核心功能及硬件专用模块

运行 MicroPython 脚本时可实现：
- 直接控制硬件（如点亮 LED、读取传感器）
- 通过 I2C/SPI/MQTT 等协议通信
- 从设备文件系统存储执行脚本
- 通过 REPL 进行实时调试或命令交互

针对不同架构（ARM Cortex-M、ESP32 等）需刷入专用固件，并通过 ampy、rshell 或 Thonny/Mu 等 IDE 上传 Python 脚本。

### 5. **支持的硬件平台**
兼容的微控制器平台包括：
- **ESP8266/ESP32**：因低成本与网络功能成为物联网项目首选
- **树莓派 Pico (RP2040)**：搭载双核 ARM Cortex-M0+ 的多功能低成本板卡
- **STM32 系列**：适用于工业级高性能嵌入式场景
- **PyBoard**：原生 MicroPython 开发板，专为开发原型设计
- **其他平台**：包括 BBC micro:bit、Arduino 及各类 ARM 架构微控制器

各平台均有针对性优化的固件版本，例如 ESP32 固件包含 Wi-Fi/蓝牙支持，STM32 固件支持 CAN 总线等高级外设。

### 6. **应用场景**
MicroPython 的多样性使其适用于：
- **物联网**：通过 Wi-Fi/蓝牙构建智能设备（智能家居、气象站）
- **机器人**：控制系统中的电机、传感器与执行器
- **教育**：凭借简易交互特性成为编程电子学教学利器
- **原型开发**：嵌入式系统概念验证的快速实现
- **可穿戴设备**：驱动智能手表、健身追踪器等小型电池供电设备
- **传感器网络**：环境传感器数据采集处理
- **家庭自动化**：灯光、电器与安防系统控制

### 7. **优势**
- **易用性**：相比 C/C++，Python 可读语法显著降低嵌入式编程门槛
- **开发效率**：REPL 与高层抽象加速原型开发与调试
- **社区生态**：持续增长的社区提供库、教程与技术支持
- **可移植性**：跨平台代码通常只需微量修改即可复用
- **灵活性**：既适合初学者入门，也能满足高级开发者需求

### 8. **局限性**
- **资源限制**：内存与处理能力限制导致无法运行标准 Python 的复杂应用
- **性能瓶颈**：解释型语言特性导致实时性任务性能低于 C/C++
- **功能子集**：因资源限制无法使用 NumPy/Pandas 等大型库
- **固件管理**：需为不同微控制器刷入特定固件，对新手存在门槛

### 9. **与其他嵌入式方案对比**
- **vs C/C++ (Arduino)**：更易学且原型开发更快，但底层高速任务性能较弱
- **vs CircuitPython**：Adafruit 分支版本更侧重初学者友好与 USB 连接，但硬件生态较小
- **vs Lua (NodeMCU)**：为 Python 开发者提供更熟悉的语言环境与更广的库支持

### 10. **快速入门指南**
1. **选择开发板**：推荐 ESP32、树莓派 Pico 或 PyBoard
2. **下载固件**：从 micropython.org 获取对应板卡固件
3. **刷入固件**：使用 esptool.py 或官方工具刷写
4. **编写上传代码**：通过 Thonny IDE 或 ampy 工具传输脚本
5. **使用 REPL**：通过 PuTTY/screen 等串口终端连接板卡交互
6. **探索库模块**：使用 machine/network/utime 等模块实现硬件控制

### 11. **生态与社区**
活跃社区提供：
- **官方文档**：docs.micropython.org 提供完整指南与 API 参考
- **论坛社群**：MicroPython 论坛、Reddit 及 X 平台 #MicroPython 话题的持续讨论
- **教程项目**：YouTube、Hackster.io 及社区博客的海量学习资源
- **扩展库**：社区贡献的传感器、显示屏与通信协议驱动库

### 12. **未来发展方向**
持续演进方向包括：
- 新增微控制器支持与 BLE/高级网络等功能
- 与 MQTT、Home Assistant 等物联网框架集成
- 性能与内存优化持续改进
- 在教育与工业领域快速原型开发中加速普及

### 13. **代码示例**
树莓派 Pico LED 闪烁示例：
```python
from machine import Pin
import utime

led = Pin(25, Pin.OUT)  # Pico 板载 LED
while True:
    led.toggle()
    utime.sleep(0.5)  # 每 0.5 秒闪烁
```

### 14. **总结**
MicroPython 作为连接高层 Python 开发与底层硬件控制的桥梁，以其轻量设计、Python 语法和广泛硬件支持，成为物联网、机器人、教育及原型开发领域的理想选择。虽然在性能和库生态方面不及标准 Python 或 C，但其易用性和快速开发能力仍使其成为爱好者与专业人士的首选工具。

更多信息请访问 MicroPython 官网 (micropython.org) 或探索 X 与 GitHub 的社区资源。如果您有具体问题或项目需求，欢迎随时交流！