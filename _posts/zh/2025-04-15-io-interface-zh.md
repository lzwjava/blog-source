---
audio: false
generated: true
lang: zh
layout: post
title: 输入输出与接口技术
translated: true
type: note
---

太好了！以下是根据您的课程大纲整理的**第四部分：I/O与接口技术综合教程**。本教程结构清晰，详细解释相关概念，提供实际案例，并展示8255A、8253/8254和8251A等组件如何在微机系统中协同工作。

---

## 📘 第四部分：I/O与接口技术

---

### **1. I/O接口基础**

#### ✅ 端口寻址

I/O接口使微处理器能够与外部设备通信，主要存在**两种寻址方案**：

- **存储器映射I/O**：
  - I/O设备被视作存储器地址
  - 使用与内存访问相同的指令（如`MOV`）
  - 优点：地址空间更大，可使用全部CPU指令
  - 缺点：占用内存地址空间

- **独立I/O（端口映射I/O）**：
  - 使用专用指令如`IN`和`OUT`
  - 地址空间有限（通常256个端口）
  - 与内存地址空间分离

| 类型             | 使用指令集          | 地址空间          |
|------------------|-------------------|-------------------|
| 存储器映射        | `MOV`等           | 内存地址一部分    |
| 独立I/O           | `IN`, `OUT`       | 独立I/O空间       |

---

#### ✅ 数据传输模式

1. **程序控制I/O**：
   - CPU直接检测设备状态并读写数据
   - 简单但效率低（忙等待）

2. **中断驱动I/O**：
   - 设备就绪时通过**中断**通知CPU
   - CPU执行中断服务程序（ISR）
   - 提升效率

3. **DMA（直接存储器访问）**：
   - 设备直接与内存传输数据
   - 大数据量传输时绕过CPU
   - 适用于磁盘等高速设备

---

### **2. 中断系统**

#### ✅ 中断向量表

- 存储**中断服务程序（ISR）**的入口地址
- 每个中断类型对应**唯一向量**（如定时器中断INT 0x08）
- CPU通过查表跳转至对应ISR

#### ✅ 优先级处理

- 多个中断同时发生时，**优先级**决定处理顺序
- 优先级可分为**固定优先级**与**可编程优先级**

#### ✅ 8259A可编程中断控制器

- 管理多个中断源（最多8个）
- 可**级联**扩展至64个中断输入
- 核心功能：
  - 中断屏蔽
  - 优先级设置
  - 向CPU发送中断向量

**核心寄存器**：
- IMR（中断屏蔽寄存器）
- ISR（服务中寄存器）
- IRR（中断请求寄存器）

**应用场景**：当键盘与定时器同时触发中断时，8259A根据预设优先级进行仲裁

---

### **3. 常用接口芯片**

---

#### ✅ 8255A可编程外围接口（PPI）

用于连接开关、LED等并行外部设备

- 包含3个端口：**A端口**、**B端口**和**C端口**
- 通过**控制字**进行配置

**工作模式**：

- **模式0** – 基本输入/输出
  - 各端口可独立设置为输入/输出
- **模式1** – 选通输入/输出
  - 支持与外设的同步通信
- **模式2** – 双向总线（仅A端口）
  - 带握手信号的双向数据传输

**典型应用**：
- A端口：LED显示屏输出
- B端口：DIP开关输入
- C端口：控制信号传输

---

#### ✅ 8253/8254可编程间隔定时器

用于生成延时、波特率等时序信号

- 包含3个独立的16位计数器
- 每个计数器支持6种工作模式（0-5）：

| 模式 | 功能描述               |
|------|---------------------------|
| 0    | 计数结束中断              |
| 2    | 速率发生器（如时钟信号）    |
| 3    | 方波发生器                |

**应用场景**：
- 延时生成
- 实时时钟
- 串口波特率生成

**典型配置**：
- 计数器0：操作系统时钟节拍
- 计数器1：DRAM刷新控制
- 计数器2：扬声器音调生成

---

#### ✅ 8251A通用同步异步收发器（USART）

用于**串行通信**

- 实现并行数据与串行数据的转换
- 同步与异步通信模式：
  - **同步模式**：需要时钟信号
  - **异步模式**：使用起始/停止位

**核心特性**：
- 波特率控制（通过8253/8254实现）
- 可配置数据位、停止位、校验位
- 支持发送/接收双缓冲

**应用场景**：与PC或微控制器的串口通信

---

## ✅ 核心芯片功能对照表

| 芯片型号 | 主要功能               | 核心特性                          |
|----------|------------------------|-----------------------------------|
| 8255A    | 并行I/O控制            | 3个端口，3种工作模式，握手信号     |
| 8253/54  | 定时/计数              | 3个计数器，多种工作模式           |
| 8251A    | 串行通信               | 同步/异步模式，波特率可调         |
| 8259A    | 中断控制               | 优先级管理，中断屏蔽，向量发送    |

---

## 🧠 综合应用场景示例

设计一个简易微机系统实现以下功能：

- 通过8255A的A端口（模式0）控制LED矩阵
- 通过8259A中断接收键盘输入
- 使用8253（模式2）生成1ms系统定时节拍
- 通过8251A（异步模式）向PC发送传感器数据

各芯片通过地址译码和控制信号与CPU连接，并编写相应软件实现通信管理。

---

如需本章节的示例代码、系统框图或测试题目，欢迎随时告知！