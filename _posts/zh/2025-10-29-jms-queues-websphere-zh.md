---
audio: false
generated: true
image: false
lang: zh
layout: post
model: x-ai/grok-4-fast
title: WebSphere应用服务器中的JMS队列
translated: true
type: note
---

### Java消息服务（JMS）概述
Java消息服务（JMS）是用于在Java应用程序之间发送消息的标准API，支持异步通信。它主要支持两种消息传递模式：点对点（使用队列）和发布-订阅（使用主题）。在IBM WebSphere应用服务器（WAS）中，JMS被集成用于处理企业应用内的消息传递，通常使用内置的默认消息传递提供程序或外部提供程序（如IBM MQ）。

### JMS中的队列
在JMS中，**队列**是一种用于**点对点消息传递**的目标类型。以下是详细说明：
- **用途**：发送到队列的消息仅会传递给一个消费者（接收者）。这种模式适用于需要由单个应用程序或组件处理消息的场景，例如任务分发或请求-响应模式。
- **关键特性**：
  - **先进先出（FIFO）**：消息通常按到达顺序处理，但JMS允许设置优先级。
  - **持久性**：消息可以是持久性（永久存储）或非持久性的，确保在发生故障时的可靠性。
  - **消费者**：多个消费者可以连接到队列，但每条消息仅被一个消费者处理。如果没有可用消费者，消息会排队等待处理。
- **相关组件**：
  - **队列发送者/生产者**：向队列发送消息。
  - **队列接收者/消费者**：轮询或监听队列中的消息。
  - **连接工厂**：用于创建与JMS提供程序的连接。

### IBM WebSphere应用服务器中的队列
在IBM WAS中，JMS队列被配置为服务器消息传递基础设施中的资源。WAS支持：
- **默认消息传递提供程序**：用于轻量级消息传递的内置JMS引擎。
- **与IBM MQ集成**：用于更稳健、可扩展的队列处理。

#### 基本配置
在WAS中使用队列的步骤：
1. **创建JMS总线**：用于消息路由的服务器逻辑分组。
2. **添加总线成员**：将应用服务器加入总线。
3. **创建队列目标**：定义队列（例如名称、JNDI绑定）并将其链接到总线。
4. **设置连接工厂**：供生产者/消费者连接使用。
5. **激活规范**：用于消息驱动Bean（MDB）自动从队列消费消息。

可以通过WAS管理控制台监控队列的深度、存在时间和吞吐量。例如，可以创建名为`MyApp.Queue`的队列，其JNDI名称为`jms/queue/MyQueue`，以便在代码中查找。

#### 示例用例
在银行应用中，队列可用于处理交易请求：前端向队列发送消息，后端MDB依次处理每条消息，确保无重复处理。

有关详细设置，请参考IBM的官方文档。

### 参考资料
- [为WebSphere应用服务器配置Java消息服务](https://www.ibm.com/docs/en/mfci/7.6.2?topic=clusters-configuring-jms-websphere-application-server)
- [WebSphere应用服务器中的队列集合](https://www.ibm.com/docs/en/was/8.5.5?topic=s-queue-collection)