---
audio: false
generated: true
lang: zh
layout: post
title: 传输层
translated: true
type: note
---

以下是一份详细教程，旨在帮助你学习《计算机网络技术（02141）》课程中**传输层**这一章节，该课程属于中国高等教育自学考试体系。本教程重点讲解传输层的功能（端到端通信、可靠性、拥塞控制）、协议（TCP 和 UDP）、端口号与多路复用，以及流量与差错控制机制。内容全面、适合初学者，并符合该课程要求的技术深度。

---

### 第一步：理解传输层的作用
**传输层**是 OSI 模型中的第四层，也是 TCP/IP 模型中的第三层。它充当了底层（处理物理数据传输）和上层（用户应用程序）之间的桥梁。其主要任务是确保数据高效、可靠地（如果需要）从一台设备传输到另一台设备。

- **重要性：** 没有传输层，像网页浏览器或电子邮件客户端这样的应用程序就无法正确地在互联网上发送或接收数据。

---

### 第二步：学习传输层的功能
传输层有几个关键职责。我们来逐一分解：

#### 1. 端到端通信
- **含义：** 确保数据从源设备传输到目标设备，无论中间经过哪些网络。
- **工作原理：** 发送方的传输层直接与接收方的传输层通信，无需关心路由器、交换机等复杂细节（这些由网络层处理）。
- **类比：** 就像直接给朋友寄信，而不关心信件经过哪些邮局。

#### 2. 可靠性
- **含义：** 保证数据完整、有序、无误地到达（如果协议要求）。
- **工作原理：** 某些协议（如 TCP）会检查数据是否丢失或损坏，并在需要时重传。其他协议（如 UDP）为了速度则省略此步骤。
- **类比：** 快递员确认包裹完好送达 vs. 直接把包裹扔过栅栏。

#### 3. 拥塞控制
- **含义：** 防止网络因数据过多而瘫痪。
- **工作原理：** 根据网络状况调整数据发送速率（例如，TCP 在流量大时会减速）。
- **类比：** 就像在交通拥堵时减速以避免堵塞。

---

### 第三步：探索传输层协议
传输层使用两个主要协议：**TCP** 和 **UDP**。每种协议采用不同的方法。

#### 1. TCP（传输控制协议）– 面向连接
- **功能：** 确保数据可靠、有序地传输。
- **主要特性：**
  - **连接建立：** 使用三次握手（SYN → SYN-ACK → ACK）建立连接。
  - **可靠性：** 重传丢失的数据包，确保数据不重复、不乱序。
  - **流量控制：** 调整发送速率以匹配接收方的处理能力。
  - **拥塞控制：** 在网络繁忙时降低发送速率。
- **示例：** 网页浏览（HTTP/HTTPS）、电子邮件（SMTP）、文件传输（FTP）。
- **类比：** 打电话——双方确认准备就绪，按顺序交谈，然后干净利落地挂断。

#### 2. UDP（用户数据报协议）– 无连接
- **功能：** 快速发送数据，但不提供保证。
- **主要特性：**
  - **无连接：** 无需建立连接，直接发送数据包（数据报）。
  - **不可靠：** 不检查数据是否丢失或乱序。
  - **快速：** 开销极小，适合对时间敏感的任务。
- **示例：** 视频流、在线游戏、DNS 查询。
- **类比：** 寄明信片——不确认是否送达，但简单快捷。

**对比表格：**

| **特性**         | **TCP**             | **UDP**            |
|---------------------|---------------------|--------------------|
| **连接**      | 是（握手）     | 否                 |
| **可靠性**     | 是（重传）   | 否                 |
| **速度**           | 较慢（开销大）   | 较快（轻量） |
| **顺序**           | 保证          | 不保证     |
| **使用场景**        | 网页、电子邮件          | 流媒体、游戏  |

---

### 第四步：理解端口号与多路复用
传输层使用**端口号**来管理同一设备上的多个应用程序。

#### 1. 端口号
- **定义：** 16 位数字（0–65,535），用于标识设备上的特定应用程序或服务。
- **类型：**
  - **知名端口（0–1023）：** 保留给常见服务（例如，80 用于 HTTP，443 用于 HTTPS，25 用于 SMTP）。
  - **注册端口（1024–49151）：** 供特定应用程序使用。
  - **动态端口（49152–65535）：** 临时分配，用于客户端连接。
- **类比：** 就像大楼里的房间号——每个应用程序都有自己的“地址”。

#### 2. 多路复用与多路分解
- **多路复用（发送端）：** 将来自多个应用程序的数据合并成一个流，通过网络发送。每个数据包都带有标识其应用程序的端口号。
- **多路分解（接收端）：** 根据端口号将传入数据拆分并传递给正确的应用程序。
- **工作原理：** 传输层为每个数据包添加一个包含源端口号和目标端口号的头部。
- **示例：** 你的浏览器（端口 50000）和电子邮件客户端（端口 50001）可以同时使用同一个网络连接。

**关键点：** IP 地址将数据送到正确的设备；端口号将数据送到该设备上正确的应用程序。

---

### 第五步：深入了解流量与差错控制机制
这些机制确保数据平稳、准确地传输（主要在 TCP 中）。

#### 1. 流量控制
- **含义：** 防止发送方使接收方不堪重负。
- **工作原理：**
  - **滑动窗口：** TCP 使用一个“窗口”，发送方在需要确认（ACK）之前可以发送该窗口内的数据。接收方通告其窗口大小（即它能处理多少数据）。
  - **动态调整：** 如果接收方缓冲区已满，窗口缩小；如果接收方准备就绪，窗口增大。
- **类比：** 就像往杯子里倒水——如果快满了，你就慢点倒。

#### 2. 差错控制
- **含义：** 检测并纠正数据传输中的错误。
- **工作原理：**
  - **序列号：** 每个 TCP 段都有一个编号，用于跟踪顺序和检测丢失的数据。
  - **确认（ACK）：** 接收方确认收到；缺少 ACK 会触发重传。
  - **校验和：** 根据数据计算出的一个值，用于检测损坏。如果不匹配，则重传该数据包。
- **类比：** 就像核对购物清单——缺失或损坏的物品需要重新订购。

**UDP 说明：** UDP 不进行流量或差错控制——如果需要，这些交由应用程序处理。

---

### 第六步：自考学习技巧
1. **记忆关键概念：**
   - 功能：端到端、可靠性、拥塞控制。
   - 协议：TCP（可靠）、UDP（快速）。
   - 端口：知名端口（如 80、443）、动态端口。
2. **可视化：**
   - 画出 TCP 的三次握手（SYN → SYN-ACK → ACK）。
   - 草图表示多路复用：多个应用程序 → 端口 → 一个网络流。
3. **练习题：**
   - TCP 和 UDP 有什么区别？
   - 传输层如何使用端口号？
   - 解释 TCP 如何确保可靠性。
4. **使用助记符：** “TCP = 全面控制协议”（可靠）；“UDP = 极速数据报协议”（快速）。
5. **现实世界示例：** 联系浏览网页（TCP）与流媒体（UDP）。

---

### 第七步：测试你的理解
回答以下问题以检查掌握程度：
1. 哪种协议使用三次握手？（TCP）
2. 端口号在多路复用中扮演什么角色？（标识应用程序）
3. TCP 如何处理丢失的数据包？（使用序列号和 ACK 进行重传）
4. 为什么在某些情况下 UDP 比 TCP 更受青睐？（速度快、开销低）

---

### 额外资源
- **书籍：** 《计算机网络：自顶向下方法》（Kurose & Ross）– 传输层章节。
- **在线资源：** Cisco 的传输层教程、YouTube（例如 PowerCert 关于 TCP vs. UDP 的视频）。
- **工具：** 使用 Wireshark 捕获 TCP/UDP 数据包，观察端口号的运作。

---

本教程深入讲解了传输层。请认真学习每个部分，练习解释概念（这对自考口试准备很有帮助），并重温难点，如流量控制或多路复用。如果你需要更多示例或 clarification，请随时提问！祝你学习顺利！