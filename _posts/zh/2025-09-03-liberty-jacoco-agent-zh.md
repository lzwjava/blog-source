---
audio: false
generated: true
image: false
lang: zh
layout: post
title: è‡ªç”±ä»£ç†ä¸JaCoCoä»£ç†å¯¹æ¯”
translated: true
type: note
---

åœ¨ WebSphere Liberty (WLP) ä¸­ï¼Œ`ws-javaagent.jar` æ˜¯ IBM è‡ªç ”çš„ Java æ’æ¡©ä»£ç†ã€‚å®ƒä¸»è¦ç”¨äºè¿è¡Œæ—¶ç›‘æ§ã€è¯Šæ–­ä»¥åŠä¸åº”ç”¨ç¨‹åºæ€§èƒ½ç®¡ç†ï¼ˆAPMï¼‰ã€Health Center æˆ– Liberty è‡ªæœ‰ç›‘æ§åŠŸèƒ½çš„é›†æˆã€‚å¯ç”¨è¯¥ä»£ç†åï¼ŒLiberty å¯è‡ªåŠ¨æ”¶é›†æ€§èƒ½åˆ†æã€åƒåœ¾å›æ”¶ã€çº¿ç¨‹åŠå…¶ä»– JVM çº§åˆ«çš„æŒ‡æ ‡ã€‚

è€Œ JaCoCo çš„ `jacocoagent.jar` åˆ™ä¸“ç”¨äº**ä»£ç è¦†ç›–ç‡æ£€æµ‹**ã€‚å…¶ä½œç”¨æ˜¯åœ¨è¿è¡Œæ—¶å¯¹å­—èŠ‚ç è¿›è¡Œæ’æ¡©ï¼Œä½¿æµ‹è¯•è¿è¡Œæˆ–åº”ç”¨æ‰§è¡Œèƒ½ç”Ÿæˆè¦†ç›–ç‡æ•°æ®ï¼ˆä¾‹å¦‚è®°å½•å“ªäº›ç±»ã€æ–¹æ³•å’Œåˆ†æ”¯è¢«æ‰§è¡Œè¿‡ï¼‰ã€‚

ä¸¤è€…çš„æ ¸å¿ƒåŒºåˆ«åœ¨äºï¼š

* **`ws-javaagent.jar`** â†’ é¢å‘ Liberty åŠ IBM å·¥å…·é“¾çš„é€šç”¨ç›‘æ§ã€æ€§èƒ½åˆ†æå’Œè¯Šæ–­
* **`jacocoagent.jar`** â†’ ç‹¬ç«‹äº Liberty çš„æµ‹è¯•/ä»£ç è¦†ç›–ç‡æŠ¥å‘Šç”Ÿæˆ

ä¸åº”ä½¿ç”¨ Liberty ä»£ç†æ›¿ä»£ JaCoCo ä»£ç†ã€‚è‹¥æ‚¨çš„ç›®æ ‡æ˜¯**ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š**ï¼ˆç”¨äº CI æµæ°´çº¿ã€SonarQubeã€Maven/Gradle æŠ¥å‘Šç­‰ï¼‰ï¼Œå¿…é¡»ç»§ç»­ä½¿ç”¨ **JaCoCo ä»£ç†**ã€‚Liberty ä»£ç†æ— æ³•ç”Ÿæˆ JaCoCo çš„ `.exec` è¦†ç›–ç‡æ–‡ä»¶ã€‚

ä½†å¦‚æœ‰éœ€è¦ï¼Œæ‚¨å¯ä»¥**åŒæ—¶è¿è¡Œè¿™ä¸¤ä¸ªä»£ç†**â€”â€”Java æ”¯æŒå¤šä¸ª `-javaagent` å‚æ•°ã€‚ä¾‹å¦‚ï¼š

```bash
-javaagent:/path/to/ws-javaagent.jar
-javaagent:/path/to/jacocoagent.jar=destfile=jacoco.exec,output=file
```

ğŸ‘‰ ç®€è€Œè¨€ä¹‹ï¼š
ä½¿ç”¨ **`jacocoagent.jar`** æ£€æµ‹ä»£ç è¦†ç›–ç‡
ä½¿ç”¨ **`ws-javaagent.jar`** å®ç° Liberty è¯Šæ–­/æ€§èƒ½åˆ†æ
äºŒè€…åŠŸèƒ½ä¸åŒï¼Œä¸å¯äº’ç›¸æ›¿ä»£ã€‚

éœ€è¦æˆ‘è¿›ä¸€æ­¥æ¼”ç¤ºå¦‚ä½•åœ¨ Liberty æœåŠ¡å™¨çš„ JVM é€‰é¡¹æ–‡ä»¶ä¸­åŒæ—¶é…ç½®è¿™ä¸¤ä¸ªä»£ç†å—ï¼Ÿ