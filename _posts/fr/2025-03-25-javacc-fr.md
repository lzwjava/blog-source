---
audio: false
generated: true
lang: fr
layout: post
title: Définition et Compilation de Grammaire JavaCC
translated: true
type: note
---

Je vais créer un artefact complet qui démontre JavaCC (Java Compiler Compiler) avec des exemples de définition de grammaire, de déclarations de variables et de compilation.

```java
/* Exemple de Grammaire JavaCC Basique */

// Options et déclaration de classe du parser
options {
    STATIC = false;  // Permettre plusieurs instances du parser
    LOOKAHEAD = 2;   // Définir le lookahead à 2 tokens
}

PARSER_BEGIN(SimpleParser)
public class SimpleParser {
    public static void main(String[] args) throws ParseException {
        SimpleParser parser = new SimpleParser(System.in);
        parser.Start();
    }
}
PARSER_END(SimpleParser)

// Spécifications Lexicales (Tokens)
TOKEN : {
    // Mots-clés
    < VAR: "var" >
    < INT: "int" >
    < BOOLEAN: "boolean" >
    < STRING: "string" >

    // Littéraux et Identifiants
    < NUMBER: (["0"-"9"])+ >
    < IDENTIFIER: ["a"-"z","A"-"Z","_"] (["a"-"z","A"-"Z","0"-"9","_"])* >

    // Opérateurs et Ponctuation
    < ASSIGN: "=" >
    < SEMICOLON: ";" >
    < PLUS: "+" >
    < MINUS: "-" >
    < MULTIPLY: "*" >
    < DIVIDE: "/" >
    < LPAREN: "(" >
    < RPAREN: ")" >
}

// Ignorer les espaces et commentaires
SKIP : {
    " " | "\t" | "\n" | "\r"
    | <SINGLE_LINE_COMMENT: "//" (~["\n","\r"])* ("\n"|"\r"|"\r\n")>
    | <MULTI_LINE_COMMENT: "/*" (~["*"])* "*" ("*" | (~["*","/"] (~["*"])* "*"))* "/">
}

// Règles de Grammaire
void Start() : {} {
    (Statement())* <EOF>
}

void Statement() : {} {
    VariableDeclaration()
    | Expression()
    | AssignmentStatement()
}

void VariableDeclaration() : {} {
    // Syntaxe: var [type] [identifiant] (= [expression])?;
    <VAR> Type() <IDENTIFIER> 
    ( <ASSIGN> Expression() )? 
    <SEMICOLON>
}

void Type() : {} {
    <INT> | <BOOLEAN> | <STRING>
}

void Expression() : {} {
    AdditiveExpression()
}

void AdditiveExpression() : {} {
    MultiplicativeExpression() 
    (
        <PLUS> MultiplicativeExpression()
        | <MINUS> MultiplicativeExpression()
    )*
}

void MultiplicativeExpression() : {} {
    PrimaryExpression() 
    (
        <MULTIPLY> PrimaryExpression()
        | <DIVIDE> PrimaryExpression()
    )*
}

void PrimaryExpression() : {} {
    <NUMBER>
    | <IDENTIFIER>
    | <LPAREN> Expression() <RPAREN>
}

void AssignmentStatement() : {} {
    <IDENTIFIER> <ASSIGN> Expression() <SEMICOLON>
}

```

Maintenant, je vais fournir une explication complète de JavaCC et comment travailler avec cette grammaire :

### Aperçu de JavaCC
JavaCC (Java Compiler Compiler) est un générateur de parser qui vous aide à créer des parsers et des tokenizers pour des langages personnalisés ou des domain-specific languages.

### Composants Clés dans l'Exemple :

1. **Bloc Options**
   - `STATIC = false` : Permet de créer plusieurs instances du parser
   - `LOOKAHEAD = 2` : Définit le parser pour regarder 2 tokens en avance pour la désambiguïsation

2. **Définitions de Tokens**
   - Définit les tokens comme les mots-clés, identifiants, nombres et opérateurs
   - Utilise des expressions régulières pour correspondre aux modèles de tokens
   - Exemples de tokens :
     - `< NUMBER: (["0"-"9"])+ >` correspond à un ou plusieurs chiffres
     - `< IDENTIFIER: ["a"-"z","A"-"Z","_"] (["a"-"z","A"-"Z","0"-"9","_"])* >` correspond aux noms de variables

3. **Spécifications Skip**
   - Définit ce qu'il faut ignorer pendant le parsing (espaces, commentaires)
   - Inclut la gestion des commentaires sur une ligne et multi-lignes

4. **Règles de Grammaire**
   - Définissent la syntaxe et la structure du langage
   - Utilisent le parsing récursif descendant
   - Les règles comme `VariableDeclaration()`, `Expression()` définissent les constructions du langage

### Étapes de Compilation et d'Utilisation

1. **Générer le Parser**
   ```bash
   javacc SimpleParser.jj
   ```
   Cette commande génère :
   - `SimpleParserConstants.java`
   - `SimpleParserTokenManager.java`
   - `ParseException.java`
   - `SimpleParser.java`

2. **Compiler les Fichiers Générés**
   ```bash
   javac *.java
   ```

3. **Exécuter le Parser**
   ```bash
   java SimpleParser
   ```

### Exemple d'Entrée
```
var int x = 10;
var int y = 20;
x = x + y;
```

### Fonctionnalités Démonstrées
- Déclaration de variable avec initialisation optionnelle
- Expressions arithmétiques basiques
- Système de type (int, boolean, string)
- Instructions d'affectation
- Opérations arithmétiques (+, -, *, /)

### Limitations de Cet Exemple
- Gestion d'erreur basique
- Vérification de type limitée
- Grammaire simplifiée

### Conseils d'Utilisation Avancée
- Utilisez les actions sémantiques (code Java dans `{}`) pour un parsing plus complexe
- Implémentez une récupération d'erreur personnalisée
- Ajoutez la vérification de type et l'analyse sémantique