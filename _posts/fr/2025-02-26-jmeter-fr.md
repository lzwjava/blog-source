---
audio: false
generated: true
lang: fr
layout: post
title: 'Maîtriser JMeter : Tests de Performance'
translated: true
type: note
---

Apache JMeter est un outil open-source puissant conçu principalement pour les tests de performance, bien qu'il puisse également être utilisé pour les tests fonctionnels. Il est largement utilisé pour tester les performances des applications web, des API, des bases de données et d'autres services en simulant de multiples utilisateurs et en mesurant la réponse du système sous charge. Voici un guide étape par étape sur la façon d'utiliser JMeter efficacement, de l'installation à l'exécution d'un test de base et à l'analyse des résultats.

---

## Étape 1 : Installer JMeter
Avant de pouvoir utiliser JMeter, vous devez l'installer sur votre machine. Voici comment :

1. **Prérequis** :  
   JMeter est une application basée sur Java, vous devez donc avoir le Java Development Kit (JDK) ou le Java Runtime Environment (JRE) installé. La version 8 ou supérieure est recommandée. Vous pouvez vérifier cela en exécutant `java -version` dans votre terminal ou invite de commande. Si Java n'est pas installé, téléchargez-le et installez-le depuis le [site web officiel de Java](https://www.java.com).

2. **Télécharger JMeter** :  
   Rendez-vous sur le [site web d'Apache JMeter](https://jmeter.apache.org/download_jmeter.cgi) et téléchargez la dernière version binaire (généralement un fichier `.zip` ou `.tgz`).

3. **Extraire le Fichier** :  
   Dézippez le fichier téléchargé dans un répertoire de votre choix (par exemple, `C:\JMeter` sur Windows ou `~/JMeter` sur les systèmes de type Unix). Le dossier extrait contient tous les fichiers nécessaires pour exécuter JMeter.

4. **Lancer JMeter** :  
   - Naviguez vers le dossier `bin` dans le répertoire extrait (par exemple, `C:\JMeter\apache-jmeter-5.x\bin`).
   - Exécutez l'exécutable approprié :
     - Sur **Windows** : Double-cliquez sur `jmeter.bat` ou exécutez-le via l'invite de commande.
     - Sur **Unix/Linux/macOS** : Exécutez `./jmeter.sh` dans le terminal.
   - Cela ouvre l'Interface Graphique Utilisateur (GUI) de JMeter, où vous créerez et gérerez vos plans de test.

---

## Étape 2 : Créer un Plan de Test
Un **Plan de Test** dans JMeter définit ce que vous voulez tester et comment. C'est le plan directeur pour votre test de performance. Voici comment configurer un plan de test de base :

### Ajouter un Groupe de Fils d'Exécution (Thread Group)
1. Dans l'interface graphique de JMeter, faites un clic droit sur le nœud **Test Plan** dans le volet de gauche et sélectionnez **Add > Threads (Users) > Thread Group**.
2. Configurez le Thread Group :
   - **Number of Threads (Users)** : Le nombre d'utilisateurs virtuels à simuler (par exemple, 10).
   - **Ramp-Up Period (seconds)** : Le temps que JMeter prend pour démarrer tous les threads (par exemple, 10 secondes signifie 1 thread démarrant par seconde pour 10 threads).
   - **Loop Count** : Le nombre de fois que chaque thread répète le test (par exemple, 1 pour une seule exécution, ou cochez "Forever" pour une boucle continue).

Le Thread Group simule le trafic utilisateur. Par exemple, 10 threads avec un ramp-up de 10 secondes et 1 boucle signifie que 10 utilisateurs solliciteront l'application sur 10 secondes, chacun effectuant le test une fois.

### Ajouter un Échantillonneur (Sampler)
Les échantillonneurs définissent les requêtes que JMeter envoie au système cible. Pour les tests web, le plus courant est l'échantillonneur HTTP Request :
1. Faites un clic droit sur le Thread Group et sélectionnez **Add > Sampler > HTTP Request**.
2. Configurez la requête HTTP :
   - **Protocol** : `http` ou `https`.
   - **Server Name or IP** : Le domaine ou l'IP du système cible (par exemple, `example.com`).
   - **Port Number** : Généralement `80` pour HTTP ou `443` pour HTTPS (laissez vide si standard).
   - **Method** : `GET`, `POST`, etc., selon le type de requête.
   - **Path** : Le point de terminaison ou la page spécifique (par exemple, `/` pour la page d'accueil).
   - Ajoutez des paramètres ou un corps de requête si nécessaire (par exemple, pour les requêtes POST).

Cet échantillonneur indique à JMeter quelle action chaque utilisateur virtuel doit effectuer.

### Ajouter un Écouteur (Listener)
Les écouteurs collectent et affichent les résultats des tests :
1. Faites un clic droit sur le Thread Group et sélectionnez **Add > Listener > View Results Tree** (ou un autre écouteur comme **Summary Report**).
2. Le **View Results Tree** montre les résultats détaillés pour chaque requête, y compris les temps de réponse, les codes d'état et les données de réponse.

Les écouteurs sont essentiels pour analyser les performances de votre application pendant le test.

### Sauvegarder le Plan de Test
Cliquez sur **File > Save Test Plan As** et sauvegardez votre fichier `.jmx` (par exemple, `mytest.jmx`). Cela vous permet de le réutiliser ou de le modifier ultérieurement.

---

## Étape 3 : Exécuter le Test
Pour exécuter votre test :
1. Dans l'interface graphique de JMeter, cliquez sur le bouton vert **Play** (▶) dans la barre d'outils, ou allez dans **Run > Start**.
2. JMeter simulera les utilisateurs définis dans le Thread Group, en envoyant les requêtes HTTP configurées.
3. Observez les résultats s'afficher dans l'Écouteur (par exemple, View Results Tree) pendant l'exécution du test.

Pour les petits tests, l'exécution via l'interface graphique est adaptée. Pour les tests plus importants, consultez la section "Utilisation Avancée" ci-dessous pour le mode non-GUI.

---

## Étape 4 : Analyser les Résultats
Une fois le test terminé, utilisez l'Écouteur pour examiner les résultats :
- **View Results Tree** : Montre le succès/l'échec de chaque requête, le temps de réponse et les données de réponse.
- **Summary Report** : Fournit des métriques agrégées comme le temps de réponse moyen, le débit (requêtes par seconde) et le taux d'erreur.

Ces métriques vous aident à évaluer les performances de l'application (par exemple, sa rapidité de réponse sous charge ou si elle échoue à un certain nombre d'utilisateurs).

---

## Exemple : Tester une Page Web Simple
Testons `example.com` avec 10 utilisateurs :
1. Lancez JMeter.
2. Ajoutez un Thread Group :
   - Threads : 10
   - Ramp-Up : 10 secondes
   - Loop Count : 1
3. Ajoutez un échantillonneur HTTP Request :
   - Protocol : `http`
   - Server Name : `example.com`
   - Method : `GET`
   - Path : `/`
4. Ajoutez un écouteur View Results Tree.
5. Sauvegardez et exécutez le test.
6. Vérifiez les résultats dans le View Results Tree pour voir les temps de réponse et les codes d'état (par exemple, 200 OK).

Ce test simple mesure les performances de `example.com` avec 10 utilisateurs simultanés.

---

## Utilisation Avancée
Pour des scénarios plus complexes, JMeter offre des fonctionnalités supplémentaires :

### Paramétrage
Utilisez **CSV Data Set Config** pour injecter différentes données (par exemple, noms d'utilisateur, mots de passe) dans votre test depuis un fichier CSV :
1. Ajoutez **Config Element > CSV Data Set Config** au Thread Group.
2. Spécifiez le chemin du fichier et les noms de variables (par exemple, `${username}`), puis utilisez ces variables dans votre requête HTTP.

### Corrélation
Gérez les valeurs dynamiques (par exemple, IDs de session, jetons) :
1. Ajoutez un **Post-Processor > Regular Expression Extractor** ou **JSON Extractor** après une requête.
2. Extrayez une valeur (par exemple, un jeton) dans une variable (par exemple, `${token}`).
3. Utilisez `${token}` dans les requêtes suivantes (par exemple, dans les en-têtes ou les paramètres).

### Assertions
Validez les réponses :
1. Ajoutez **Assertion > Response Assertion** à l'échantillonneur.
2. Vérifiez la présence d'un texte spécifique, de codes de réponse (par exemple, 200), ou utilisez JSONPath pour les tests d'API.

### Mode Non-GUI
Pour les tests volumineux ou l'automatisation :
- Exécutez JMeter depuis la ligne de commande :
  ```
  jmeter -n -t mytest.jmx -l results.jtl
  ```
  - `-n` : Mode non-GUI.
  - `-t` : Fichier de plan de test.
  - `-l` : Fichier journal des résultats (par exemple, `.jtl`).
- Générez un rapport HTML :
  ```
  jmeter -n -t mytest.jmx -l results.jtl -e -o report_folder
  ```
  - `-e` : Générer un rapport.
  - `-o` : Dossier de sortie pour le rapport HTML.

### Tests Distribués
Pour des charges élevées :
1. Configurez plusieurs instances JMeter sur différentes machines.
2. Configurez le fichier `jmeter.properties` de la machine maître pour inclure les IP des esclaves.
3. Exécutez le test depuis le maître pour coordonner la génération de la charge.

---

## Conseils Supplémentaires
- **Protocoles Supportés** : Au-delà du HTTP, JMeter supporte FTP, JDBC, JMS et plus encore, le rendant polyvalent pour divers systèmes.
- **Surveillance du Serveur** : Associez JMeter à des outils côté serveur (par exemple, PerfMon) pour surveiller le CPU, la mémoire et les performances de la base de données pendant les tests.
- **Simulation Réaliste** : Ajoutez **HTTP Cookie Manager**, **HTTP Cache Manager** ou **Timers** pour imiter le comportement d'un navigateur ou le temps de réflexion de l'utilisateur.
- **Test Fonctionnel** : Utilisez les assertions pour vérifier l'exactitude des réponses, pas seulement les performances.

---

## Conclusion
Pour utiliser JMeter :
1. Installez-le avec Java et lancez l'interface graphique.
2. Créez un Plan de Test avec un Thread Group, des Échantillonneurs et des Écouteurs.
3. Configurez les éléments du test (utilisateurs, requêtes, etc.).
4. Exécutez le test et analysez les résultats.

Pour un début simple, testez une page web comme `example.com` comme montré ci-dessus. Au fur et à mesure que vous gagnerez en expérience, explorez les fonctionnalités avancées comme le paramétrage, la corrélation et les tests distribués pour gérer des scénarios complexes du monde réel. La flexibilité de JMeter et sa documentation extensive en font un outil précieux pour les testeurs débutants et avancés.