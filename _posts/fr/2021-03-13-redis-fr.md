---
lang: fr
layout: post
title: "# Introduction à Redis\n\nRedis (Remote Dictionary Server) est un système\
  \ de stockage de données en mémoire open source, souvent utilisé comme base de données,\
  \ cache et système de messagerie. Il est connu pour sa rapidité, sa simplicité et\
  \ sa polyvalence. Redis prend en charge plusieurs types de structures de données,\
  \ telles que les chaînes, les hachages, les listes, les ensembles, les ensembles\
  \ triés, et bien d'autres.\n\n## Pourquoi utiliser Redis ?\n\n1. **Performance élevée**\
  \ : Étant donné que Redis stocke les données en mémoire, il offre des temps de réponse\
  \ extrêmement rapides, souvent en microsecondes.\n2. **Polyvalence** : Redis prend\
  \ en charge une variété de structures de données, ce qui le rend adapté à de nombreux\
  \ cas d'utilisation.\n3. **Persistance** : Bien que Redis soit principalement un\
  \ système de stockage en mémoire, il offre des options de persistance des données\
  \ sur disque.\n4. **Réplication et haute disponibilité** : Redis prend en charge\
  \ la réplication maître-esclave et offre des solutions pour la haute disponibilité.\n\
  \n## Installation de Redis\n\nPour commencer à utiliser Redis, vous devez d'abord\
  \ l'installer sur votre système. Voici comment installer Redis sur un système Linux\
  \ :\n\n```bash\nsudo apt update\nsudo apt install redis-server\n```\n\nUne fois\
  \ installé, vous pouvez démarrer le serveur Redis avec la commande suivante :\n\n\
  ```bash\nsudo systemctl start redis-server\n```\n\nPour vérifier que Redis fonctionne\
  \ correctement, vous pouvez utiliser la commande `redis-cli` pour vous connecter\
  \ au serveur :\n\n```bash\nredis-cli\n```\n\n## Commandes de base\n\nVoici quelques\
  \ commandes de base pour interagir avec Redis :\n\n- **SET** : Définir une valeur\
  \ pour une clé.\n  ```bash\n  SET mykey \"Hello Redis\"\n  ```\n\n- **GET** : Récupérer\
  \ la valeur d'une clé.\n  ```bash\n  GET mykey\n  ```\n\n- **DEL** : Supprimer une\
  \ clé.\n  ```bash\n  DEL mykey\n  ```\n\n- **INCR** : Incrémenter la valeur d'une\
  \ clé.\n  ```bash\n  SET counter 10\n  INCR counter\n  ```\n\n- **LPUSH/RPUSH**\
  \ : Ajouter des éléments au début ou à la fin d'une liste.\n  ```bash\n  LPUSH mylist\
  \ \"item1\"\n  RPUSH mylist \"item2\"\n  ```\n\n- **LRANGE** : Récupérer une plage\
  \ d'éléments d'une liste.\n  ```bash\n  LRANGE mylist 0 -1\n  ```\n\n## Utilisation\
  \ de Redis avec Python\n\nRedis peut être facilement intégré à des applications\
  \ Python en utilisant la bibliothèque `redis-py`. Voici un exemple simple :\n\n\
  ```python\nimport redis\n\n# Connexion au serveur Redis\nr = redis.Redis(host='localhost',\
  \ port=6379, db=0)\n\n# Définir une valeur\nr.set('foo', 'bar')\n\n# Récupérer une\
  \ valeur\nvalue = r.get('foo')\nprint(value.decode('utf-8'))  # Affiche 'bar'\n\
  ```\n\n## Conclusion\n\nRedis est un outil puissant et flexible qui peut être utilisé\
  \ dans de nombreux scénarios, du cache simple à la gestion de données complexes.\
  \ Avec ses performances élevées et sa prise en charge de diverses structures de\
  \ données, Redis est un choix populaire pour de nombreuses applications modernes.\n\
  \nPour en savoir plus, consultez la [documentation officielle de Redis](https://redis.io/documentation)."
---

En ouvrant le site officiel de Redis, la première phrase indique que Redis est un système de stockage de structures de données en mémoire open source, souvent utilisé comme base de données et cache. `Redis` est très couramment utilisé.

## Installation de Redis

Vous pouvez installer `Redis` depuis le site officiel. Tout comme pour `SQLite`, une fois l'installation terminée, comment utiliser `Redis` dans `Python` ?

```shell
pip install redis
```

```shell
>>> import redis
>>> r = redis.Redis(host='localhost', port=6379, db=0)
>>> r.set('foo', 'bar')
True
>>> r.get('foo')
b'bar'
```

La documentation de Python fournit quelques exemples. Ici, quelque chose comme `pip` apparaît. `pip` est un outil de gestion de paquets. Pour comprendre ce qu'est un outil de gestion de paquets, vous pouvez consulter le chapitre « Familiarisation avec l'environnement de programmation ». `pip` est à `Python` ce que `Homebrew` est au système `macOS`.

`pip` est généralement inclus lors de l'installation de `Python`. Si votre ordinateur dispose de plusieurs versions de `Python` et `Pip`, vous pouvez ajouter les deux lignes suivantes dans votre fichier `~/.bash_profile` :

```shell
alias python=/usr/local/Cellar/python@3.9/3.9.1_6/bin/python3
alias pip=/usr/local/Cellar/python@3.9/3.9.1_6/bin/pip3
```

Cela signifie spécifier une version de `python` et `pip`. Une méthode consiste à utiliser `Homebrew` pour l'installation. Il est également possible de l'installer en le construisant à partir des sources.

```shell
make
make test
make install
```

```shell
$ redis-server
87684:C 10 Mar 2021 14:46:06.056 # oO0OoO0OoO0Oo Redis démarre oO0OoO0OoO0Oo
87684:C 10 Mar 2021 14:46:06.056 # Version de Redis=6.2.1, bits=64, commit=00000000, modifié=0, pid=87684, vient de démarrer
87684:C 10 Mar 2021 14:46:06.056 # Avertissement : aucun fichier de configuration spécifié, utilisation de la configuration par défaut. Pour spécifier un fichier de configuration, utilisez redis-server /chemin/vers/redis.conf
87684:M 10 Mar 2021 14:46:06.057 * Nombre maximum de fichiers ouverts augmenté à 10032 (il était initialement défini à 4864).
87684:M 10 Mar 2021 14:46:06.057 * Horloge monotone : POSIX clock_gettime
...
Redis 6.2.1 (00000000/0) 64 bits
...
87684:M 10 Mar 2021 14:46:06.058 # Serveur initialisé
87684:M 10 Mar 2021 14:46:06.058 * Prêt à accepter les connexions
```

Voici un extrait du contenu. On peut voir que nous avons déjà installé Redis. La version est `6.2.1`, la plus récente sur le site officiel. Ouvrez une autre fenêtre de terminal. Vous pouvez essayer de jouer un peu avec :
```shell
$ redis-cli
127.0.0.1:6379> set a 2
OK
127.0.0.1:6379> get a
"2"
```

Exécutez le code suivant.

```python
import redis
```

```python
r = redis.Redis(host='localhost', port=6379, db=0)
r.set('foo', 'bar')
print(r.get('foo'))
```

Sortie :

```shell
$ python fib_redis.py
b'bar'
```

## Exemple de mise en cache avec Redis

Pour implémenter la suite de Fibonacci en version `Redis`.

```python
import redis
```

```python
r = redis.Redis(host='localhost', port=6379, db=0)
```

```python
def f(n):
    nr = r.get(n)
    if nr is not None:
        return int(nr)
    res_n = 0
    if n < 2:
        res_n = n
    else:
        res_n = f(n-1) + f(n-2)
    
    r.set(n, res_n)
    return res_n
```

```python
print(f(10))
```

Et voilà, c'est fait.