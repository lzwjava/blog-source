---
audio: false
lang: fr
layout: post
title: 'Assemblage macOS : Bonjour le monde'
translated: true
---

Ce code crée un programme "Hello, World !". Il utilise des appels système pour écrire le message sur la console puis quitter. La section `.text` contient les instructions exécutables, commençant à `_start`. Elle configure d'abord l'appel `sys_write` (écriture sur stdout) puis l'appel `sys_exit` (quitter proprement). La section `.data` stocke le message lui-même et calcule sa longueur.

```bash
.global _start
.text

_start:
    // Écrire "Hello, World !" sur stdout
    mov x8, #64             // numéro d'appel système pour write (sys_write)
    mov x0, #1              // descripteur de fichier 1 (stdout)
    ldr x1, =msg            // adresse du message
    mov x2, #14             // longueur du message
    svc #0                  // invoquer l'appel système

    // Quitter le programme
    mov x8, #93             // numéro d'appel système pour exit (sys_exit)
    mov x0, #0              // code de sortie 0
    svc #0                  // invoquer l'appel système

.data
msg:
    .asciz "Hello, World!\n"
```

```bash
as -o hello.o hello.s

% clang -o hello hello.o -nostdlib -e _start -Wl,-platform_version,macos,15.0,15.0 -arch arm64

% ./hello
zsh: appel système invalide  ./hello
```
