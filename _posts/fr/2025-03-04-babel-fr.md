---
audio: false
generated: true
lang: fr
layout: post
title: Packages Babel pour la compatibilité des navigateurs
translated: true
type: note
---

### Points Clés
- Il semble probable que ces packages Babel soient utilisés pour compiler du JavaScript moderne (ES2015) en des versions plus anciennes pour assurer la compatibilité avec les navigateurs, en particulier dans un projet front-end basé sur webpack.
- Les recherches suggèrent que la configuration implique l'installation de versions spécifiques, la création d'un fichier `.babelrc` et la configuration de webpack pour utiliser le `babel-loader`.
- Les indices penchent vers des problèmes de compatibilité minimes pour ces versions plus anciennes, mais il faut s'assurer que tous les packages sont correctement installés.

### Installation
D'abord, installez les packages avec ces commandes :

```bash
npm install --save-dev \
  "babel-core@6.13.0" \
  "babel-loader@6.2.5" \
  "babel-plugin-transform-runtime@6.12.0" \
  "babel-preset-es2015@6.13.2" \
  "babel-runtime@6.11.6"
```

### Configuration
Créez un fichier `.babelrc` à la racine de votre projet avec :

```json
{
  "presets": ["es2015"],
  "plugins": ["transform-runtime"]
}
```

Ensuite, configurez votre `webpack.config.js` comme ceci :

```javascript
module.exports = {
  entry: './index.js',
  output: {
    filename: 'bundle.js'
  },
  module: {
    rules: [
      {
        test: /\.js$/,
        loader: 'babel-loader',
        options: {
          configFile: './.babelrc'
        }
      }
    ]
  }
};
```

### Utilisation
Écrivez votre code JavaScript ES2015 dans des fichiers comme `index.js`, puis exécutez `npx webpack` pour le compiler en `bundle.js`, que les navigateurs plus anciens peuvent comprendre.

### Détail Inattendu
Un aspect inattendu est qu'il s'agit de versions plus anciennes (Babel 6), maintenant dépréciées au profit de Babel 7, ce qui pourrait affecter la maintenance à long terme mais convient pour les projets legacy.

---

### Note d'Enquête : Configuration Détaillée et Utilisation des Packages Babel

Cette section fournit un guide complet sur l'utilisation des packages Babel spécifiés—`babel-core@6.13.0`, `babel-loader@6.2.5`, `babel-plugin-transform-runtime@6.12.0`, `babel-preset-es2015@6.13.2`, et `babel-runtime@6.11.6`—dans un projet JavaScript, en particulier pour le développement front-end avec webpack. Étant donné les versions, ceux-ci font partie de Babel 6, une suite plus ancienne mais toujours fonctionnelle pour transpiler le JavaScript moderne (ES2015) en ES5 pour une meilleure compatibilité des navigateurs. Les détails suivants couvrent l'installation, la configuration, l'utilisation et les considérations, assurant une compréhension approfondie pour les développeurs travaillant sur des projets legacy ou spécifiques.

#### Contexte et Objectif
Babel est un compilateur JavaScript qui transforme la syntaxe moderne en des versions plus anciennes et plus largement supportées. Les packages listés proviennent de Babel 6, qui était prévalent avant la mise à jour majeure vers Babel 7. `babel-core@6.13.0` fournit la fonctionnalité de compilation principale, tandis que `babel-loader@6.2.5` s'intègre avec webpack pour les builds front-end. `babel-preset-es2015@6.13.2` permet la transformation ES2015 (ECMAScript 2015) vers ES5, et `babel-plugin-transform-runtime@6.12.0` avec `babel-runtime@6.11.6` optimise le code en externalisant les fonctions d'aide, réduisant la duplication.

Étant donné la date actuelle, le 3 mars 2025, ces versions sont notablement obsolètes, Babel 7 et au-delà étant la norme. Cependant, pour les projets legacy ou des besoins spécifiques, elles restent pertinentes. La requête de l'utilisateur implique un besoin de configuration dans un environnement webpack, étant donné l'inclusion de `babel-loader`, bien que des alternatives comme Babel CLI soient également envisagées.

#### Processus d'Installation
Pour commencer, installez les packages en tant que dépendances de développement en utilisant npm. La commande assure des versions exactes comme spécifié :

```bash
npm install --save-dev \
  "babel-core@6.13.0" \
  "babel-loader@6.2.5" \
  "babel-plugin-transform-runtime@6.12.0" \
  "babel-preset-es2015@6.13.2" \
  "babel-runtime@6.11.6"
```

Cette étape les place dans `package.json` sous `devDependencies`, assurant qu'ils sont disponibles pour les processus de build mais pas regroupés en production. Notez que `babel-runtime` est typiquement une dépendance runtime dans certaines configurations, mais ici, étant donné le plugin, il est traité comme une dépendance dev pour la cohérence avec la transformation.

#### Détails de la Configuration
La configuration implique deux fichiers principaux : `.babelrc` pour les paramètres Babel et `webpack.config.js` pour l'intégration webpack.

##### Fichier `.babelrc`
Créez ou modifiez `.babelrc` à la racine du projet avec le contenu suivant :

```json
{
  "presets": ["es2015"],
  "plugins": ["transform-runtime"]
}
```

- **Presets** : `"es2015"` correspond à `babel-preset-es2015@6.13.2`, activant toutes les transformations ES2015 vers ES5, telles que les fonctions fléchées, let/const et les classes.
- **Plugins** : `"transform-runtime"` utilise `babel-plugin-transform-runtime@6.12.0` pour externaliser les aides Babel, référençant `babel-runtime@6.11.6`, ce qui réduit la taille du code compilé en évitant la duplication des aides entre les fichiers.

Cette configuration assure que le code ES2015 est transpilé et optimisé pour l'efficacité du runtime.

##### Configuration Webpack
Pour webpack, créez ou mettez à jour `webpack.config.js` avec :

```javascript
module.exports = {
  entry: './index.js',
  output: {
    filename: 'bundle.js'
  },
  module: {
    rules: [
      {
        test: /\.js$/,
        loader: 'babel-loader',
        options: {
          configFile: './.babelrc'
        }
      }
    ]
  }
};
```

- **Entry et Output** : Spécifie `index.js` comme point d'entrée et produit `bundle.js`.
- **Règles de Module** : Utilise `babel-loader@6.2.5` pour les fichiers `.js`, pointant vers `.babelrc` pour les options, assurant que Babel traite les fichiers avant le regroupement.

Cette configuration tire parti du système de modules de webpack pour gérer les fichiers JavaScript, en les compilant via Babel.

#### Utilisation et Flux de Travail
Une fois la configuration terminée, écrivez votre code ES2015 dans des fichiers comme `index.js`. Par exemple :

```javascript
const arr = [1, 2, 3];
const sum = arr.reduce((a, b) => a + b, 0);
console.log(sum);
```

Exécutez la commande de build :

```bash
npx webpack
```

Cela compile le code en `bundle.js`, qui peut être inclus dans le HTML pour l'exécution dans le navigateur, assurant la compatibilité avec des environnements plus anciens. Le plugin `transform-runtime` assure que les aides sont partagées, réduisant la taille du bundle, ce qui est particulièrement utile pour les grands projets.

#### Utilisation Alternative : Babel CLI
Bien que la requête suggère une configuration webpack, pour être complet, envisagez d'utiliser Babel CLI pour une compilation manuelle sans webpack. D'abord, installez `babel-cli@6.13.0` :

```bash
npm install --save-dev "babel-cli@6.13.0"
```

Ensuite, compilez les fichiers avec :

```bash
./node_modules/.bin/babel src/index.js -o lib/index.js
```

Ou, ajoutez aux scripts `package.json` :

```json
"scripts": {
  "build": "babel src --out-dir lib"
}
```

Exécutez avec `npm run build`, ce qui produit les fichiers compilés dans `lib/`, utile pour les projets Node.js ou le code côté serveur.

#### Compatibilité et Considérations
Étant donné les versions (toutes autour de Babel 6, publiées il y a des années), la compatibilité est généralement assurée au sein de la même version majeure. Cependant, notez :

- `babel-loader@6.2.5` fonctionne avec webpack 1 et 2, assurez-vous donc que votre version de webpack (par exemple, `webpack@1.14.0`) est compatible.
- Ces packages sont dépréciés au profit de Babel 7, qui utilise des packages scopés comme `@babel/core`. Pour les projets à long terme, envisagez une mise à niveau, mais pour le legacy, ceux-ci fonctionnent correctement.
- Assurez-vous qu'il n'y a pas de conflits de nommage ; la liste de l'utilisateur avait des espaces (par exemple, "babel loader"), probablement des coquilles, corrigées en traits d'union (par exemple, `babel-loader`).

#### Pièges Potentiels
- Assurez-vous que `.babelrc` est à la racine du projet, ou spécifiez le chemin dans les options webpack.
- Vérifiez que `babel-runtime` est installé, car `transform-runtime` en dépend pour les aides.
- Vérifiez la présence d'avertissements de dépréciation pendant l'installation, étant donné l'âge de ces versions, mais elles devraient fonctionner comme prévu pour l'utilisation prévue.

#### Tableau : Rôles et Versions des Packages

| Nom du Package                  | Version | Rôle                                                                 |
|---------------------------------|---------|----------------------------------------------------------------------|
| `babel-core`                  | 6.13.0  | Fonctionnalité de compilation principale pour Babel.                            |
| `babel-loader`                | 6.2.5   | Loader webpack pour Babel, compile les fichiers JavaScript.                  |
| `babel-plugin-transform-runtime` | 6.12.0 | Plugin pour externaliser les aides, réduisant la duplication de code.             |
| `babel-preset-es2015`         | 6.13.2  | Preset pour la transformation ES2015 vers ES5, activant la syntaxe moderne.      |
| `babel-runtime`               | 6.11.6  | Bibliothèque runtime fournissant les aides pour le plugin `transform-runtime`.     |

Ce tableau résume le rôle de chaque package, aidant à comprendre leur but dans la configuration.

#### Détail Inattendu : Contexte Legacy
Un aspect intéressant est qu'il s'agit de versions Babel 6, maintenant dépréciées, Babel 7 ayant introduit des packages scopés (par exemple, `@babel/core`). Cette configuration est typique pour les projets legacy, et bien que fonctionnelle, elle peut manquer de fonctionnalités modernes comme un meilleur support TypeScript ou des optimisations de performance dans Babel 7, ce qui pourrait être inattendu pour les développeurs habitués aux standards actuels.

#### Conclusion
Ce guide couvre la configuration des packages Babel spécifiés pour un projet front-end basé sur webpack, avec une alternative pour Babel CLI. Étant donné les versions, assurez la compatibilité avec webpack 1 ou 2, et soyez conscient de la dépréciation, mais pour l'utilisation prévue, cela devrait fonctionner de manière transparente. Pour plus de détails, reportez-vous aux liens de documentation fournis.

#### Citations Clés
- [Documentation webpack de babel-loader](https://webpack.js.org/loaders/babel-loader/)
- [Package npm babel-preset-es2015](https://www.npmjs.com/package/babel-preset-es2015)
- [Package npm babel-plugin-transform-runtime](https://www.npmjs.com/package/babel-plugin-transform-runtime)
- [Package npm babel-runtime](https://www.npmjs.com/package/babel-runtime)
- [Documentation officielle de Webpack](https://webpack.js.org/)