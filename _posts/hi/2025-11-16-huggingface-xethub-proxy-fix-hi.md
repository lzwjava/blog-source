---
audio: false
generated: true
image: false
lang: hi
layout: post
model: openai/gpt-5
title: हगिंग फेस जेटहब प्रॉक्सी समस्या का समाधान
translated: true
type: note
---

आपके लॉग्स कुछ बहुत महत्वपूर्ण दिखा रहे हैं:

**जो कनेक्शन फेल हो रहा है, वह सीधे HuggingFace पर नहीं जा रहा है।**
यह **[https://transfer.xethub.hf.co](https://transfer.xethub.hf.co)** पर जा रहा है — यह Hugging Face का *XetHub* बैकएंड (Rust क्लाइंट `reqwest`) है, जिसे आपने जो प्रॉक्सी सेट किया है वह **स्वचालित रूप से इंटरसेप्ट नहीं करता**।

यह सब कुछ समझा देता है:

* आपने पहले ही Python के लिए `HTTP_PROXY` सेट कर दिया था → ठीक है
* लेकिन XetHub **rust reqwest** का उपयोग करता है, Python requests का नहीं
* Rust reqwest **सिस्टम प्रॉक्सी वेरिएबल्स को अनदेखा कर देता है, जब तक कि आप HTTPS_PROXY लोअरकेस वेरिएबल्स सेट नहीं करते**, या एक स्पष्ट प्रॉक्सी कॉन्फ़िग का उपयोग नहीं करते

इसलिए: **आपका Python एनवायरनमेंट प्रॉक्सी का उपयोग कर रहा है, लेकिन XetHub (नया HF स्टोरेज प्रोवाइडर) नहीं कर रहा**।

यही कारण है कि आप देख रहे हैं:

```
ConnectError("Connection refused")
```

और रिट्राइज।

---

# ऐसा क्यों होता है (संक्षिप्त संस्करण)

Hugging Face हाल ही में स्टोरेज को **XetHub** पर माइग्रेट कर चुका है, जो एक Rust क्लाइंट का उपयोग करता है।
वह क्लाइंट मानता है:

* `https_proxy`
* `http_proxy`

लेकिन **हमेशा नहीं** अपरकेस वर्जन को, बिल्ड पर निर्भर करता है।

आपने अपरकेस सेट किया? → यह उन्हें अनदेखा कर सकता है।

---

# फिक्स (चीन में विश्वसनीय रूप से काम करता है)

## 1. लोअरकेस और अपरकेस दोनों प्रॉक्सी वेरिएबल्स सेट करें

अपने शेल में **NanoGPT चलाने से पहले**:

```bash
export http_proxy="http://127.0.0.1:7890"
export https_proxy="http://127.0.0.1:7890"

export HTTP_PROXY="http://127.0.0.1:7890"
export HTTPS_PROXY="http://127.0.0.1:7890"
```

Rust reqwest को लोअरकेस पसंद है
Python requests को अपरकेस पसंद है
दोनों सेट करने से समस्याएं दूर होती हैं।

फिर चलाएं:

```bash
python data/openwebtext_10k/prepare.py
```

आपको तुरंत उचित डाउनलोड स्पीड दिखनी चाहिए।

---

# 2. महत्वपूर्ण अगर आपकी प्रॉक्सी SOCKS5 है

Rust reqwest **socks5 को सपोर्ट नहीं करता** जब तक कि वैकल्पिक फीचर्स के साथ कंपाइल न किया गया हो।
इसलिए अगर आपकी प्रॉक्सी socks5:// है → यह फेल हो जाएगी।

आपको अपने क्लाइंट के HTTP प्रॉक्सी पोर्ट पर स्विच करना होगा, आमतौर पर:

* Clash: 7890 (HTTP)
* V2RayN: 10809 (HTTP)

SOCKS के बजाय HTTP का उपयोग करें।

---

# 3. कैसे टेस्ट करें कि Rust भाग प्रॉक्सी का उपयोग कर रहा है या नहीं

`curl` के माध्यम से टेस्ट करें, **Python के माध्यम से नहीं**, क्योंकि curl प्रॉक्सी नियमों में Rust के समान व्यवहार करता है:

```bash
curl -I https://transfer.xethub.hf.co --proxy http://127.0.0.1:7890
```

अगर यह काम करता है → Rust डाउनलोड भी काम करेंगे।

अगर यह फेल होता है → आपकी प्रॉक्सी `xethub.hf.co` डोमेन तक नहीं पहुंच सकती।

---

# 4. अगर आप Hugging Face को XetHub से बचने के लिए फोर्स करना चाहते हैं

आप env वेरिएबल सेट कर सकते हैं:

```bash
export HF_HUB_DISABLE_XETHUB=1
```

यह XetHub के बजाय पुराने HuggingFace S3 बैकएंड को फोर्स करता है, जो प्रॉक्सी-फ्रेंडली है।

फिर:

```bash
python data/openwebtext_10k/prepare.py
```

यह सबसे स्थिर फिक्स है।

---

# अनुशंसित समाधान (चीन-फ्रेंडली)

विश्वसनीयता के लिए:

```bash
export HF_HUB_DISABLE_XETHUB=1

export http_proxy="http://127.0.0.1:7890"
export https_proxy="http://127.0.0.1:7890"
export HTTP_PROXY="http://127.0.0.1:7890"
export HTTPS_PROXY="http://127.0.0.1:7890"

python data/openwebtext_10k/prepare.py
```

---

अगर आप चाहें, तो मैं आपको दे सकता हूं:

* एक वन-क्लिक बैश स्क्रिप्ट (`hf_proxy_on.sh`)
* एक परमानेंट `.bashrc` प्रॉक्सी सेटअप
* भविष्य के डाउनलोड से बचने के लिए OpenWebText को पूरी तरह से लोकल मिरर करने के निर्देश

बस मुझे बताएं।