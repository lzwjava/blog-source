---
audio: false
generated: true
lang: hi
layout: post
title: उबुन्टू पर मीडिया साझाकरण के लिए एसएमबी सर्वर सेट करना
translated: true
type: note
---

यहाँ Ubuntu पर एक SMB (सर्वर मैसेज ब्लॉक) सर्वर सेट अप करने की चरण-दर-चरण गाइड दी गई है ताकि आप मीडिया फाइलें सर्व कर सकें। SMB एक प्रोटोकॉल है जो आपको नेटवर्क पर फाइलें शेयर करने की सुविधा देता है, जिससे यह कंप्यूटर, TV, या मोबाइल डिवाइस जैसे उपकरणों को मीडिया सर्व करने के लिए आदर्श बनता है। हम साम्बा (Samba) का उपयोग करेंगे, जो लिनक्स पर SMB कार्यक्षमता प्रदान करने वाला सॉफ्टवेयर है, और आपकी मीडिया फाइलों वाली एक डायरेक्टरी को शेयर करने के लिए इसे कॉन्फ़िगर करेंगे।

---

### चरण 1: साम्बा इंस्टॉल करें
सबसे पहले, आपको अपने Ubuntu सिस्टम पर साम्बा इंस्टॉल करना होगा। एक टर्मिनल खोलें और निम्नलिखित कमांड चलाएँ:

```bash
sudo apt update
sudo apt install samba
```

- `sudo apt update` पैकेज सूची को ताज़ा करता है ताकि आपको नवीनतम संस्करण मिल सके।
- `sudo apt install samba` साम्बा पैकेज इंस्टॉल करता है, जिसमें आवश्यक टूल और सेवाएँ शामिल होती हैं।

---

### चरण 2: साम्बा कॉन्फ़िगरेशन फाइल का बैकअप लें
परिवर्तन करने से पहले, डिफ़ॉल्ट साम्बा कॉन्फ़िगरेशन फाइल का बैकअप लेना एक अच्छा अभ्यास है। यह कमांड चलाएँ:

```bash
sudo cp /etc/samba/smb.conf /etc/samba/smb.conf.backup
```

यह मूल फाइल (`smb.conf.backup`) की एक प्रति बनाता है ताकि बाद में यदि आपको परिवर्तन वापस लेने हों तो आप कर सकें।

---

### चरण 3: मीडिया शेयर को कॉन्फ़िगर करें
साम्बा कॉन्फ़िगरेशन फाइल `/etc/samba/smb.conf` पर स्थित होती है। आप अपनी मीडिया फाइलों के लिए एक शेयर को परिभाषित करने के लिए इस फाइल को एडिट करेंगे। इस उदाहरण के लिए, मान लें कि आपकी मीडिया फाइलें `/home/user/media` में संग्रहीत हैं (`user` को अपने वास्तविक यूजरनेम से बदलें)।

1. कॉन्फ़िगरेशन फाइल को एक टेक्स्ट एडिटर में खोलें, जैसे `nano`:
   ```bash
   sudo nano /etc/samba/smb.conf
   ```

2. फाइल के अंत तक स्क्रॉल करें और निम्नलिखित सेक्शन जोड़ें:
   ```ini
   [media]
       path = /home/user/media
       browseable = yes
       read only = yes
       guest ok = yes
   ```

3. सेव करें और बाहर निकलें:
   - `nano` में, सेव करने के लिए `Ctrl+O`, फिर `Enter` दबाएँ, और बाहर निकलने के लिए `Ctrl+X` दबाएँ।

#### कॉन्फ़िगरेशन की व्याख्या:
- `[media]`: शेयर का नाम, जो नेटवर्क ब्राउज़ करने वाले यूजर्स को दिखाई देगा।
- `path = /home/user/media`: वह डायरेक्टरी जिसे आप शेयर करना चाहते हैं (इसे अपनी मीडिया फोल्डर के स्थान के अनुसार एडजस्ट करें)।
- `browseable = yes`: नेटवर्क ब्राउज़ करते समय शेयर को दृश्यमान बनाता है।
- `read only = yes`: यूजर्स को फाइलों को संशोधित करने या हटाने से रोकता है (मीडिया सर्विंग के लिए आदर्श)।
- `guest ok = yes`: बिना यूजरनेम या पासवर्ड के एक्सेस की अनुमति देता है, जिससे मीडिया एक्सेस सरल रहता है।

---

### चरण 4: कॉन्फ़िगरेशन को सत्यापित करें
यह सुनिश्चित करने के लिए कि आपकी कॉन्फ़िगरेशन में कोई सिंटैक्स त्रुटि नहीं है, यह कमांड चलाएँ:

```bash
testparm
```

यह कमांड `smb.conf` फाइल की जाँच करती है और लोड की गई सेवाओं को प्रदर्शित करती है। यदि कोई त्रुटि नहीं है, तो आप आगे बढ़ सकते हैं।

---

### चरण 5: साम्बा सेवाओं को रीस्टार्ट करें
साम्बा दो सेवाएँ चलाता है: `smbd` (फाइल शेयरिंग संभालता है) और `nmbd` (नेटवर्क डिस्कवरी संभालता है)। अपने परिवर्तनों को लागू करने के लिए इन्हें रीस्टार्ट करें:

```bash
sudo systemctl restart smbd
sudo systemctl restart nmbd
```

यह सुनिश्चित करने के लिए कि ये सेवाएँ बूट पर स्वचालित रूप से शुरू हों (आमतौर पर डिफ़ॉल्ट रूप से सक्षम होती हैं), आप यह कमांड चला सकते हैं:

```bash
sudo systemctl enable smbd
sudo systemctl enable nmbd
```

---

### चरण 6: फाइल अनुमतियाँ समायोजित करें
गेस्ट एक्सेस के काम करने के लिए, मीडिया डायरेक्टरी और उसकी फाइलें सभी के लिए पठनीय होनी चाहिए। उचित अनुमतियाँ इस कमांड के साथ सेट करें:

```bash
sudo chmod -R 755 /home/user/media
```

- `755` का मतलब है कि मालिक के पास पूर्ण अनुमतियाँ (पढ़ने, लिखने, निष्पादित करने) हैं, जबकि अन्य के पास पढ़ने और निष्पादित करने की अनुमतियाँ हैं (फाइलों को एक्सेस और सूचीबद्ध करने के लिए आवश्यक)।
- `-R` परिवर्तन को सभी फाइलों और उप-डायरेक्टरियों पर पुनरावर्ती रूप से लागू करता है।

---

### चरण 7: फ़ायरवॉल को कॉन्फ़िगर करें
यदि Ubuntu का फ़ायरवॉल (UFW) सक्रिय है, तो आपको SMB ट्रैफ़िक की अनुमति देनी होगी। सबसे पहले, फ़ायरवॉल की स्थिति जाँचें:

```bash
sudo ufw status
```

यदि यह सक्रिय है, तो आवश्यक पोर्ट खोलें:

```bash
sudo ufw allow 139/tcp
sudo ufw allow 445/tcp
sudo ufw allow 137/udp
sudo ufw allow 138/udp
```

- पोर्ट 139 और 445 (TCP) का उपयोग SMB फाइल शेयरिंग के लिए किया जाता है।
- पोर्ट 137 और 138 (UDP) का उपयोग `nmbd` द्वारा नेटवर्क डिस्कवरी के लिए किया जाता है।

परिवर्तनों को लागू करने के लिए फ़ायरवॉल को रीलोड करें:

```bash
sudo ufw reload
```

यदि फ़ायरवॉल निष्क्रिय है, तो आप इस चरण को छोड़ सकते हैं।

---

### चरण 8: SMB शेयर का परीक्षण करें
आपका SMB सर्वर अब चल रहा होना चाहिए। इसका परीक्षण करने के लिए:

1. अपने Ubuntu मशीन का IP पता ढूँढें:
   ```bash
   ip addr show
   ```
   अपने नेटवर्क इंटरफेस (जैसे `eth0` या `wlan0`) के अंतर्गत IP पता (जैसे `192.168.1.100`) देखें।

2. नेटवर्क पर किसी अन्य डिवाइस से (जैसे एक Windows PC):
   - File Explorer खोलें और दर्ज करें: `\\<ubuntu-ip-address>\media` (जैसे `\\192.168.1.100\media`)।
   - आपको अपनी मीडिया फाइलें दिखनी चाहिए। चूँकि गेस्ट एक्सेस सक्षम है, इसलिए किसी लॉगिन की आवश्यकता नहीं है।

---

### समस्या निवारण युक्तियाँ
यदि आपको कोई समस्या आती है:
- **साम्बा लॉग जाँचें**: लॉग `/var/log/samba/` पर स्थित होते हैं (जैसे `log.smbd` या `log.nmbd`)। उन्हें देखने के लिए `cat` या `tail` का उपयोग करें:
  ```bash
  sudo tail -f /var/log/samba/log.smbd
  ```
- **स्थानीय रूप से परीक्षण करें**: अपने Ubuntu मशीन पर शेयरों की सूची देखने के लिए `smbclient` का उपयोग करें:
  ```bash
  smbclient -L localhost
  ```
  या शेयर से कनेक्ट करें:
  ```bash
  smbclient //localhost/media -N
  ```
  (`-N` गेस्ट एक्सेस के लिए पासवर्ड प्रॉम्प्ट को छोड़ देता है।)

---

### कमांडों का सारांश
यहाँ पूर्ण अनुक्रम दिया गया है:

```bash
sudo apt update
sudo apt install samba
sudo cp /etc/samba/smb.conf /etc/samba/smb.conf.backup
sudo nano /etc/samba/smb.conf  # [media] सेक्शन जोड़ें
testparm
sudo systemctl restart smbd
sudo systemctl restart nmbd
sudo chmod -R 755 /home/user/media
sudo ufw allow 139/tcp
sudo ufw allow 445/tcp
sudo ufw allow 137/udp
sudo ufw allow 138/udp
sudo ufw reload
```

आपका SMB सर्वर अब `/home/user/media` से मीडिया फाइलें सर्व करने के लिए सेट अप हो गया है! इसे अपने नेटवर्क पर किसी भी डिवाइस से IP पते और शेयर नाम (`\\<ip-address>\media`) का उपयोग करके एक्सेस करें।