---
audio: false
generated: true
image: false
lang: hi
layout: post
model: openai/gpt-5
title: हगिंगफेस डाउनलोड के लिए प्रॉक्सी ठीक करना
translated: true
type: note
---

हाँ — यह आपका प्रॉक्सी इस्तेमाल **कर सकता है**, लेकिन आपके पेस्ट किए आउटपुट के अनुसार, **आपका प्रॉक्सी अभी इस्तेमाल नहीं हो रहा है**।
यही कारण है कि डाउनलोड **17.6 बाइट्स/सेकंड** पर अटका हुआ है — यह चीन से HuggingFace के सीधे कनेक्शन का क्लासिक लक्षण है।

मैं आपको दिखाता हूँ **कैसे पुष्टि करें** और **इसे कैसे ठीक करें**।

---

# 1. आपका वर्तमान रन प्रॉक्सी का इस्तेमाल *क्यों नहीं* कर रहा है

यह लाइन:

```
78.0/630M [00:16<9947:51:33, 17.6B/s]
```

स्पष्ट है: अगर कोई उचित प्रॉक्सी (Clash, V2Ray, Shadowsocks) `HTTP_PROXY` / `HTTPS_PROXY` के जरिए सक्रिय होता, तो आपको इस तरह की स्पीड दिखाई देती:

* सैकड़ों KB/s
* या कई MB/s
* ~17 बाइट्स/सेकंड नहीं

इसलिए, Python प्रक्रिया कोई भी प्रॉक्सी वातावरण नहीं पकड़ रही है।

---

# 2. जाँचें कि क्या आपके प्रॉक्सी एनवीरॉनमेंट वेरिएबल मौजूद हैं

उसी एक्सैक्ट टर्मिनल में जहाँ आप यह चलाते हैं:

```
python data/openwebtext_10k/prepare.py
```

यह चलाएँ:

```bash
echo $HTTP_PROXY
echo $HTTPS_PROXY
```

अगर कुछ भी प्रिंट नहीं होता → वे सेट नहीं हैं, इसलिए HuggingFace उनका इस्तेमाल नहीं कर सकता।

---

# 3. ठीक करें: उस टर्मिनल सेशन के लिए प्रॉक्सी सेट करें

7890 पर चल रहे Clash के लिए उदाहरण:

```bash
export HTTP_PROXY="http://127.0.0.1:7890"
export HTTPS_PROXY="http://127.0.0.1:7890"
```

अगर आप SOCKS5 इस्तेमाल करते हैं (जैसे Shadowsocks):

```bash
export HTTP_PROXY="socks5://127.0.0.1:1080"
export HTTPS_PROXY="socks5://127.0.0.1:1080"
```

**फिर से दोबारा चलाएँ:**

```bash
python data/openwebtext_10k/prepare.py
```

अब आपकी स्पीड एकदम से बढ़ जानी चाहिए।

---

# 4. Python के अंदर अतिरिक्त जाँच

टेस्ट करने के लिए `prepare.py` के शीर्ष पर ये लाइनें जोड़ें:

```python
import os
print("HTTP_PROXY:", os.getenv("HTTP_PROXY"))
print("HTTPS_PROXY:", os.getenv("HTTPS_PROXY"))
```

अगर वे `None` प्रिंट करते हैं → आपके शेल ने उन्हें पास नहीं किया → अपना एनवीरॉनमेंट ठीक करें।

---

# 5. वैकल्पिक: डेटासेट लोड करने से पहले `requests` से सत्यापन करें

चलाएँ:

```python
import requests
print(requests.get("https://api.ipify.org?format=json", timeout=5).text)
```

* अगर वापस आया IP आपके VPN/प्रॉक्सी का है → अच्छा।
* अगर यह आपके घर के ISP का IP है → प्रॉक्सी का इस्तेमाल नहीं हुआ।

---

# 6. महत्वपूर्ण विवरण: HuggingFace **HTTP** इस्तेमाल करता है, SOCKS** नहीं, जब तक आप pysocks का इस्तेमाल नहीं करते

अगर आपका प्रॉक्सी SOCKS5 है, तो कुछ Python इंस्टॉलेशन इसके साथ तब तक काम नहीं करते जब तक `PySocks` इंस्टॉल न हो:

```bash
pip install pysocks
```

उसके बाद SOCKS प्रॉक्सी सामान्य रूप से काम करते हैं।

---

# 7. सारांश

✔ HuggingFace प्रॉक्सी का इस्तेमाल *करेगा*
✔ लेकिन केवल तभी जब एनवीरॉनमेंट वेरिएबल सेट हों
✘ आपके लॉग दिखाते हैं कि आपका प्रॉक्सी सक्रिय नहीं है
✔ समाधान: उसी शेल में प्रॉक्सी एनवी वेरिएबल सेट करें

---

अगर आप चाहें, तो मैं यह कर सकता हूँ:

* आपके शेल कॉन्फ़िग (`.bashrc` या `.zshrc`) को हमेशा प्रॉक्सी इस्तेमाल करने के लिए एडजस्ट कर सकता हूँ
* एक "proxy-on" / "proxy-off" स्क्रिप्ट बना सकता हूँ
* आपके NanoGPT के `prepare.py` को Python के अंदर प्रॉक्सी लागू करने के लिए पैच कर सकता हूँ

मुझे बताएँ कि आप किस दिशा को प्राथमिकता देते हैं।