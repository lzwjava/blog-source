---
audio: false
generated: true
lang: hi
layout: post
title: рд╕реНрдЯреЗрдмрд▓ рдбрд┐рдлреНрдпреВрдЬрд╝рди рдкреНрд░реЙрдХреНрд╕реА рд╕рдорд╕реНрдпрд╛
translated: true
type: note
---

рддреНрд░реБрдЯрд┐ рдФрд░ рдЖрдкрдХреЗ рд╡рд╛рддрд╛рд╡рд░рдг рдХреЗ рдЖрдзрд╛рд░ рдкрд░, "Unknown scheme for proxy URL" рд╕рдорд╕реНрдпрд╛ рдХреЛ рдареАрдХ рдХрд░рдиреЗ рдХрд╛ рддрд░реАрдХрд╛ рдпрд╣рд╛рдБ рдмрддрд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ:

### рд╕рдорд╛рдзрд╛рди:
рдпрд╣ рддреНрд░реБрдЯрд┐ рдЗрд╕рд▓рд┐рдП рд╣реЛрддреА рд╣реИ рдХреНрдпреЛрдВрдХрд┐ **`httpx` рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ `socks://` рдкреНрд░реЙрдХреНрд╕реА рдХрд╛ рд╕рдорд░реНрдерди рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ**ред рдЖрдкрдХреЗ рдкрд╛рд╕ рджреЛ рд╡рд┐рдХрд▓реНрдк рд╣реИрдВ:

#### рд╡рд┐рдХрд▓реНрдк 1: SOCKS рдкреНрд░реЙрдХреНрд╕реА рд╕рдВрджрд░реНрдн рдХреЛ рд╣рдЯрд╛рдПрдБ
1. рдЕрдкрдиреЗ рдкрд░реНрдпрд╛рд╡рд░рдг рдЪрд░ (environment variables) рдореЗрдВ рдЕрд╡рд╛рдВрдЫрд┐рдд рдкреНрд░реЙрдХреНрд╕реА рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВ:
   ```bash
   env | grep -i proxy
   ```
   `socks://` рд╕рдВрджрд░реНрднреЛрдВ (рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ `ALL_PROXY` рдпрд╛ `http_proxy`) рдХреА рддрд▓рд╛рд╢ рдХрд░реЗрдВред

2. рд╕рдорд╕реНрдпрд╛ рд╡рд╛рд▓реЗ рдЪрд░ рдХреЛ рдЕрдирд╕реЗрдЯ рдХрд░реЗрдВ (`VAR_NAME` рдХреЛ рдКрдкрд░ рдорд┐рд▓реЗ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдирд╛рдо рд╕реЗ рдмрджрд▓реЗрдВ):
   ```bash
   unset VAR_NAME  # рдЙрджрд╛рд╣рд░рдг: unset ALL_PROXY
   ```

#### рд╡рд┐рдХрд▓реНрдк 2: `httpx` рдореЗрдВ SOCKS рд╕рдкреЛрд░реНрдЯ рдЬреЛрдбрд╝реЗрдВ
1. рдЕрдкрдирд╛ Python рд╡рд░реНрдЪреБрдЕрд▓ рдПрдирд╡рд╛рдпрд░рдирдореЗрдВрдЯ рд╕рдХреНрд░рд┐рдп рдХрд░реЗрдВ:
   ```bash
   source /home/lzw/Projects/stable-diffusion-webui/venv/bin/activate
   ```

2. рдЖрд╡рд╢реНрдпрдХ рдирд┐рд░реНрднрд░рддрд╛рдПрдБ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ:
   ```bash
   pip install -U "httpx[socks]"
   ```

3. рдПрдирд╡рд╛рдпрд░рдирдореЗрдВрдЯ рдХреЛ рдбрд┐рдПрдХреНрдЯрд┐рд╡реЗрдЯ рдХрд░реЗрдВ:
   ```bash
   deactivate
   ```

### рдпрд╣ рд╕рдорд╕реНрдпрд╛ рдХреНрдпреЛрдВ рд╣реЛрддреА рд╣реИ:
- рдЖрдкрдХреА рдореБрдЦреНрдп рдкреНрд░реЙрдХреНрд╕реА (`HTTP_PROXY/HTTPS_PROXY`) `http://` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреА рд╣реИрдВ (рд╕рдкреЛрд░реНрдЯреЗрдб), рд▓реЗрдХрд┐рди рдХреЛрдИ рдЪреАрдЬрд╝ (рд╕рдВрднрд╡рддрдГ рдХреЛрдИ рдЕрдиреНрдп рдРрдк/рд╕реНрдХреНрд░рд┐рдкреНрдЯ) рдПрдХ `socks://` рдкреНрд░реЙрдХреНрд╕реА рд╕реЗрдЯ рдХрд░ рд░рд╣реА рд╣реИ рдЬрд┐рд╕реЗ `httpx` рдЕрддрд┐рд░рд┐рдХреНрдд рдкреИрдХреЗрдЬреЛрдВ рдХреЗ рдмрд┐рдирд╛ рд╣реИрдВрдбрд▓ рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛ред
- рд╕реНрдЯреИрдХ рдЯреНрд░реЗрд╕ рджрд┐рдЦрд╛рддрд╛ рд╣реИ рдХрд┐ Gradio/`httpx` `socks://127.0.0.1:7891` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░ рд░рд╣рд╛ рд╣реИ, рдЬреЛ рдЖрдкрдХреЗ `checkproxy` рдЖрдЙрдЯрдкреБрдЯ рдореЗрдВ рдирд╣реАрдВ рд╣реИред

### рд╕рддреНрдпрд╛рдкрди:
рд╕реБрдзрд╛рд░ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдЪрд▓рд╛рдПрдБ:
```bash
./webui.sh
```
SOCKS рдкреНрд░реЙрдХреНрд╕реА рддреНрд░реБрдЯрд┐ рдЧрд╛рдпрдм рд╣реЛ рдЬрд╛рдиреА рдЪрд╛рд╣рд┐рдПред

> ЁЯТб **рдиреЛрдЯ**: рдпрджрд┐ рдЖрдкрдиреЗ рдЬрд╛рдирдмреВрдЭрдХрд░ SOCKS рдкреНрд░реЙрдХреНрд╕реА рд╕реЗрдЯ рдирд╣реАрдВ рдХреА рд╣реИ, рддреЛ рдЙрди рдПрдкреНрд▓рд┐рдХреЗрд╢рдиреНрд╕ рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВ рдЬреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдкреНрд░реЙрдХреНрд╕реА рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ (рдЬреИрд╕реЗ, VPN, рдиреЗрдЯрд╡рд░реНрдХ рдореИрдиреЗрдЬрд░, рдпрд╛ рд╢реЗрд▓ рдХреЙрдиреНрдлрд╝рд┐рдЧ рдлрд╛рдЗрд▓реЗрдВ рдЬреИрд╕реЗ `~/.bashrc`)ред

---

рддреНрд░реБрдЯрд┐ `Torch is not able to use GPU; add --skip-torch-cuda-test to COMMANDLINE_ARGS variable to disable this check` рдЗрдВрдЧрд┐рдд рдХрд░рддреА рд╣реИ рдХрд┐ PyTorch, рдЬрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ Stable Diffusion WebUI рдХрд░рддрд╛ рд╣реИ, рдПрдХ рд╕рдВрдЧрдд GPU рдХрд╛ рдкрддрд╛ рдирд╣реАрдВ рд▓рдЧрд╛ рдкрд╛ рд░рд╣рд╛ рд╣реИ рдпрд╛ рдЙрд╕реЗ рдПрдХреНрд╕реЗрд╕ рдирд╣реАрдВ рдХрд░ рдкрд╛ рд░рд╣рд╛ рд╣реИред рдЗрд╕рдХреА рд╕рдВрднрд╛рд╡рдирд╛ рдЧреБрдорд╢реБрджрд╛ CUDA рд▓рд╛рдЗрдмреНрд░реЗрд░реАрдЬрд╝, рдЕрд╕рдВрдЧрдд GPU, рдбреНрд░рд╛рдЗрд╡рд░ рд╕рдорд╕реНрдпрд╛рдУрдВ, рдпрд╛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рд╕рдорд╕реНрдпрд╛ рдХреЗ рдХрд╛рд░рдг рд╣реИред рдЖрдкрдХреЗ рд╡рд╛рддрд╛рд╡рд░рдг (glibc 2.35, Python 3.10.12, GCC 11.4.0, glibc рд╡рд░реНрдЬрди рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рд╕рдВрднрд╡рддрдГ Ubuntu 22.04) рдХреЗ рдЕрдиреБрд░реВрдк рдЗрд╕ рд╕рдорд╕реНрдпрд╛ рдХреЛ рдареАрдХ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдиреАрдЪреЗ рдЪрд░рдг рджрд┐рдП рдЧрдП рд╣реИрдВред

### рд╕рдорд╕реНрдпрд╛ рдареАрдХ рдХрд░рдиреЗ рдХреЗ рдЪрд░рдг

#### 1. **GPU рдФрд░ CUDA рд╕рдВрдЧрддрддрд╛ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░реЗрдВ**
   - **рдЬрд╛рдБрдЪреЗрдВ рдХрд┐ рдХреНрдпрд╛ рдЖрдкрдХреЗ рдкрд╛рд╕ NVIDIA GPU рд╣реИ**:
     рдЪрд▓рд╛рдПрдБ:
     ```bash
     lspci | grep -i nvidia
     ```
     рдпрд╣ NVIDIA рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рдХреЛ рд╕реВрдЪреАрдмрджреНрдз рдХрд░рддрд╛ рд╣реИред рдпрджрд┐ рдХреЛрдИ рдЖрдЙрдЯрдкреБрдЯ рдирд╣реАрдВ рджрд┐рдЦрддрд╛, рддреЛ рдЖрдкрдХреЗ рд╕рд┐рд╕реНрдЯрдо рдореЗрдВ NVIDIA GPU рдирд╣реАрдВ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рдФрд░ PyTorch рдХреЛ CUDA рд╕рдкреЛрд░реНрдЯ рдХреЗ рд▓рд┐рдП NVIDIA GPU рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред
   - **NVIDIA рдбреНрд░рд╛рдЗрд╡рд░ рдЗрдВрд╕реНрдЯреЙрд▓реЗрд╢рди рдЬрд╛рдБрдЪреЗрдВ**:
     рдЪрд▓рд╛рдПрдБ:
     ```bash
     nvidia-smi
     ```
     рдпрджрд┐ рдЗрдВрд╕реНрдЯреЙрд▓ рд╣реИ, рддреЛ рдпрд╣ GPU рд╡рд┐рд╡рд░рдг (рдЬреИрд╕реЗ, рдбреНрд░рд╛рдЗрд╡рд░ рд╡рд░реНрдЬрди, CUDA рд╡рд░реНрдЬрди) рдХреЗ рд╕рд╛рде рдПрдХ рдЯреЗрдмрд▓ рджрд┐рдЦрд╛рдПрдЧрд╛ред рдпрджрд┐ рдирд╣реАрдВ, рддреЛ NVIDIA рдбреНрд░рд╛рдЗрд╡рд░ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ:
     ```bash
     sudo apt-get update
     sudo apt-get install nvidia-driver-<version> nvidia-utils-<version> -y
     ```
     `<version>` рдХреЛ рдирд╡реАрдирддрдо рд╕реНрдерд┐рд░ рдбреНрд░рд╛рдЗрд╡рд░ (рдЬреИрд╕реЗ, `535` рдпрд╛ `550`) рд╕реЗ рдмрджрд▓реЗрдВред рдЙрдкрдпреБрдХреНрдд рдбреНрд░рд╛рдЗрд╡рд░ рд╡рд░реНрдЬрди рдЗрд╕рд╕реЗ рдвреВрдБрдвреЗрдВ:
     ```bash
     ubuntu-drivers devices
     sudo ubuntu-drivers autoinstall
     ```
   - **CUDA рд╡рд░реНрдЬрди рдЬрд╛рдБрдЪреЗрдВ**:
     PyTorch рдХреЛ CUDA рд▓рд╛рдЗрдмреНрд░реЗрд░реАрдЬрд╝ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд┐рдП рдЧрдП CUDA рд╡рд░реНрдЬрди рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВ:
     ```bash
     nvcc --version
     ```
     рдпрджрд┐ рдЗрдВрд╕реНрдЯреЙрд▓ рдирд╣реАрдВ рд╣реИ, рддреЛ CUDA Toolkit рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ:
     ```bash
     sudo apt-get install nvidia-cuda-toolkit -y
     ```
     рд╡реИрдХрд▓реНрдкрд┐рдХ рд░реВрдк рд╕реЗ, NVIDIA рдХреА рд╡реЗрдмрд╕рд╛рдЗрдЯ рд╕реЗ рдирд╡реАрдирддрдо CUDA Toolkit (рдЬреИрд╕реЗ, CUDA 11.8 рдпрд╛ 12.1) рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ рдФрд░ рдЙрдирдХреА рдЗрдВрд╕реНрдЯреЙрд▓реЗрд╢рди рдЧрд╛рдЗрдб рдХрд╛ рдкрд╛рд▓рди рдХрд░реЗрдВред

#### 2. **PyTorch рдЗрдВрд╕реНрдЯреЙрд▓реЗрд╢рди рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░реЗрдВ**
   рддреНрд░реБрдЯрд┐ рдмрддрд╛рддреА рд╣реИ рдХрд┐ PyTorch рдЗрдВрд╕реНрдЯреЙрд▓ рд╣реИ рд▓реЗрдХрд┐рди GPU рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░ рдкрд╛ рд░рд╣рд╛ рд╣реИред рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ CUDA рд╕рдкреЛрд░реНрдЯ рдХреЗ рд╕рд╛рде рд╕рд╣реА PyTorch рд╡рд░реНрдЬрди рд╣реИред
   - **PyTorch рдЗрдВрд╕реНрдЯреЙрд▓реЗрд╢рди рдЬрд╛рдБрдЪреЗрдВ**:
     рдЪрд▓рд╛рдПрдБ:
     ```bash
     python3 -c "import torch; print(torch.__version__); print(torch.cuda.is_available())"
     ```
     рдЕрдкреЗрдХреНрд╖рд┐рдд рдЖрдЙрдЯрдкреБрдЯ рдореЗрдВ рдПрдХ PyTorch рд╡рд░реНрдЬрди (рдЬреИрд╕реЗ, `2.0.1`) рдФрд░ `torch.cuda.is_available()` рдХреЗ рд▓рд┐рдП `True` рд╢рд╛рдорд┐рд▓ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред рдпрджрд┐ `False` рд╣реИ, рддреЛ PyTorch GPU рдХрд╛ рдкрддрд╛ рдирд╣реАрдВ рд▓рдЧрд╛ рдкрд╛ рд░рд╣рд╛ рд╣реИред
   - **CUDA рд╕рдкреЛрд░реНрдЯ рдХреЗ рд╕рд╛рде PyTorch рдХреЛ рдкреБрдирдГ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ**:
     Python 3.10 рдФрд░ CUDA (рдЬреИрд╕реЗ, 11.8) рдХреЗ рд▓рд┐рдП, рдЕрдкрдиреЗ Stable Diffusion рдПрдирд╡рд╛рдпрд░рдирдореЗрдВрдЯ рдореЗрдВ PyTorch рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ:
     ```bash
     cd /home/lzw/Projects/stable-diffusion-webui
     source venv/bin/activate
     pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118
     ```
     `cu118` рдХреЛ рдЕрдкрдиреЗ CUDA рд╡рд░реНрдЬрди (рдЬреИрд╕реЗ, CUDA 12.1 рдХреЗ рд▓рд┐рдП `cu121`) рд╕реЗ рдмрджрд▓реЗрдВред PyTorch рдХреА рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рд╕рд╛рдЗрдЯ рдкрд░ рд╕рдкреЛрд░реНрдЯреЗрдб рд╡рд░реНрдЬрди рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВред
   - **рдкреБрдирдГ рдЗрдВрд╕реНрдЯреЙрд▓реЗрд╢рди рдХреЗ рдмрд╛рдж рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░реЗрдВ**:
     рдЬрд╛рдБрдЪ рдлрд┐рд░ рд╕реЗ рдЪрд▓рд╛рдПрдБ:
     ```bash
     python3 -c "import torch; print(torch.cuda.is_available()); print(torch.cuda.get_device_name(0))"
     ```

#### 3. **CUDA рдЬрд╛рдБрдЪ рдХреЛ рдмрд╛рдпрдкрд╛рд╕ рдХрд░реЗрдВ (рдЕрд╕реНрдерд╛рдпреА рд╡рд░реНрдХрдЕрд░рд╛рдЙрдВрдб)**
   рдпрджрд┐ рдЖрдк GPU рд╕рдкреЛрд░реНрдЯ рдХреЗ рдмрд┐рдирд╛ Stable Diffusion рдЪрд▓рд╛рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ (рдЬреИрд╕реЗ, CPU рдкрд░ рдЯреЗрд╕реНрдЯрд┐рдВрдЧ рдХреЗ рд▓рд┐рдП), рддреЛ рдХрдорд╛рдВрдб-рд▓рд╛рдЗрди рдЖрд░реНрдЧреНрдпреБрдореЗрдВрдЯреНрд╕ рдореЗрдВ `--skip-torch-cuda-test` рдЬреЛрдбрд╝рдХрд░ CUDA рдЬрд╛рдБрдЪ рдХреЛ рдмрд╛рдпрдкрд╛рд╕ рдХрд░реЗрдВред
   - `webui-user.sh` рдПрдбрд┐рдЯ рдХрд░реЗрдВ (рдпрд╛ рдпрджрд┐ рдпрд╣ рдореМрдЬреВрдж рдирд╣реАрдВ рд╣реИ рддреЛ рдмрдирд╛рдПрдБ):
     ```bash
     nano /home/lzw/Projects/stable-diffusion-webui/webui-user.sh
     ```
     `COMMANDLINE_ARGS` рд▓рд╛рдЗрди рдХреЛ рдЬреЛрдбрд╝реЗрдВ рдпрд╛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░реЗрдВ:
     ```bash
     export COMMANDLINE_ARGS="--skip-torch-cuda-test"
     ```
     рд╕реЗрд╡ рдХрд░реЗрдВ рдФрд░ рдмрд╛рд╣рд░ рдирд┐рдХрд▓реЗрдВред
   - рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдЪрд▓рд╛рдПрдБ:
     ```bash
     ./webui.sh
     ```
     рдпрд╣ Stable Diffusion рдХреЛ CPU рдкрд░ рдЪрд▓рд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧрд╛, рд▓реЗрдХрд┐рди рдкрд░рдлреЙрд░реНрдореЗрдВрд╕ рдХрд╛рдлреА рдзреАрдореА рд╣реЛрдЧреАред

#### 4. **рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ TCMalloc рдареАрдХ рд╕реЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рд╣реИ**
   рдЖрдкрдХреЗ рдЖрдЙрдЯрдкреБрдЯ рд╕реЗ рдкрддрд╛ рдЪрд▓рддрд╛ рд╣реИ рдХрд┐ TCMalloc (`libtcmalloc_minimal.so.4`) рдХрд╛ рдкрддрд╛ рдЪрд▓рд╛ рд╣реИ рдФрд░ рдпрд╣ `LD_PRELOAD` рдХреЗ рд╕рд╛рде рд▓рд┐рдВрдХ рд╣реИред рдкреБрд╖реНрдЯрд┐ рдХрд░реЗрдВ рдХрд┐ рдпрд╣ рдХрд╛рдо рдХрд░ рд░рд╣рд╛ рд╣реИ:
   ```bash
   echo $LD_PRELOAD
   ```
   рдпрджрд┐ рдпрд╣ `/lib/x86_64-linux-gnu/libtcmalloc_minimal.so.4` рдЖрдЙрдЯрдкреБрдЯ рдХрд░рддрд╛ рд╣реИ, рддреЛ рдЖрдк рд╕реЗрдЯ рд╣реИрдВред рдпрджрд┐ рдирд╣реАрдВ, рддреЛ рдЗрд╕реЗ рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рд╕реЗрдЯ рдХрд░реЗрдВ:
   ```bash
   export LD_PRELOAD=/lib/x86_64-linux-gnu/libtcmalloc_minimal.so.4
   ```
   рдпрд╛ рдЗрд╕реЗ `webui-user.sh` рдореЗрдВ рдЬреЛрдбрд╝реЗрдВ:
   ```bash
   export LD_PRELOAD=/lib/x86_64-linux-gnu/libtcmalloc_minimal.so.4
   ```

#### 5. **рдкрд░реНрдпрд╛рд╡рд░рдг рдЪрд░ рдФрд░ рдкрде рдЬрд╛рдБрдЪреЗрдВ**
   рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рдЖрдкрдХрд╛ рд╡рд╛рддрд╛рд╡рд░рдг рд╕рд╣реА рдврдВрдЧ рд╕реЗ рд╕реЗрдЯ рд╣реИ:
   - **LD_LIBRARY_PATH рдЬрд╛рдБрдЪреЗрдВ**:
     CUDA рд▓рд╛рдЗрдмреНрд░реЗрд░реАрдЬрд╝ рдПрдХреНрд╕реЗрд╕рд┐рдмрд▓ рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдПред рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдиреЗ рдкрд░ рдЙрдиреНрд╣реЗрдВ рдЬреЛрдбрд╝реЗрдВ:
     ```bash
     export LD_LIBRARY_PATH=/usr/local/cuda/lib64:$LD_LIBRARY_PATH
     ```
     рдЗрд╕реЗ рдкрд░рд╕рд┐рд╕реНрдЯреЗрдВрд╕ рдХреЗ рд▓рд┐рдП `~/.bashrc` рдпрд╛ `webui-user.sh` рдореЗрдВ рдЬреЛрдбрд╝реЗрдВред
   - **рд╡рд░реНрдЪреБрдЕрд▓ рдПрдирд╡рд╛рдпрд░рдирдореЗрдВрдЯ рд╕рдХреНрд░рд┐рдп рдХрд░реЗрдВ**:
     рдЪрд▓рд╛рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рд╣рдореЗрд╢рд╛ Stable Diffusion рд╡рд░реНрдЪреБрдЕрд▓ рдПрдирд╡рд╛рдпрд░рдирдореЗрдВрдЯ рдХреЛ рд╕рдХреНрд░рд┐рдп рдХрд░реЗрдВ:
     ```bash
     cd /home/lzw/Projects/stable-diffusion-webui
     source venv/bin/activate
     ```

#### 6. **Stable Diffusion WebUI рдЕрдкрдбреЗрдЯ рдХрд░реЗрдВ**
   рдЖрдкрдХреЗ рд╡рд░реНрдЬрди (`v1.10.1`, commit `82a973c`) рдореЗрдВ рд╕рдВрдЧрддрддрд╛ рд╕рдорд╕реНрдпрд╛рдПрдБ рд╣реЛ рд╕рдХрддреА рд╣реИрдВред рдирд╡реАрдирддрдо рд╡рд░реНрдЬрди рдкрд░ рдЕрдкрдбреЗрдЯ рдХрд░реЗрдВ:
   ```bash
   cd /home/lzw/Projects/stable-diffusion-webui
   git pull
   ```
   рдлрд┐рд░, рдирд┐рд░реНрднрд░рддрд╛рдУрдВ рдХреЛ рдкреБрдирдГ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ:
   ```bash
   ./webui.sh
   ```

#### 7. **рдЯреНрд░рдмрд▓рд╢реВрдЯрд┐рдВрдЧ**
   - **рдпрджрд┐ `nvidia-smi` рдлреЗрд▓ рд╣реЛрддрд╛ рд╣реИ**: NVIDIA рдбреНрд░рд╛рдЗрд╡рд░ рдХреЛ рдкреБрдирдГ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ рдпрд╛ GPU рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВред
   - **рдпрджрд┐ PyTorch рдЕрднреА рднреА GPU рдХрд╛ рдкрддрд╛ рдирд╣реАрдВ рд▓рдЧрд╛рддрд╛ рд╣реИ**:
     - рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ CUDA рдФрд░ cuDNN рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдЗрдВрд╕реНрдЯреЙрд▓ рд╣реИрдВред рдпрджрд┐ cuDNN рдЧреБрдо рд╣реИ рддреЛ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ:
       ```bash
       sudo apt-get install libcudnn8
       ```
     - рдЕрдкрдиреЗ GPU рдФрд░ PyTorch рдХреЗ рд╕рд╛рде CUDA рд╡рд░реНрдЬрди рд╕рдВрдЧрддрддрд╛ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░реЗрдВред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдкреБрд░рд╛рдиреЗ GPU (рдЬреИрд╕реЗ, Kepler series) CUDA 12 рдХрд╛ рд╕рдорд░реНрдерди рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред
   - **рдпрджрд┐ рддреНрд░реБрдЯрд┐рдпрд╛рдБ рдмрдиреА рд░рд╣рддреА рд╣реИрдВ**: рд╡рд┐рд╕реНрддреГрдд рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреЗ рд▓рд┐рдП Stable Diffusion рд▓реЙрдЧреНрд╕ рдЬрд╛рдБрдЪреЗрдВ:
     ```bash
     cat /home/lzw/Projects/stable-diffusion-webui/log/webui.log
     ```
     рдЖрдЧреЗ рд╕рд╣рд╛рдпрддрд╛ рдХреЗ рд▓рд┐рдП рдХреЛрдИ рд╡рд┐рд╢рд┐рд╖реНрдЯ рддреНрд░реБрдЯрд┐рдпрд╛рдБ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВред
   - **рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рд╕реАрдорд╛рдПрдБ**: рдпрджрд┐ рдЖрдкрдХрд╛ GPU рдмрд╣реБрдд рдкреБрд░рд╛рдирд╛ рд╣реИ (рдЬреИрд╕реЗ, 2016 рд╕реЗ рдкрд╣рд▓реЗ рдХреЗ NVIDIA GPU), рддреЛ рдпрд╣ рдЖрдзреБрдирд┐рдХ CUDA рд╡рд░реНрдЬрди рдХрд╛ рд╕рдорд░реНрдерди рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛ рд╣реИред рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ, `--skip-torch-cuda-test` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ рдпрд╛ рдЕрдкрдирд╛ GPU рдЕрдкрдЧреНрд░реЗрдб рдХрд░реЗрдВред

#### 8. **рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдЪрд▓рд╛рдПрдБ**
   рд╕реБрдзрд╛рд░ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, WebUI рдЪрд▓рд╛рдПрдБ:
   ```bash
   cd /home/lzw/Projects/stable-diffusion-webui
   ./webui.sh
   ```
   рдпрджрд┐ рдЖрдкрдиреЗ GPU рд╕рдорд╕реНрдпрд╛ рдареАрдХ рдХрд░ рджреА рд╣реИ, рддреЛ рддреНрд░реБрдЯрд┐ рдЧрд╛рдпрдм рд╣реЛ рдЬрд╛рдиреА рдЪрд╛рд╣рд┐рдПред рдпрджрд┐ `--skip-torch-cuda-test` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рддреЛ рдпрд╣ CPU рдкрд░ рдЪрд▓реЗрдЧрд╛ред

### рдиреЛрдЯреНрд╕
- **рд╕рд┐рд╕реНрдЯрдо рдЬрд╛рдирдХрд╛рд░реА**: рдЖрдкрдХрд╛ рд╕реЗрдЯрдЕрдк (glibc 2.35, Python 3.10.12, GCC 11.4.0) Ubuntu 22.04 рдХрд╛ рд╕реБрдЭрд╛рд╡ рджреЗрддрд╛ рд╣реИ, рдЬреЛ CUDA 11.8 рдпрд╛ 12.1 рдФрд░ рд╣рд╛рд▓ рдХреЗ PyTorch рд╡рд░реНрдЬрди рдХреЗ рд╕рд╛рде рд╕рдВрдЧрдд рд╣реИред
- **рдкрд░рдлреЙрд░реНрдореЗрдВрд╕**: CPU рдкрд░ рдЪрд▓рд╛рдирд╛ (`--skip-torch-cuda-test` рдХреЗ рд╕рд╛рде) рдПрдХ рдлреЙрд▓рдмреИрдХ рд╣реИ рд▓реЗрдХрд┐рди рдзреАрдорд╛ рд╣реЛрдЧрд╛ред Stable Diffusion рдХреЗ рд▓рд┐рдП GPU рд╕рдкреЛрд░реНрдЯ рдареАрдХ рдХрд░рдиреЗ рдХреА рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХреА рдЬрд╛рддреА рд╣реИред
- **TCMalloc**: рдЖрдкрдХреЗ рдЖрдЙрдЯрдкреБрдЯ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ TCMalloc рд╕рдорд╕реНрдпрд╛ рд╣рд▓ рд╣реЛ рдЧрдИ рдкреНрд░рддреАрдд рд╣реЛрддреА рд╣реИред рдпрджрд┐ рдЖрдк рдореЗрдореЛрд░реА-рд╕рдВрдмрдВрдзреА рд╕рдорд╕реНрдпрд╛рдУрдВ рдХрд╛ рд╕рд╛рдордирд╛ рдХрд░рддреЗ рд╣реИрдВ рддреЛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ `LD_PRELOAD` рд╕реЗрдЯ рд░рд╣реЗред

рдпрджрд┐ рдЖрдкрдХреЛ рдЕрднреА рднреА рд╕рдорд╕реНрдпрд╛рдУрдВ рдХрд╛ рд╕рд╛рдордирд╛ рдХрд░рдирд╛ рдкрдбрд╝ рд░рд╣рд╛ рд╣реИ рдпрд╛ рд╡рд┐рд╢рд┐рд╖реНрдЯ рддреНрд░реБрдЯрд┐ рд╕рдВрджреЗрд╢реЛрдВ рдХреЗ рд╕рд╛рде рд╕рд╣рд╛рдпрддрд╛ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рддреЛ рдХреГрдкрдпрд╛ рдЕрддрд┐рд░рд┐рдХреНрдд рд╡рд┐рд╡рд░рдг рдкреНрд░рджрд╛рди рдХрд░реЗрдВ (рдЬреИрд╕реЗ, GPU рдореЙрдбрд▓, CUDA рд╡рд░реНрдЬрди, рдпрд╛ рдкреВрд░реНрдг рд▓реЙрдЧ), рдФрд░ рдореИрдВ рд╕рдорд╛рдзрд╛рди рдХреЛ рдкрд░рд┐рд╖реНрдХреГрдд рдХрд░ рд╕рдХрддрд╛ рд╣реВрдБ!