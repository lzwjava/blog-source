---
audio: false
generated: true
image: false
lang: hi
layout: post
model: x-ai/grok-4-fast
title: रेंज क्वेरीज़ के लिए वर्गमूल अपघटन
translated: true
type: note
---

### स्क्वायर रूट डिकम्पोज़िशन

स्क्वायर रूट डिकम्पोज़िशन (जिसे अक्सर √-डिकम्पोज़िशन के रूप में संक्षिप्त किया जाता है) कंप्यूटर साइंस और प्रतियोगी प्रोग्रामिंग में एक तकनीक है जिसका उपयोग बड़े ऐरे या डेटा स्ट्रक्चर पर रेंज क्वेरी और अपडेट को ऑप्टिमाइज़ करने के लिए किया जाता है। यह विशेष रूप से तब उपयोगी होती है जब आपको "सबअरे में एलिमेंट्स का योग/अधिकतम/न्यूनतम ज्ञात करें" जैसी क्वेरीज़ का कुशलता से उत्तर देने की आवश्यकता होती है, बिना सेगमेंट ट्री या फेनविक ट्री जैसे भारी तंत्र पर निर्भर रहे, जिन्हें लागू करना अधिक जटिल हो सकता है।

#### इसका उपयोग क्यों करें?
- **टाइम कॉम्प्लेक्सिटी ट्रेड-ऑफ**: साइज़ \\( n \\) के एक ऐरे के लिए, सरल रेंज क्वेरीज़ प्रति क्वेरी \\( O(n) \\) समय लेती हैं। स्क्वायर रूट डिकम्पोज़िशन इसे प्रति क्वेरी और अपडेट \\( O(\sqrt{n}) \\) तक कम कर देती है, जो कई ऐसी समस्याओं के लिए एक अच्छा संतुलन है जहाँ \\( n \\) \\( 10^5 \\) या \\( 10^6 \\) तक होता है।
- **सरलता**: इसे उन्नत डेटा स्ट्रक्चर की तुलना में कोड करना और डीबग करना आसान होता है।
- **अनुप्रयोग**: रेंज सम क्वेरीज़, रेंज मिनिमम क्वेरीज़ (RMQ), या स्लाइडिंग विंडो में फ्रीक्वेंसी काउंटिंग से जुड़ी समस्याओं में आम।

#### यह कैसे काम करता है
1. **ब्लॉक्स में विभाजित करें**: ऐरे को साइज़ \\( \sqrt{n} \\) (राउंड डाउन) के ब्लॉक्स में विभाजित करें। यदि \\( n = 100 \\), तो ब्लॉक साइज़ \\( b = 10 \\), इसलिए आपको 10 ब्लॉक मिलते हैं।
   - प्रत्येक ब्लॉक प्रीकम्प्यूटेड जानकारी संग्रहीत करता है (उदाहरण के लिए, सम क्वेरीज़ के लिए उस ब्लॉक में एलिमेंट्स का योग)।

2. **एक रेंज [L, R] क्वेरी करें**:
   - **पूर्ण ब्लॉक्स**: [L, R] के पूरी तरह से अंदर आने वाले पूर्ण ब्लॉक्स के लिए, बस प्रीकम्प्यूटेड वैल्यू को \\( O(1) \\) प्रति ब्लॉक में प्राप्त करें। अधिकतम \\( O(\sqrt{n}) \\) पूर्ण ब्लॉक।
   - **आंशिक ब्लॉक्स**: किनारों (बाएँ और दाएँ आंशिक ब्लॉक्स) के लिए, व्यक्तिगत एलिमेंट्स से होकर मैन्युअल रूप से पुनरावृति करें, जिसमें कुल \\( O(\sqrt{n}) \\) समय लगता है (चूंकि प्रत्येक आंशिक ब्लॉक का साइज़ \\( \sqrt{n} \\) होता है)।
   - कुल: \\( O(\sqrt{n}) \\)।

3. **अपडेट्स**: जब किसी एलिमेंट को अपडेट करते हैं, तो उसके ब्लॉक के लिए प्रीकम्प्यूटेड वैल्यू को \\( O(\sqrt{n}) \\) समय में पुनर्निर्मित करें (ब्लॉक को फिर से जोड़कर)।

#### सरल उदाहरण: रेंज सम क्वेरी
मान लीजिए हमारे पास एक ऐरे `A = [1, 3, 2, 4, 5]` है और \\( n=5 \\), इसलिए ब्लॉक साइज़ \\( b = \sqrt{5} \approx 2 \\)। ब्लॉक:
- ब्लॉक 0: [1, 3] → योग = 4
- ब्लॉक 1: [2, 4] → योग = 6
- ब्लॉक 2: [5] → योग = 5 (अंतिम ब्लॉक छोटा हो सकता है)

इंडेक्स 1 से 4 तक क्वेरी योग (0-आधारित: एलिमेंट 3,2,4,5):
- आंशिक बायाँ: इंडेक्स 1 (ब्लॉक 0 में) → 3 जोड़ें
- पूर्ण ब्लॉक 1: 6 जोड़ें
- आंशिक दायाँ: इंडेक्स 4 (ब्लॉक 2 में) → 5 जोड़ें
- कुल: 3 + 6 + 5 = 14

कोड में लागू करने के लिए (पायथन स्यूडोकोड):
```python
import math

class SqrtDecomp:
    def __init__(self, arr):
        self.n = len(arr)
        self.b = int(math.sqrt(self.n))
        self.arr = arr[:]
        self.block_sums = [0] * ((self.n + self.b - 1) // self.b)
        self._build()
    
    def _build(self):
        for i in range(self.n):
            block_id = i // self.b
            self.block_sums[block_id] += self.arr[i]
    
    def update(self, idx, val):
        diff = val - self.arr[idx]
        self.arr[idx] = val
        block_id = idx // self.b
        self.block_sums[block_id] += diff
    
    def query(self, left, right):
        res = 0
        l_block, r_block = left // self.b, right // self.b
        
        if l_block == r_block:
            for i in range(left, right + 1):
                res += self.arr[i]
        else:
            # Left partial
            for i in range(left, (l_block + 1) * self.b):
                res += self.arr[i]
            # Full blocks
            for blk in range(l_block + 1, r_block):
                res += self.block_sums[blk]
            # Right partial
            for i in range(r_block * self.b, right + 1):
                res += self.arr[i]
        return res
```

यह एक बेसिक वर्जन है—इसे मिन/मैक्स के लिए योग के बजाय प्रति ब्लॉक मिन/मैक्स स्टोर करके एडाप्ट करें।

गहन जानकारी के लिए, [GeeksforGeeks on Square Root Decomposition](https://www.geeksforgeeks.org/sqrt-decomposition-algorithm-square-root-decomposition-technique-set-1-introduction/) या [CP-Algorithms](https://cp-algorithms.com/data_structures/sqrt_decomposition.html) जैसे संसाधन देखें।