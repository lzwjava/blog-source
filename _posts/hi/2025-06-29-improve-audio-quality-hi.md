---
audio: false
generated: true
lang: hi
layout: post
title: yt-dlp में ऑडियो गुणवत्ता सुधारें
translated: true
type: note
---

आपकी चिंता के समाधान के लिए कि `yt-dlp` का उपयोग करके YouTube वीडियो डाउनलोड करते समय ऑडियो क्वालिटी आपकी अपेक्षा के अनुरूप नहीं है, मैं आपको यह गाइड करूंगा कि स्क्रिप्ट को कैसे संशोधित किया जाए ताकि यह चुने गए वीडियो रिज़ॉल्यूशन (720p या 480p) की परवाह किए बिना हमेशा **सर्वोत्तम संभव ऑडियो क्वालिटी** डाउनलोड करे। आइए इसे चरणबद्ध तरीके से समझते हैं और एक स्पष्ट समाधान प्रदान करते हैं।

### वर्तमान स्क्रिप्ट को समझना
आपकी स्क्रिप्ट YouTube वीडियो डाउनलोड करने के लिए `yt-dlp` का उपयोग करती है, जो आपको रिज़ॉल्यूशन (720p या 480p) निर्दिष्ट करने की अनुमति देती है। फॉर्मेट चयन `format_str` वेरिएबल द्वारा नियंत्रित होता है, जिसे `yt-dlp` में `-f` ऑप्शन को पास किया जाता है। यहां बताया गया है कि यह वर्तमान में क्या करती है:

- **720p के लिए**: `format_str = 'bestvideo[height<=720]+bestaudio/best[height<=720]'`
- **480p के लिए**: `format_str = 'bestvideo[height<=480]+bestaudio/best[height<=720]'`

`yt-dlp` में:
- `bestvideo[height<=720]` 720 पिक्सेल या उससे कम ऊंचाई वाली सर्वोत्तम वीडियो स्ट्रीम का चयन करता है।
- `bestaudio` उपलब्ध सर्वोत्तम ऑडियो-ओनली स्ट्रीम का चयन करता है, जो आमतौर पर सबसे उच्च बिटरेट वाली होती है।
- `+` ऑपरेटर `yt-dlp` को वीडियो और ऑडियो स्ट्रीम को अलग-अलग डाउनलोड करने और उन्हें एक ही फाइल में मर्ज करने के लिए कहता है।
- `/` ऑपरेटर एक फॉलबैक प्रदान करता है: यदि इसके पहले का संयोजन (जैसे, `bestvideo[height<=720]+bestaudio`) उपलब्ध नहीं है, तो यह इसके बाद वाले फॉर्मेट (जैसे, `best[height<=720]`) का उपयोग करता है, जो 720p तक की वीडियो और ऑडियो दोनों वाला सर्वोत्तम सिंगल फॉर्मेट है।

चूंकि `bestaudio` शामिल है, स्क्रिप्ट को पहले से ही उपलब्ध सर्वोत्तम ऑडियो क्वालिटी का चयन करना चाहिए। हालांकि, आपने देखा है कि ऑडियो क्वालिटी "कम अच्छी" लगती है, तो आइए जांच करते हैं कि ऐसा क्यों हो रहा है और इसे कैसे ठीक किया जाए।

### ऑडियो क्वालिटी के सबपार होने का संभावित कारण
हालांकि `bestaudio` का उपयोग किया जा रहा है, एक संभावित समय यह हो सकती है:
- फॉलबैक ऑप्शन (`best[height<=720]`) दुर्लभ मामलों में ट्रिगर हो सकता है जहां अलग-अलग वीडियो और ऑडियो स्ट्रीम को निर्दिष्ट तरीके से संयोजित नहीं किया जा सकता है। यह फॉलबैक एक संयुक्त वीडियो+ऑडियो फॉर्मेट का चयन करता है, जिसकी ऑडियो क्वालिटी कम हो सकती है (जैसे, एक अलग 256kbps ऑडियो स्ट्रीम के बजाय 128kbps)।
- 480p के मामले में, फॉलबैक `best[height<=720]` है, जो असंगत है—यह 720p का वीडियो डाउनलोड कर सकता है जब आपने 480p का अनुरोध किया था, और उस संयुक्त फॉर्मेट में ऑडियो क्वालिटी सर्वोत्तम नहीं हो सकती है।

चूंकि YouTube आमतौर पर अलग-अलग वीडियो और ऑडियो स्ट्रीम प्रदान करता है, `bestvideo + bestaudio` का संयोजन लगभग हमेशा काम करना चाहिए। हालांकि, सर्वोत्तम ऑडियो क्वालिटी की गारंटी के लिए और किसी भी संभावित निम्न-गुणवत्ता वाले संयुक्त फॉर्मेट पर फॉलबैक से बचने के लिए, हम स्क्रिप्ट को परिष्कृत कर सकते हैं।

### समाधान: सर्वोत्तम ऑडियो क्वालिटी सुनिश्चित करें
यह सुनिश्चित करने के लिए कि `yt-dlp` हमेशा सर्वोत्तम ऑडियो क्वालिटी डाउनलोड करे:
1. **बिना फॉलबैक के `bestaudio` का उपयोग करें**: यह `yt-dlp` को आपके चुने गए रिज़ॉल्यूशन के साथ-साथ उपलब्ध सर्वोत्तम ऑडियो स्ट्रीम डाउनलोड करने के लिए बाध्य करता है। यदि यह संयोजन संभव नहीं है, तो यह ऑडियो क्वालिटी से समझौता करने के बजाय एरर दे देगा, जो स्वीकार्य है क्योंकि YouTube वीडियो में लगभग हमेशा अलग-अलग स्ट्रीम उपलब्ध होते हैं।
2. **480p फॉलबैक की असंगतता को ठीक करें**: फॉलबैक (यदि रखा गया है) को अनुरोधित रिज़ॉल्यूशन के साथ संरेखित करें, हालांकि इसे हटाना आसान है और आपके लक्ष्य के अनुरूप है।

स्क्रिप्ट को संशोधित करने का तरीका यहां बताया गया है:

#### संशोधित कोड
अपनी स्क्रिप्ट में `format_str` परिभाषाओं को निम्नानुसार अपडेट करें:

```python
import argparse
import subprocess
import os

def main():
    parser = argparse.ArgumentParser(description="Download YouTube videos at specified resolution.")
    parser.add_argument("url", help="YouTube video URL")
    parser.add_argument(
        "--resolution",
        choices=["720p", "480p"],
        default="720p",
        help="Video resolution to download (default: 720p)"
    )
    args = parser.parse_args()

    output_dir = "test"
    os.makedirs(output_dir, exist_ok=True)

    # सर्वोत्तम ऑडियो क्वालिटी सुनिश्चित करने के लिए अपडेटेड फॉर्मेट स्ट्रिंग
    if args.resolution == "720p":
        format_str = 'bestvideo[height<=720]+bestaudio'
    else:  # 480p
        format_str = 'bestvideo[height<=480]+bestaudio'

    command = [
        "yt-dlp",
        "--cookies-from-browser", "firefox",
        "-f", format_str,
        "-P", output_dir,
        args.url
    ]

    subprocess.run(command)

if __name__ == "__main__":
    main()
```

#### परिवर्तनों की व्याख्या
- **720p**: `'bestvideo[height<=720]+bestaudio/best[height<=720]'` से बदलकर `'bestvideo[height<=720]+bestaudio'` कर दिया गया है।
- **480p**: `'bestvideo[height<=480]+bestaudio/best[height<=720]'` से बदलकर `'bestvideo[height<=480]+bestaudio'` कर दिया गया है।
- **फॉलबैक हटा दिया गया (`/best[height<=...]`)**: यह सुनिश्चित करता है कि `yt-dlp` हमेशा सर्वोत्तम ऑडियो स्ट्रीम (`bestaudio`) का उपयोग करे, न कि संभावित रूप से कम ऑडियो क्वालिटी वाले संयुक्त फॉर्मेट पर फॉलबैक करे।

### यह क्यों काम करता है
- **`bestaudio`**: उपलब्ध सर्वोत्तम बिटरेट ऑडियो स्ट्रीम का चयन करता है (जैसे, वीडियो के आधार पर Opus at 160kbps या AAC at 256kbps), जिससे सर्वोत्तम ऑडियो क्वालिटी सुनिश्चित होती है।
- **कोई फॉलबैक नहीं**: `/best[height<=720]` को हटाकर, आप `yt-dlp` को एक संयुक्त फॉर्मेट डाउनलोड करने से रोकते हैं जिसकी ऑडियो क्वालिटी निम्न हो सकती है। चूंकि YouTube वीडियो में आमतौर पर अलग-अलग स्ट्रीम होते हैं, `bestvideo + bestaudio` को हमेशा सफल होना चाहिए।
- **रिज़ॉल्यूशन का सम्मान**: वीडियो रिज़ॉल्यूशन आपकी पसंद (720p या 480p) के भीतर रहता है, जबकि ऑडियो क्वालिटी को अधिकतम किया जाता है।

### परिणाम सत्यापित करना
यह पुष्टि करने के लिए कि आपको सर्वोत्तम ऑडियो मिल रहा है:
1. **उपलब्ध फॉर्मेट जांचें**: किसी विशिष्ट वीडियो के लिए उपलब्ध वीडियो और ऑडियो स्ट्रीम देखने के लिए `yt-dlp --list-formats <youtube_url>` चलाएं। ऑडियो-ओनली फॉर्मेट (जैसे, `m4a`, `webm`) और उनकी बिटरेट देखें।
2. **डाउनलोड की निगरानी करें**: स्क्रिप्ट चलाते समय, `yt-dlp` आउटपुट देगा कि यह कौन से फॉर्मेट डाउनलोड कर रहा है (जैसे, "Downloading video stream (code)" और "Downloading audio stream (code)")। सुनिश्चित करें कि यह उच्च बिटरेट वाली एक अलग ऑडियो स्ट्रीम का चयन कर रहा है।
3. **प्लेबैक टेस्ट करें**: डाउनलोड की गई फाइल को चलाएं और ऑडियो क्वालिटी सत्यापित करें। यदि यह अभी भी खराब है, तो वीडियो की सर्वोत्तम उपलब्ध ऑडियो अपलोडर द्वारा सीमित हो सकती है, स्क्रिप्ट द्वारा नहीं।

### यदि यह विफल हो जाए तो क्या करें?
यदि `yt-dlp` एरर देता है क्योंकि `bestvideo[height<=720]+bestaudio` उपलब्ध नहीं है (YouTube के लिए यह बहुत ही असंभव है), तो आप कर सकते हैं:
- फॉलबैक जोड़ सकते हैं जैसे `/best[height<=720]'` वापस, लेकिन इससे ऑडियो क्वालिटी से समझौता हो सकता है, जिसे आप टालना चाहते हैं।
- उस विशिष्ट वीडियो की `--list-formats` के साथ जांच करें और उस मामले के लिए स्क्रिप्ट को समायोजित करें, हालांकि इसकी शायद ही कभी आवश्यकता होती है।

### निष्कर्ष
आपकी स्क्रिप्ट अब बिना किसी फॉलबैक के `bestaudio` का उपयोग करके हमेशा उपलब्ध सर्वोत्तम ऑडियो क्वालिटी डाउनलोड करने के लिए तैयार है, साथ ही आपके चुने गए वीडियो रिज़ॉल्यूशन के साथ। संशोधित `format_str` मान हैं:

- 720p के लिए: `'bestvideo[height<=720]+bestaudio'`
- 480p के लिए: `'bestvideo[height<=480]+bestaudio'`

इस परिवर्तन से आपकी समस्या का समाधान होना चाहिए, जो आपकी रिज़ॉल्यूशन प्राथमिकताओं के भीतर संभव सर्वोत्तम ऑडियो क्वालिटी सुनिश्चित करता है। यदि ऑडियो अभी भी कमजोर लगता है, तो यह वीडियो की मूल अपलोड क्वालिटी के कारण हो सकता है, जो स्क्रिप्ट के नियंत्रण से बाहर है। इसे आजमाएं और मुझे बताएं कि यह कैसे काम करता है!