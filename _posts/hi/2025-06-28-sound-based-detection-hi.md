---
audio: false
generated: true
lang: hi
layout: post
title: मेटैग वाशिंग मशीन के लिए ध्वनि-आधारित पहचान
translated: true
type: note
---

अपनी Maytag MHW8630HW वॉशिंग मशीन के रुकने का पता लगाने के लिए ध्वनि का उपयोग करना कैमरा-आधारित तरीके का एक व्यवहार्य विकल्प है। वॉशिंग मशीन के पास एक साउंड सेंसर लगाकर, आप ऑपरेशन के दौरान उत्पन्न शोर (जैसे, मोटर की आवाज, पानी का प्रवाह, या ड्रम का घूमना) की निगरानी कर सकते हैं और यह पता लगा सकते हैं कि यह कब बंद होती है, जो वॉश साइकिल के समाप्त होने का संकेत देती है। नीचे, मैं समझाऊंगा कि टेलीग्राम नोटिफिकेशन सिस्टम को बनाए रखते हुए, कैमरे के बजाय साउंड सेंसर का उपयोग करने के लिए पिछले प्रोजेक्ट को कैसे अनुकूलित किया जाए, जिसमें हार्डवेयर, एल्गोरिदम और कोड में बदलाव पर ध्यान केंद्रित किया गया है।

---

### टेक स्टैक
#### हार्डवेयर
1.  **Arduino बोर्ड**:
    - **ESP32-CAM** (अभी भी उपयोग करने योग्य) – टेलीग्राम इंटीग्रेशन के लिए Wi-Fi बरकरार रखता है, हालांकि कैमरे की आवश्यकता नहीं है।
    - विकल्प: **ESP8266 NodeMCU** या Wi-Fi के लिए **Arduino Uno** के साथ एक ESP8266 मॉड्यूल (सरल यदि आपको कैमरे की आवश्यकता नहीं है)।
2.  **साउंड सेंसर**:
    - **KY-038 माइक्रोफोन साउंड सेंसर** या इसी तरह – किफायती, एक एनालॉग आउटपुट के माध्यम से ध्वनि स्तर का पता लगाता है।
    - विकल्प: **MAX9814 Electret माइक्रोफोन एम्पलीफायर** – अधिक संवेदनशील, बेहतर डिटेक्शन के लिए समायोज्य गेन के साथ।
3.  **पावर सप्लाई**:
    - ESP32 या अन्य बोर्ड के लिए 5V USB पावर एडाप्टर या बैटरी पैक।
4.  **माउंटिंग**:
    - वॉशिंग मशीन के करीब साउंड सेंसर लगाएं (जैसे, किनारे या ऊपर चिपकाया गया) जहां से यह ऑपरेशनल आवाजों का पता लगा सके लेकिन सीधे पानी के संपर्क से बच सके।
    - सेंसर और बोर्ड को सुरक्षित रखने के लिए एक छोटे एन्क्लोजर का उपयोग करें।
5.  **Wi-Fi राउटर**:
    - टेलीग्राम नोटिफिकेशन भेजने के लिए इंटरनेट कनेक्टिविटी के लिए।

#### सॉफ्टवेयर
- **Arduino IDE**: ESP32 या अन्य बोर्ड को प्रोग्राम करने के लिए।
- **लाइब्रेरीज़**:
  - **Universal Arduino Telegram Bot Library** by Brian Lough – टेलीग्राम इंटीग्रेशन के लिए।
  - **ArduinoJson** – टेलीग्राम API कम्युनिकेशन में JSON डेटा को हैंडल करने के लिए।
- **टेलीग्राम बॉट**: पहले की तरह, बॉट टोकन और चैट ID प्राप्त करने के लिए BotFather का उपयोग करना।
- **प्रोग्रामिंग लैंग्वेज**: C++ (Arduino स्केच)।

---

### साउंड के साथ वॉशिंग मशीन स्टेटस डिटेक्ट करने के लिए एल्गोरिदम
साउंड सेंसर वॉशिंग मशीन द्वारा उत्पन्न शोर के स्तर का पता लगाएगा। जब मशीन चल रही होती है, तो यह लगातार आवाजें उत्पन्न करती है (जैसे, मोटर, पानी, या ड्रम)। जब यह बंद होती है, तो ध्वनि स्तर काफी गिर जाता है। एल्गोरिदम मशीन की स्थिति निर्धारित करने के लिए इन ध्वनि स्तरों को प्रोसेस करता है।

#### डिटेक्शन एल्गोरिदम
1.  **साउंड सैंपलिंग**:
    - ध्वनि स्तरों को मापने के लिए साउंड सेंसर से एनालॉग आउटपुट को लगातार पढ़ें।
2.  **सिग्नल प्रोसेसिंग**:
    - **औसत निकालना**: क्षणिक शोर (जैसे, दरवाजे की जोरदार आवाज) को स्मूथ करने के लिए एक छोटी विंडो (जैसे, 1-2 सेकंड) में औसत ध्वनि स्तर की गणना करें।
    - **थ्रेशोल्डिंग**: औसत ध्वनि स्तर की तुलना एक पूर्वनिर्धारित थ्रेशोल्ड से करें। एक उच्च स्तर इंगित करता है कि मशीन चल रही है, जबकि एक निम्न स्तर सुझाव देता है कि यह बंद है।
3.  **स्टेट मशीन**:
    - ध्वनि स्तरों के आधार पर मशीन की स्थिति (ON या OFF) ट्रैक करें।
    - यदि ध्वनि स्तर कई चक्रों के लिए थ्रेशोल्ड से अधिक हो जाता है, तो मान लें कि मशीन चल रही है।
    - यदि ध्वनि स्तर थ्रेशोल्ड से नीचे चला जाता है और एक निर्धारित अवधि (जैसे, 5 मिनट) के लिए निम्न बना रहता है, तो मान लें कि वॉश साइकिल पूरी हो गई है।
4.  **डीबाउंसिंग**:
    - यह पुष्टि करने के लिए एक विलंब (जैसे, 5 मिनट) लागू करें कि मशीन बंद हो गई है, शांत चरणों (जैसे, सोकिंग या साइकिल में पॉज) के दौरान गलत नोटिफिकेशन से बचना।
5.  **नोटिफिकेशन**:
    - जब मशीन के बंद होने की पुष्टि हो जाए, तो एक टेलीग्राम संदेश भेजें (जैसे, "वॉशिंग मशीन बंद! कपड़े टांगने का समय आ गया है।")।

#### साउंड डिटेक्शन क्यों?
- साउंड डिटेक्शन इमेज प्रोसेसिंग की तुलना में सरल है, क्योंकि इसके लिए जटिल एल्गोरिदम या उच्च कम्प्यूटेशनल संसाधनों की आवश्यकता नहीं होती है।
- यह कैमरा-आधारित डिटेक्शन की तुलना में परिवेशी प्रकाश परिवर्तनों के प्रति कम संवेदनशील है।
- हालांकि, यह पृष्ठभूमि के शोर (जैसे, जोरदार TV) से प्रभावित हो सकता है, इसलिए प्लेसमेंट और थ्रेशोल्ड ट्यूनिंग महत्वपूर्ण हैं।

---

### इम्प्लीमेंटेशन गाइड
#### स्टेप 1: टेलीग्राम बॉट सेट अप करें
- मूल गाइड के समान चरणों का पालन करें:
  - **Bot Token** प्राप्त करने के लिए **@BotFather** का उपयोग करके एक बॉट बनाएं।
  - **@GetIDsBot** का उपयोग करके या आने वाले संदेशों की जांच करके अपनी **Chat ID** प्राप्त करें।
  - नोटिफिकेशन प्राप्त करने के लिए सुनिश्चित करें कि आपके फोन पर टेलीग्राम सेट अप है।

#### स्टेप 2: हार्डवेयर सेटअप
1.  **एक साउंड सेंसर चुनें**:
    - **KY-038**: एक एनालॉग आउटपुट (ESP32 के 10-बिट ADC के लिए 0-1023) प्रदान करता है जो ध्वनि तीव्रता के अनुपात में होता है। इसमें एक डिजिटल आउटपुट भी होता है, लेकिन सूक्ष्म डिटेक्शन के लिए एनालॉग बेहतर है।
    - **MAX9814**: अधिक संवेदनशील, जिसमें एक पोटेंशियोमीटर के माध्यम से समायोज्य गेन होता है। एक एनालॉग पिन से कनेक्ट करें।
2.  **साउंड सेंसर कनेक्ट करें**:
    - KY-038 के लिए:
      - **VCC** से 5V (या 3.3V, बोर्ड के आधार पर)।
      - **GND** से GND।
      - **Analog Out (A0)** से ESP32 पर एक एनालॉग पिन (जैसे, GPIO 4)।
    - MAX9814 के लिए:
      - समान कनेक्शन, लेकिन इष्टतम संवेदनशीलता के लिए ऑनबोर्ड पोटेंशियोमीटर का उपयोग करके गेन समायोजित करें।
3.  **सेंसर की स्थिति तय करें**:
    - सेंसर को वॉशिंग मशीन के करीब रखें (जैसे, किनारे या ऊपर) जहां से यह मोटर या ड्रम के शोर का पता लगा सके। पानी के संपर्क वाले क्षेत्रों से बचें।
    - वॉश साइकिल के दौरान ध्वनि स्तरों की निगरानी करके प्लेसमेंट का परीक्षण करें (मान लॉग करने के लिए Serial Monitor का उपयोग करें)।
4.  **बोर्ड को पावर दें**:
    - ESP32 या अन्य बोर्ड से 5V USB पावर एडाप्टर या बैटरी पैक कनेक्ट करें।
    - स्थिर पावर सुनिश्चित करें, क्योंकि Wi-Fi कम्युनिकेशन के लिए लगातार वोल्टेज की आवश्यकता होती है।
5.  **माउंटिंग**:
    - सेंसर और बोर्ड को सुरक्षित करने के लिए एक छोटे एन्क्लोजर या टेप का उपयोग करें, यह सुनिश्चित करते हुए कि माइक्रोफोन ध्वनि को कैप्चर करने के लिए उजागर रहे।

#### स्टेप 3: सॉफ्टवेयर सेटअप
- **Arduino IDE**: मूल गाइड में बताए अनुसार इंस्टॉल करें।
- **ESP32 बोर्ड सपोर्ट**: बोर्ड्स मैनेजर के माध्यम से ESP32 बोर्ड पैकेज जोड़ें (पहले की तरह ही URL)।
- **लाइब्रेरीज़**:
  - **Universal Arduino Telegram Bot Library** और **ArduinoJson** को बताए अनुसार इंस्टॉल करें।
- **Wi-Fi**: सुनिश्चित करें कि बोर्ड आपके 2.4GHz Wi-Fi नेटवर्क से कनेक्ट हो सकता है।

#### स्टेप 4: Arduino कोड लिखें
नीचे ध्वनि स्तरों का पता लगाने और टेलीग्राम नोटिफिकेशन भेजने के लिए ESP32 (या ESP8266) के लिए एक सैंपल Arduino स्केच दिया गया है। यह GPIO 4 से कनेक्ट KY-038 साउंड सेंसर मानता है।

```cpp
#include <WiFi.h>
#include <UniversalTelegramBot.h>
#include <ArduinoJson.h>

// Wi-Fi क्रेडेंशियल्स
#define WIFI_SSID "your_wifi_ssid"
#define WIFI_PASSWORD "your_wifi_password"

// टेलीग्राम बॉट क्रेडेंशियल्स
#define BOT_TOKEN "your_bot_token"
#define CHAT_ID "your_chat_id"

// साउंड सेंसर पिन
#define SOUND_PIN 4 // एनालॉग इनपुट के लिए GPIO 4

// साउंड डिटेक्शन पैरामीटर्स
#define SOUND_THRESHOLD 300 // टेस्टिंग के आधार पर समायोजित करें (0-1023)
#define SAMPLE_WINDOW 2000 // औसत निकालने के लिए 2 सेकंड
#define STOP_DELAY 300000 // मिलीसेकंड में 5 मिनट

WiFiClientSecure client;
UniversalTelegramBot bot(BOT_TOKEN, client);

bool machineRunning = false;
unsigned long lastOnTime = 0;

void setup() {
  Serial.begin(115200);

  // Wi-Fi से कनेक्ट करें
  WiFi.begin(WIFI_SSID, WIFI_PASSWORD);
  while (WiFi.status() != WL_CONNECTED) {
    delay(500);
    Serial.print(".");
  }
  Serial.println("WiFi connected");

  // टेलीग्राम क्लाइंट कॉन्फ़िगर करें
  client.setInsecure(); // सरलता के लिए; प्रोडक्शन में उचित SSL पर विचार करें

  // साउंड सेंसर पिन सेट अप करें
  pinMode(SOUND_PIN, INPUT);
}

void loop() {
  // एक विंडो पर साउंड लेवल सैंपल करें
  unsigned long startMillis = millis();
  uint32_t totalSound = 0;
  uint16_t sampleCount = 0;

  while (millis() - startMillis < SAMPLE_WINDOW) {
    totalSound += analogRead(SOUND_PIN);
    sampleCount++;
    delay(10); // सैंपल्स के बीच छोटी देरी
  }

  float avgSound = sampleCount > 0 ? (float)totalSound / sampleCount : 0;
  Serial.print("Average sound level: ");
  Serial.println(avgSound);

  // स्टेट मशीन
  if (avgSound > SOUND_THRESHOLD) {
    if (!machineRunning) {
      machineRunning = true;
      Serial.println("Machine is ON");
    }
    lastOnTime = millis();
  } else {
    if (machineRunning && (millis() - lastOnTime > STOP_DELAY)) {
      machineRunning = false;
      Serial.println("Machine stopped");
      bot.sendMessage(CHAT_ID, "Washing machine stopped! Time to hang up clothes.", "");
    }
  }

  delay(10000); // हर 10 सेकंड में जांचें
}
```

#### स्टेप 5: कोड को कस्टमाइज़ करें
1.  **क्रेडेंशियल्स अपडेट करें**:
    - `your_wifi_ssid`, `your_wifi_password`, `your_bot_token`, और `your_chat_id` को आपके वास्तविक मानों से बदलें।
2.  **`SOUND_THRESHOLD` ट्यून करें**:
    - वॉशिंग मशीन चलाएं और Serial Monitor (`Serial.println(analogRead(SOUND_PIN));`) के माध्यम से ध्वनि स्तरों की निगरानी करें।
    - `SOUND_THRESHOLD` को एक ऐसे मान पर सेट करें जो परिवेशी शोर से ऊपर लेकिन मशीन के ऑपरेशनल शोर से नीचे हो (जैसे, 200-500, आपके सेटअप के आधार पर)।
3.  **`SAMPLE_WINDOW` समायोजित करें**:
    - एक 2-सेकंड विंडो (`2000` ms) क्षणिक शोर को स्मूथ करती है। यदि पृष्ठभूमि का शोर गलत रीडिंग का कारण बनता है तो इसे बढ़ाएं।
4.  **`STOP_DELAY` समायोजित करें**:
    - सोकिंग जैसे शांत चरणों के दौरान गलत नोटिफिकेशन से बचने के लिए `300000` (5 मिनट) पर सेट करें।

#### स्टेप 6: टेस्ट और डिप्लॉय करें
1.  **कोड अपलोड करें**:
    - ESP32 को USB-to-serial एडाप्टर के माध्यम से अपने कंप्यूटर से कनेक्ट करें।
    - Arduino IDE में **ESP32 Wrover Module** (या ESP8266 के लिए **NodeMCU**) चुनें और स्केच अपलोड करें।
2.  **सिस्टम टेस्ट करें**:
    - वॉशिंग मशीन शुरू करें और ध्वनि स्तरों और स्टेट परिवर्तनों के लिए Serial Monitor की निगरानी करें।
    - मशीन के बंद होने पर टेलीग्राम नोटिफिकेशन सत्यापित करें।
3.  **फाइन-ट्यून करें**:
    - यदि गलत सकारात्मक/नकारात्मक परिणाम आते हैं तो `SOUND_THRESHOLD` या `STOP_DELAY` समायोजित करें।
    - विश्वसनीयता सुनिश्चित करने के लिए विभिन्न स्थितियों में (जैसे, पृष्ठभूमि के शोर के साथ) परीक्षण करें।
4.  **स्थायी इंस्टॉलेशन**:
    - सेंसर और बोर्ड को मशीन के पास एक एन्क्लोजर में सुरक्षित करें, यह सुनिश्चित करते हुए कि माइक्रोफोन उजागर है लेकिन पानी से सुरक्षित है।

---

### साउंड डिटेक्शन के फायदे
- **सरल प्रोसेसिंग**: कोई इमेज प्रोसेसिंग नहीं, ESP32 पर कम्प्यूटेशनल लोड कम करता है।
- **लागत-प्रभावी**: KY-038 जैसे साउंड सेंसर सस्ते होते हैं (अक्सर $5 से कम)।
- **गैर-आक्रामक**: मशीन के पैनल लाइट से सीधे कुछ भी जोड़ने की आवश्यकता नहीं है।

### चुनौतियां और निवारण
- **पृष्ठभूमि का शोर**: घरेलू शोर (जैसे, TV, बातचीत) हस्तक्षेप कर सकते हैं। इससे निपटने के लिए:
  - सेंसर को मशीन की मोटर या ड्रम के करीब रखकर।
  - परिवेशी शोर को नजरअंदाज करने के लिए `SOUND_THRESHOLD` को ट्यून करके।
  - MAX9814 पर एक दिशात्मक माइक्रोफोन या गेन समायोजित करके।
- **शांत चरण**: कुछ वॉश साइकिल में पॉज होते हैं (जैसे, सोकिंग)। `STOP_DELAY` यह सुनिश्चित करता है कि नोटिफिकेशन केवल लंबे समय तक चुप्पी के बाद भेजे जाएं।
- **पानी का संपर्क**: सुनिश्चित करें कि सेंसर एक वाटर-रेजिस्टेंट एन्क्लोजर में है, क्योंकि वॉशिंग मशीन में छींटे या नमी हो सकती है।

### वैकल्पिक एन्हांसमेंट
- **फ़्रीक्वेंसी विश्लेषण**: यदि पृष्ठभूमि का शोर एक लगातार समस्या है, तो Fast Fourier Transform (FFT) लाइब्रेरी जैसे `arduinoFFT` का उपयोग करके ध्वनि आवृत्तियों का विश्लेषण करें (जैसे, 50-200 Hz पर मोटर की गूंज)। इसके लिए अधिक प्रोसेसिंग पावर की आवश्यकता होती है और ऑप्टिमाइजेशन के बिना बेसिक ESP32 पर संभव नहीं हो सकता है।
- **दोहरे सेंसर**: अतिरेक के लिए साउंड और वाइब्रेशन सेंसर (जैसे, SW-420) को संयोजित करें। यदि दोनों संकेत देते हैं कि मशीन बंद है, तो डिटेक्शन में विश्वास बढ़ जाता है।
- **बैटरी पावर**: पोर्टेबिलिटी के लिए, USB एडाप्टर के बजाय एक रिचार्जेबल LiPo बैटरी और चार्जिंग मॉड्यूल (जैसे, TP4056) का उपयोग करें।

---

### ट्रबलशूटिंग
- **कोई साउंड डिटेक्शन नहीं**: सेंसर वायरिंग जांचें, Serial Monitor के साथ परीक्षण करें, और सुनिश्चित करें कि सेंसर मशीन के शोर के स्रोत के करीब है।
- **गलत नोटिफिकेशन**: पृष्ठभूमि के शोर या साइकिल पॉज को फ़िल्टर करने के लिए `STOP_DELAY` बढ़ाएं या `SOUND_THRESHOLD` समायोजित करें।
- **Wi-Fi समस्याएं**: 2.4GHz Wi-Fi क्रेडेंशियल्स और मशीन के पास सिग्नल स्ट्रेंथ सत्यापित करें।
- **कोई टेलीग्राम संदेश नहीं**: बॉट टोकन और चैट ID की पुष्टि करें, त्रुटियों के लिए Serial Monitor जांचें।

यह ध्वनि-आधारित दृष्टिकोण कैमरा-आधारित विधि की तुलना में सरल और विभिन्न प्रकाश स्थितियों में अधिक मजबूत है, जो इसे वॉशिंग मशीन मॉनिटर के लिए आदर्श बनाता है। यदि आपको विशिष्ट चरणों, सेंसर कैलिब्रेशन, या अतिरिक्त सुविधाओं को एकीकृत करने में सहायता की आवश्यकता हो तो मुझे बताएं!