---
audio: false
generated: true
lang: hi
layout: post
title: क्लैश प्रॉक्सी में उपयोगकर्ता एजेंट लॉग करें
translated: true
type: note
---

ऐसा लगता है कि आप **Clash** की बात कर रहे हैं, जो एक नियम-आधारित प्रॉक्सी उपयोगिता है, और आप इसे अपने HTTP अनुरोधों का **User-Agent** प्रिंट या लॉग करने के लिए कॉन्फ़िगर करना चाहते हैं। उपलब्ध जानकारी के आधार पर, Clash (या इसके कोर, जिसे अक्सर `clash-core` कहा जाता है) में आउटगोइंग अनुरोधों का User-Agent सीधे तरीके से प्रिंट करने की कोई अंतर्निहित सुविधा नहीं है। हालाँकि, आप Clash के कॉन्फ़िगरेशन विकल्पों, बाहरी टूल्स, या डीबगिंग विधियों का लाभ उठाकर इसे प्राप्त कर सकते हैं। नीचे Clash के माध्यम से किए गए अनुरोधों का User-Agent लॉग या निरीक्षण करने में आपकी सहायता के लिए एक चरण-दर-चरण मार्गदर्शिका दी गई है।

---

### संदर्भ को समझना
- **Clash** एक प्रॉक्सी उपयोगिता है जो नियमों के आधार पर ट्रैफ़िक रूट करती है और HTTP, SOCKS5, Shadowsocks, V2Ray, आदि जैसे प्रोटोकॉल का समर्थन करती है। यह नेटवर्क और एप्लिकेशन लेयर पर काम करती है।
- **User-Agent** एक HTTP हेडर है जो आमतौर पर अनुरोध करने वाले क्लाइंट एप्लिकेशन (जैसे ब्राउज़र या `curl` जैसा टूल) द्वारा सेट किया जाता है, Clash द्वारा नहीं। एक प्रॉक्सी के रूप में, Clash इन अनुरोधों को आगे भेजती है और जब तक स्पष्ट रूप से कॉन्फ़िगर न किया गया हो, यह User-Agent को स्वाभाविक रूप से लॉग या संशोधित नहीं कर सकती है।
- User-Agent को प्रिंट करने के लिए, आपको या तो:
  1. Clash को डीबगिंग के लिए HTTP हेडर्स (User-Agent सहित) लॉग करने के लिए कॉन्फ़िगर करना होगा।
  2. अनुरोधों का निरीक्षण करने के लिए एक बाहरी टूल (जैसे प्रॉक्सी डीबगर या नेटवर्क स्निफ़र) का उपयोग करना होगा।
  3. उन्हें लॉग करने के लिए कस्टम हेडर्स जोड़ने या स्क्रिप्ट का उपयोग करने के लिए Clash कॉन्फ़िगरेशन को संशोधित करना होगा।

चूंकि Clash के पास User-Agent हेडर्स को लॉग करने के लिए सीधा कोई कॉन्फ़िगरेशन नहीं है, आपको इसे अन्य टूल्स के साथ जोड़ना होगा या विशिष्ट कॉन्फ़िगरेशन का उपयोग करना होगा। इसे प्राप्त करने के तरीके नीचे दिए गए हैं।

---

### विधि 1: Clash में विस्तृत लॉगिंग सक्षम करें और लॉग्स का निरीक्षण करें
Clash विभिन्न स्तरों पर अनुरोधों को लॉग कर सकता है, लेकिन यह मूल रूप से User-Agent जैसे HTTP हेडर्स को तब तक लॉग नहीं करता है जब तक कि स्पष्ट रूप से कॉन्फ़िगर न किया गया हो या ऐसे टूल के साथ उपयोग न किया गया हो जो ट्रैफ़िक का निरीक्षण कर सकता है। आप विस्तृत लॉगिंग सक्षम कर सकते हैं और User-Agent को कैप्चर करने के लिए एक टूल का उपयोग कर सकते हैं।

#### चरण:
1. **Clash लॉग लेवल को डीबग पर सेट करें**:
   - अपनी Clash कॉन्फ़िगरेशन फ़ाइल (`config.yaml`, आमतौर पर `~/.config/clash/config.yaml` पर स्थित या `-d` फ्लैग के साथ निर्दिष्ट कस्टम डायरेक्टरी) को संपादित करें।
   - अनुरोधों के बारे में विस्तृत जानकारी कैप्चर करने के लिए `log-level` को `debug` पर सेट करें:
     ```yaml
     log-level: debug
     ```
   - कॉन्फ़िगरेशन को सेव करें और Clash को पुनरारंभ करें:
     ```bash
     clash -d ~/.config/clash
     ```
   - Clash अब `STDOUT` या निर्दिष्ट लॉग फ़ाइल में अधिक विस्तृत जानकारी लॉग करेगा। हालाँकि, इसमें User-Agent हेडर सीधे शामिल नहीं हो सकता है, क्योंकि Clash रूटिंग और कनेक्शन विवरण पर केंद्रित होता है।

2. **लॉग्स का निरीक्षण करें**:
   - टर्मिनल या लॉग फ़ाइल (यदि कॉन्फ़िगर की गई हो) में आउटपुट लॉग्स की जाँच करें। HTTP अनुरोध विवरण के लिए देखें, लेकिन ध्यान दें कि Clash की डिफ़ॉल्ट लॉगिंग में User-Agent जैसे पूर्ण HTTP हेडर्स शामिल नहीं हो सकते हैं।
   - यदि आपको User-Agent जानकारी नहीं दिखती है, तो डीबगिंग प्रॉक्सी (विधि 2 देखें) या नेटवर्क स्निफ़र (विधि 3) का उपयोग करने के लिए आगे बढ़ें।

3. **वैकल्पिक: Clash डैशबोर्ड का उपयोग करें**:
   - Clash कनेक्शन और लॉग्स की निगरानी के लिए एक वेब-आधारित डैशबोर्ड (जैसे YACD `https://yacd.haishan.me/` पर या आधिकारिक डैशबोर्ड `https://clash.razord.top/` पर) प्रदान करता है।
   - डैशबोर्ड सक्षम करने के लिए अपने `config.yaml` में `external-controller` और `external-ui` को कॉन्फ़िगर करें:
     ```yaml
     external-controller: 127.0.0.1:9090
     external-ui: folder
     ```
   - डैशबोर्ड को `http://127.0.0.1:9090/ui` के माध्यम से एक्सेस करें और "Logs" या "Connections" टैब की जाँच करें। यह कनेक्शन विवरण दिखा सकता है लेकिन User-Agent को सीधे प्रदर्शित करने की संभावना नहीं है।

#### सीमाएँ:
- Clash के डीबग लॉग रूटिंग और प्रॉक्सी निर्णयों पर केंद्रित होते हैं, पूर्ण HTTP हेडर्स पर नहीं। User-Agent को कैप्चर करने के लिए, आपको HTTP ट्रैफ़िक को इंटरसेप्ट करने की आवश्यकता होती है, जिसके लिए अतिरिक्त टूल्स की आवश्यकता होती है।

---

### विधि 2: User-Agent कैप्चर करने के लिए डीबगिंग प्रॉक्सी का उपयोग करें
चूंकि Clash स्वयं User-Agent जैसे HTTP हेडर्स को सीधे लॉग नहीं करता है, आप Clash के ट्रैफ़िक को **mitmproxy**, **Charles Proxy**, या **Fiddler** जैसे डीबगिंग प्रॉक्सी के माध्यम से रूट कर सकते हैं। ये टूल पूर्ण HTTP अनुरोध, जिसमें User-Agent शामिल है, को इंटरसेप्ट और प्रदर्शित कर सकते हैं।

#### चरण:
1. **mitmproxy इंस्टॉल करें**:
   - `mitmproxy` इंस्टॉल करें, जो HTTP/HTTPS ट्रैफ़िक को इंटरसेप्ट करने के लिए एक लोकप्रिय ओपन-सोर्स टूल है:
     ```bash
     sudo apt install mitmproxy  # Debian/Ubuntu पर
     brew install mitmproxy      # macOS पर
     ```
   - वैकल्पिक रूप से, Charles या Fiddler जैसे किसी अन्य प्रॉक्सी टूल का उपयोग करें।

2. **Clash को mitmproxy के माध्यम से ट्रैफ़िक रूट करने के लिए कॉन्फ़िगर करें**:
   - डिफ़ॉल्ट रूप से, Clash एक HTTP/SOCKS5 प्रॉक्सी के रूप में कार्य करता है। आप इसे `mitmproxy` को अपस्ट्रीम प्रॉक्सी के रूप में सेट करके चेन कर सकते हैं।
   - अपनी Clash `config.yaml` को `mitmproxy` की ओर इशारा करने वाला एक HTTP प्रॉक्सी शामिल करने के लिए संपादित करें:
     ```yaml
     proxies:
       - name: mitmproxy
         type: http
         server: 127.0.0.1
         port: 8080  # डिफ़ॉल्ट mitmproxy पोर्ट
     proxy-groups:
       - name: Proxy
         type: select
         proxies:
           - mitmproxy
     ```
   - कॉन्फ़िगरेशन को सेव करें और Clash को पुनरारंभ करें।

3. **mitmproxy शुरू करें**:
   - पोर्ट 8080 पर सुनने के लिए `mitmproxy` चलाएँ:
     ```bash
     mitmproxy
     ```
   - `mitmproxy` इसके माध्यम से गुजरने वाले सभी HTTP अनुरोधों को प्रदर्शित करेगा, जिसमें User-Agent हेडर भी शामिल है।

4. **एक टेस्ट अनुरोध भेजें**:
   - एक क्लाइंट (जैसे `curl`, एक ब्राउज़र, या कोई अन्य टूल) का उपयोग करें जो प्रॉक्सी के रूप में Clash का उपयोग करने के लिए कॉन्फ़िगर हो।
   - `curl` के साथ उदाहरण:
     ```bash
     curl --proxy http://127.0.0.1:7890 http://example.com
     ```
   - `mitmproxy` में, आप पूर्ण HTTP अनुरोध देखेंगे, जिसमें User-Agent (जैसे `curl/8.0.1` या ब्राउज़र का User-Agent) शामिल है।

5. **User-Agent का निरीक्षण करें**:
   - `mitmproxy` इंटरफ़ेस में, कैप्चर किए गए अनुरोधों के माध्यम से नेविगेट करें। User-Agent हेडर अनुरोध विवरण में दिखाई देगा।
   - आगे के विश्लेषण के लिए लॉग्स को एक फ़ाइल में सेव भी कर सकते हैं:
     ```bash
     mitmproxy -w mitmproxy.log
     ```

#### नोट्स:
- यदि आप HTTPS का उपयोग कर रहे हैं, तो आपको HTTPS ट्रैफ़िक को डिक्रिप्ट करने के लिए अपने क्लाइंट डिवाइस पर `mitmproxy` CA प्रमाणपत्र इंस्टॉल और ट्रस्ट करना होगा। `http://mitm.clash/cert.crt` या `mitmproxy` के दस्तावेज़ीकरण पर दिए गए निर्देशों का पालन करें।
- इस विधि के लिए प्रॉक्सी को चेन करने (क्लाइंट → Clash → mitmproxy → डेस्टिनेशन) की आवश्यकता होती है, जो लेटेंसी को थोड़ा बढ़ा सकती है लेकिन हेडर्स के पूर्ण निरीक्षण की अनुमति देती है।

---

### विधि 3: User-Agent कैप्चर करने के लिए नेटवर्क स्निफ़र का उपयोग करें
यदि आप प्रॉक्सी को चेन नहीं करना चाहते हैं, तो आप Clash से गुजरने वाले HTTP ट्रैफ़िक को कैप्चर और निरीक्षण करने के लिए **Wireshark** जैसे नेटवर्क स्निफ़र का उपयोग कर सकते हैं।

#### चरण:
1. **Wireshark इंस्टॉल करें**:
   - Wireshark को [wireshark.org](https://www.wireshark.org/) से डाउनलोड और इंस्टॉल करें।
   - Linux पर:
     ```bash
     sudo apt install wireshark
     ```
   - macOS पर:
     ```bash
     brew install wireshark
     ```

2. **Clash शुरू करें**:
   - सुनिश्चित करें कि Clash आपके वांछित कॉन्फ़िगरेशन (जैसे पोर्ट 7890 पर HTTP प्रॉक्सी) के साथ चल रहा है:
     ```bash
     clash -d ~/.config/clash
     ```

3. **Wireshark में ट्रैफ़िक कैप्चर करें**:
   - Wireshark खोलें और उस नेटवर्क इंटरफ़ेस का चयन करें जिसका Clash उपयोग कर रहा है (जैसे `eth0`, `wlan0`, या लोकलहोस्ट ट्रैफ़िक के लिए `lo`)।
   - HTTP ट्रैफ़िक कैप्चर करने के लिए एक फ़िल्टर लागू करें:
     ```
     http
     ```
   - वैकल्पिक रूप से, Clash HTTP प्रॉक्सी पोर्ट (जैसे 7890) द्वारा फ़िल्टर करें:
     ```
     tcp.port == 7890
     ```

4. **एक टेस्ट अनुरोध भेजें**:
   - एक क्लाइंट का उपयोग करें जो प्रॉक्सी के रूप में Clash का उपयोग करने के लिए कॉन्फ़िगर हो:
     ```bash
     curl --proxy http://127.0.0.1:7890 http://example.com
     ```

5. **User-Agent का निरीक्षण करें**:
   - Wireshark में, HTTP अनुरोधों (जैसे `GET / HTTP/1.1`) की तलाश करें। इसके विवरण देखने के लिए एक पैकेट पर डबल-क्लिक करें।
   - `User-Agent` हेडर (जैसे `User-Agent: curl/8.0.1`) को खोजने के लिए "Hypertext Transfer Protocol" सेक्शन को एक्सपैंड करें।

#### नोट्स:
- HTTPS ट्रैफ़िक के लिए, Wireshark तब तक User-Agent को डिक्रिप्ट नहीं कर सकता जब तक कि आपके पास सर्वर की प्राइवेट कुंजी न हो या ट्रैफ़िक को डिक्रिप्ट करने के लिए `mitmproxy` जैसे टूल का उपयोग न करें।
- यह विधि अधिक जटिल है और नेटवर्क पैकेट विश्लेषण से परिचित होने की आवश्यकता है।

---

### विधि 4: कस्टम हेडर्स को इंजेक्ट या लॉग करने के लिए Clash कॉन्फ़िगरेशन संशोधित करें
Clash कुछ प्रॉक्सी प्रकारों (जैसे HTTP या VMess) में अपने कॉन्फ़िगरेशन के लिए कस्टम HTTP हेडर्स का समर्थन करता है। आप सभी अनुरोधों के User-Agent को लॉग करने के लिए कम सीधा होने के बावजूद, एक विशिष्ट User-Agent को इंजेक्ट करने या हेडर्स को लॉग करने के लिए स्क्रिप्ट का उपयोग करने के लिए Clash को कॉन्फ़िगर कर सकते हैं।

#### चरण:
1. **कस्टम User-Agent हेडर जोड़ें**:
   - यदि आप टेस्टिंग के लिए एक विशिष्ट User-Agent को फ़ोर्स करना चाहते हैं, तो कस्टम हेडर शामिल करने के लिए `config.yaml` में `proxies` सेक्शन को संशोधित करें:
     ```yaml
     proxies:
       - name: my-http-proxy
         type: http
         server: proxy.example.com
         port: 8080
         header:
           User-Agent:
             - "MyCustomUserAgent/1.0"
     ```
   - यह इस प्रॉक्सी के माध्यम से भेजे गए अनुरोधों के लिए एक कस्टम User-Agent सेट करता है। हालाँकि, यह क्लाइंट के मूल User-Agent को ओवरराइड कर देता है, जो आपके इच्छित अनुसार नहीं हो सकता है यदि आप क्लाइंट के User-Agent को लॉग करने का प्रयास कर रहे हैं।

2. **हेडर्स को लॉग करने के लिए स्क्रिप्ट नियमों का उपयोग करें**:
   - Clash `expr` या `starlark` जैसे इंजन का उपयोग करके स्क्रिप्ट-आधारित नियमों का समर्थन करता है। आप User-Agent सहित हेडर्स को लॉग या प्रोसेस करने के लिए एक स्क्रिप्ट लिख सकते हैं।
   - उदाहरण कॉन्फ़िगरेशन:
     ```yaml
     script:
       engine: starlark
       code: |
         def match(req):
           print("User-Agent:", req.headers["User-Agent"])
           return "Proxy"  # एक प्रॉक्सी ग्रुप पर रूट करें
     ```
   - इसके लिए एक कस्टम स्क्रिप्ट लिखने की आवश्यकता होती है, जो उन्नत है और सभी Clash संस्करणों में पूर्ण रूप से समर्थित नहीं हो सकती है। स्क्रिप्ट सपोर्ट के लिए Clash दस्तावेज़ीकरण की जाँच करें।

3. **mitmproxy या Wireshark के साथ सत्यापन करें**:
   - कस्टम User-Agent इंजेक्ट करने के बाद, यह पुष्टि करने के लिए कि User-Agent अपेक्षा के अनुरूप भेजा जा रहा है, विधि 2 या विधि 3 का उपयोग करें।

#### सीमाएँ:
- कस्टम User-Agent इंजेक्ट करना क्लाइंट के User-Agent को ओवरराइड कर देता है, इसलिए यह केवल विशिष्ट User-Agents के परीक्षण के लिए उपयोगी है।
- स्क्रिप्ट-आधारित लॉगिंग प्रायोगिक है और सभी Clash संस्करणों में उपलब्ध नहीं हो सकती है।

---

### विधि 5: हेडर्स को लॉग करने के लिए Clash के MITM प्रॉक्सी का उपयोग करें
Clash एक **Man-in-the-Middle (MITM)** प्रॉक्सी मोड का समर्थन करता है जो User-Agent सहित HTTPS ट्रैफ़िक को इंटरसेप्ट और लॉग कर सकता है।

#### चरण:
1. **Clash में MITM सक्षम करें**:
   - MITM प्रॉक्सी को सक्षम करने के लिए `config.yaml` को संपादित करें:
     ```yaml
     mitm-port: 7894
     mitm:
       hosts:
         - "*.example.com"
     ```
   - यह Clash को निर्दिष्ट डोमेन के लिए HTTPS ट्रैफ़िक को इंटरसेप्ट करने के लिए कॉन्फ़िगर करता है।

2. **Clash के CA प्रमाणपत्र को इंस्टॉल करें**:
   - Clash MITM के लिए एक CA प्रमाणपत्र जनरेट करता है। इसे डाउनलोड और इंस्टॉल करने के लिए एक ब्राउज़र में `http://mitm.clash/cert.crt` एक्सेस करें।
   - Clash को HTTPS ट्रैफ़िक को डिक्रिप्ट करने की अनुमति देने के लिए अपने क्लाइंट डिवाइस पर प्रमाणपत्र को ट्रस्ट करें।

3. **लॉग्स का निरीक्षण करें**:
   - MITM सक्षम होने पर, Clash हेडर्स सहित अधिक विस्तृत अनुरोध जानकारी लॉग कर सकता है। टर्मिनल या डैशबोर्ड में लॉग्स की जाँच करें।
   - यदि हेडर्स लॉग नहीं हो रहे हैं, तो डिक्रिप्टेड ट्रैफ़िक को कैप्चर करने के लिए `mitmproxy` (विधि 2) का उपयोग करें।

#### नोट्स:
- MITM मोड के लिए सभी क्लाइंट डिवाइसों पर CA प्रमाणपत्र को ट्रस्ट करने की आवश्यकता होती है, जो सभी उपयोग के मामलों के लिए व्यावहारिक नहीं हो सकता है।
- यह विधि HTTPS ट्रैफ़िक के लिए सबसे अच्छी है लेकिन अतिरिक्त सेटअप की आवश्यकता होती है।

---

### सिफारिशें
- **पसंदीदा विधि**: अनुरोधों का User-Agent कैप्चर और लॉग करने का सबसे आसान और विश्वसनीय तरीके के लिए **विधि 2 (mitmproxy)** का उपयोग करें। यह ओपन-सोर्स, व्यापक रूप से समर्थित और HTTP डीबगिंग के लिए डिज़ाइन किया गया है।
- **विकल्प**: यदि आप नेटवर्क पैकेट विश्लेषण में सहज हैं और प्रॉक्सी को चेन नहीं करना चाहते हैं तो **विधि 3 (Wireshark)** का उपयोग करें।
- **उन्नत उपयोगकर्ताओं के लिए**: यदि आपको प्रोग्रामेटिक रूप से हेडर्स को मैनिपुलेट या लॉग करने की आवश्यकता है तो **विधि 4 (कस्टम हेडर्स या स्क्रिप्ट्स)** के साथ प्रयोग करें।

---

### अतिरिक्त नोट्स
- **Clash दस्तावेज़ीकरण**: कॉन्फ़िगरेशन विवरण के लिए आधिकारिक Clash दस्तावेज़ीकरण देखें। GitHub रिपॉजिटरी (`https://github.com/Dreamacro/clash`) और विकी (`https://en.clash.wiki`) विस्तृत मार्गदर्शन प्रदान करते हैं।
- **क्लाइंट-साइड User-Agent**: User-Agent क्लाइंट (जैसे ब्राउज़र, `curl`, या एप्लिकेशन) द्वारा सेट किया जाता है, Clash द्वारा नहीं। सुनिश्चित करें कि आपका क्लाइंट अपेक्षित User-Agent भेज रहा है। उदाहरण के लिए:
  - `curl` डिफ़ॉल्ट रूप से `curl/<version>` का उपयोग करता है।
  - ब्राउज़र अपने स्वयं के User-Agent स्ट्रिंग्स (जैसे `Mozilla/5.0 ...`) का उपयोग करते हैं।
- **परीक्षण**: सेटअप को सत्यापित करने के लिए हमेशा एक साधारण HTTP अनुरोध (जैसे `curl --proxy http://127.0.0.1:7890 http://example.com`) के साथ परीक्षण करें।
- **सुरक्षा**: MITM या डीबगिंग प्रॉक्सी का उपयोग करते समय, सुरक्षा जोखिमों से बचने के लिए सुनिश्चित करें कि आप CA प्रमाणपत्रों और टूल्स पर भरोसा करते हैं।

यदि आपको विशिष्ट कॉन्फ़िगरेशन (जैसे Clash संस्करण, ऑपरेटिंग सिस्टम, या विशिष्ट प्रॉक्सी प्रकार) के बारे में अधिक जानकारी प्रदान करते हुए और स्पष्टीकरण या सहायता की आवश्यकता है, तो मैं निर्देशों को और अधिक अनुरूपित कर सकता हूँ!