---
audio: false
generated: true
image: false
lang: hi
layout: post
title: рд╕реНрдерд┐рд░ рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рдЗрдореЗрдЬреЗрди рдкрд╛рдЗрдерди рд╕реНрдирд┐рдкреЗрдЯ
translated: true
type: note
---

рдЖрдкрдиреЗ рдореВрд▓ рд░реВрдк рд╕реЗ рд╕рд╣реА рд▓реЙрдЬрд┐рдХ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рд╣реИ, рд▓реЗрдХрд┐рди **getтАСunstuck** рдирд┐рд░реНрджреЗрд╢ рдереЛрдбрд╝реЗ рдЧрд▓рдд рд╣реИрдВред рдпрд╣рд╛рдВ рдбреЙрдХреНрд╕ рдореЗрдВ рджрд┐рдП рдЧрдП рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рдЙрджрд╛рд╣рд░рдг рд╕реЗ рдЕрдиреБрдХреВрд▓рд┐рдд рдПрдХ рд╕рд╛рдл-рд╕реБрдерд░рд╛ рд╕рдВрд╕реНрдХрд░рдг рджрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ:

```python
from google import genai
from google.genai import types
from PIL import Image
from io import BytesIO

# тЖР рдЕрдкрдиреА API key рд╕реЗрдЯ рдХрд░реЗрдВ рдпрд╛ рдкрд░реНрдпрд╛рд╡рд░рдг рдЪрд░ GOOGLE_API_KEY / GEMINI_API_KEY рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ
client = genai.Client(api_key="YOUR_API_KEY")

response = client.models.generate_images(
    model="imagen-4.0-generate-preview-06-06",
    prompt="A dog reading a newspaper",
    config=types.GenerateImagesConfig(
        number_of_images=1,
        # image_size="2K",  # 2K рд░рд┐рдЬрд╝реЙрд▓реНрдпреВрд╢рди рдХреЗ рд▓рд┐рдП рд╡реИрдХрд▓реНрдкрд┐рдХ; рдирдП fast-preview рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ
        aspect_ratio="1:1",
        safety_filter_level="BLOCK_MEDIUM_AND_ABOVE",
        person_generation="ALLOW_ADULT",
    )
)

for i, generated in enumerate(response.generated_images):
    raw = generated.image.image_bytes
    pil = Image.open(BytesIO(raw))  # Raw bytes рдХреЛ PIL рдЗрдореЗрдЬ рдореЗрдВ рдмрджрд▓реЗрдВ
    pil.save(f"output-image-{i+1}.png")
    print(f"Saved image {i+1}, {len(raw):,} bytes")
```

рд╣рд╛рд▓рд╛рдВрдХрд┐ Google рдХреЗ Python рд╕реНрдирд┐рдкреЗрдЯ рдиреЗ рднреА рдЕрдкрдиреЗ 4тАСpreview рдореЙрдбрд▓ рдХреЗ рд▓рд┐рдП `image_size="2K"` рдХрд╛ рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд┐рдпрд╛, рд▓реЗрдХрд┐рди рдзреНрдпрд╛рди рд░рд╣реЗ рдХрд┐:

* Imagen 4 рдореЙрдбрд▓ рдкрд░ `image_size` рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдкрдХреЛ `google-genai` v1.28 рдпрд╛ рдирдпрд╛ рдЪрд▓рд╛ рд░рд╣рд╛ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП;
* рдЕрдиреНрдпрдерд╛ рдЙрд╕ рдлрд╝реАрд▓реНрдб рдХреЛ рдЫреЛрдбрд╝ рджреЗрдВ (рдбрд┐рдлрд╝реЙрд▓реНрдЯ 1,024├Ч1,024 рд╣реИ рдЬреЛ рдПрдХ рдлрд┐рдХреНрд╕реНрдб рд╕реНрдХреНрд╡рд╛рдпрд░ рдкрд┐рдХреНрд╕реЗрд▓ рд░рд┐рдЬрд╝реЙрд▓реНрдпреВрд╢рди рдкрд░ рд╣реИ) ([GitHub][1])ред

---

### ЁЯЪй рд╕рд╛рдорд╛рдиреНрдп рд╕рдорд╕реНрдпрд╛рдПрдВ рдФрд░ рдЙрдирдХреЗ рд╕рдорд╛рдзрд╛рди

1. **PIL рдЗрдВрд╕реНрдЯрд╛рд▓реЗрд╢рди рдЧрд╛рдпрдм рд╣реИ**
   рдпрджрд┐ рдЖрдкрдиреЗ `google-genai` рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд┐рдпрд╛ рд╣реИ рд▓реЗрдХрд┐рди `Pillow` рдирд╣реАрдВ рдЬреЛрдбрд╝рд╛ рд╣реИ, рддреЛ `.image.save()` рдХреЙрд▓ рдЪреБрдкрдЪрд╛рдк рдлреЗрд▓ рд╣реЛ рд╕рдХрддреА рд╣реИрдВ (рдпрд╛ `AttributeError` рджреЗ рд╕рдХрддреА рд╣реИрдВ)ред рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ:

   ```bash
   pip install pillow
   ```

2. **рдХреЛрдИ API key рдирд╣реАрдВ рдпрд╛ рдЧрд▓рдд рд╕реЗрд╡рд╛ рдЪреБрдиреА рдЧрдИ рд╣реИ**
   рдпрджрд┐ рдЖрдк рдмрд┐рдирд╛ API key рдФрд░ рдмрд┐рдирд╛ рдХреНрд▓рд╛рдЙрдб рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рдХреЗ `genai.Client()` рдХреЛ рдХреЙрд▓ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдХреНрд▓рд╛рдЗрдВрдЯ рдХреЙрд▓-рдЯрд╛рдЗрдо рдкрд░ рдСрдереЗрдВрдЯрд┐рдХреЗрд╢рди рдПрд░рд░ (рдЬреИрд╕реЗ `"401 UNAUTHENTIATED"`) рдХреЗ рд╕рд╛рде рдлреЗрд▓ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред рдпрд╛ рддреЛ `api_key="тАж"` рдкрд╛рд╕ рдХрд░реЗрдВ рдпрд╛ рдЕрдкрдиреЗ рд╢реЗрд▓ рдореЗрдВ `GOOGLE_API_KEY` рд╕реЗрдЯ рдХрд░реЗрдВ, Gemini Developer API рдХреЗ рд▓рд┐рдП ([GitHub][1])ред

3. **рд▓рд╛рдЗрдмреНрд░реЗрд░реА рд╡рд░реНрдЬрди рдорд┐рд╕рдореИрдЪ**
   рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХреЗ рдкреБрд░рд╛рдиреЗ рд╡рд░реНрдЬрди рдпрд╛ рд▓реАрдЧреЗрд╕реА `google.generativeai` рдореЙрдбреНрдпреВрд▓ `generate_images()` рдХреЛ рдПрдХреНрд╕рдкреЛрдЬрд╝ рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдЕрднреА рднреА *рдбрд┐рдкреНрд░рд┐рдХреЗрдЯреЗрдб* рдЬреЗрдирд░реЗрдЯрд┐рд╡-рдПрдЖрдИ рдЗрдВрдЯрд░рдлреЗрд╕ рдкрд░ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВред рд╣рдореЗрд╢рд╛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ:

   ```bash
   pip install --upgrade google-genai
   ```

   рдкреБрд░рд╛рдиреЗ рд░реЗрдкреЛ (`deprecated-generative-ai-python`) рдореЗрдВ "рдЖрдЙрдЯрдкреБрдЯ рдЗрдореЗрдЬ рдирд╣реАрдВ рдЦреБрд▓ рд╕рдХрддреА" рдХреА рд╕рдорд╕реНрдпрд╛ рдЗрд╕реА рдорд┐рд╕рдореИрдЪ рд╕реЗ рдкреИрджрд╛ рд╣реБрдИ рдереА, рдФрд░ рдЖрдорддреМрд░ рдкрд░ рдЯреВрдЯреЗ рд╣реБрдП рдмрд╛рдЗрдЯреНрд╕ рд▓рд┐рдЦрдиреЗ рдХреЗ рдмрд╛рдж `UnidentifiedImageError` рдпрд╛ `FileNotFoundError` рдлреЗрдВрдХрддреА рдереА ([GitHub][1])ред

4. **PIL рдХреЗ рд╕рд╛рде рдЦреЛрд▓рддреЗ рд╕рдордп UnidentifiedImageError**
   рдпрджрд┐ рдЖрдк рджреЗрдЦрддреЗ рд╣реИрдВ:

   ```
   PIL.UnidentifiedImageError: cannot identify image file <_io.BytesIO тАж>
   ```

   рдЗрд╕рдХрд╛ рдЖрдорддреМрд░ рдкрд░ рдорддрд▓рдм рд╣реИ рдХрд┐ рд░рд┐рд╕реНрдкрд╛рдВрд╕ рдмрдлрд░ рдХрд░рдкреНрдЯ рдпрд╛ рдЗрдирдХрдореНрдкреНрд▓реАрдЯ рд╣реИред рджреЛрдмрд╛рд░рд╛ рдЬрд╛рдВрдЪреЗрдВ рдХрд┐:

   * рдЖрдкрдХрд╛ рдкреНрд░реЙрдореНрдкреНрдЯ рдлрд╝рд┐рд▓реНрдЯрд░ рдирд╣реАрдВ рд╣реБрдЖ рдерд╛ (рдЬреИрд╕реЗ RAI рдмреНрд▓реЙрдХрд┐рдВрдЧ);
   * рдЖрдк рдмреЗрд╕64тАСрдбрд┐рдХреЛрдбрд┐рдВрдЧ рдмрд╛рдЗрдЯреНрд╕ рдирд╣реАрдВ рдХрд░ рд░рд╣реЗ рд╣реИрдВ (SDK рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рд░реЙ PNG/JPEG рдбреЗрдЯрд╛ рд░рд┐рдЯрд░реНрди рдХрд░рддрд╛ рд╣реИ);
   * рдЖрдкрдХреА рдлрд╝рд╛рдЗрд▓ рдбрд╛рдЙрдирд▓реЛрдб рдмреАрдЪ рдореЗрдВ рдХрдЯреА рдирд╣реАрдВ рд╣реИред

---

### тЬЕ рдпрд╣ рдлрд┐рдХреНрд╕ рдХреНрдпреЛрдВ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ

* Google рдХреЗ рдбреЙрдХреНрд╕ рдореЗрдВ 2025тАС08тАС01 рдХрд╛ рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рд╕реНрдирд┐рдкреЗрдЯ рдареАрдХ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ:

  ```python
  types.GenerateImagesConfig(image_size="2K")
  ```

  рд╕реЗрд╡ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ `result.image.save(...)` рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ ([Google Cloud][2])ред

* рд▓реЗрдХрд┐рди Imagen 3тАУрдореЙрдбрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдЕрдиреНрдп рдЧрд╛рдЗрдб рдХреЗрд╡рд▓ `number_of_images`, `aspect_ratio`, рдФрд░ рд╕реЗрдлреНрдЯреА рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рддреЗ рд╣реИрдВтАФрдмрд┐рдирд╛ `image_size` рдХреЗтАФрдХреНрдпреЛрдВрдХрд┐ Imagen┬а3 рдЗрд╕рдХрд╛ рд╕рдорд░реНрдерди рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ ([GitHub][1])ред

рдЙрдкрд░реЛрдХреНрдд рдлреНрд▓реЛ рдХрд╛ рдкрд╛рд▓рди рдХрд░рдиреЗ рд╕реЗ рдЖрдкрдХреЛ рдЕрдирдмреНрд▓реЙрдХ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред рдпрджрд┐ рдЖрдк рдХрд┐рд╕реА рд╡рд┐рд╢рд┐рд╖реНрдЯ рдПрд░рд░ рдореИрд╕реЗрдЬ (рдЬреИрд╕реЗ HTTP 403, рд░рд┐рд╕реНрдкрд╛рдВрд╕ рдореЗрдВ JSON key рдЧрд╛рдпрдм, рдЖрджрд┐) рдореЗрдВ рдлрдВрд╕рддреЗ рд╣реИрдВ, рддреЛ рдЙрд╕реЗ рд╡рд╛рдкрд╕ рдкреЗрд╕реНрдЯ рдХрд░рдиреЗ рдореЗрдВ рд╕рдВрдХреЛрдЪ рди рдХрд░реЗрдВ рдФрд░ рдореИрдВ рдЖрдкрдХреЛ рдЕрдЧрд▓реЗ рдЪрд░рдг рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдиреЗ рдореЗрдВ рдорджрдж рдХрд░реВрдВрдЧрд╛ред

[1]: https://github.com/google-gemini/generative-ai-python/issues/674?utm_source=chatgpt.com "can not open the output images from imagen API ┬╖ Issue #674 ┬╖ google-gemini/deprecated-generative-ai-python ┬╖ GitHub"
[2]: https://cloud.google.com/vertex-ai/generative-ai/docs/image/overview?utm_source=chatgpt.com "Imagen on Vertex AI | AI Image Generator"