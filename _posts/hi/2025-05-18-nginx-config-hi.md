---
audio: false
generated: true
lang: hi
layout: post
title: एन्जिन्क्स कॉन्फ़िगरेशन
translated: true
type: note
---

अपने Nginx कॉन्फ़िगरेशन में `server_name 0.0.0.0` का उपयोग करना सही तरीका नहीं है, क्योंकि `server_name` डोमेन नाम या होस्टनाम से मेल खाने के लिए होता है, IP पतों के लिए नहीं। इसके अलावा, `0.0.0.0` एक विशेष पता है जिसका मतलब है "सभी इंटरफेस पर सुनो", जिसे `listen` डायरेक्टिव द्वारा संभाला जाता है, `server_name` द्वारा नहीं। चूंकि आपके लैपटॉप (सर्वर) का IP पता डायनामिक रूप से बदलता रहता है, आपको एक ऐसे समाधान की आवश्यकता है जो इसके अनुरूप हो। नीचे आपके Nginx कॉन्फ़िगरेशन को ठीक करने और डायनामिक IP समस्या को प्रभावी ढंग से संभालने के चरण दिए गए हैं।

### समस्या
आपके लैपटॉप का IP पता (जैसे, `192.168.1.27`) DHCP के कारण बदलता रहता है, लेकिन आप चाहते हैं कि आपका Nginx सर्वर IP पते की परवाह किए बिना मूवी फ़ाइलों को विश्वसनीय रूप से परोसता रहे। `server_name` डायरेक्टिव या क्लाइंट कॉन्फ़िगरेशन में IP को हार्डकोड करने से समस्या होती है जब IP बदल जाता है।

### समाधान
अपने Nginx सर्वर को बदलते IP के बावजूद सहज रूप से काम करवाने के लिए, आप निम्नलिखित दृष्टिकोणों में से एक या अधिक का उपयोग कर सकते हैं:

#### 1. डायनामिक DNS (DDNS) या लोकल होस्टनाम का उपयोग करें
IP पते पर निर्भर रहने के बजाय, अपने सर्वर के लिए एक होस्टनाम का उपयोग करें। इसे निम्न तरीके से प्राप्त किया जा सकता है:
- **लैपटॉप के होस्टनाम का उपयोग करना**: अधिकांश ऑपरेटिंग सिस्टम एक डिफ़ॉल्ट होस्टनाम निर्दिष्ट करते हैं (जैसे, macOS पर `mylaptop.local` या Linux/Windows पर `mylaptop`)। आप इसे अपने Nginx `server_name` में उपयोग कर सकते हैं और सर्वर को होस्टनाम के माध्यम से एक्सेस कर सकते हैं।
- **लोकल DNS या mDNS सेटअप करना**: लैपटॉप के होस्टनाम को लोकल रूप से रिज़ॉल्व करने के लिए Avahi (Linux के लिए) या Bonjour (macOS/Windows के लिए) जैसी सेवा का उपयोग करें (जैसे, `mylaptop.local`)।
- **DDNS सेवा का उपयोग करना**: यदि आपको अपने लोकल नेटवर्क के बाहर से एक्सेस की आवश्यकता है, तो No-IP या DynDNS जैसी सेवाएं एक डोमेन नाम (जैसे, `mymovies.ddns.net`) असाइन कर सकती हैं जो आपके लैपटॉप के IP को ट्रैक करती है, भले ही वह बदल जाए।

**Nginx कॉन्फ़िगरेशन उदाहरण**:
```nginx
server {
    listen 80;
    server_name mylaptop.local; # लैपटॉप के होस्टनाम या DDNS नाम का उपयोग करें
    root /path/to/movies;
    location / {
        try_files $uri $uri/ /index.html; # अपने सेटअप के अनुसार एडजस्ट करें
    }
}
```
- `mylaptop.local` को अपने लैपटॉप के वास्तविक होस्टनाम या DDNS नाम से बदलें।
- क्लाइंट पर, IP पते के बजाय `http://mylaptop.local` के माध्यम से सर्वर तक पहुंचें।

**अपने लैपटॉप का होस्टनाम कैसे खोजें**:
- Linux/macOS: टर्मिनल में `hostname` चलाएं।
- Windows: कमांड प्रॉम्प्ट में `hostname` चलाएं या Settings > System > About में देखें।
- सुनिश्चित करें कि आपका नेटवर्क mDNS को सपोर्ट करता है (अधिकांश होम राउटर Bonjour/Avahi के माध्यम से करते हैं)।

#### 2. Nginx को सभी इंटरफेस पर बाइंड करें
यदि आप चाहते हैं कि Nginx सभी उपलब्ध IP पतों पर सुनें (जब IP बदलता है तो उपयोगी), `listen` डायरेक्टिव को `0.0.0.0` का उपयोग करने के लिए कॉन्फ़िगर करें या पते को पूरी तरह से छोड़ दें (Nginx डिफ़ॉल्ट रूप से सभी इंटरफेस पर सुनता है)।

**Nginx कॉन्फ़िगरेशन उदाहरण**:
```nginx
server {
    listen 80; # सभी इंटरफेस पर सुनता है (0.0.0.0:80 के बराबर)
    server_name _; # किसी भी होस्टनाम या IP से मेल खाता है
    root /path/to/movies;
    location / {
        try_files $uri $uri/ /index.html;
    }
}
```
- `listen 80`: सभी इंटरफेस पर बाइंड करता है, इसलिए सर्वर लैपटॉप को असाइन किए गए किसी भी IP पर रिक्वेस्ट का जवाब देता है।
- `server_name _`: एक कैच-ऑल है जो सर्वर तक पहुंचने के लिए उपयोग किए गए किसी भी होस्टनाम या IP से मेल खाता है।
- क्लाइंट सर्वर तक लैपटॉप के वर्तमान IP (जैसे, `http://192.168.1.27` या `http://192.168.1.28`) या होस्टनाम का उपयोग करके पहुंच सकते हैं।

#### 3. लैपटॉप को एक स्टैटिक IP असाइन करें
IP पते के बदलने से बचने के लिए, अपने लैपटॉप को अपने लोकल नेटवर्क के भीतर एक स्टैटिक IP पता (जैसे, `192.168.1.27`) उपयोग करने के लिए कॉन्फ़िगर करें। यह निम्न के माध्यम से किया जा सकता है:
- **राउटर सेटिंग्स**: अपने राउटर की DHCP सेटिंग्स में अपने लैपटॉप के MAC एड्रेस के लिए एक IP रिज़र्व करें (जिसे अक्सर "DHCP reservation" कहा जाता है)।
- **लैपटॉप नेटवर्क सेटिंग्स**: अपने लैपटॉप की नेटवर्क कॉन्फ़िगरेशन में DHCP रेंज के बाहर मैन्युअल रूप से एक स्टैटिक IP सेट करें (जैसे, `192.168.1.200`)।

एक बार IP स्टैटिक हो जाने के बाद, अपने Nginx कॉन्फ़िगरेशन को अपडेट करें:
```nginx
server {
    listen 192.168.1.27:80; # स्टैटिक IP पर बाइंड करें
    server_name 192.168.1.27; # वैकल्पिक, यदि क्लाइंट सीधे IP का उपयोग करते हैं
    root /path/to/movies;
    location / {
        try_files $uri $uri/ /index.html;
    }
}
```
- क्लाइंट `http://192.168.1.27` के माध्यम से सर्वर तक पहुंचते हैं।

#### 4. रिवर्स प्रॉक्सी या लोड बैलेंसर का उपयोग करें (एडवांस्ड)
यदि आपके पास एकाधिक सर्वर हैं या एक अधिक मजबूत सेटअप चाहते हैं, तो आप एक स्टैटिक IP वाले डिवाइस पर एक रिवर्स प्रॉक्सी (जैसे, एक और Nginx इंस्टेंस) सेटअप कर सकते हैं जो रिक्वेस्ट्स को आपके लैपटॉप पर फॉरवर्ड करता है। प्रॉक्सी लैपटॉप के होस्टनाम का उपयोग कर सकता है या डायनामिक रूप से उसके IP को रिज़ॉल्व कर सकता है।

### अनुशंसित दृष्टिकोण
सरलता के लिए, मैं **विकल्प 1 (लैपटॉप के होस्टनाम का उपयोग)** या **विकल्प 2 (सभी इंटरफेस पर बाइंड करना)** की सलाह देता हूं:
- **विकल्प 1** आदर्श है यदि आपका नेटवर्क mDNS को सपोर्ट करता है और आप एक यूजर-फ्रेंडली URL (जैसे, `http://mylaptop.local`) चाहते हैं। इसमें न्यूनतम कॉन्फ़िगरेशन की आवश्यकता होती है और यह लोकल नेटवर्क के लिए अच्छी तरह से काम करता है।
- **विकल्प 2** सबसे अच्छा है यदि आप होस्टनाम पर निर्भर नहीं रहना चाहते हैं और आपको क्लाइंट के वर्तमान IP (जिसे आप लैपटॉप पर `ip addr` या `ifconfig` के माध्यम से पा सकते हैं) का उपयोग करने में कोई आपत्ति नहीं है।

### लागू करने के चरण
1. **Nginx कॉन्फ़िगरेशन एडिट करें**:
   - अपनी Nginx कॉन्फ़िग फ़ाइल खोलें (जैसे, `/etc/nginx/sites-available/default` या `/etc/nginx/conf.d/movies.conf`)।
   - ऊपर दी गई कॉन्फ़िगरेशन में से एक लागू करें (जैसे, `server_name mylaptop.local` या `server_name _` के साथ `listen 80` का उपयोग करें)।
   - फ़ाइल सेव करें।

2. **कॉन्फ़िगरेशन टेस्ट करें**:
   ```bash
   sudo nginx -t
   ```
   सुनिश्चित करें कि कोई सिंटैक्स एरर नहीं है।

3. **Nginx रीलोड करें**:
   ```bash
   sudo systemctl reload nginx
   ```
   या, यदि `systemctl` उपलब्ध नहीं है:
   ```bash
   sudo nginx -s reload
   ```

4. **एक्सेस टेस्ट करें**:
   - एक क्लाइंट डिवाइस से, होस्टनाम (जैसे, `http://mylaptop.local`) या लैपटॉप के वर्तमान IP (जैसे, `http://192.168.1.27`) का उपयोग करके सर्वर तक पहुंचें।
   - सत्यापित करें कि मूवी फ़ाइलें सही ढंग से परोसी जा रही हैं।

5. **वैकल्पिक: लैपटॉप का IP चेक करें**:
   यदि आपको लैपटॉप का वर्तमान IP खोजने की आवश्यकता है:
   - Linux/macOS: `ip addr show` या `ifconfig`।
   - Windows: कमांड प्रॉम्प्ट में `ipconfig`।

### अतिरिक्त सुझाव
- **फ़ायरवॉल**: सुनिश्चित करें कि लैपटॉप का फ़ायरवॉल पोर्ट 80 (या HTTPS के लिए 443) पर HTTP ट्रैफ़िक की अनुमति देता है। उदाहरण के लिए, Linux पर `ufw` के साथ:
  ```bash
  sudo ufw allow 80/tcp
  ```
- **फ़ाइल परमिशन**: सत्यापित करें कि Nginx को मूवी फ़ाइलों को पढ़ने की अनुमति है:
  ```bash
  sudo chown -R www-data:www-data /path/to/movies
  sudo chmod -R 755 /path/to/movies
  ```
  (`www-data` को उस यूजर के अनुसार एडजस्ट करें जिसके तहत Nginx चलता है, जैसे कुछ सिस्टम पर `nginx`)।
- **HTTPS (वैकल्पिक)**: सुरक्षा के लिए, HTTPS सेटअप करने पर विचार करें, चाहे सेल्फ-साइन्ड सर्टिफिकेट के साथ या Let's Encrypt के साथ, खासकर यदि सर्वर को अपने लोकल नेटवर्क के बाहर से एक्सेस कर रहे हैं।
- **डीबगिंग**: यदि सर्वर एक्सेसिबल नहीं है, तो Nginx लॉग चेक करें:
  ```bash
  sudo tail -f /var/log/nginx/error.log
  sudo tail -f /var/log/nginx/access.log
  ```

### `server_name 0.0.0.0` क्यों काम नहीं करता
- `server_name` का उपयोग HTTP रिक्वेस्ट में `Host` हेडर से मेल खाने के लिए किया जाता है, लिसनिंग इंटरफेस निर्दिष्ट करने के लिए नहीं। `server_name 0.0.0.0` सेट करने पर क्लाइंट से `Host: 0.0.0.0` हेडर भेजने की अपेक्षा होगी, जो वे नहीं भेजेंगे।
- सभी इंटरफेस पर सुनने के लिए, `listen 0.0.0.0:80` (या सिर्फ `listen 80`) का उपयोग करें, और किसी भी होस्टनाम से मेल खाने के लिए, `server_name _` का उपयोग करें।

### अंतिम कॉन्फ़िगरेशन उदाहरण (सबसे सरल)
एक लोकल मूवी सर्वर के लिए जो IP बदलने के बावजूद काम करता रहे:
```nginx
server {
    listen 80;
    server_name _;
    root /path/to/movies;
    location / {
        autoindex on; # आसान ब्राउज़िंग के लिए डायरेक्टरी लिस्टिंग सक्षम करता है
        try_files $uri $uri/ /index.html;
    }
}
```
- ऊपर बताए अनुसार सेव करें, टेस्ट करें और Nginx को रीलोड करें।
- `http://<laptop-ip>` या `http://<laptop-hostname>` के माध्यम से एक्सेस करें।

यह सेटअप सुनिश्चित करता है कि आपका मूवी सर्वर लैपटॉप के IP बदलने पर भी एक्सेसिबल रहता है, बिना कॉन्फ़िगरेशन में किसी विशिष्ट IP पर निर्भर हुए।

यदि आपके पास और विवरण हैं (जैसे, आपकी वर्तमान Nginx कॉन्फ़िग, OS, या नेटवर्क सेटअप), तो मैं समाधान को और अधिक अनुरूप बना सकता हूं। मुझे बताएं!