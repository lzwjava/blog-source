---
audio: false
generated: true
image: false
lang: hi
layout: post
title: рдПрдХреНрд╕рдкреНрд░реЗрд╕ рдореЗрдВ рдкреНрд░реЙрдХреНрд╕реА рдЕрдиреБрд░реЛрдзреЛрдВ рдХрд╛ рд▓реЙрдЧрд┐рдВрдЧ
translated: true
type: note
---

рдпрджрд┐ рдЖрдк рдПрдХ рдПрдХреНрд╕рдкреНрд░реЗрд╕ рдРрдк рдореЗрдВ [`http-proxy-middleware`](https://github.com/chimurai/http-proxy-middleware) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рддреЛ рдЖрдк рд░рд┐рдХреНрд╡реЗрд╕реНрдЯ рдкреИрд░рд╛рдореАрдЯрд░реНрд╕ рдФрд░ рдмреЙрдбреА рдХреЛ рд▓реЙрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрд╕рдХреЗ `onProxyReq` рдФрд░ `onProxyRes` рдЗрд╡реЗрдВрдЯреНрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

рдпрд╣рд╛рдБ рдПрдХ рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рдЙрджрд╛рд╣рд░рдг рджрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ:

```js
const express = require('express');
const { createProxyMiddleware } = require('http-proxy-middleware');
const app = express();

// рдкреНрд░реЙрдХреНрд╕реА рд╕реЗ рдкрд╣рд▓реЗ JSON рдмреЙрдбреА рдХреЛ рдкрд╛рд░реНрд╕ рдХрд░реЗрдВ
app.use(express.json());
app.use(express.urlencoded({ extended: true }));

app.use('/api', createProxyMiddleware({
  target: 'http://example.com',
  changeOrigin: true,

  // рд░рд┐рдХреНрд╡реЗрд╕реНрдЯ рдмреЙрдбреА рдФрд░ рдХреНрд╡реЗрд░реА рдкреИрд░рд╛рдореАрдЯрд░реНрд╕ рд▓реЙрдЧ рдХрд░реЗрдВ
  onProxyReq: (proxyReq, req, res) => {
    // рдХреНрд╡реЗрд░реА рдкреИрд░рд╛рдореАрдЯрд░реНрд╕
    console.log('Query:', req.query);

    // рдмреЙрдбреА (рдХреЗрд╡рд▓ рддрднреА рдЬрдм рдкреНрд░реЙрдХреНрд╕реА рд╕реЗ рдкрд╣рд▓реЗ рдкрд╛рд░реНрд╕ рдХреА рдЧрдИ рд╣реЛ)
    if (req.body && Object.keys(req.body).length) {
      console.log('Body:', req.body);

      // рдпрджрд┐ рдЖрдкрдХреЛ рдмреЙрдбреА рдХреЛ рдЖрдЧреЗ рднреЗрдЬрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ (POST/PUT рдХреЗ рд▓рд┐рдП)
      const bodyData = JSON.stringify(req.body);
      proxyReq.setHeader('Content-Type', 'application/json');
      proxyReq.setHeader('Content-Length', Buffer.byteLength(bodyData));
      proxyReq.write(bodyData);
    }
  },

  // рдЯрд╛рд░реНрдЧреЗрдЯ рд╕реЗ рдкреНрд░рд╛рдкреНрдд рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХреЛ рд▓реЙрдЧ рдХрд░реЗрдВ
  onProxyRes: (proxyRes, req, res) => {
    console.log(`Response from target: ${proxyRes.statusCode} for ${req.method} ${req.originalUrl}`);
  }
}));

app.listen(3000, () => {
  console.log('Proxy running on http://localhost:3000');
});
```

### рдореБрдЦреНрдп рдмрд┐рдВрджреБ

* **рдкрд╣рд▓реЗ рдмреЙрдбреА рдкрд╛рд░реНрд╕ рдХрд░реЗрдВ**: рдкреНрд░реЙрдХреНрд╕реА рд╕реЗ рдкрд╣рд▓реЗ `express.json()` рдпрд╛ `express.urlencoded()` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ, рдЕрдиреНрдпрдерд╛ `req.body` рдЦрд╛рд▓реА рд░рд╣реЗрдЧрд╛ред
* **рдмреЙрдбреА рдХреЛ рдЖрдЧреЗ рднреЗрдЬрдирд╛**: рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, `http-proxy-middleware` рдкрд╛рд░реНрд╕ рдХреА рдЧрдИ рдмреЙрдбреА рдХреЛ рдЖрдЧреЗ рдирд╣реАрдВ рднреЗрдЬрддреА рд╣реИред рдпрджрд┐ рдЖрдк рдмреЙрдбреА рдХреЛ рд▓реЙрдЧ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдЙрд╕реЗ рдЖрдЧреЗ рднреА рднреЗрдЬрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ рдЖрдкрдХреЛ рдЙрд╕реЗ рджреЛрдмрд╛рд░рд╛ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдореЗрдВ рдмрджрд▓рдХрд░ рдФрд░ рдкреНрд░реЙрдХреНрд╕реА рдХреА рдЧрдИ рд░рд┐рдХреНрд╡реЗрд╕реНрдЯ рдореЗрдВ `write()` рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред
* **рдХреНрд╡реЗрд░реА рдкреИрд░рд╛рдореАрдЯрд░реНрд╕**: `req.query` рдкрд░ рдЙрдкрд▓рдмреНрдз рд╣реЛрддреЗ рд╣реИрдВ, рдХрд┐рд╕реА рдЕрддрд┐рд░рд┐рдХреНрдд рдХрд╛рд░реНрдп рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИред
* **рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рд▓реЙрдЧрд┐рдВрдЧ**: рдЯрд╛рд░реНрдЧреЗрдЯ рд╕рд░реНрд╡рд░ рдХреА рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЗ рд▓рд┐рдП `onProxyRes` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред

---

ЁЯСЙ рдХреНрдпрд╛ рдЖрдкрдХреЛ рдХреЗрд╡рд▓ рдбрд┐рдмрдЧрд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рд▓реЙрдЧрд┐рдВрдЧ рдЪрд╛рд╣рд┐рдП, рдпрд╛ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдкреНрд░реЙрдХреНрд╕реА рд▓реЙрдЧрд┐рдВрдЧ рдХреЗ рдмрд╛рдж рд╕рдВрд╢реЛрдзрд┐рдд рдмреЙрдбреА рдХреЛ рднреА рдЖрдЧреЗ рднреЗрдЬреЗ?