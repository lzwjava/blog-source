---
audio: false
generated: true
image: false
lang: hi
layout: post
model: x-ai/grok-code-fast-1
title: पायथन को आईबीएम डीबी२ से कनेक्ट करना
translated: true
type: note
---

### अवलोकन
IBM DB2 एक रिलेशनल डेटाबेस मैनेजमेंट सिस्टम है, और Python `ibm_db` पैकेज का उपयोग करके इसके साथ इंटरैक्ट कर सकता है, जो एक लो-लेवल इंटरफेस प्रदान करता है, और `ibm_db_dbi`, एक DB-API 2.0 कंप्लायंट रैपर है जो `ibm_db` के ऊपर आसान, अधिक पाइथोनिक उपयोग के लिए बैठता है। `ibm_db` अधिक डायरेक्ट और पावरफुल है लेकिन इसके लिए गहन ज्ञान की आवश्यकता होती है, जबकि `ibm_db_dbi` Python के `sqlite3` मॉड्यूल की नकल करता है, जिससे यह स्टैंडर्ड डेटाबेस ऑपरेशन्स के लिए सरल बन जाता है। दोनों IBM DB2 Python ड्राइवर्स का हिस्सा हैं।

### इंस्टालेशन
पैकेज को pip का उपयोग करके इंस्टॉल करें:
```
pip install ibm_db
pip install ibm_db_dbi
```
नोट: इनके लिए एक DB2 क्लाइंट लाइब्रेरी की आवश्यकता होती है। Windows/Linux के लिए, IBM की साइट से IBM डेटा सर्वर ड्राइवर पैकेज डाउनलोड और इंस्टॉल करें। macOS पर, इसके लिए अतिरिक्त सेटअप की आवश्यकता हो सकती है। सुनिश्चित करें कि आपका DB2 सर्वर एक्सेसिबल है (उदाहरण के लिए, क्रेडेंशियल्स के साथ एक होस्ट पर चल रहा है)।

### ibm_db का उपयोग
`ibm_db` कनेक्ट करने, स्टेटमेंट्स एक्सेक्यूट करने और रिजल्ट्स को हैंडल करने के लिए फंक्शन प्रदान करता है। यह DB-API के साथ नॉन-कंप्लायंट है लेकिन अधिक कंट्रोल ऑफर करता है।

#### बेसिक कनेक्शन और क्वेरी
```python
import ibm_db

# कनेक्शन स्ट्रिंग फॉर्मेट: DATABASE=<db_name>;HOSTNAME=<host>;PORT=<port>;PROTOCOL=TCPIP;UID=<user>;PWD=<password>;
conn_str = "DATABASE=mydb;HOSTNAME=192.168.1.100;PORT=50000;PROTOCOL=TCPIP;UID=myuser;PWD=mypassword;"

# कनेक्ट करें
conn = ibm_db.connect(conn_str, "", "")

# एक क्वेरी एक्सेक्यूट करें
stmt = ibm_db.exec_immediate(conn, "SELECT * FROM MYTABLE")

# रिजल्ट्स फ़ेच करें (एक बार में एक)
row = ibm_db.fetch_assoc(stmt)
while row:
    print(row)  # एक डिक्शनरी रिटर्न करता है
    row = ibm_db.fetch_assoc(stmt)

# कनेक्शन बंद करें
ibm_db.close(conn)
```
- **मुख्य फ़ंक्शन**: `connect()`, सरल क्वेरीज़ के लिए `exec_immediate()`, इंजेक्शन को रोकने के लिए पैरामीटराइज्ड क्वेरीज़ के लिए `prepare()` और `execute()`।
- **प्रिपेयर्ड स्टेटमेंट्स**: एक क्वेरी को कंपाइल करने के लिए `prepare()` और पैरामीटर्स के साथ `execute()` का उपयोग करें।

#### एरर हैंडलिंग
```python
try:
    conn = ibm_db.connect(conn_str, "", "")
except Exception as e:
    print(f"कनेक्शन फेल हुआ: {str(e)}")
```

### ibm_db_dbi का उपयोग
`ibm_db_dbi` DB-API 2.0 को इम्प्लीमेंट करता है, जिससे यह `sqlite3` या `psycopg2` जैसे मॉड्यूल्स के साथ इंटरचेंजेबल बन जाता है।

#### बेसिक कनेक्शन और क्वेरी
```python
import ibm_db_dbi

# कनेक्शन स्ट्रिंग ibm_db के समान
conn_str = "DATABASE=mydb;HOSTNAME=192.168.1.100;PORT=50000;PROTOCOL=TCPIP;UID=myuser;PWD=mypassword;"

# कनेक्ट करें
conn = ibm_db_dbi.connect(conn_str)

# कर्सर बनाएं
cursor = conn.cursor()

# एक क्वेरी एक्सेक्यूट करें
cursor.execute("SELECT * FROM MYTABLE")

# रिजल्ट्स फ़ेच करें
rows = cursor.fetchall()  # टुपल्स की लिस्ट रिटर्न करता है
for row in rows:
    print(row)

# कनेक्शन बंद करें
cursor.close()
conn.close()
```
- **पैरामीटराइज्ड क्वेरीज़**: `cursor.execute("SELECT * FROM MYTABLE WHERE ID = ?", (id_value,))` – ? प्लेसहोल्डर्स का उपयोग करता है।
- **ट्रांजैक्शन्स**: `conn.commit()` या `conn.rollback()`; डिफ़ॉल्ट रूप से ऑटोकमिट बंद होता है।

### मुख्य अंतर और कब किसका उपयोग करें

| फ़ीचर              | ibm_db                          | ibm_db_dbi                      |
|----------------------|---------------------------------|---------------------------------|
| अनुपालन           | नॉन-डीबी-एपीआई (लो-लेवल)          | डीबी-एपीआई 2.0 कंप्लायंट           |
| उपयोग में आसानी          | अधिक कोड की आवश्यकता; डायरेक्ट एक्सेस | सरल, पाइथन-जैसी सिंटैक्स    |
| परफॉर्मेंस         | कॉम्प्लेक्स ऑप्स के लिए संभावित रूप से तेज | रैपर से ओवरहेड          |
| फंक्शनैलिटी       | फुल DB2 फ़ीचर्स               | डीबी-एपीआई इंटरफेस के माध्यम से सबसेट    |
| उपयोग का मामला            | कस्टम ऐप्स जिन्हें रॉ कंट्रोल की आवश्यकता है  | स्टैंडर्ड CRUD ऑपरेशन्स       |

अगर आप अन्य DB-API ड्राइवर्स के आदी हैं तो परिचितता के लिए `ibm_db_dbi` का उपयोग करें। एडवांस्ड DB2-स्पेसिफिक फ़ीचर्स जैसे स्टोर्ड प्रोसीजर या बल्क ऑपरेशन्स के लिए `ibm_db` पर स्विच करें।

### बेस्ट प्रैक्टिसेज
- रिसोर्स लीक से बचने के लिए हमेशा एक्सेप्शन्स को हैंडल करें और कनेक्शन को `try-finally` या `with` ब्लॉक में बंद करें।
- बड़े रिजल्ट सेट के लिए, मेमोरी यूसेज को लिमिट करने के लिए `fetchall()` के बजाय `fetchmany(size)` का उपयोग करें।
- DB2 वर्जन कंपैटिबिलिटी चेक करें; पैकेज DB2 LUW, z/OS, iSeries को सपोर्ट करते हैं।
- SSL कनेक्शन या CLPPlus इंटीग्रेशन जैसे एडवांस्ड टॉपिक्स के लिए IBM के डॉक्युमेंटेशन को देखें।

अधिक उदाहरणों के लिए, [IBM db2 Python ड्राइवर रेपो](https://github.com/ibmdb/python-ibmdb) पर जाएं। यदि आपको कोई समस्या आती है, तो सुनिश्चित करें कि आपका DB2 इंस्टेंस चल रहा है और क्रेडेंशियल्स सही हैं।