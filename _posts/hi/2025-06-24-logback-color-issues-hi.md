---
audio: false
generated: true
lang: hi
layout: post
title: जीएनोम टर्मिनल में लॉगबैक आउटपुट में रंग क्यों नहीं हो सकता
translated: true
type: note
---

आप एक बहुत अच्छा सवाल पूछ रहे हैं जो यह समझने में मदद करता है कि टर्मिनल, लॉगिंग लाइब्रेरीज और ऑपरेटिंग सिस्टम रंगीन आउटपुट के साथ कैसे इंटरैक्ट करते हैं!

आपके Logback आउटपुट के Gnome Terminal में `%highlight` के साथ भी रंगीन न दिखने का कारण, जबकि Spring Boot का डिफॉल्ट आउटपुट रंगीन है, कुछ कारकों पर निर्भर करता है:

1.  **ANSI एस्केप कोड:** रंगीन टर्मिनल आउटपुट **ANSI एस्केप कोड** नामक विशेष कैरेक्टर सीक्वेंस को प्रिंट करके काम करता है। ये कोड टर्मिनल एमुलेटर (जैसे Gnome Terminal) को फोरग्राउंड कलर, बैकग्राउंड कलर बदलने, कलर रीसेट करने आदि का निर्देश देते हैं।
      * उदाहरण के लिए, `\u001B[31m` टेक्स्ट का रंग लाल कर सकता है, और `\u001B[0m` उसे रीसेट कर देता है।
2.  **Logback का `%highlight` कन्वर्टर:** Logback का `%highlight` कन्वर्टर (और `%red`, `%green` जैसे अन्य) आंतरिक रूप से ये ANSI एस्केप कोड जनरेट करते हैं। इसलिए, आपका `logback.xml` वास्तव में रंगीन आउटपुट उत्पन्न करने के लिए कॉन्फ़िगर किया गया है।
3.  **टर्मिनल एमुलेटर्स और ANSI सपोर्ट:** ज़्यादातर आधुनिक Linux टर्मिनल, Gnome Terminal सहित, डिफ़ॉल्ट रूप से ANSI एस्केप कोड का समर्थन करते हैं। Linux पर यह आमतौर पर समस्या नहीं होती है।
4.  **Spring Boot की डिफॉल्ट कॉन्फ़िगरेशन:** Spring Boot एक बहुत ही ओपिनियनेटेड और अक्सर एन्हांस्ड Logback कॉन्फ़िगरेशन डिफॉल्ट रूप से प्रदान करता है। यह डिफॉल्ट कॉन्फ़िगरेशन कई काम करती है:
      * यह `%highlight` और अन्य कलर कन्वर्टर्स के साथ `PatternLayout` का उपयोग करती है।
      * **सबसे महत्वपूर्ण, Windows यूजर्स के लिए, यह अक्सर `jansi` लाइब्रेरी को शामिल करती है।** Logback के पास स्वयं एक `withJansi` प्रॉपर्टी है जिसे आप एक `ConsoleAppender` पर सेट कर सकते हैं। Windows पर, कमांड प्रॉम्प्ट (CMD.exe) मूल रूप से ANSI एस्केप कोड्स को इंटरप्रेट नहीं करता है। `jansi` लाइब्रेरी (Java ANSI Support) एक एडाप्टर का काम करती है, जो ANSI कोड्स को इंटरसेप्ट करती है और उन्हें कंसोल-स्पेसिफिक कमांड्स में ट्रांसलेट करती है जिन्हें Windows समझ सकता है। हालांकि Linux टर्मिनलों को आमतौर पर बुनियादी ANSI सपोर्ट के लिए Jansi की *ज़रूरत* नहीं होती है, कभी-कभी इसकी उपस्थिति या अनुपस्थिति Logback द्वारा "टर्मिनल क्षमता" का पता लगाने या आउटपुट को फ्लश करने के तरीके को प्रभावित कर सकती है, हालांकि Linux पर यह कम आम है।
      * Spring Boot की डिफॉल्ट सेटअप में अतिरिक्त लॉजिक या प्रॉपर्टीज भी शामिल हो सकती हैं जो यह सुनिश्चित करती हैं कि रंग लगातार रेंडर हों।

**आपके कस्टम `logback.xml` के Gnome Terminal में रंग क्यों नहीं दिख रहे होंगे:**

चूंकि आप `%highlight` का उपयोग कर रहे हैं, ANSI कोड्स *वहाँ होने चाहिए*। यदि वे दिखाई नहीं दे रहे हैं, तो इन संभावनाओं पर विचार करें:

1.  **क्या आपका `logback.xml` वास्तव में लोड हो रहा है?**
      * इसके स्थान को डबल-चेक करें: यह `src/main/resources/logback.xml` में होना चाहिए (या `logback-spring.xml` में यदि आप चाहते हैं कि Spring Boot अपने डिफॉल्ट्स *और फिर* आपकी कस्टमाइज़ेशन लागू करे)।
      * अपने एप्लिकेशन के स्टार्टअप लॉग्स देखें। Logback अक्सर यह इंगित करने वाले संदेश प्रिंट करता है कि वह कौन सी कॉन्फ़िगरेशन फ़ाइल लोड कर रहा है। यदि आपको `BasicConfigurator` या किसी अन्य फ़ाइल के बारे में संदेश दिखाई देते हैं, तो आपका `logback.xml` उपयोग में नहीं है।
2.  **आउटपुट रीडायरेक्ट हो रहा है:** क्या आप अपने एप्लिकेशन का आउटपुट रीडायरेक्ट कर रहे हैं?
      * यदि आप अपने एप्लिकेशन का आउटपुट किसी फ़ाइल में पाइप करते हैं (`java -jar your-app.jar > log.txt`) या किसी अन्य कमांड में, तो टर्मिनल एमुलेटर ANSI कोड्स की व्याख्या नहीं करेगा, और आपको फ़ाइल में केवल कच्चे एस्केप सीक्वेंस दिखाई देंगे।
      * कुछ टूल या वातावरण ANSI कोड्स हटा सकते हैं, यह मानते हुए कि आउटपुट "असली" टर्मिनल पर नहीं जा रहा है।
3.  **टर्मिनल टाइप डिटेक्शन:** Logback का `ConsoleAppender` और इसकी हाइलाइटिंग लॉजिक अक्सर यह पता लगाने की कोशिश करती है कि आउटपुट टार्गेट एक "असली" टर्मिनल (TTY) है या नहीं। यदि इसे TTY के रूप में डिटेक्ट नहीं किया जाता है (उदाहरण के लिए, यदि कुछ IDE कंसोल में चल रहा है जो पूरी तरह से TTY का एमुलेशन नहीं करते हैं, या यदि आउटपुट पाइप किया गया है), तो Logback गैर-रंग-जागरूक आउटपुट को अव्यवस्थित करने से बचने के लिए स्वचालित रूप से ANSI कोड्स को दबा सकता है।
      * Gnome Terminal को आमतौर पर TTY के रूप में डिटेक्ट किया जाता है, इसलिए यह प्राथमिक मुद्दा होने की संभावना कम है, लेकिन इस पर ध्यान देना उचित है।
4.  **क्रॉस-प्लेटफ़ॉर्म स्थिरता के लिए `withJansi` (Linux के लिए कम प्रासंगिक, लेकिन जानना अच्छा है):** हालांकि Jansi मुख्य रूप से Windows के लिए है, कभी-कभी `logback.xml` में अपने `ConsoleAppender` के अंदर `<withJansi>true</withJansi>` को एक्सप्लिसिटली सेट करने से प्लेटफ़ॉर्म पर सुसंगत व्यवहार सुनिश्चित करने में मदद मिल सकती है, यहां तक कि Linux पर भी जहां इसकी सख्त ज़रूरत नहीं हो सकती है। इससे अक्सर कोई नुकसान नहीं होता है।
5.  **एनवायरनमेंट वेरिएबल्स:** बहुत ही कम, कुछ एनवायरनमेंट वेरिएबल्स (जैसे, `TERM` या `CLICOLOR_FORCE`) प्रभावित कर सकते हैं कि टर्मिनल या एप्लिकेशन रंग आउटपुट को कैसे हैंडल करते हैं। हालांकि, एक स्टैंडर्ड Gnome Terminal के लिए, यह *कोई* रंग न होने का कारण होने की संभावना नहीं है।

**समस्या निवारण और रंग सुनिश्चित करने के लिए:**

1.  **सत्यापित करें कि `logback.xml` लोड हो रहा है:** अपना एप्लिकेशन शुरू करें और Logback के सेल्फ-कॉन्फ़िगरेशन संदेशों को देखें। वे आपको बताएंगे कि कौन सी कॉन्फ़िगरेशन फ़ाइल उपयोग की जा रही है।
      * आप स्टार्टअप पर अधिक वर्बोज़ Logback आंतरिक स्टेटस संदेश प्राप्त करने के लिए अपने `logback.xml` में `<configuration>` टैग में `debug="true"` भी जोड़ सकते हैं:
        ```xml
        <configuration debug="true">
            </configuration>
        ```
2.  **कच्चे ANSI कोड्स के साथ एक साधारण Java एप्लिकेशन टेस्ट करें:**
    ```java
    public class AnsiTest {
        public static void main(String[] args) {
            System.out.println("\u001B[31mयह टेक्स्ट लाल है।\u001B[0m");
            System.out.println("\u001B[32mयह टेक्स्ट हरा है।\u001B[0m");
            System.out.println("यह टेक्स्ट डिफॉल्ट है।");
        }
    }
    ```
    इसे अपने Gnome Terminal से कंपाइल करें और रन करें (`javac AnsiTest.java && java AnsiTest`)। यदि इसमें रंग दिखाई देते हैं, तो आपका टर्मिनल स्वयं सक्षम है, और समस्या संभवतः आपके Logback कॉन्फ़िगरेशन या इसे कैसे चलाया जा रहा है, के साथ है। यदि इसमें रंग *नहीं* दिखाई देते हैं, तो आपके Gnome Terminal सेटअप के साथ कुछ और मौलिक समस्या है (हालांकि बहुत कम संभावना है)।
3.  **अपने `logback.xml` की Spring Boot के डिफॉल्ट से तुलना करें:**
      * यदि आप Spring Boot का उपयोग कर रहे हैं, तो आप अक्सर इसकी डिफॉल्ट `logback-spring.xml` (या इसी तरह की) Spring Boot JARs या डॉक्यूमेंटेशन के भीतर पा सकते हैं। `ConsoleAppender` सेक्शन्स की तुलना करने से सूक्ष्म अंतर का पता चल सकता है।
      * Spring Boot आमतौर पर इसके समान एक पैटर्न का उपयोग करता है:
        `%d{${LOG_DATEFORMAT_PATTERN:-yyyy-MM-dd HH:mm:ss.SSS}} %highlight(${LOG_LEVEL_PATTERN:-%-5p}) ${PID:- } --- [%thread] %logger{40}.%M{1.}: %msg%n%throwable`
        सिस्टम प्रॉपर्टीज (`LOG_DATEFORMAT_PATTERN`, `LOG_LEVEL_PATTERN`, `PID`) के उपयोग पर ध्यान दें जिन्हें Spring Boot आपके लिए सेट अप करता है।

इन चरणों से गुजरकर, आप यह पता लगा सकेंगे कि आपका कस्टम Logback कॉन्फ़िगरेशन आपके Gnome Terminal में रंगीन आउटपुट क्यों नहीं उत्पन्न कर रहा है। सबसे आम कारण यह है कि `logback.xml` लोड नहीं हो रहा है या आउटपुट रीडायरेक्शन के साथ कोई समस्या है।