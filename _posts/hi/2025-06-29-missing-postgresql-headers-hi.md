---
audio: false
generated: true
lang: hi
layout: post
title: psycopg2 के लिए लापता libpq-fe.h
translated: true
type: note
---

जब आप Python पैकेज `psycopg2` इंस्टॉल करने का प्रयास कर रहे थे, तो आपको एक त्रुटि का सामना करना पड़ा जिसमें बताया गया था कि व्हील सफलतापूर्वक नहीं बनाया जा सका। त्रुटि संदेश का मुख्य भाग है:

```
In file included from psycopg/adapter_asis.c:28:
./psycopg/psycopg.h:36:10: fatal error: libpq-fe.h: No such file or directory
   36 | #include <libpq-fe.h>
      |          ^~~~~~~~~~~~
compilation terminated.
```

यह त्रुटि इसलिए होती है क्योंकि `libpq-fe.h` नामक फ़ाइल, जो PostgreSQL क्लाइंट लाइब्रेरी की एक हेडर फ़ाइल है, आपके सिस्टम पर गायब है। `psycopg2` पैकेज को स्रोत से बिल्ड करने के लिए इस फ़ाइल की आवश्यकता होती है, क्योंकि यह Python को PostgreSQL डेटाबेस से कनेक्ट करने का इंटरफेस प्रदान करती है। नीचे, मैं समझाऊंगा कि यह त्रुटि क्यों होती है और इसे ठीक करने के लिए एक चरण-दर-चरण समाधान प्रदान करूंगा।

---

### यह त्रुटि क्यों होती है
`psycopg2` पैकेज Python के लिए एक PostgreSQL एडाप्टर है, और जब आप इसे `pip` का उपयोग करके इंस्टॉल करते हैं, तो यह अपने C एक्सटेंशन को कंपाइल करने का प्रयास करता है। ये एक्सटेंशन PostgreSQL क्लाइंट लाइब्रेрии पर निर्भर करते हैं, विशेष रूप से डेवलपमेंट हेडर जैसे `libpq-fe.h` पर। त्रुटि संदेश इसे पुष्ट करता है:

```
It appears you are missing some prerequisite to build the package from source.
```

आपका सिस्टम, जो `x86_64-linux-gnu-gcc` के उपयोग के आधार पर एक Debian-आधारित Linux डिस्ट्रीब्यूशन प्रतीत होता है, में आवश्यक PostgreSQL डेवलपमेंट फाइलें गायब हैं। इनके बिना, कंपाइलेशन विफल हो जाती है, जिससे `psycopg2` के लिए व्हील बनाने में रुकावट आती है।

त्रुटि दो विकल्प भी सुझाती है:
1. PyPI के माध्यम से पूर्व-निर्मित बाइनरी पैकेज `psycopg2-binary` इंस्टॉल करें।
2. गायब पूर्वापेक्षाएं इंस्टॉल करें और `psycopg2` को स्रोत से बिल्ड करें।

चूंकि आपकी परियोजना आवश्यकताओं फ़ाइल में `psycopg2` (न कि `psycopg2-binary`) निर्दिष्ट करती है, और स्रोत से बिल्ड करना संगतता या अनुकूलन के लिए आवश्यक हो सकता है, हम बिल्ड प्रक्रिया को ठीक करने पर ध्यान केंद्रित करेंगे। हालांकि, मैं पूर्णता के लिए बाइनरी विकल्प का भी बाद में उल्लेख करूंगा।

---

### त्रुटि को कैसे ठीक करें
इसे हल करने के लिए, आपको PostgreSQL क्लाइंट डेवलपमेंट पैकेज इंस्टॉल करने की आवश्यकता है, जो `libpq-fe.h` और अन्य आवश्यक फाइलें प्रदान करता है। यहां बताया गया है कि इसे कैसे करें:

#### चरण 1: अपने सिस्टम की पहचान करें
आपके बिल्ड आउटपुट में `x86_64-linux-gnu-gcc` शामिल है, जो इंगित करता है कि आप संभवतः Ubuntu जैसे Debian-आधारित सिस्टम का उपयोग कर रहे हैं। समाधान इसके अनुरूप तैयार किया जाएगा, लेकिन मैं बाद में अन्य डिस्ट्रीब्यूशन के लिए विकल्प नोट करूंगा।

#### चरण 2: PostgreSQL डेवलपमेंट पैकेज इंस्टॉल करें
Debian-आधारित सिस्टम (जैसे, Ubuntu) पर, `libpq-dev` पैकेज में PostgreSQL क्लाइंट लाइब्रेरी हेडर शामिल होते हैं, जिसमें `libpq-fe.h` भी शामिल है। इसे निम्नलिखित कमांड से इंस्टॉल करें:

```bash
sudo apt-get update
sudo apt-get install libpq-dev
```

- **`sudo apt-get update`**: सुनिश्चित करता है कि आपकी पैकेज सूची वर्तमान है।
- **`sudo apt-get install libpq-dev`**: PostgreSQL क्लाइंट लाइब्रेरी के लिए डेवलपमेंट फाइलें इंस्टॉल करता है।

यह पैकेज `libpq-fe.h` को एक मानक स्थान पर (आमतौर पर `/usr/include/postgresql`) रखता है, जहां बिल्ड प्रक्रिया खोज करती है (जैसा कि आपके इंक्लूड पाथ `-I/usr/include/postgresql` में देखा गया है)।

#### चरण 3: इंस्टॉलेशन पुनः प्रयास करें
एक बार `libpq-dev` इंस्टॉल हो जाने के बाद, अपनी आवश्यकताओं को इंस्टॉल करने का पुनः प्रयास करें:

```bash
pip install -r scripts/requirements/requirements.local.txt
```

अब यह सफल होना चाहिए, क्योंकि गायब `libpq-fe.h` फ़ाइल उपलब्ध हो जाएगी, जिससे `psycopg2` अपना व्हील बना सकेगा।

---

### ठीक होने की पुष्टि करना
यदि इंस्टॉलेशन अभी भी विफल होता है, तो जांचें कि PostgreSQL हेडर सही ढंग से इंस्टॉल हैं:
- हेडर कहाँ स्थित हैं (जैसे, `/usr/include/postgresql`) देखने के लिए `pg_config --includedir` चलाएँ।
- सुनिश्चित करें कि यह बिल्ड कमांड (`-I/usr/include/postgresql`) में इंक्लूड पाथ से मेल खाता है।

आपका बिल्ड आउटपुट `-DPG_VERSION_NUM=140018` दिखाता है, जो इंगित करता है कि यह PostgreSQL 14 को लक्षित कर रहा है। `libpq-dev` पैकेज संस्करण-तटस्थ है और इसे PostgreSQL 14 हेडर के साथ काम करना चाहिए।

---

### विकल्प: बाइनरी पैकेज का उपयोग करें
यदि आपको `psycopg2` को स्रोत से बिल्ड करने की आवश्यकता नहीं है (जैसे, विशिष्ट ऑप्टिमाइज़ेशन या संगतता के लिए), तो आप पूर्व-निर्मित `psycopg2-binary` इंस्टॉल कर सकते हैं:

```bash
pip install psycopg2-binary
```

इसे अपनी परियोजना में उपयोग करने के लिए, `scripts/requirements/requirements.local.txt` को अपडेट करके `psycopg2` को `psycopg2-binary` से बदलें। हालाँकि, ध्यान दें कि `psycopg2-binary` की सीमाएँ हो सकती हैं (जैसे, कुछ PostgreSQL संस्करणों के साथ संभावित संगतता समस्याएँ), इसलिए यदि आपकी परियोजना को इसकी आवश्यकता है तो स्रोत से बिल्ड करना बेहतर है।

---

### अन्य डिस्ट्रीब्यूशन के लिए
यदि आप Debian-आधारित सिस्टम पर नहीं हैं, तो समतुल्य पैकेज इंस्टॉल करें:
- **Red Hat/CentOS/Fedora**: `sudo yum install postgresql-devel` या `sudo dnf install postgresql-devel`
- **Arch Linux**: `sudo pacman -S postgresql-libs`
- **macOS (Homebrew के साथ)**: `brew install libpq`

फिर, `pip install` कमांड का पुनः प्रयास करें।

---

### सारांश
त्रुटि इसलिए होती है क्योंकि `libpq-fe.h` गायब है, जो PostgreSQL क्लाइंट डेवलपमेंट फाइलों का हिस्सा है। आपके Debian-आधारित सिस्टम के लिए, `sudo apt-get install libpq-dev` के साथ `libpq-dev` इंस्टॉल करने से समस्या का समाधान होना चाहिए। उसके बाद, अपना `pip install` कमांड फिर से चलाएं, और `psycopg2` सफलतापूर्वक बिल्ड हो जाना चाहिए। यदि आप एक त्वरित समाधान पसंद करते हैं और आपको स्रोत संकलन की आवश्यकता नहीं है, तो इसके बजाय `psycopg2-binary` का उपयोग करें।