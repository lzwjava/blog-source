---
audio: false
generated: true
lang: hi
layout: post
title: स्प्रिंग बूट में फ्लाईवे के साथ डेटाबेस माइग्रेशन
translated: true
type: note
---

यहाँ Spring Boot एप्लिकेशन के साथ Flyway का उपयोग करके अपनी डेटाबेस स्कीमा को प्रबंधित करने का एक संक्षिप्त, व्यावहारिक मार्गदर्शिका दी गई है:

---

### Flyway क्या है?
Flyway एक डेटाबेस माइग्रेशन टूल है जो आपको अपनी डेटाबेस स्कीमा को वर्जन-कंट्रोल करने में मदद करता है। यह SQL स्क्रिप्ट्स (माइग्रेशन्स) को एक विशिष्ट क्रम में लागू करके आपकी डेटाबेस को विकसित करता है, जो Spring Boot प्रोजेक्ट्स के लिए आदर्श है जहाँ स्थिरता और स्वचालन महत्वपूर्ण हैं।

---

### चरण 1: Flyway डिपेंडेंसी जोड़ें
शुरुआत करने के लिए, अपने प्रोजेक्ट में Flyway जोड़ें। यदि आप **Maven** का उपयोग कर रहे हैं, तो अपनी `pom.xml` अपडेट करें:

```xml
<dependency>
    <groupId>org.flywaydb</groupId>
    <artifactId>flyway-core</artifactId>
</dependency>
```

**Gradle** के लिए, अपने `build.gradle` में यह जोड़ें:

```groovy
implementation 'org.flywaydb:flyway-core'
```

यह आपके Spring Boot एप्लिकेशन में Flyway को शामिल कर लेगा।

---

### चरण 2: अपना डेटाबेस कनेक्शन कॉन्फ़िगर करें
Flyway को यह जानने की आवश्यकता है कि किस डेटाबेस को प्रबंधित करना है। `application.properties` (या `application.yml`) में अपना डेटाबेस कनेक्शन परिभाषित करें। उदाहरण के लिए, PostgreSQL के साथ:

```properties
spring.datasource.url=jdbc:postgresql://localhost:5432/mydb
spring.datasource.username=myuser
spring.datasource.password=mypassword
```

Spring Boot स्वचालित रूप से Flyway को इस डेटा स्रोत का उपयोग करने के लिए कॉन्फ़िगर कर देता है, इसलिए यहाँ किसी अतिरिक्त सेटअप की आवश्यकता नहीं है।

---

### चरण 3: माइग्रेशन स्क्रिप्ट्स बनाएँ
Flyway आपकी डेटाबेस को अपडेट करने के लिए वर्जन वाली SQL स्क्रिप्ट्स का उपयोग करता है। इन स्क्रिप्ट्स को डिफ़ॉल्ट डायरेक्टरी: `src/main/resources/db/migration` में रखें। प्रत्येक स्क्रिप्ट को इस नामकरण पैटर्न का पालन करना चाहिए: `V<version>__<description>.sql`। वर्जन नंबर यह सुनिश्चित करता है कि माइग्रेशन क्रम में चलें।

उदाहरण के लिए, `V1__create_users_table.sql` नाम की एक फ़ाइल बनाएँ:

```sql
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    username VARCHAR(255) NOT NULL,
    email VARCHAR(255) NOT NULL
);
```

इसे `src/main/resources/db/migration` में सेव करें।

---

### चरण 4: अपना एप्लिकेशन चलाएँ
अपना Spring Boot एप्लिकेशन स्टार्ट करें (जैसे, `mvn spring-boot:run` के माध्यम से या अपने IDE से)। Flyway यह करेगा:
- माइग्रेशन इतिहास के लिए डेटाबेस की जाँच करेगा।
- किसी भी लंबित माइग्रेशन (जैसे `V1__create_users_table.sql`) को क्रमिक रूप से लागू करेगा।

यह Spring Boot के इंटीग्रेशन के कारण स्टार्टअप पर स्वचालित रूप से होता है—किसी मैन्युअल हस्तक्षेप की आवश्यकता नहीं है।

---

### चरण 5: Flyway को कस्टमाइज़ करें (वैकल्पिक)
आप `application.properties` में प्रॉपर्टीज़ के साथ Flyway के व्यवहार को समायोजित कर सकते हैं। यहाँ कुछ सामान्य विकल्प दिए गए हैं:

```properties
spring.flyway.locations=classpath:db/migration  # स्क्रिप्ट्स कहाँ खोजें
spring.flyway.baseline-on-migrate=true          # मौजूदा डेटाबेस को हैंडल करें
spring.flyway.enabled=true                      # Flyway को चालू/बंद करें
```

ये आपको Flyway को अपने प्रोजेक्ट की आवश्यकताओं के अनुरूप ढालने देते हैं।

---

### उन्नत सुविधाएँ
Flyway बेसिक माइग्रेशन्स से कहीं अधिक प्रदान करता है:
- **Java-आधारित माइग्रेशन**: जटिल लॉजिक के लिए Java में माइग्रेशन लिखें।
- **पुनरावर्तनीय माइग्रेशन**: ऐसी स्क्रिप्ट्स के लिए `R__<description>.sql` का उपयोग करें जो बदलने पर दोबारा चलें (जैसे, व्यूज़)।
- **माइग्रेशन वापस लें (Undo)**: परिवर्तनों को रोल बैक करें (Flyway Pro की आवश्यकता होती है)।

गहन अन्वेषण के लिए [Flyway डॉक्यूमेंटेशन](https://flywaydb.org/documentation/) देखें।

---

### सारांश
Spring Boot में Flyway का उपयोग करने के लिए:
1. अपने प्रोजेक्ट में Flyway डिपेंडेंसी जोड़ें।
2. `application.properties` में अपना डेटाबेस कनेक्शन सेट अप करें।
3. `src/main/resources/db/migration` में वर्जन वाली SQL स्क्रिप्ट्स लिखें।
4. अपना ऐप लॉन्च करें—Flyway माइग्रेशन्स को स्वचालित रूप से लागू कर देगा।

Flyway वर्जनिंग और स्वचालन के साथ डेटाबेस स्कीमा प्रबंधन को सरल बनाता है, जो Spring Boot के सुव्यवस्थित विकास अनुभव को पूरी तरह से पूरक करता है।