---
audio: false
generated: true
lang: hi
layout: post
title: डिस्कॉर्ड का रस्ट प्रदर्शन बूस्ट
translated: true
type: note
---

डिस्कॉर्ड द्वारा Rust को अपनाने का कारण उनकी Go-आधारित "रीड स्टेट्स" सेवा में आने वाली परफॉर्मेंस की बाधाएं थीं, जो चैनल्स में यूज़र मैसेज रीड्स को ट्रैक करती है। Rust में स्विच करने से लेटेंसी में महत्वपूर्ण सुधार हुआ, गार्बेज कलेक्शन के स्पाइक्स खत्म हुए, और मेमोरी प्रबंधन एवं कंकरेंसी में Rust की मजबूती देखने को मिली। यहां विस्तृत विवरण दिया गया है:

---

### **डिस्कॉर्ड ने Rust की ओर क्यों रुख किया**
1. **Go में गार्बेज कलेक्शन (GC) की समस्याएं**  
   - डिस्कॉर्ड की Go सेवा में हर ~2 मिनट में लेटेंसी स्पाइक्स आती थीं, क्योंकि Go का कंजर्वेटिव, नॉन-जेनरेशनल GC को *पूरे LRU कैश (जिसमें लाखों ऑब्जेक्ट्स होते हैं) को स्कैन करना पड़ता था*, भले ही न्यूनतम गार्बेज उत्पन्न हो रहा हो।  
   - Go के GC को ट्यून करने (जैसे, कैश साइज़ एडजस्ट करना) या तो स्पाइक्स को ठीक करने में विफल रहा या 99वें पर्सेंटाइल लेटेंसी को और खराब कर दिया।

2. **Rust का मेमोरी प्रबंधन**  
   - Rust का ओनरशिप मॉडल LRU कैश से एविक्शन पर *तुरंत मेमोरी को मुक्त कर देता है*, जिससे GC के कारण होने वाले पॉज नहीं होते। इस डिटरमिनिस्टिक तरीके ने लेटेंसी स्पाइक्स को खत्म कर दिया।  
   - रनटाइम GC ओवरहेड की अनुपस्थिति का मतलब था हाई लोड (हज़ारों अपडेट/सेकंड) के तहत स्थिर परफॉर्मेंस।

3. **परफॉर्मेंस ऑप्टिमाइज़ेशन**  
   - एक सीधा-सादा Rust इम्प्लीमेंटेशन भी Go की परफॉर्मेंस के बराबर था। आगे के ऑप्टिमाइज़ेशन (जैसे, `HashMap` के बजाय `BTreeMap` का उपयोग, मेमोरी कॉपीज़ कम करना) ने *CPU उपयोग में 70% की कमी* की और औसत रिस्पॉन्स टाइम को माइक्रोसेकंड तक पहुंचा दिया।

4. **इकोसिस्टम और एसिंक सपोर्ट**  
   - डिस्कॉर्ड ने Rust की नाइटली एसिंक सुविधाओं (बाद में स्थिर की गईं) को जल्दी अपना लिया, जिससे GC की कीमत चुकाए बिना कुशल नेटवर्क्ड सेवाएं संभव हो सकीं।

---

### **स्विच के परिणाम**
- **लेटेंसी**: 2-मिनट के GC स्पाइक्स खत्म, सब-मिलीसेकंड रिस्पॉन्स टाइम हासिल।
- **संसाधन दक्षता**: CPU और मेमोरी उपयोग में कमी, जिससे परफॉर्मेंस गिरावट के बिना कैश क्षमता 8 मिलियन रीड स्टेट्स तक स्केल हो सकी।
- **विश्वसनीयता**: Rust की कंपाइल-टाइम सेफ्टी चेक के कारण रनटाइम बग्स कम आए।

---

### **डिस्कॉर्ड के लिए Rust के फायदे**
1. **परफॉर्मेंस**  
   - अनुमानित कम लेटेंसी, रियल-टाइम सेवाओं के लिए आदर्श।
   - GC-निर्भर भाषाओं की तुलना में बारीक मेमोरी नियंत्रण बेहतर प्रदर्शन करता है।

2. **सुरक्षा**  
   - ओनरशिप मॉडल मेमोरी लीक, नल पॉइंटर्स और डेटा रेस को रोकता है।
   - मैन्युअल सिंक्रोनाइज़ेशन के बिना कंकरेंसी सेफ्टी।

3. **आधुनिक टूलिंग**  
   - कार्गो (पैकेज मैनेजर) और समृद्ध जेनेरिक्स ने Go की तुलना में बॉयलरप्लेट कोड कम किया।

4. **इकोसिस्टम विकास**  
   - अपग्रेड (जैसे, Tokio एसिंक रनटाइम) ने मुफ्त परफॉर्मेंस लाभ दिए।

---

### **नुकसान और चुनौतियां**
1. **सीखने की अवस्था**  
   - Rust के ओनरशिप और लाइफटाइम्स में शुरुआती निवेश की आवश्यकता होती है।

2. **शुरुआती एसिंक सीमाएं**  
   - अस्थिर नाइटली सुविधाओं पर प्रारंभिक निर्भरता ने मेंटेनेंस जोखिम पैदा किए।

3. **छोटा इकोसिस्टम**  
   - Go या C++ की तुलना में कम लाइब्रेरीज़, हालांकि तेजी से बढ़ रहा है।

---

### **मुख्य बातें**
डिस्कॉर्ड की Rust के साथ सफलता *लेटेंसी-संवेदनशील, बड़े पैमाने की सेवाओं* के लिए इसकी उपयुक्तता को उजागर करती है, जहां GC पॉज अस्वीकार्य हैं। हालांकि संक्रमण में Rust की सीखने की चुनौती को दूर करना पड़ा, लेकिन इसके बदले में **तेज प्रदर्शन, कम संसाधन उपयोग और कम रनटाइम त्रुटियां** मिलीं। ऐसी टीमों के लिए जो दीर्घकालिक रखरखाव और प्रदर्शन को प्राथमिकता देती हैं, Rust, Go जैसी GC-निर्भर भाषाओं पर आकर्षक फायदे प्रदान करता है।

गहन तकनीकी जानकारी के लिए, डिस्कॉर्ड के [मूल ब्लॉग पोस्ट](https://discord.com/blog/why-discord-is-switching-from-go-to-rust) देखें।