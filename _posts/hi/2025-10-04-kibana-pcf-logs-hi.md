---
audio: false
generated: true
image: false
lang: hi
layout: post
model: x-ai/grok-4-fast
title: पीसीएफ लॉग्स के लिए किबाना सेटअप
translated: true
type: note
---

ऐसा लगता है कि "kabana" संभवतः **Kibana** का एक संदर्भ है, जो Elasticsearch के लिए ओपन-सोर्स डेटा विज़ुअलाइज़ेशन डैशबोर्ड है। **Pivotal Cloud Foundry (PCF)** (जिसे अब VMware Tanzu Application Service के रूप में रीब्रांड किया गया है) के संदर्भ में, Kibana का उपयोग आमतौर पर प्लेटफ़ॉर्म की लॉगिंग सिस्टम (Loggregator) के माध्यम से लॉग्स को खोजने, विज़ुअलाइज़ करने और विश्लेषण करने के लिए किया जाता है। PCF मूल रूप से Kibana को स्टैंडअलोन नहीं चलाता है, बल्कि इसे **Log Search** टाइल/सेवा के माध्यम से एकीकृत करता है, जो लॉग्स को Elasticsearch में संग्रहीत करता है और क्वेरी करने के लिए Kibana को एक्सपोज़ करता है।

यदि आका मतलब कुछ और था, तो कृपया स्पष्ट करें! नीचे, मैं समझाऊंगा कि PCF लॉग्स के साथ Kibana को कैसे सेट अप और उपयोग करें। यह मानता है कि आप एक एडमिन हैं जिनके पास PCF ऑप्स मैनेजर तक पहुंच है और एक चल रहा PCF डिप्लॉयमेंट (वर्जन 2.0+) है। ध्यान दें कि PCF लॉगिंग विकसित हुई है; विशिष्ट विवरण के लिए अपने वर्जन का डॉक्यूमेंटेशन चेक करें।

### पूर्वापेक्षाएँ
- **PCF वर्जन**: Log Search (Kibana के साथ) PCF 2.2+ में उपलब्ध है। पहले के वर्जन एक अलग "ELK" (Elasticsearch, Logstash, Kibana) टाइल का उपयोग करते थे।
- **टाइल्स/सेवाएं**: सुनिश्चित करें कि आपके पास **Elastic Runtime** टाइल (Loggregator के लिए) और **Log Search** टाइल Pivotal Network (अब Broadcom Support Portal) के माध्यम से इंस्टॉल है।
- **एक्सेस**: ऑप्स मैनेजर और PCF CLI (cf कमांड-लाइन टूल) में एडमिन विशेषाधिकार।
- **संसाधन**: पर्याप्त संसाधन आवंटित करें (जैसे, लॉग वॉल्यूम के आधार पर Log Search के लिए 4-8 GB RAM)।

### चरण 1: ऑप्स मैनेजर में Log Search टाइल इंस्टॉल और कॉन्फ़िगर करें
Log Search टाइल PCF लॉग्स (ऐप्स, प्लेटफ़ॉर्म और सिस्टम कंपोनेंट्स से) को Elasticsearch को फॉरवर्ड करती है, जिससे वे Kibana के माध्यम से खोजने योग्य बन जाते हैं।

1. **टाइल डाउनलोड और इम्पोर्ट करें**:
   - Broadcom Support Portal (पूर्व में Pivotal Network) में लॉग इन करें।
   - **Log Search for PCF** टाइल डाउनलोड करें (जैसे, आपके PCF रिलीज़ से मेल खाता वर्जन)।
   - ऑप्स मैनेजर (वेब UI) में, **Catalog** > **Import a Product** पर जाएं और टाइल अपलोड करें।

2. **टाइल कॉन्फ़िगर करें**:
   - ऑप्स मैनेजर में, **Elastic Runtime** टाइल > **Loggregator** टैब पर जाएं:
     - **Loggregator forwarding to external systems** सक्षम करें (जैसे, यदि आवश्यक हो तो syslog या HTTP फॉरवर्डिंग सेट अप करें, लेकिन Log Search के लिए, यह आंतरिक है)।
     - **Loggregator log retention** को 5-30 दिनों जैसे मान पर सेट करें।
   - **Log Search** टाइल पर जाएं:
     - **Assign Availability Zones**: उच्च उपलब्धता के लिए कम से कम एक AZ चुनें।
     - **Elasticsearch Configuration**:
       - इंस्टेंस काउंट सेट करें (प्रोडक्शन के लिए 3 से शुरू करें)।
       - स्टोरेज कॉन्फ़िगर करें (जैसे, 100 GB पर्सिस्टेंट डिस्क)।
       - सुरक्षा सक्षम करें (जैसे, Elasticsearch के लिए TLS)।
     - **Kibana Configuration**:
       - Kibana सक्षम करें (यह बंडल है)।
       - एडमिन क्रेडेंशियल्स (यूज़रनेम/पासवर्ड) सेट करें।
     - **Loggregator Integration**:
       - अधिकतम लॉग लाइन प्रति सेकंड सेट करें (जैसे, आपके लोड के आधार पर 1000-5000)।
       - इंडेक्स पैटर्न परिभाषित करें (जैसे, लॉग्स को 7-30 दिनों तक रिटेन करें)।
     - **Networking**: Kibana को एक रूट के माध्यम से एक्सपोज़ करें (जैसे, `kibana.YOUR-PCF-DOMAIN.com`)।
   - डिप्लॉय करने के लिए **Apply Changes** क्लिक करें। इसमें 30-60 मिनट लग सकते हैं।

3. **डिप्लॉयमेंट सत्यापित करें**:
   - `cf tiles` चलाएं या सफलता के लिए ऑप्स मैनेजर चेक करें।
   - एक Log Search VM में SSH करें (BOSH CLI का उपयोग करके: `bosh ssh log-search/0`) और पुष्टि करें कि Elasticsearch चल रहा है (`curl localhost:9200`)।

### चरण 2: Kibana तक पहुंचें
एक बार डिप्लॉय हो जाने पर:

1. **PCF Apps Manager (GUI) के माध्यम से**:
   - Apps Manager में लॉग इन करें (जैसे, `https://apps.YOUR-PCF-DOMAIN.com`)।
   - "Log Search" सर्विस इंस्टेंस खोजें (यह स्वचालित रूप से एक बनाता है)।
   - सर्विस इंस्टेंस पर क्लिक करें > **Logs** टैब। यह त्वरित लॉग खोजों के लिए एक एम्बेडेड Kibana व्यू खोलता है।

2. **Kibana तक सीधी पहुंच**:
   - टाइल में कॉन्फ़िगर किए गए Kibana URL पर नेविगेट करें (जैसे, `https://kibana.YOUR-PCF-DOMAIN.com`)।
   - आपके द्वारा सेट किए गए एडमिन क्रेडेंशियल्स से लॉग इन करें।
   - यदि कस्टम डोमेन का उपयोग कर रहे हैं, तो सुनिश्चित करें कि DNS सही ढंग से पॉइंट किया गया है और रूट्स रजिस्टर्ड हैं (सत्यापित करने के लिए `cf routes`)।

3. **CLI एक्सेस (वैकल्पिक)**:
   - बेसिक लॉग्स के लिए `cf logs APP-NAME` का उपयोग करें, लेकिन एडवांस्ड क्वेरी के लिए Kibana UI या API का उपयोग करें।
   - Log Search को अपने ऐप्स से बाइंड करें: `cf create-service log-search standard my-log-search` फिर `cf bind-service APP-NAME my-log-search`।

### चरण 3: PCF लॉग्स के लिए Kibana का उपयोग करना
Kibana एक वेब-आधारित इंटरफेस प्रदान करता है जिससे PCF कंपोनेंट्स (जैसे, ऐप लॉग्स, Diego cells, Gorouter, आदि) से लॉग्स को क्वेरी, फिल्टर और विज़ुअलाइज़ किया जा सकता है।

1. **बेसिक नेविगेशन**:
   - **Discover टैब**: Lucene क्वेरी सिंटैक्स का उपयोग करके लॉग्स खोजें।
     - उदाहरण: किसी विशिष्ट ऐप में एरर खोजें: `source_id:APP:your-app-name AND json.message:ERROR`।
     - उपलब्ध फ़ील्ड्स: `timestamp`, `source_id` (जैसे, `APP:your-app`, `RTR:router`), `message`, `deployment`, आदि।
   - **Visualize टैब**: चार्ट्स के लिए डैशबोर्ड बनाएं (जैसे, समय के साथ लॉग वॉल्यूम, एरर रेट्स)।
     - सैंपल विज़ुअलाइज़ेशन: source_id द्वारा लॉग्स का बार चार्ट।
   - **Dashboard टैब**: पूर्व-निर्मित डैशबोर्ड सेव और शेयर करें (Log Search में PCF लॉग्स के लिए डिफ़ॉल्ट शामिल हैं)।

2. **सामान्य क्वेरीज़ और टिप्स**:
   - **ऐप द्वारा फिल्टर करें**: `source_id:APP:your-app-name` (वास्तविक ऐप GUID या नाम से बदलें)।
   - **समय द्वारा फिल्टर करें**: टाइम पिकर का उपयोग करें (जैसे, पिछले 24 घंटे)।
   - **सिस्टम लॉग्स**: `source_id:DEA` (Diego cells के लिए) या `source_id:LOGGREGATOR`।
   - **लॉग्स एक्सपोर्ट करें**: Discover से CSV/JSON के रूप में डाउनलोड करें।
   - **एडवांस्ड**: Elasticsearch को सीधे क्वेरी करने के लिए Kibana के Dev Tools (कंसोल) का उपयोग करें, जैसे:
     ```
     GET /logstash-*/_search
     {
       "query": { "match": { "message": "error" } },
       "sort": [ { "timestamp": { "order": "desc" } } ]
     }
     ```
   - **रिटेंशन और इंडेक्सिंग**: लॉग्स दिन के हिसाब से इंडेक्स होते हैं (जैसे, `logstash-YYYY.MM.DD`)। स्टोरेज प्रबंधित करने के लिए टाइल में रोलओवर कॉन्फ़िगर करें।

3. **लॉग्स ट्रबलशूटिंग**:
   - **कोई लॉग दिखाई नहीं दे रहे?** Loggregator में फॉरवर्डिंग नियम चेक करें (ऑप्स मैनेजर > Elastic Runtime > Loggregator)। सुनिश्चित करें कि ऐप्स लॉग्स उत्सर्जित कर रहे हैं (जैसे, Node.js में `console.log` के माध्यम से)।
   - **परफॉर्मेंस इश्यू?** Elasticsearch इंस्टेंस स्केल अप करें या लॉग रेट लिमिट ट्यून करें।
   - **सुरक्षा**: Kibana में SSO लॉगिन के लिए Log Search में UAA इंटीग्रेशन सक्षम करें।
   - **एरर**: `cf logs log-search` या ऑप्स मैनेजर एर्रंड लॉग्स के साथ PCF लॉग्स चेक करें।

### अतिरिक्त संसाधन
- **ऑफिशियल डॉक्स**: [Log Search](https://docs.vmware.com/en/VMware-Tanzu-Application-Service/10.0/tas/GUID-log-search-index.html) पर VMware Tanzu डॉक्स (अपने वर्जन के लिए खोजें)।
- **CLI टूल्स**: यदि आवश्यक हो तो UAA ऑथ के लिए `uaac` इंस्टॉल करें, या API एक्सेस के लिए `cf curl` का उपयोग करें।
- **विकल्प**: सरल आवश्यकताओं के लिए, PCF के बिल्ट-इन **Log Cache** (cf CLI: `cf tail APP-NAME`) का उपयोग करें या syslog फॉरवर्डिंग के माध्यम से Splunk जैसे बाहरी टूल्स के साथ एकीकृत करें।
- **अपग्रेड**: यदि आप लीगेसी PCF पर हैं, तो ELK टाइल पर माइग्रेट करें या Broadcom सपोर्ट से संपर्क करें।

यदि आप अधिक विवरण प्रदान करते हैं (जैसे, आपका PCF वर्जन, एरर मैसेज, या विशिष्ट उपयोग का मामला), तो मैं इसे और परिष्कृत कर सकता हूं!