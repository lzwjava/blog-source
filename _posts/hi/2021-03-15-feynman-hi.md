---
audio: false
generated: false
lang: hi
layout: post
title: 'mathjax2mobi: MathJax HTML рдХреЛ рдИрдмреБрдХ рдореЗрдВ рдмрджрд▓реЗрдВ'
translated: true
---

### рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдкрд░рд┐рдЪрдп

рдкрд╣рд▓реЗ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреА рд╕рд╛рдорд╛рдиреНрдп рд╕реНрдерд┐рддрд┐ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░рддреЗ рд╣реИрдВред

![feynman_online](assets/images/feynman/feynman_online.jpg)

<img src="/assets/images/feynman/change.JPG" alt="рдкрд░рд┐рд╡рд░реНрддрди" style="zoom:50%;" />

![latex](assets/images/feynman/latex.JPG)

![epub_black](assets/images/feynman/epub_black.JPG)

![epub_beautiful](assets/images/feynman/epub_beautiful.JPG)

рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдкреВрд░рд╛ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдереЛрдбрд╝рд╛ рдЦреБрд╢реА рдорд╣рд╕реВрд╕ рд╣реБрдИред рдореИрдВрдиреЗ рдпрд╣ рд╡рд╛рдХреНрдп рд▓рд┐рдЦрд╛ред

рдПрдХ рджрд┐рди рдХреЛрдб рд▓рд┐рдЦрдиреЗ рдХреЗ рдмрд╛рдж, рдЖрдЦрд┐рд░рдХрд╛рд░ рдореБрдЭреЗ рд╕реБрдВрджрд░ рдлрд╝реЗрдорди рднреМрддрд┐рдХреА рд╡реНрдпрд╛рдЦреНрдпрд╛рди рдХреА рдИ-рдмреБрдХ рдорд┐рд▓ рдЧрдИ! рдлрд╝реЗрдорди рднреМрддрд┐рдХреА рд╡реНрдпрд╛рдЦреНрдпрд╛рди рдСрдирд▓рд╛рдЗрди рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рд░реВрдк рд╕реЗ рдЙрдкрд▓рдмреНрдз рд╣реИ, рдЬрд┐рд╕реЗ `latex` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд░реЗрдВрдбрд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред рд▓реЛрдЧ рдЕрдХреНрд╕рд░ `latex` рдХрд╛ рдЙрдкрдпреЛрдЧ рдкреЗрдкрд░ рд▓рд┐рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдХрд░рддреЗ рд╣реИрдВ, рдпрд╣ рдЧрдгрд┐рддреАрдп рд╕реВрддреНрд░реЛрдВ рдХреЛ рдмрд╣реБрдд рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рд░реЗрдВрдбрд░ рдХрд░рддрд╛ рд╣реИред рдФрд░ рдЗрд╕реЗ рдСрдирд▓рд╛рдЗрди рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, `mathjax` рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред рдпрд╣ `latex` рд╕реНрд░реЛрдд рдХреЛрдб рдХреЛ `html` рдХреЛрдб рдореЗрдВ рдмрджрд▓ рджреЗрддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдмрд╣реБрдд рд╕рд╛рд░реЗ `div` рдФрд░ `span` рдЯреИрдЧ рдЙрддреНрдкрдиреНрди рд╣реЛрддреЗ рд╣реИрдВред рд╣рд╛рд▓рд╛рдВрдХрд┐, рдИ-рдмреБрдХ рдЗрд╕ рддрд░реАрдХреЗ рдХрд╛ рд╕рдорд░реНрдерди рдирд╣реАрдВ рдХрд░рддреА рд╣реИред рдЗрд╕рд▓рд┐рдП, рд╡рд┐рдЪрд╛рд░ рдпрд╣ рдерд╛ рдХрд┐ рд╡реЗрдмрдкреЗрдЬ рдХреЛ рд╕реНрдХреНрд░реИрдк рдХрд┐рдпрд╛ рдЬрд╛рдП, `mathjax` рд░реЗрдВрдбрд░рд┐рдВрдЧ рдХреЛ рдЙрд▓реНрдЯрд╛ рдХрд┐рдпрд╛ рдЬрд╛рдП, рдФрд░ рдлрд┐рд░ рдЗрд╕реЗ `svg` рдЗрдореЗрдЬ рдореЗрдВ рдмрджрд▓ рджрд┐рдпрд╛ рдЬрд╛рдПред рдЗрд╕ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рдХрдИ рд╕рдорд╕реНрдпрд╛рдПрдВ рдЖрдИрдВ, рдПрдХ рдпрд╣ рдХрд┐ рд╕реНрд░реЛрдд рдХреЛрдб рдореЗрдВ рдмрд╣реБрдд рд╕рд╛рд░реЗ `latex` рдХрд╕реНрдЯрдо рдореИрдХреНрд░реЛрдЬрд╝ рдереЗ, рдЬрд┐рдиреНрд╣реЗрдВ рдЬреЛрдбрд╝рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдереА; рджреВрд╕рд░реА рдпрд╣ рдХрд┐ рдмрд╣реБрдд рд╕рд╛рд░реЗ `svg` рдХреЛ рдПрдореНрдмреЗрдб рдХрд░рдиреЗ рдореЗрдВ рд╕рдорд╕реНрдпрд╛рдПрдВ рдЖрдИрдВред рдЕрдЧрд░ рдПрдХрд▓ `svg` рд╣реЛрддрд╛ рддреЛ рдХреЛрдИ рд╕рдорд╕реНрдпрд╛ рдирд╣реАрдВ рд╣реЛрддреА, рд▓реЗрдХрд┐рди рдЬрдм рдмрд╣реБрдд рд╕рд╛рд░реЗ рд╣реЛрддреЗ рд╣реИрдВ рддреЛ рд╕рдорд╕реНрдпрд╛рдПрдВ рдЖрддреА рд╣реИрдВред рдпрд╣ рд╢рд╛рдпрдж рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдФрд░ `svg` рдХреЗ рдмреАрдЪ рдХреБрдЫ рдЕрдЬреАрдм рдмрдЧ рдХреЗ рдХрд╛рд░рдг рд╣реЛрддрд╛ рд╣реИред рдЗрд╕ рд╕рдорд╕реНрдпрд╛ рдХреЛ рд╣рд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, `svg` рдХреЛ рдлрд╝рд╛рдЗрд▓ рдХреЗ рд░реВрдк рдореЗрдВ рд╕рд╣реЗрдЬрд╛ рдЧрдпрд╛ рдФрд░ `img` рдЯреИрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЗрд╕реЗ рд╢рд╛рдорд┐рд▓ рдХрд┐рдпрд╛ рдЧрдпрд╛ред рд╕реВрддреНрд░ рднреА рджреЛ рдкреНрд░рдХрд╛рд░ рдХреЗ рд╣реЛрддреЗ рд╣реИрдВ, рдПрдХ рд╡реЗ рдЬреЛ рдЯреЗрдХреНрд╕реНрдЯ рдХреЗ рдмреАрдЪ рдореЗрдВ рд╣реЛрддреЗ рд╣реИрдВ, рдФрд░ рджреВрд╕рд░реЗ рд╡реЗ рдЬреЛ рдПрдХрд▓ рдкрдВрдХреНрддрд┐ рдореЗрдВ рд╣реЛрддреЗ рд╣реИрдВред рдЗрд╕рд▓рд┐рдП, рдЕрдВрдд рдореЗрдВ рдореБрдЭреЗ рдПрдХ рд╕реБрдВрджрд░ рдИ-рдмреБрдХ рдорд┐рд▓ рдЧрдИ!

### рдЦреЛрдЬреЗ рдЧрдП рд╕рдВрд╕рд╛рдзрди

рдпрд╣рд╛рдВ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рджреМрд░рд╛рди рдПрдХреНрд╕реЗрд╕ рдХрд┐рдП рдЧрдП рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЛ рд╣рд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рджрд░реНрдЬ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред рдЪреВрдВрдХрд┐ рдпрд╣ рдПрдХ рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЫрд╛рддреНрд░реЛрдВ рдХреЛ рдпрд╣ рджрд┐рдЦрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ рдПрдХ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдмрдирд╛рдиреЗ рдХрд╛ рдЕрдиреБрднрд╡ рдХреИрд╕рд╛ рд╣реЛрддрд╛ рд╣реИред

![](assets/images/feynman/s1.PNG)

![](assets/images/feynman/s2.PNG)

![](assets/images/feynman/s3.PNG)

![](assets/images/feynman/s4.PNG)

![](assets/images/feynman/s5.PNG)

![](assets/images/feynman/s6.PNG)

![](assets/images/feynman/s7.PNG)

![](assets/images/feynman/s8.PNG)

### рдкреНрд░реЛрдЬреЗрдХреНрдЯ рд╢реБрд░реВ рдХрд░рдирд╛

рдлреЗрдпрдирдореИрди рдХреЗ рднреМрддрд┐рдХреА рд╡реНрдпрд╛рдЦреНрдпрд╛рди (Feynman Lectures on Physics) рдЕрдм рдСрдирд▓рд╛рдЗрди рдкрдврд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрд▓рдмреНрдз рд╣реИрдВред рдореИрдВ рдЗрд╕реЗ `Kindle` рдкрд░ рдкрдврд╝рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдБред рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЗрд╕рдореЗрдВ рдХрд╛рдлреА рд╕рд╛рд░реЗ рдЧрдгрд┐рддреАрдп рд╕реВрддреНрд░ рд╣реИрдВред рдЗрд╕рдХрд╛ рдореВрд▓ рдбреНрд░рд╛рдлреНрдЯ рд╢рд╛рдпрдж `LaTeX` рдореЗрдВ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рдерд╛ред рдЗрд╕реЗ рд╡реЗрдмрдкреЗрдЬ рдкрд░ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП `MathJax` рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдЬреЛ `LaTeX` рдлреЙрд░реНрдореЗрдЯ рдХреЛ рд╡реЗрдм рдкрд░ рджрд┐рдЦрд╛рддрд╛ рд╣реИред

рдПрдХ рдЙрджрд╛рд╣рд░рдг рд▓реЗрддреЗ рд╣реИрдВред

```html
<span class="MathJax_Preview" style="color: inherit; display: none;">
</span>
<div class="MathJax_Display">
    <span class="MathJax MathJax_FullWidth" id="MathJax-Element-10-Frame" tabindex="0" style="">
              <span class="mi" id="MathJax-Span-159" style="font-family: MathJax_Math-italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;">
                </span>  
    </span>
</div>
<script type="math/tex; mode=display" id="MathJax-Element-10">\begin{equation}
\label{Eq:I:13:3}
dT/dt = Fv.
\end{equation}
</script>
```

рдпрд╣ рдКрдкрд░ рджрд┐рдпрд╛ рдЧрдпрд╛ рдПрдХ `html` рдХреЛрдб рдХрд╛ рдПрдХ рдЕрдВрд╢ рд╣реИред рдЗрд╕ `html` рдХреЛрдб рдХреЗ рднрд╛рдЧ рдореЗрдВ, `script` рдЯреИрдЧ рдХреЗ рдЕрдВрджрд░ `latex` рдХрд╛ рдореВрд▓ рдЯреЗрдХреНрд╕реНрдЯ рд╣реИред `mathjax` рдЗрд╕реЗ рдХрдИ `span` рдореЗрдВ рдмрджрд▓ рджреЗрддрд╛ рд╣реИ рддрд╛рдХрд┐ рдЗрд╕реЗ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗред

рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдЕрдм рдПрдХ рд╡рд┐рдЪрд╛рд░ рд╣реИред рд╡рд╣ рдпрд╣ рд╣реИ рдХрд┐ `mathjax` рдХреЗ рдкреНрд░рджрд░реНрд╢рди рддрд░реАрдХреЗ рдХреЛ `svg` рдЪрд┐рддреНрд░ рдореЗрдВ рдмрджрд▓ рджрд┐рдпрд╛ рдЬрд╛рдПред

GitHub рдкрд░ рдПрдХ рдкреНрд░реЛрдЬреЗрдХреНрдЯ `tuxu/latex2svg` рдвреВрдВрдврд╛ред

```python
from latex2svg import latex2svg
out = latex2svg(r'\( e^{i \pi} + 1 = 0 \)')
print(out['depth'])
print(out['svg'])
```

рдЪрд▓рд┐рдП рдЗрд╕реЗ рдЪрд▓рд╛рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЗрд╕рдореЗрдВ рддреНрд░реБрдЯрд┐ рдЖ рдЧрдИред

```shell
    raise RuntimeError('latex not found')
RuntimeError: latex рдирд╣реАрдВ рдорд┐рд▓рд╛
```

рдХреЛрдб рджреЗрдЦреЗрдВред

```python
    # LaTeX рдЪрд▓рд╛рдПрдВ рдФрд░ DVI рдлрд╝рд╛рдЗрд▓ рдмрдирд╛рдПрдВ
    try:
        ret = subprocess.run(shlex.split(params['latex_cmd']+' code.tex'),
                             stdout=subprocess.PIPE, stderr=subprocess.PIPE,
                             cwd=working_directory)
        ret.check_returncode()
    except FileNotFoundError:
        raise RuntimeError('latex рдирд╣реАрдВ рдорд┐рд▓рд╛')
```

рдпрд╣ рднреА `latex` рдХрдорд╛рдВрдб рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИред

рдЗрд╕реЗ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВред

```shell
brew install --cask mactex
==> Caveats
MacTex CLI рдЯреВрд▓реНрд╕ рдХреА рд╕реНрдерд╛рдкрдирд╛ рдкреНрд░рднрд╛рд╡реА рд╣реЛрдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдкрдХреЛ рдЕрдкрдиреА рдЯрд░реНрдорд┐рдирд▓ рд╡рд┐рдВрдбреЛ рдХреЛ рдкреБрдирдГ рдЖрд░рдВрдн рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред
рд╡реИрдХрд▓реНрдкрд┐рдХ рд░реВрдк рд╕реЗ, Bash рдФрд░ Zsh рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рдЪрд▓рд╛ рд╕рдХрддреЗ рд╣реИрдВ:
  eval "$(/usr/libexec/path_helper)"
==> Downloading http://mirror.ctan.org/systems/mac/mactex/mactex-20200407.pkg
==> Downloading from https://mirrors.aliyun.com/CTAN/systems/mac/mactex/mactex-20200407.pkg
######################################################################## 100.0%
рд╕рднреА рдлреЙрд░реНрдореВрд▓рд╛ рдирд┐рд░реНрднрд░рддрд╛рдПрдВ рд╕рдВрддреБрд╖реНрдЯ рд╣реИрдВред
==> Cask mactex рд╕реНрдерд╛рдкрд┐рдд рдХрд░ рд░рд╣рд╛ рд╣реИ
==> mactex рдХреЗ рд▓рд┐рдП рдЗрдВрд╕реНрдЯреЙрд▓рд░ рдЪрд▓ рд░рд╣рд╛ рд╣реИ; рдЖрдкрдХрд╛ рдкрд╛рд╕рд╡рд░реНрдб рдЖрд╡рд╢реНрдпрдХ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред
installer: рдкреИрдХреЗрдЬ рдХрд╛ рдирд╛рдо MacTeX рд╣реИ
installer: choices рдкрд░рд┐рд╡рд░реНрддрди рдлрд╝рд╛рдЗрд▓ '/private/tmp/choices20210315-4643-5884ro.xml' рд▓рд╛рдЧреВ рдХреА рдЧрдИ
installer: рдореВрд▓ рдкрде / рдкрд░ рд╕реНрдерд╛рдкрд┐рдд рдХрд░ рд░рд╣рд╛ рд╣реИ
installer: рд╕реНрдерд╛рдкрдирд╛ рд╕рдлрд▓ рд░рд╣реАред
ЁЯН║  mactex рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рд╕реНрдерд╛рдкрд┐рдд рд╣реЛ рдЧрдпрд╛ рд╣реИ!
```

рдЗрдВрд╕реНрдЯреЙрд▓ рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рдкреВрд░рд╛ рд╣реБрдЖред

```shell
% latex
рдпрд╣ pdfTeX рд╣реИ, рд╕рдВрд╕реНрдХрд░рдг 3.14159265-2.6-1.40.21 (TeX Live 2020) (рдкреВрд░реНрд╡-рд▓реЛрдбреЗрдб рдкреНрд░рд╛рд░реВрдк=latex)
 рдкреНрд░рддрд┐рдмрдВрдзрд┐рдд \write18 рд╕рдХреНрд╖рдо рд╣реИ.
**
```

```python
out = latex2svg(r'\( e^{i \pi} + 1 = 0 \)')
print(out['depth'])
print(out['svg'])
```

рдпрд╣ рдХреЛрдб LaTeX рдЧрдгрд┐рддреАрдп рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐ `\( e^{i \pi} + 1 = 0 \)` рдХреЛ SVG рдкреНрд░рд╛рд░реВрдк рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрд┐рдд рдХрд░рддрд╛ рд╣реИ рдФрд░ рдлрд┐рд░ рдкрд░рд┐рдгрд╛рдореА SVG рдХреА рдЧрд╣рд░рд╛рдИ (depth) рдФрд░ SVG рдХреЛрдб рдХреЛ рдкреНрд░рд┐рдВрдЯ рдХрд░рддрд╛ рд╣реИред

```python
svg = open('1.svg', 'w')
svg.write(out['svg'])
svg.close()
```

`svg` рдЬрдирд░реЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

рдЗрд╕рд▓рд┐рдП `mathjax` рд╕реЗ рдкреНрд░рд╛рдкреНрдд `latex` рдЯреЗрдХреНрд╕реНрдЯ рдХреЛ рд╕рднреА рдХреЛ рдЬрдирд░реЗрдЯ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВред

```python
from bs4 import BeautifulSoup
from latex2svg import latex2svg
```

```python
file = open('The Feynman Lectures on Physics Vol. I Ch. 13_ Work and Potential Energy (A).html')
content = file.read()
```

```python
soup = BeautifulSoup(content)
```

```python
mathjaxs = soup.findAll('script', {'type': 'math/tex'})
for mathjax in mathjaxs:
    print(mathjax.string)
    out = latex2svg(mathjax.string)
    print(out['svg'])
```

рджреБрд░реНрднрд╛рдЧреНрдп рд╕реЗ, рдПрдХ рддреНрд░реБрдЯрд┐ рд╣реБрдИред

```python
    raise CalledProcessError(self.returncode, self.args, self.stdout,
subprocess.CalledProcessError: рдХрдорд╛рдВрдб '['latex', '-interaction', 'nonstopmode', '-halt-on-error', 'code.tex']' рдиреЗ рдЧреИрд░-рд╢реВрдиреНрдп рдПрдЧреНрдЬрд┐рдЯ рд╕реНрдЯреЗрдЯрд╕ 1 рд▓реМрдЯрд╛рдпрд╛ред
```

рдХреМрди рд╕рд╛ рд╕реВрддреНрд░ рдЧрд▓рдд рд╣реИ?

```latex
\tfrac{1}{2}mv^2
```

## LaTeX

LaTeX рдПрдХ рдЙрдЪреНрдЪ-рдЧреБрдгрд╡рддреНрддрд╛ рд╡рд╛рд▓рд╛ рдЯрд╛рдЗрдкрд╕реЗрдЯрд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдо рд╣реИ рдЬреЛ рд╡реИрдЬреНрдЮрд╛рдирд┐рдХ рдФрд░ рддрдХрдиреАрдХреА рджрд╕реНрддрд╛рд╡реЗрдЬрд╝реЛрдВ рдХреЗ рд▓рд┐рдП рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред рдпрд╣ рдореБрдЦреНрдп рд░реВрдк рд╕реЗ рдЧрдгрд┐рддреАрдп рд╕рдореАрдХрд░рдгреЛрдВ, рддрд╛рд▓рд┐рдХрд╛рдУрдВ, рдФрд░ рдЬрдЯрд┐рд▓ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝реЛрдВ рдХреЛ рдкреНрд░рд╛рд░реВрдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред LaTeX рдХреЛ рдЖрдорддреМрд░ рдкрд░ `.tex` рдлрд╝рд╛рдЗрд▓ рдПрдХреНрд╕рдЯреЗрдВрд╢рди рдХреЗ рд╕рд╛рде рд▓рд┐рдЦрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдЗрд╕реЗ рдХрдВрдкрд╛рдЗрд▓ рдХрд░рдХреЗ PDF рдпрд╛ рдЕрдиреНрдп рдкреНрд░рд╛рд░реВрдкреЛрдВ рдореЗрдВ рдмрджрд▓рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

### LaTeX рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреНрдпреЛрдВ рдХрд░реЗрдВ?

- **рдкреЗрд╢реЗрд╡рд░ рджрд┐рдЦрдиреЗ рд╡рд╛рд▓реЗ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝**: LaTeX рджрд╕реНрддрд╛рд╡реЗрдЬрд╝реЛрдВ рдХреЛ рдкреЗрд╢реЗрд╡рд░ рдФрд░ рд╕реБрд╕рдВрдЧрдд рд░реВрдк рд╕реЗ рдкреНрд░рд╛рд░реВрдкрд┐рдд рдХрд░рддрд╛ рд╣реИред
- **рдЧрдгрд┐рддреАрдп рд╕рдореАрдХрд░рдгреЛрдВ рдХреЗ рд▓рд┐рдП рдЙрддреНрдХреГрд╖реНрдЯ рд╕рдорд░реНрдерди**: LaTeX рдореЗрдВ рдЧрдгрд┐рддреАрдп рд╕рдореАрдХрд░рдгреЛрдВ рдХреЛ рд▓рд┐рдЦрдирд╛ рдФрд░ рдкреНрд░рд╛рд░реВрдкрд┐рдд рдХрд░рдирд╛ рдЖрд╕рд╛рди рд╣реИред
- **рд╕рдВрджрд░реНрдн рдФрд░ рд╕реВрдЪреА рдкреНрд░рдмрдВрдзрди**: LaTeX рдореЗрдВ рд╕рдВрджрд░реНрднреЛрдВ, рд╕реВрдЪрд┐рдпреЛрдВ, рдФрд░ рдЕрдиреБрдХреНрд░рдордгрд┐рдХрд╛ рдХреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред
- **рдореБрдХреНрдд рд╕реНрд░реЛрдд рдФрд░ рд╡рд┐рд╕реНрддрд╛рд░ рдпреЛрдЧреНрдп**: LaTeX рдореБрдХреНрдд рд╕реНрд░реЛрдд рд╣реИ рдФрд░ рдЗрд╕реЗ рдкреИрдХреЗрдЬ рдФрд░ рд╕реНрдЯрд╛рдЗрд▓ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╡рд┐рд╕реНрддрд╛рд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

### LaTeX рдХрд╛ рдПрдХ рд╕рд░рд▓ рдЙрджрд╛рд╣рд░рдг

```latex
\documentclass{article}
\usepackage[utf8]{inputenc}

\title{LaTeX рдХрд╛ рдкрд░рд┐рдЪрдп}
\author{рдЖрдкрдХрд╛ рдирд╛рдо}
\date{\today}

\begin{document}

\maketitle

\section{рдкрд░рд┐рдЪрдп}
рдпрд╣ LaTeX рдХрд╛ рдПрдХ рд╕рд░рд▓ рдЙрджрд╛рд╣рд░рдг рд╣реИред LaTeX рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЖрдк рдкреЗрд╢реЗрд╡рд░ рджрд┐рдЦрдиреЗ рд╡рд╛рд▓реЗ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВред

\section{рдЧрдгрд┐рддреАрдп рд╕рдореАрдХрд░рдг}
LaTeX рдореЗрдВ рдЧрдгрд┐рддреАрдп рд╕рдореАрдХрд░рдг рд▓рд┐рдЦрдирд╛ рдмрд╣реБрдд рдЖрд╕рд╛рди рд╣реИред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдкрд╛рдЗрдерд╛рдЧреЛрд░рд╕ рдкреНрд░рдореЗрдп рдХреЛ рдЗрд╕ рдкреНрд░рдХрд╛рд░ рд▓рд┐рдЦрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ:

\[
a^2 + b^2 = c^2
\]

\end{document}
```

### LaTeX рдХреИрд╕реЗ рд╕реАрдЦреЗрдВ?

LaTeX рд╕реАрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдк рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:

- **Overleaf**: Overleaf рдПрдХ рдСрдирд▓рд╛рдЗрди LaTeX рд╕рдВрдкрд╛рджрдХ рд╣реИ рдЬреЛ LaTeX рд╕реАрдЦрдиреЗ рдФрд░ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрддреНрдХреГрд╖реНрдЯ рд╣реИред
- **LaTeX рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓**: рдЗрдВрдЯрд░рдиреЗрдЯ рдкрд░ рдХрдИ LaTeX рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓ рдЙрдкрд▓рдмреНрдз рд╣реИрдВ рдЬреЛ рдЖрдкрдХреЛ LaTeX рд╕реАрдЦрдиреЗ рдореЗрдВ рдорджрдж рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред
- **LaTeX рдкреБрд╕реНрддрдХреЗрдВ**: LaTeX рдкрд░ рдХрдИ рдкреБрд╕реНрддрдХреЗрдВ рдЙрдкрд▓рдмреНрдз рд╣реИрдВ рдЬреЛ рдЖрдкрдХреЛ рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЧрд╣рд░рд╛рдИ рд╕реЗ рдЬрд╛рдирдиреЗ рдореЗрдВ рдорджрдж рдХрд░ рд╕рдХрддреА рд╣реИрдВред

LaTeX рд╕реАрдЦрдирд╛ рд╢реБрд░реВ рдореЗрдВ рдереЛрдбрд╝рд╛ рдЪреБрдиреМрддреАрдкреВрд░реНрдг рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдПрдХ рдмрд╛рд░ рдЬрдм рдЖрдк рдЗрд╕реЗ рд╕рдордЭ рдЬрд╛рддреЗ рд╣реИрдВ, рддреЛ рдпрд╣ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдмрдирд╛рдиреЗ рдХрд╛ рдПрдХ рд╢рдХреНрддрд┐рд╢рд╛рд▓реА рдЙрдкрдХрд░рдг рдмрди рдЬрд╛рддрд╛ рд╣реИред

`latex` рд╕реАрдЦрдиреЗ рдЖрдЗрдПред

```latex
\documentclass[12pt]{article}
\usepackage{lingmacros}
\usepackage{tree-dvips}
\begin{document}
```

\section*{рдореЗрд░реЗ рдкреЗрдкрд░ рдХреЗ рд▓рд┐рдП рдиреЛрдЯреНрд╕}

рдЯреЙрдкрд┐рдХрд▓рд╛рдЗрдЬрд╝реЗрд╢рди рдХреЗ рдЙрджрд╛рд╣рд░рдг рд╢рд╛рдорд┐рд▓ рдХрд░рдирд╛ рди рднреВрд▓реЗрдВред  
рд╡реЗ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддреЗ рд╣реИрдВ:

{\small
\enumsentence{рд╡рд╛рдХреНрдпрд╛рддреНрдордХ рд╡рд┐рд╖рдп рд╕реЗ рд╡рд┐рд╖рдпреАрдХрд░рдг:\\ 
\shortex{7}{a John$_i$ [a & kltukl & [el & 
  {\bf l-}oltoir & er & ngii$_i$ & a Mary]]}
{ & {\bf R-}рд╕реНрдкрд╖реНрдЯ & {\sc comp} & 
  {\bf IR}.{\sc 3s}-рдкреНрдпрд╛рд░   & P & рдЙрд╕реЗ & }
{рдЬреЙрди, (рдпрд╣) рд╕реНрдкрд╖реНрдЯ рд╣реИ рдХрд┐ рдореИрд░реА рдЙрд╕реЗ рдкреНрдпрд╛рд░ рдХрд░рддреА рд╣реИред}}
}

\subsection*{рдЯреЙрдкрд┐рдХрд▓рд╛рдЗрдЬрд╝реЗрд╢рди рдХреЛ рдХреИрд╕реЗ рд╕рдВрднрд╛рд▓реЗрдВ}

рдореИрдВ рдмрд╕ рдПрдХ рдкреЗрдбрд╝ рд╕рдВрд░рдЪрдирд╛ рдорд╛рди рд▓реВрдВрдЧрд╛ рдЬреИрд╕реЗ (\ex{1})ред

{\small
\enumsentence{A$'$ рдкреНрд░рдХреНрд╖реЗрдкрдгреЛрдВ рдХреА рд╕рдВрд░рдЪрдирд╛:\\ [2ex]
\begin{tabular}[t]{cccc}
    & \node{i}{CP}\\ [2ex]
    \node{ii}{Spec} &   &\node{iii}{C$'$}\\ [2ex]
        &\node{iv}{C} & & \node{v}{SAgrP}
\end{tabular}
\nodeconnect{i}{ii}
\nodeconnect{i}{iii}
\nodeconnect{iii}{iv}
\nodeconnect{iii}{v}
}
}

\subsection*{рдордиреЛрджрд╢рд╛}

рдореВрдб рдмрджрд▓рддрд╛ рд╣реИ рдЬрдм рдХреЛрдИ рд╡рд┐рд╖рдп рд╣реЛрддрд╛ рд╣реИ, рдФрд░ рд╕рд╛рде рд╣реА рдЬрдм WH-рдЖрдВрджреЛрд▓рди рд╣реЛрддрд╛ рд╣реИред \emph{Irrealis} рд╡рд╣ рдореВрдб рд╣реИ рдЬрдм Comp рдореЗрдВ рдХреЛрдИ рдЧреИрд░-рд╡рд┐рд╖рдп рд╡рд┐рд╖рдп рдпрд╛ WH-рд╡рд╛рдХреНрдпрд╛рдВрд╢ рд╣реЛрддрд╛ рд╣реИред \emph{Realis} рд╡рд╣ рдореВрдб рд╣реИ рдЬрдм рдХреЛрдИ рд╡рд┐рд╖рдп рд╡рд┐рд╖рдп рдпрд╛ WH-рд╡рд╛рдХреНрдпрд╛рдВрд╢ рд╣реЛрддрд╛ рд╣реИред

рдпрд╣ рдПрдХ LaTeX рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдХрд╛ рдЕрдВрдд рд╣реИред рдЗрд╕реЗ рд╣рд┐рдВрджреА рдореЗрдВ рдЕрдиреБрд╡рд╛рдж рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдПрдХ рдХреЛрдб рдмреНрд▓реЙрдХ рд╣реИ рдФрд░ рдЗрд╕реЗ рдЕрдкрд░рд┐рд╡рд░реНрддрд┐рдд рдЫреЛрдбрд╝ рджреЗрдирд╛ рдЪрд╛рд╣рд┐рдПред

рдСрдирд▓рд╛рдЗрди рдкрд░ рдПрдХ рдирдореВрдирд╛ `latex` рд╕реНрд░реЛрдд рдХреЛрдб рдорд┐рд▓рд╛ред

```shell
% latex code.tex
This is pdfTeX, Version 3.14159265-2.6-1.40.21 (TeX Live 2020) (preloaded format=latex)
 restricted \write18 enabled.
entering extended mode
(./code.tex
LaTeX2e <2020-02-02> patch level 5
L3 programming layer <2020-03-06>
(/usr/local/texlive/2020/texmf-dist/tex/latex/base/article.cls
Document Class: article 2019/12/20 v1.4l Standard LaTeX document class
(/usr/local/texlive/2020/texmf-dist/tex/latex/base/size12.clo))
(/usr/local/texlive/2020/texmf-dist/tex/latex/tree-dvips/lingmacros.sty)
(/usr/local/texlive/2020/texmf-dist/tex/latex/tree-dvips/tree-dvips.sty
tree-dvips version .91 of May 16, 1995
) (/usr/local/texlive/2020/texmf-dist/tex/latex/l3backend/l3backend-dvips.def)
(./code.aux) [1] (./code.aux) )
Output written on code.dvi (1 page, 3416 bytes).
Transcript written on code.log.
```

![latex](assets/images/feynman/latex.png)

рд╕реЛрд░реНрд╕ рдХреЛрдб рдФрд░ рд░реЗрдВрдбрд░ рдХрд┐рдП рдЧрдП рдкреНрд░рднрд╛рд╡ рдХреЛ рджреЗрдЦрдХрд░, рдЖрдЗрдП рджреЗрдЦреЗрдВ рдХрд┐ рд╣рдо рдХреНрдпрд╛ рд╕реАрдЦ рд╕рдХрддреЗ рд╣реИрдВред

```latex
\begin{document}
\end{document}
```

рдЗрд╕ рддрд░рд╣ рд╕реЗ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдХреЛ рд▓рдкреЗрдЯреЗрдВред

```latex
\section*{рдореЗрд░реЗ рдкреЗрдкрд░ рдХреЗ рд▓рд┐рдП рдиреЛрдЯреНрд╕}
```

рдпрд╣ `section` рд╢реАрд░реНрд╖рдХ рдХреА рд╢реБрд░реБрдЖрдд рдХреЛ рджрд░реНрд╢рд╛рддрд╛ рд╣реИред

```latex
\subsection*{рдЯреЙрдкрд┐рдХрд▓рд╛рдЗрдЬрд╝реЗрд╢рди рдХреЛ рдХреИрд╕реЗ рд╕рдВрднрд╛рд▓реЗрдВ}
```

рдпрд╣ рдЙрдкрд╢реАрд░реНрд╖рдХ рдХреЛ рджрд░реНрд╢рд╛рддрд╛ рд╣реИред

```latex
\shortex{7}{a John$_i$ [a & kltukl & [el & 
  {\bf l-}oltoir & er & ngii$_i$ & a Mary]]}
```

(рдпрд╣ рдХреЛрдб рдмреНрд▓реЙрдХ рд╣реИ, рдЗрд╕реЗ рдЕрдиреБрд╡рд╛рджрд┐рдд рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред)

![shortex](assets/images/feynman/shortex.png)

рдпрд╣рд╛рдВ `$_i$` рдХрд╛ рдЙрдкрдпреЛрдЧ рд╕рдмрд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЛ рджрд░реНрд╢рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред `{\bf l-}` рдХрд╛ рдЙрдкрдпреЛрдЧ рдмреЛрд▓реНрдб рдЯреЗрдХреНрд╕реНрдЯ рдХреЛ рджрд░реНрд╢рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред

```latex
\enumsentence{A$'$ рдкреНрд░рдХреНрд╖реЗрдкрдг рдХреА рд╕рдВрд░рдЪрдирд╛:\\ [2ex]
\begin{tabular}[t]{cccc}
    & \node{i}{CP}\\ [2ex]
    \node{ii}{Spec} &   &\node{iii}{C$'$}\\ [2ex]
        &\node{iv}{C} & & \node{v}{SAgrP}
\end{tabular}
\nodeconnect{i}{ii}
\nodeconnect{i}{iii}
\nodeconnect{iii}{iv}
\nodeconnect{iii}{v}
}
```

<img src="/assets/images/feynman/node.png" alt="рдиреЛрдб" style="zoom:50%;" />

рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ `nodeconnect` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрдиреЗрдХреНрд╢рди рджрд┐рдЦрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред

### LaTeX рдХреЛ SVG рдореЗрдВ рдХрдирд╡рд░реНрдЯ рдХрд░рдирд╛

LaTeX рдХреЛ SVG (Scalable Vector Graphics) рдореЗрдВ рдХрдирд╡рд░реНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрдИ рддрд░реАрдХреЗ рд╣реИрдВред рдпрд╣рд╛рдВ рдПрдХ рд╕рд╛рдорд╛рдиреНрдп рд╡рд┐рдзрд┐ рджреА рдЧрдИ рд╣реИ:

1. **LaTeX рдлрд╝рд╛рдЗрд▓ рддреИрдпрд╛рд░ рдХрд░реЗрдВ**: рдкрд╣рд▓реЗ рдЕрдкрдиреА LaTeX рдлрд╝рд╛рдЗрд▓ рддреИрдпрд╛рд░ рдХрд░реЗрдВред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, `example.tex` рдирд╛рдо рдХреА рдПрдХ рдлрд╝рд╛рдЗрд▓ рдмрдирд╛рдПрдВ рдФрд░ рдЙрд╕рдореЗрдВ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛрдб рдбрд╛рд▓реЗрдВ:

    ```latex
    \documentclass{standalone}
    \begin{document}
    Hello, \LaTeX!
    \end{document}
    ```

2. **LaTeX рдХреЛ PDF рдореЗрдВ рдХрдирд╡рд░реНрдЯ рдХрд░реЗрдВ**: LaTeX рдлрд╝рд╛рдЗрд▓ рдХреЛ PDF рдореЗрдВ рдХрдирд╡рд░реНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП `pdflatex` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ:

    ```bash
    pdflatex example.tex
    ```

    рдЗрд╕рд╕реЗ `example.pdf` рдлрд╝рд╛рдЗрд▓ рдмрди рдЬрд╛рдПрдЧреАред

3. **PDF рдХреЛ SVG рдореЗрдВ рдХрдирд╡рд░реНрдЯ рдХрд░реЗрдВ**: PDF рдлрд╝рд╛рдЗрд▓ рдХреЛ SVG рдореЗрдВ рдХрдирд╡рд░реНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП `pdf2svg` рдЯреВрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ:

    ```bash
    pdf2svg example.pdf example.svg
    ```

    рдЗрд╕рд╕реЗ `example.svg` рдлрд╝рд╛рдЗрд▓ рдмрди рдЬрд╛рдПрдЧреАред

4. **SVG рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ**: рдЕрдм рдЖрдк `example.svg` рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдЗрд╕реЗ рдХрд┐рд╕реА рднреА рд╡реЗрдм рдкреЗрдЬ рдпрд╛ рдбреЙрдХреНрдпреВрдореЗрдВрдЯ рдореЗрдВ рдПрдореНрдмреЗрдб рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

#### рд╡реИрдХрд▓реНрдкрд┐рдХ рд╡рд┐рдзрд┐: `dvisvgm` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛

рдпрджрд┐ рдЖрдк рд╕реАрдзреЗ LaTeX рдХреЛ SVG рдореЗрдВ рдХрдирд╡рд░реНрдЯ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ рдЖрдк `dvisvgm` рдЯреВрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:

1. **LaTeX рдХреЛ DVI рдореЗрдВ рдХрдирд╡рд░реНрдЯ рдХрд░реЗрдВ**:

    ```bash
    latex example.tex
    ```

    рдЗрд╕рд╕реЗ `example.dvi` рдлрд╝рд╛рдЗрд▓ рдмрди рдЬрд╛рдПрдЧреАред

2. **DVI рдХреЛ SVG рдореЗрдВ рдХрдирд╡рд░реНрдЯ рдХрд░реЗрдВ**:

    ```bash
    dvisvgm example.dvi
    ```

    рдЗрд╕рд╕реЗ `example.svg` рдлрд╝рд╛рдЗрд▓ рдмрди рдЬрд╛рдПрдЧреАред

рдЗрди рд╡рд┐рдзрд┐рдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЖрдк рдЖрд╕рд╛рдиреА рд╕реЗ LaTeX рдХреЛ SVG рдореЗрдВ рдХрдирд╡рд░реНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдЬрд╛рд░реА рд░рдЦреЗрдВред

```latex
\documentclass[16pt]{article}
\usepackage{amsmath}
\begin{document}
```

\[\tfrac{1}{2}mv^2\]

```\end{document}
```

<img src="/assets/images/feynman/frac.png" alt="frac" style="zoom:50%;" />

рдЗрд╕реЗ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдкреНрд░рд╕реНрддреБрдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рдХреЛрдб рдореЗрдВ рдЗрд╕реЗ рдкреНрд░рд╕реНрддреБрдд рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рд╕рдВрднрд╡рддрдГ `\usepackage{amsmath}` рдХреЛ рдЬреЛрдбрд╝рд╛ рдирд╣реАрдВ рдЧрдпрд╛ рд╣реИред

```latex
\documentclass[12pt,preview]{standalone}
```

```latex
\usepackage[utf8x]{inputenc}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{newtxtext}
\usepackage[libertine]{newtxmath}
```

рдпрд╣ LaTeX рдХреЛрдб рд╣реИ рдЬреЛ рд╡рд┐рднрд┐рдиреНрди рдкреИрдХреЗрдЬреЛрдВ рдХреЛ рд▓реЛрдб рдХрд░рддрд╛ рд╣реИред рдЗрди рдкреИрдХреЗрдЬреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдЧрдгрд┐рддреАрдп рд╕рдореАрдХрд░рдгреЛрдВ, рдлреЛрдВрдЯреНрд╕ рдФрд░ рдЕрдиреНрдп рдкреНрд░рдХрд╛рд░ рдХреЗ рдЯреЗрдХреНрд╕реНрдЯ рдлреЙрд░реНрдореЗрдЯрд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдЗрд╕реЗ рд╣рд┐рдВрджреА рдореЗрдВ рдЕрдиреБрд╡рд╛рдж рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдХреЛрдб рд╣реИ рдФрд░ рдЗрд╕реЗ рд╡реИрд╕реЗ рд╣реА рдЫреЛрдбрд╝ рджреЗрдирд╛ рдЪрд╛рд╣рд┐рдПред

```latex
\begin{document}
\begin{preview}
\tfrac{1}{2}mv^2
\end{preview}
\end{document}
```

```shell
! Missing $ inserted.
<inserted text>
                $
l.12 \tfrac{1}{2}
                 mv^2
```

(рдпрд╣ рдПрдХ LaTeX рддреНрд░реБрдЯрд┐ рд╕рдВрджреЗрд╢ рд╣реИ, рдЬрд┐рд╕рдХрд╛ рдЕрдиреБрд╡рд╛рдж рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИред)

рдРрд╕рд╛ рдХрд░рдиреЗ рд╕реЗ рдЧрд▓рддреА рд╣реЛ рдЧрдИред рдЗрд╕реЗ рдЗрд╕ рддрд░рд╣ рдмрджрд▓рдиреЗ рд╕реЗ рдареАрдХ рд╣реЛ рдЬрд╛рдПрдЧрд╛ред

```latex
\[\tfrac{1}{2}mv^2\]
```

рдпрд╣ LaTeX рдХреЛрдб рдЧрддрд┐рдЬ рдКрд░реНрдЬрд╛ (Kinetic Energy) рдХреЗ рд╕реВрддреНрд░ рдХреЛ рджрд░реНрд╢рд╛рддрд╛ рд╣реИред рдЗрд╕реЗ рд╣рд┐рдВрджреА рдореЗрдВ рдЗрд╕ рдкреНрд░рдХрд╛рд░ рд╕рдордЭрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ:

\[
\text{рдЧрддрд┐рдЬ рдКрд░реНрдЬрд╛} = \tfrac{1}{2} \times \text{рджреНрд░рд╡реНрдпрдорд╛рди} \times \text{рд╡реЗрдЧ}^2
\]

рдпрд╣рд╛рдБ:
- \( m \) рджреНрд░рд╡реНрдпрдорд╛рди (mass) рдХреЛ рджрд░реНрд╢рд╛рддрд╛ рд╣реИред
- \( v \) рд╡реЗрдЧ (velocity) рдХреЛ рджрд░реНрд╢рд╛рддрд╛ рд╣реИред
- \( \tfrac{1}{2}mv^2 \) рдЧрддрд┐рдЬ рдКрд░реНрдЬрд╛ рдХрд╛ рд╕реВрддреНрд░ рд╣реИред

рд╡рд┐рднрд┐рдиреНрди рдкреНрд░рдХрд╛рд░ рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВред

```python
from bs4 import BeautifulSoup
from latex2svg import latex2svg
```

```python
file = open('The Feynman Lectures on Physics Vol. I Ch. 13_ Work and Potential Energy (A).html')
content = file.read()
```

soup = BeautifulSoup(content, features="lxml")

```python
mathjaxs = soup.findAll('script', {'type': 'math/tex'})
for mathjax in mathjaxs:
    print(mathjax.string)
    wrap = '$' + mathjax.string + '$'
    # if 'frac' in mathjax.string:
    #     wrap = '$' + mathjax.string + '$'
    if 'FLP' in mathjax.string:
        continue
    elif 'Fig' in mathjax.string:
        continue
    elif 'eps' in mathjax.string:
        continue
    out = latex2svg(wrap)
    # print(out)
    node = BeautifulSoup(out['svg'], features="lxml")
    svg = node.find('svg')
    mathjax.insert_after(svg)
    # print(out['svg'])
    # break
    # mathjax.replaceWith(out['svg'])    
    
    # print(dir(mathjax))
    # break
    
    # out = latex2svg(wrap)    
    # print(out['svg'])
```

```python
# print(len(soup.contents))
    
output_file = open('out.html', 'w')
output_file.write(soup.prettify())
output_file.close()
# print(soup.contents)
```

```python
# out = latex2svg(r'\( e^{i \pi} + 1 = 0 \)')
# print(out['depth'])
# print(out['svg'])
```

```python
# svg = open('1.svg', 'w')
# svg.write(out['svg'])
# svg.close()
```

рдпрд╣ рдХреЛрдб рдПрдХ SVG рдлрд╝рд╛рдЗрд▓ рдХреЛ рд▓рд┐рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред `open('1.svg', 'w')` рдлрд╝рдВрдХреНрд╢рди `1.svg` рдирд╛рдо рдХреА рдлрд╝рд╛рдЗрд▓ рдХреЛ рд▓рд┐рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдЦреЛрд▓рддрд╛ рд╣реИред `svg.write(out['svg'])` рдлрд╝рдВрдХреНрд╢рди `out['svg']` рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдбреЗрдЯрд╛ рдХреЛ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рд▓рд┐рдЦрддрд╛ рд╣реИред рдЕрдВрдд рдореЗрдВ, `svg.close()` рдлрд╝рдВрдХреНрд╢рди рдлрд╝рд╛рдЗрд▓ рдХреЛ рдмрдВрдж рдХрд░ рджреЗрддрд╛ рд╣реИред

рдпрд╣ рдПрдХ рдХреЛрдб рдмреНрд▓реЙрдХ рд╣реИ, рдЗрд╕реЗ рдЕрдиреБрд╡рд╛рджрд┐рдд рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред

рдореИрдВ рдпрд╣ рд╕рдм рдХреНрдпрд╛ рдЬрд╛рдБрдЪ рд░рд╣рд╛ рд╣реВрдБред

```python
    if 'FLP' in mathjax.string:
        continue
    elif 'Fig' in mathjax.string:
        continue
    elif 'eps' in mathjax.string:
        continue
```

рдпрд╣рд╛рдВ рдЬрдм `latex` рд╕реНрд░реЛрдд рдХреЛрдб рдореЗрдВ `FLP`, `Fig`, `eps` рдХреЛ рдкрд╛рд░реНрд╕ рдХрд░рддреЗ рд╕рдордп, рд░реВрдкрд╛рдВрддрд░рдг рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рддреНрд░реБрдЯрд┐ рд╣реЛрддреА рд╣реИред

рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, `HTML рдореЗрдВ`, рдРрд╕рд╛ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ:

```html
<script type="math/tex" id="MathJax-Element-11">\FLPF\cdot\FLPv</script>
```

рдкрд╛рд░реНрд╕ рдХрд░рдХреЗ рдкреНрд░рд╛рдкреНрдд рдХрд┐рдпрд╛:

```latex
\FLPF\cdot\FLPv
```

рдпрд╣ LaTeX рдХреЛрдб рдПрдХ рд╡реЗрдХреНрдЯрд░ рдбреЙрдЯ рдкреНрд░реЛрдбрдХреНрдЯ рдХреЛ рджрд░реНрд╢рд╛рддрд╛ рд╣реИ, рдЬрд╣рд╛рдВ `\FLPF` рдФрд░ `\FLPv` рджреЛ рд╡реЗрдХреНрдЯрд░ рд╣реИрдВред рдЗрд╕реЗ рд╣рд┐рдВрджреА рдореЗрдВ "рд╡реЗрдХреНрдЯрд░ F рдФрд░ рд╡реЗрдХреНрдЯрд░ v рдХрд╛ рдбреЙрдЯ рдкреНрд░реЛрдбрдХреНрдЯ" рдХрд╣рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

рдЬрдм рдХреЛрдб рдореЗрдВ рд░реВрдкрд╛рдВрддрд░рдг рдХрд░рддреЗ рд╕рдордп рддреНрд░реБрдЯрд┐ рд╣реЛрддреА рд╣реИред рдпрд╛рдиреА, `latex2svg.py` рдореЗрдВ рддреНрд░реБрдЯрд┐ рд╣реЛрддреА рд╣реИред рдпрд╣рд╛рдВ `latex` рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд░реВрдкрд╛рдВрддрд░рдг рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред

`code.tex`:

```latex
\documentclass[12pt,preview]{standalone}
```

```latex
\usepackage[utf8x]{inputenc}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{newtxtext}
\usepackage[libertine]{newtxmath}
```

\begin{document}
\begin{preview}
\begin{equation}
    \FLPF\cdot\FLPv
\end{equation}
\end{preview}
\end{document}
```

```shell
$latex code.tex
! рдЕрдкрд░рд┐рднрд╛рд╖рд┐рдд рдирд┐рдпрдВрддреНрд░рдг рдЕрдиреБрдХреНрд░рдоред
l.13     \FLPF
              \cdot\FLPv
?
```

рдпрд╣ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдХреНрдпрд╛ рд╕рдорд╕реНрдпрд╛ рдереАред рдореИрдВрдиреЗ рдмрд╛рдж рдореЗрдВ `html` рдореЗрдВ рдЗрд╕ рдХреЛрдб рдкрд░ рдзреНрдпрд╛рди рджрд┐рдпрд╛ред

```html
<script type="text/x-mathjax-config;executed=true">
      MathJax.Hub.Config({
        TeX: {
          Macros: {
            FLPvec: ["\\boldsymbol{#1}", 1], Figvec: ["\\mathbf{#1}", 1], FLPC: ["\\FLPvec{C}", 0], FLPF: ["\\FLPvec{F}", 0], FLPa: ["\\FLPvec{a}", 0], FLPb: ["\\FLPvec{b}", 0], FLPr: ["\\FLPvec{r}", 0], FLPs: ["\\FLPvec{s}", 0], FLPv: ["\\FLPvec{v}", 0], ddt: ["\\frac{d#1}{d#2}", 2], epsO: ["\\epsilon_0", 0], FigC: ["\\Figvec{C}", 0]
          }
        }
      });
</script>
```

рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдЬрдм рд╡реЗрдмрдкреЗрдЬ рд░реЗрдВрдбрд░ рд╣реЛ рд░рд╣рд╛ рд╣реЛрддрд╛ рд╣реИ, рддреЛ `MathJax` рдХреЛ рдореИрдХреНрд░реЛрдЬрд╝ рд╕реЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдЗрд╕рд▓рд┐рдП рд╣рдорд╛рд░реЗ `latex` рдХрдиреНрд╡рд░реНрдЬрд╝рди рд╕реЛрд░реНрд╕ рдХреЛрдб рдореЗрдВ рднреА рдЗрдиреНрд╣реЗрдВ рдЬреЛрдбрд╝рд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред рдЪрд▓рд┐рдП рдЗрдиреНрд╣реЗрдВ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВред

```latex
\documentclass[12pt,preview]{standalone}
```

```latex
\usepackage[utf8x]{inputenc}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{newtxtext}
\usepackage[libertine]{newtxmath}
```

рдпрд╣ LaTeX рдХреЛрдб рд╣реИ рдЬреЛ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдореЗрдВ рд╡рд┐рднрд┐рдиреНрди рдкреИрдХреЗрдЬреЛрдВ рдХреЛ рд╢рд╛рдорд┐рд▓ рдХрд░рддрд╛ рд╣реИред рдЗрди рдкреИрдХреЗрдЬреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдЧрдгрд┐рддреАрдп рд╕рдореАрдХрд░рдгреЛрдВ, рдлрд╝реЙрдиреНрдЯреНрд╕, рдФрд░ рдЕрдиреНрдп рдкреНрд░рдХрд╛рд░ рдХреЗ рдЯреЗрдХреНрд╕реНрдЯ рдХреЛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдЗрд╕реЗ рд╣рд┐рдВрджреА рдореЗрдВ рдЕрдиреБрд╡рд╛рдж рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдХреЛрдб рд╣реИ рдФрд░ рдЗрд╕реЗ рд╡реИрд╕реЗ рд╣реА рд░рдЦрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред

\newcommand{\FLPvec}[1]{\boldsymbol{#1}}
\newcommand{\Figvec}[1]{\mathbf{#1}}
\newcommand{\FLPC}{\FLPvec{C}}
\newcommand{\FLPF}{\FLPvec{F}}
\newcommand{\FLPa}{\FLPvec{a}}
\newcommand{\FLPb}{\FLPvec{a}}
\newcommand{\FLPr}{\FLPvec{r}}
\newcommand{\FLPs}{\FLPvec{s}}
\newcommand{\FLPv}{\FLPvec{v}}
\newcommand{\ddt}[2]{\frac{d#1}{d#2}}
\newcommand{\epsO}{\epsilon_0}
\newcommand{\FigC}{\Figvec{C}}
\begin{document}
\begin{preview}
\begin{equation}
    \FLPF\cdot\FLPv
\end{equation}
\end{preview}
\end{document}
```

рдпрд╣ рд╕рд╣реА рд╣реИред

![fv1](assets/images/feynman/fv1.png)

### рдХреЛрдб рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг

рдЖрдЗрдП рдЕрдВрддрд┐рдо рдХреЛрдб рдХреЛ рджреЗрдЦреЗрдВред

```python
import subprocess
from bs4 import BeautifulSoup
from latex2svg import latex2svg
```

рдпрд╣ рдХреЛрдб Python рдореЗрдВ рд▓рд┐рдЦрд╛ рдЧрдпрд╛ рд╣реИ рдФрд░ рдЗрд╕рдореЗрдВ рддреАрди рдореЙрдбреНрдпреВрд▓реНрд╕ рдХреЛ рдЗрдореНрдкреЛрд░реНрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ:

1. `subprocess`: рдпрд╣ рдореЙрдбреНрдпреВрд▓ рдирдП рдкреНрд░рдХреНрд░рд┐рдпрд╛рдПрдВ рдмрдирд╛рдиреЗ, рдЙрдирд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ, рдФрд░ рдЙрдирдХреЗ рдЗрдирдкреБрдЯ/рдЖрдЙрдЯрдкреБрдЯ/рдПрд░рд░ рдкрд╛рдЗрдкреНрд╕ рдХреЛ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред

2. `BeautifulSoup` (bs4 рд╕реЗ): рдпрд╣ рдПрдХ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рд╣реИ рдЬреЛ HTML рдФрд░ XML рджрд╕реНрддрд╛рд╡реЗрдЬрд╝реЛрдВ рдХреЛ рдкрд╛рд░реНрд╕ рдХрд░рдиреЗ рдФрд░ рдЙрдирд╕реЗ рдбреЗрдЯрд╛ рдирд┐рдХрд╛рд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛рддреА рд╣реИред

3. `latex2svg`: рдпрд╣ рдПрдХ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рд╣реИ рдЬреЛ LaTeX рдХреЛрдб рдХреЛ SVG (рд╕реНрдХреЗрд▓реЗрдмрд▓ рд╡реЗрдХреНрдЯрд░ рдЧреНрд░рд╛рдлрд┐рдХреНрд╕) рдореЗрдВ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛рддреА рд╣реИред

```python
def clean_mathjax(soup, name, cls):
    previews = soup.findAll(name, {'class': cls})
    for preview in previews:
        preview.decompose()
        
def clean_script(soup):
    scripts = soup.findAll('script')
    for s in scripts:
        s.decompose()    
```

рдпрд╣ рдХреЛрдб рджреЛ рдлрд╝рдВрдХреНрд╢рдиреНрд╕ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддрд╛ рд╣реИ:

1. **clean_mathjax(soup, name, cls)**: рдпрд╣ рдлрд╝рдВрдХреНрд╢рди `soup` рдСрдмреНрдЬреЗрдХреНрдЯ рдореЗрдВ рдЙрди рд╕рднреА рдПрд▓рд┐рдореЗрдВрдЯреНрд╕ рдХреЛ рдвреВрдВрдврддрд╛ рд╣реИ рдЬрд┐рдирдХрд╛ рдирд╛рдо `name` рд╣реИ рдФрд░ рдЬрд┐рдирдХреА рдХреНрд▓рд╛рд╕ `cls` рд╣реИред рдлрд┐рд░ рдпрд╣ рдЙрди рд╕рднреА рдПрд▓рд┐рдореЗрдВрдЯреНрд╕ рдХреЛ рд╣рдЯрд╛ рджреЗрддрд╛ рд╣реИред

2. **clean_script(soup)**: рдпрд╣ рдлрд╝рдВрдХреНрд╢рди `soup` рдСрдмреНрдЬреЗрдХреНрдЯ рдореЗрдВ рд╕рднреА `<script>` рдЯреИрдЧреНрд╕ рдХреЛ рдвреВрдВрдврддрд╛ рд╣реИ рдФрд░ рдЙрдиреНрд╣реЗрдВ рд╣рдЯрд╛ рджреЗрддрд╛ рд╣реИред

рдЗрди рдлрд╝рдВрдХреНрд╢рдиреНрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ HTML рдбреЙрдХреНрдпреВрдореЗрдВрдЯ рд╕реЗ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдПрд▓рд┐рдореЗрдВрдЯреНрд╕ рдХреЛ рд╕рд╛рдлрд╝ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред

```python
def wrap_latex(mathjax, equation = False):
    wrap = ''
    if equation:
        wrap = mathjax.string
    else:
        wrap = '$' + mathjax.string + '$'
    wrap = wrap.replace('label', 'tag')
    return wrap
 
def wrap_svg(svg, equation):
    if equation:
        p = BeautifulSoup(f'<div style="text-align:center;"></div>', features="lxml")
        p.div.append(svg)
        return p.div
    else:
        return svg
```

```python
def to_svg(mathjaxs, equation=False):
    if equation:
        svg_prefix = 'eq_'
    else:
        svg_prefix = 'in_'
    i = 0
    for mathjax in mathjaxs:     
        print(mathjax.string)
        wrap = wrap_latex(mathjax, equation=equation)   
        out = {}
        try:
            out = latex2svg(wrap)   
        except subprocess.CalledProcessError as err:
            raise err      
            
        f = open(f'svgs/{svg_prefix}{i}.svg', 'w')
        f.write(out['svg'])
        f.close()
        
        node = BeautifulSoup('<img>', features="lxml")
        img = node.find('img')
        img.attrs['src'] = f'./svgs/{svg_prefix}{i}.svg'
        img.attrs['style'] = 'vertical-align: middle; margin: 0.5em 0;'
        
        p = wrap_svg(img, equation)
        mathjax.insert_after(p)
        i +=1
```

рдпрд╣ рдлрд╝рдВрдХреНрд╢рди `to_svg` MathJax рд╕реНрдЯреНрд░рд┐рдВрдЧреНрд╕ рдХреЛ SVG рдЗрдореЗрдЬ рдореЗрдВ рдмрджрд▓рддрд╛ рд╣реИ рдФрд░ рдЙрдиреНрд╣реЗрдВ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЗ рд░реВрдк рдореЗрдВ рд╕рд╣реЗрдЬрддрд╛ рд╣реИред рдпрд╣рд╛рдВ рдмрддрд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ рдХрд┐ рдпрд╣ рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ:

1. **рдкреИрд░рд╛рдореАрдЯрд░реНрд╕**:
   - `mathjaxs`: MathJax рд╕реНрдЯреНрд░рд┐рдВрдЧреНрд╕ рдХреА рдПрдХ рд╕реВрдЪреАред
   - `equation`: рдПрдХ рдмреВрд▓рд┐рдпрди рдлреНрд▓реИрдЧ рдЬреЛ рдпрд╣ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдХреНрдпрд╛ рдпрд╣ рдПрдХ рд╕рдореАрдХрд░рдг рд╣реИ рдпрд╛ рдЗрдирд▓рд╛рдЗрди рдореИрдеред

2. **SVG рдкреНрд░реАрдлрд╝рд┐рдХреНрд╕**:
   - рдпрджрд┐ `equation` рд╕рд╣реА рд╣реИ, рддреЛ SVG рдлрд╝рд╛рдЗрд▓реЛрдВ рдХрд╛ рдкреНрд░реАрдлрд╝рд┐рдХреНрд╕ `eq_` рд╣реЛрдЧрд╛ред
   - рдЕрдиреНрдпрдерд╛, рдпрд╣ `in_` рд╣реЛрдЧрд╛ред

3. **рд▓реВрдк**:
   - рдкреНрд░рддреНрдпреЗрдХ MathJax рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХреЗ рд▓рд┐рдП, рдЗрд╕реЗ LaTeX рдореЗрдВ рд▓рдкреЗрдЯрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдлрд┐рд░ `latex2svg` рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ SVG рдореЗрдВ рдмрджрд▓рд╛ рдЬрд╛рддрд╛ рд╣реИред
   - рдпрджрд┐ рдХреЛрдИ рддреНрд░реБрдЯрд┐ рд╣реЛрддреА рд╣реИ, рддреЛ рдЗрд╕реЗ рдЙрдард╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдкреНрд░реЛрдЧреНрд░рд╛рдо рд░реЛрдХ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред

4. **рдлрд╝рд╛рдЗрд▓ рд╕рд╣реЗрдЬрдирд╛**:
   - SVG рдЖрдЙрдЯрдкреБрдЯ рдХреЛ рдПрдХ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рд╕рд╣реЗрдЬрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрд┐рд╕рдХрд╛ рдирд╛рдо `svgs/{svg_prefix}{i}.svg` рд╣реЛрддрд╛ рд╣реИред

5. **HTML рдЗрдореЗрдЬ рдЯреИрдЧ**:
   - рдПрдХ `img` рдЯреИрдЧ рдмрдирд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдЙрд╕рдХрд╛ `src` рдПрдЯреНрд░рд┐рдмреНрдпреВрдЯ SVG рдлрд╝рд╛рдЗрд▓ рдХреЗ рдкрде рдкрд░ рд╕реЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред
   - `style` рдПрдЯреНрд░рд┐рдмреНрдпреВрдЯ рдХреЛ рдЗрдореЗрдЬ рдХреЛ рд╕реЗрдВрдЯрд░ рдХрд░рдиреЗ рдФрд░ рдорд╛рд░реНрдЬрд┐рди рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП рд╕реЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред

6. **HTML рдореЗрдВ рд╕рдореНрдорд┐рд▓рд┐рдд рдХрд░рдирд╛**:
   - `img` рдЯреИрдЧ рдХреЛ рдПрдХ `p` рдЯреИрдЧ рдореЗрдВ рд▓рдкреЗрдЯрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдЗрд╕реЗ рдореВрд▓ MathJax рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХреЗ рдмрд╛рдж рд╕рдореНрдорд┐рд▓рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред

7. **рдЗрдВрдбреЗрдХреНрд╕ рдмрдврд╝рд╛рдирд╛**:
   - рдкреНрд░рддреНрдпреЗрдХ MathJax рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдЗрдВрдбреЗрдХреНрд╕ `i` рдХреЛ 1 рд╕реЗ рдмрдврд╝рд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рддрд╛рдХрд┐ рдЕрдЧрд▓реА SVG рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдирд╛рдо рдЕрд▓рдЧ рд╣реЛред

```python
def main():    
    file = open('The Feynman Lectures on Physics Vol. I Ch. 13_ Work and Potential Energy (A).html')
    content = file.read()
    
    soup = BeautifulSoup(content, features="lxml")
    clean_mathjax(soup, 'span', 'MathJax')
    clean_mathjax(soup, 'div', 'MathJax_Display')
    clean_mathjax(soup, 'span', 'MathJax_Preview')
    
    mathjaxs = soup.findAll('script', {'type': 'math/tex'})
    to_svg(mathjaxs, equation=False)
    
    mathjaxs = soup.findAll('script', {'type': 'math/tex; mode=display'})   
    to_svg(mathjaxs, equation=True)
    
    clean_script(soup)
    
    output_file = open('out.html', 'w')
    output_file.write(soup.prettify())
    output_file.close()    
```

рдореБрдЦреНрдп()
```

рдЬрдм рд╣рдо рдкреВрд░реА рдИ-рдмреБрдХ рдХреЛ рдХрдиреНрд╡рд░реНрдЯ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ рдкрд╣рд▓реЗ рдПрдХ рдкреЗрдЬ рд╕реЗ рд╢реБрд░реБрдЖрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

```python
    file = open('The Feynman Lectures on Physics Vol. I Ch. 13_ Work and Potential Energy (A).html')
    content = file.read()
```

рдпрд╣рд╛рдВ рдПрдХ рдкреЗрдЬ рдбрд╛рдЙрдирд▓реЛрдб рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред

`MathJax` рдмрд╣реБрдд рд╕рд╛рд░реЗ `div` рдФрд░ `span` рдЙрддреНрдкрдиреНрди рдХрд░рддрд╛ рд╣реИред рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП `T+U=const`ред MathJax рдЗрд╕реЗ рдЗрд╕ рддрд░рд╣ рд╕реЗ рдЙрддреНрдкрдиреНрди рдХрд░рддрд╛ рд╣реИред

```html
<span class="MathJax">T</span>
<span class="MathJax">+</span>
<span class="MathJax">U</span>
<span class="MathJax">=</span>
<span class="MathJax">const</span>
```

(рдпрд╣ рдХреЛрдб HTML рдореЗрдВ MathJax рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЧрдгрд┐рддреАрдп рд╕рдореАрдХрд░рдг рдХреЛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рддрд╛ рд╣реИред рдЗрд╕реЗ рдЕрдиреБрд╡рд╛рдж рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдХреЛрдб рд╣реИ рдФрд░ рдЗрд╕рдореЗрдВ рдЧрдгрд┐рддреАрдп рдЪрд░ рдФрд░ рд╕рдВрдХреЗрдд рд╢рд╛рдорд┐рд▓ рд╣реИрдВ рдЬреЛ рд╕рд╛рд░реНрд╡рднреМрдорд┐рдХ рд╣реИрдВред)

рдпреЗ рдмрд╣реБрдд рдкрд░реЗрд╢рд╛рди рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рд╣реИрдВ рдФрд░ рд╣рдорд╛рд░реЗ рдЯреЗрдХреНрд╕реНрдЯ рдХреЛ рднреА рдкреНрд░рднрд╛рд╡рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдХреНрдпреЛрдВрдХрд┐ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА `svg` рд╣реИ, рдЗрдирдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИред

```python
def clean_mathjax(soup, name, cls):
    previews = soup.findAll(name, {'class': cls})
    for preview in previews:
        preview.decompose()
```

рдпрд╣ рдХреЛрдб рдПрдХ HTML рд╕реВрдк (soup) рдСрдмреНрдЬреЗрдХреНрдЯ рдореЗрдВ рд╕реЗ MathJax рдкреНрд░реАрд╡реНрдпреВ рдХреЛ рд╣рдЯрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд╣реИред `soup.findAll` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ, рдпрд╣ рд╕рднреА рдПрд▓рд┐рдореЗрдВрдЯреНрд╕ рдХреЛ рдвреВрдВрдврддрд╛ рд╣реИ рдЬреЛ рджрд┐рдП рдЧрдП рдирд╛рдо (`name`) рдФрд░ рдХреНрд▓рд╛рд╕ (`cls`) рд╕реЗ рдореЗрд▓ рдЦрд╛рддреЗ рд╣реИрдВред рдлрд┐рд░, `decompose()` рдореЗрдердб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЗрди рдПрд▓рд┐рдореЗрдВрдЯреНрд╕ рдХреЛ рд╕реВрдк рд╕реЗ рд╣рдЯрд╛ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред

    clean_mathjax(soup, 'span', 'MathJax')
    clean_mathjax(soup, 'div', 'MathJax_Display')
    clean_mathjax(soup, 'span', 'MathJax_Preview')
```

рдЙрди рд╕рднреА рдХреЛ рд╣рдЯрд╛ рджреЗрдВред

```python
    mathjaxs = soup.findAll('script', {'type': 'math/tex'})
    to_svg(mathjaxs, equation=False)
    
    mathjaxs = soup.findAll('script', {'type': 'math/tex; mode=display'})   
    to_svg(mathjaxs, equation=True)
```

рдпрд╣рд╛рдВ рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ `script` рджреЛ рдкреНрд░рдХрд╛рд░ рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рд╣реИред

```latex
m(dv/dt)=F
```

(рдпрд╣ рд╕рдореАрдХрд░рдг рдиреНрдпреВрдЯрди рдХреЗ рджреНрд╡рд┐рддреАрдп рдирд┐рдпрдо рдХреЛ рджрд░реНрд╢рд╛рддрд╛ рд╣реИ, рдЬрд╣рд╛рдБ \( m \) рджреНрд░рд╡реНрдпрдорд╛рди рд╣реИ, \( v \) рд╡реЗрдЧ рд╣реИ, \( t \) рд╕рдордп рд╣реИ, рдФрд░ \( F \) рдмрд▓ рд╣реИред рдЗрд╕реЗ рд╣рд┐рдВрджреА рдореЗрдВ рдЗрд╕ рдкреНрд░рдХрд╛рд░ рд╕рдордЭрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ: "рджреНрд░рд╡реНрдпрдорд╛рди рдФрд░ рд╡реЗрдЧ рдХреЗ рдкрд░рд┐рд╡рд░реНрддрди рдХреА рджрд░ рдХрд╛ рдЧреБрдгрдирдлрд▓ рдмрд▓ рдХреЗ рдмрд░рд╛рдмрд░ рд╣реЛрддрд╛ рд╣реИред")

рдпрд╣ рдЗрдирд▓рд╛рдЗрди рд░реВрдк рд╣реИред

```latex
\begin{equation}
\underset{\text{K.E.}}{\tfrac{1}{2}mv^2}+
\underset{\text{P.E.}}{\vphantom{\tfrac{1}{2}}mgh}=\text{const},\notag
```

рдпрд╣ рдкреИрд░рд╛рдЧреНрд░рд╛рдл рдХреЗ рд░реВрдк рдореЗрдВ рд╣реИред

рдЬрдм рдЗрдирд▓рд╛рдЗрди рдлреЙрд░реНрдо рдореЗрдВ рд╣реЛрддрд╛ рд╣реИ, рддреЛ рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐ рдХреЗ рджреЛрдиреЛрдВ рдУрд░ `$` рдпрд╛ `[]` рдЬреЛрдбрд╝рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реЛрддрд╛ рд╣реИред рдЕрдиреНрдпрдерд╛, рддреНрд░реБрдЯрд┐ рд╣реЛ рд╕рдХрддреА рд╣реИред

```latex
\begin{document}
\begin{preview}
\tfrac{1}{2}mv^2
\end{preview}
\end{document}
```

(рдзреНрдпрд╛рди рджреЗрдВ: рдХреЛрдб рдмреНрд▓реЙрдХ рдХреЛ рдЕрдиреБрд╡рд╛рджрд┐рдд рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ LaTeX рдХреЛрдб рд╣реИ, рдЬреЛ рдПрдХ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рднрд╛рд╖рд╛ рд╣реИ рдФрд░ рдЗрд╕реЗ рдЕрдиреБрд╡рд╛рджрд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИред)

```shell
! $ рдбрд╛рд▓рд╛ рдЧрдпрд╛ рд▓рд╛рдкрддрд╛ рд╣реИред
<рдбрд╛рд▓рд╛ рдЧрдпрд╛ рдкрд╛рда>
                $
l.26 \tfrac{1}{2}
                 mv^2
```

рдЗрд╕реЗ рдЗрд╕ рддрд░рд╣ рдмрджрд▓рдирд╛ рд╣реЛрдЧрд╛:

```latex
\begin{document}
\begin{preview}
$\tfrac{1}{2}mv^2$
\end{preview}
\end{document}
```

(рдпрд╣ рдХреЛрдб LaTeX рдореЗрдВ рдЧрддрд┐рдЬ рдКрд░реНрдЬрд╛ рдХреЗ рд╕реВрддреНрд░ рдХреЛ рджрд░реНрд╢рд╛рддрд╛ рд╣реИ, рдЬрд┐рд╕реЗ рд╣рд┐рдВрджреА рдореЗрдВ рдЕрдиреБрд╡рд╛рдж рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИред)

рдЕрдм рджреЗрдЦрддреЗ рд╣реИрдВ рдХрд┐ `latex` рдХреЛ `svg` рдореЗрдВ рдХреИрд╕реЗ рдмрджрд▓рд╛ рдЬрд╛рдПред

```python
    if equation:
        svg_prefix = 'eq_'
    else:
        svg_prefix = 'in_'
```

```shell
% tree svgs
svgs
тФЬтФАтФА eq_0.svg
тФЬтФАтФА eq_1.svg
тФЬтФАтФА in_0.svg
```

рдЗрд╕ рддрд░рд╣ рд╕реЗ `svg` рдХреЛ рд╕рд╣реЗрдЬреЗрдВред

```python
def wrap_latex(mathjax, equation = False):
    wrap = ''
    if equation:
        wrap = mathjax.string
    else:
        wrap = '$' + mathjax.string + '$'
    wrap = wrap.replace('label', 'tag')
    return wrap
```

рдпрд╣рд╛рдВ `latex` рд╕реНрд░реЛрдд рдХреЛрдб рдореЗрдВ рдХреБрдЫ рд╕рдорд╛рдпреЛрдЬрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖ рд░рд╣реЗ рд╣реИрдВред рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ `label` рдХреЛ `tag` рдореЗрдВ рдмрджрд▓ рджрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред

![рдЯреИрдЧ](assets/images/feynman/tag.png)

рджрд╛рдИрдВ рдУрд░ `(Eq:I:13:14)` рдкрд░ рдзреНрдпрд╛рди рджреЗрдВред рдпрджрд┐ рдпрд╣ `label` рд╣реЛрддрд╛, рддреЛ рдпрд╣ рдкрд╛рд░реНрд╕ рдирд╣реАрдВ рд╣реЛ рдкрд╛рддрд╛ред рдпрд╣рд╛рдВ `(1)` рджрд┐рдЦрд╛рдИ рджреЗрдЧрд╛ред рдпрд╣рд╛рдВ рдЕрд╕реНрдерд╛рдпреА рд░реВрдк рд╕реЗ `tag` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЗрд╕реЗ рджрд░реНрд╢рд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдЕрднреА рдЗрд╕рдХреА рдЧрд╣рд░рд╛рдИ рд╕реЗ рдЬрд╛рдВрдЪ рдирд╣реАрдВ рдХреА рдЧрдИ рд╣реИред

рдлрд┐рд░ `latex2svg.py` рдХреЛ рдХреЙрд▓ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред

```python
        out = {}
        try:
            out = latex2svg(wrap)   
        except subprocess.CalledProcessError as err:
            raise err    
```

(рдпрд╣ рдХреЛрдб рдмреНрд▓реЙрдХ рдХреЛ рд╣рд┐рдВрджреА рдореЗрдВ рдЕрдиреБрд╡рд╛рдж рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рдХреЛрдб рд╣реИ рдФрд░ рдЗрд╕реЗ рдЕрдкрд░рд┐рд╡рд░реНрддрд┐рдд рдЫреЛрдбрд╝ рджрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред)

`latex2svg.py` рдХреЛ рджреЗрдЦреЗрдВред

```python
    # LaTeX рдЪрд▓рд╛рдПрдВ рдФрд░ DVI рдлрд╝рд╛рдЗрд▓ рдмрдирд╛рдПрдВ
    try:
        ret = subprocess.run(shlex.split(params['latex_cmd']+' code.tex'),
                             stdout=subprocess.PIPE, stderr=subprocess.PIPE,
                             cwd=working_directory)
        ret.check_returncode()
    except FileNotFoundError:
        raise RuntimeError('latex рдирд╣реАрдВ рдорд┐рд▓рд╛')
```

рдпрд╣рд╛рдБ `latex` рдХрдорд╛рдВрдб рдХреЛ рдХреЙрд▓ рдХрд┐рдпрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИред

```shell
 % latex --help
рдЙрдкрдпреЛрдЧ: pdftex [рд╡рд┐рдХрд▓реНрдк]... [TEXNAME[.tex]] [рдХрдорд╛рдВрдбреНрд╕]
   рдпрд╛: pdftex [рд╡рд┐рдХрд▓реНрдк]... \FIRST-LINE
   рдпрд╛: pdftex [рд╡рд┐рдХрд▓реНрдк]... &FMT ARGS
  TEXNAME рдкрд░ pdfTeX рдЪрд▓рд╛рдПрдВ, рдЖрдорддреМрд░ рдкрд░ TEXNAME.pdf рдмрдирд╛рддреЗ рд╣реИрдВред
```

```python
    try:
        ret = subprocess.run(shlex.split(params['dvisvgm_cmd']+' code.dvi'),
                             stdout=subprocess.PIPE, stderr=subprocess.PIPE,
                             cwd=working_directory, env=env)
        ret.check_returncode()
    except FileNotFoundError:
        raise RuntimeError('dvisvgm рдирд╣реАрдВ рдорд┐рд▓рд╛')
```

рдпрд╣рд╛рдБ `dvisvgm` рдХрдорд╛рдВрдб рдХреЛ рдХреЙрд▓ рдХрд┐рдпрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИред

```shell
% dvisvgm
dvisvgm 2.9.1
```

рдпрд╣ рдкреНрд░реЛрдЧреНрд░рд╛рдо DVI рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ, рдЬреИрд╕реЗ рдХрд┐ TeX/LaTeX рджреНрд╡рд╛рд░рд╛ рдмрдирд╛рдИ рдЧрдИ рд╣реИрдВ, рд╕рд╛рде рд╣реА EPS рдФрд░ PDF рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ XML-рдЖрдзрд╛рд░рд┐рдд рд╕реНрдХреЗрд▓реЗрдмрд▓ рд╡реЗрдХреНрдЯрд░ рдЧреНрд░рд╛рдлрд╝рд┐рдХреНрд╕ рдлреЙрд░реНрдореЗрдЯ SVG рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрд┐рдд рдХрд░рддрд╛ рд╣реИред

рдЙрдкрдпреЛрдЧ: dvisvgm [рд╡рд┐рдХрд▓реНрдк] dvifile
       dvisvgm --eps [рд╡рд┐рдХрд▓реНрдк] epsfile
       dvisvgm --pdf [рд╡рд┐рдХрд▓реНрдк] pdffile
```

рдКрдкрд░ рдмрддрд╛рдпрд╛ рдЧрдпрд╛ `latex` рдХрд╕реНрдЯрдо рдореИрдХреНрд░реЛ рдХрд╣рд╛рдБ рд▓рд┐рдЦрд╛ рдЬрд╛рдП? рдпрд╣рд╛рдБ `latex2svg.py` рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред `default_preamble` рдХреЛ рдмрджрд▓реЗрдВред

```python
default_preamble = r"""
\usepackage[utf8x]{inputenc}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{newtxtext}
\usepackage[libertine]{newtxmath}
```

рдпрд╣ рдХреЛрдб LaTeX рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдХреЗ рд▓рд┐рдП рдПрдХ рдкреНрд░реАрдПрдореНрдмрд▓ (preamble) рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддрд╛ рд╣реИред рдкреНрд░реАрдПрдореНрдмрд▓ рдореЗрдВ рд╡рд┐рднрд┐рдиреНрди рдкреИрдХреЗрдЬ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ рдЬреЛ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдХреЗ рдлреЙрд░реНрдореЗрдЯрд┐рдВрдЧ рдФрд░ рдЧрдгрд┐рддреАрдп рд╕рдореАрдХрд░рдгреЛрдВ рдХреЛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реИрдВред рдЗрд╕рдореЗрдВ `inputenc` рдкреИрдХреЗрдЬ UTF-8 рдПрдиреНрдХреЛрдбрд┐рдВрдЧ рдХреЗ рд▓рд┐рдП, `amsmath`, `amsfonts`, рдФрд░ `amssymb` рдкреИрдХреЗрдЬ рдЧрдгрд┐рддреАрдп рдкреНрд░рддреАрдХреЛрдВ рдФрд░ рдлреЛрдВрдЯ рдХреЗ рд▓рд┐рдП, рдФрд░ `newtxtext` рддрдерд╛ `newtxmath` рдкреИрдХреЗрдЬ рдЯреЗрдХреНрд╕реНрдЯ рдФрд░ рдЧрдгрд┐рддреАрдп рдлреЛрдВрдЯ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВред

\newcommand{\FLPvec}[1]{\boldsymbol{#1}}
\newcommand{\Figvec}[1]{\mathbf{#1}}
\newcommand{\FLPC}{\FLPvec{C}}
\newcommand{\FLPF}{\FLPvec{F}}
\newcommand{\FLPa}{\FLPvec{a}}
\newcommand{\FLPb}{\FLPvec{a}}
\newcommand{\FLPr}{\FLPvec{r}}
\newcommand{\FLPs}{\FLPvec{s}}
\newcommand{\FLPv}{\FLPvec{v}}
\newcommand{\ddt}[2]{\frac{d#1}{d#2}}
\newcommand{\epsO}{\epsilon_0}
\newcommand{\FigC}{\Figvec{C}}
"""
```

рд░реВрдкрд╛рдВрддрд░рдг рд╕рдлрд▓ рд╣реЛрдиреЗ рдХреЗ рдмрд╛рдж, рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рд▓рд┐рдЦреЗрдВред

```python
        f = open(f'svgs/{svg_prefix}{i}.svg', 'w')
        f.write(out['svg'])
        f.close()
```

рдЬрд╛рд░реА рд░рдЦреЗрдВред

```python
        node = BeautifulSoup('<img>', features="lxml")
        img = node.find('img')
        img.attrs['src'] = f'./svgs/{svg_prefix}{i}.svg'
        img.attrs['style'] = 'vertical-align: middle; margin: 0.5em 0;'
```

рдпрд╣рд╛рдВ рдПрдХ `img` рдЯреИрдЧ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рд╣реИред

```python
def wrap_svg(svg, equation):
    if equation:
        p = BeautifulSoup(f'<div style="text-align:center;"></div>', features="lxml")
        p.div.append(svg)
        return p.div
    else:
        return svg
      
p = wrap_svg(img, equation)
```

(рдиреЛрдЯ: рдХреЛрдб рдмреНрд▓реЙрдХ рдХреЛ рдЕрдиреБрд╡рд╛рджрд┐рдд рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рднрд╛рд╖рд╛ рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рд╣реИ рдФрд░ рдЗрд╕реЗ рдмрджрд▓рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИред)

рдпрджрд┐ `latex` рдПрдХрд▓ рдкреИрд░рд╛рдЧреНрд░рд╛рдл рдореЗрдВ рд╣реИ, рддреЛ рдЗрд╕реЗ `div` рд╕реЗ рд▓рдкреЗрдЯреЗрдВ рдФрд░ рдХреЗрдВрджреНрд░рд┐рдд рдХрд░реЗрдВред

```python
mathjax.insert_after(p)
```

рдпрд╣рд╛рдВ `div` рдЯреИрдЧ рдпрд╛ `img` рдЯреИрдЧ рдХреЛ рдореВрд▓ `script` рдХреЗ рдмрд╛рдж рдЬреЛрдбрд╝рд╛ рдЧрдпрд╛ рд╣реИред

```python
def clean_script(soup):
    scripts = soup.findAll('script')
    for s in scripts:
        s.decompose()    
        
clean_script(soup)
```

(рдпрд╣ рдХреЛрдб рдмреНрд▓реЙрдХ рд╣реИ рдФрд░ рдЗрд╕реЗ рдЕрдиреБрд╡рд╛рджрд┐рдд рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред)

рд╕рднреА `latex` рдХреЛ `svg` рд╕реЗ рдмрджрд▓рдиреЗ рдХреЗ рдмрд╛рдж, `script` рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд░рд╣рддреА рд╣реИред рдЙрдиреНрд╣реЗрдВ рд╣рдЯрд╛ рджреЗрдВ, рдЗрд╕рд╕реЗ рд╕рд╛рдл-рд╕реБрдерд░рд╛ рджрд┐рдЦреЗрдЧрд╛ред

рдЕрдВрдд рдореЗрдВ, рд╕рдВрд╢реЛрдзрд┐рдд рдкреВрд░реЗ `html` рдХреЛ рдПрдХ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рд▓рд┐рдЦреЗрдВред

```python
    output_file = open('out.html', 'w')
    output_file.write(soup.prettify())
    output_file.close()    
```

рдлрд┐рд░ `pandoc` рдЯреВрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ, рдЗрд╕реЗ `epub` рдореЗрдВ рдмрджрд▓реЗрдВред

```shell
pandoc -s -r html out.html -o feynman.epub
```

(рдпрд╣ рдХрдорд╛рдВрдб HTML рдлрд╝рд╛рдЗрд▓ `out.html` рдХреЛ EPUB рдлрд╝реЙрд░реНрдореЗрдЯ рдореЗрдВ рдХрдиреНрд╡рд░реНрдЯ рдХрд░рдХреЗ `feynman.epub` рдирд╛рдордХ рдлрд╝рд╛рдЗрд▓ рдмрдирд╛рддреА рд╣реИред)

рдпрд╣ рдЦреБрд▓ рдЬрд╛рдПрдЧрд╛, рдФрд░ рдЖрдкрдХреЛ рдПрдХ рд╕реБрдВрджрд░ рдИ-рдмреБрдХ рджрд┐рдЦрд╛рдИ рджреЗрдЧреАред

рдХреНрдпреЛрдВ рд╕реАрдзреЗ `svg` рдЯреИрдЧ рдХреЛ рдПрдореНрдмреЗрдб рди рдХрд░рдХреЗ `img` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЗрд╕реЗ рд╢рд╛рдорд┐рд▓ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдпрд╛рдиреА рдХрд┐ рдЗрд╕ рддрд░рд╣ рд▓рд┐рдЦрд╛ рдЬрд╛рдП:

```html
<p></p>
<svg></svg>
<p></p>
```

рдПрдХ рдмрд╣реБрдд рд╣реА рдЕрдЬреАрдм `bug` рд╣реИред рдЬрдм рдмрд╣реБрдд рд╕рд╛рд░реЗ `svg` рд╣реЛрддреЗ рд╣реИрдВ, рддреЛ рдРрд╕реА рд╕реНрдерд┐рддрд┐ рдЙрддреНрдкрдиреНрди рд╣реЛрддреА рд╣реИред

<img src="/assets/images/feynman/svg_p1.png" alt="svg_p1" style="zoom:40%;" />

рдмрд╛рдж рдореЗрдВ рдкрддрд╛ рдЪрд▓рд╛ рдХрд┐ `img` рдЯреИрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЗрд╕реЗ рд╢рд╛рдорд┐рд▓ рдХрд░рдирд╛ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред рдпрд╣ рдХреНрдпреЛрдВ рд╣реЛрддрд╛ рд╣реИ, рдпрд╣ рд╕рдордЭ рдореЗрдВ рдирд╣реАрдВ рдЖрдпрд╛ред рдЬрдм рдореИрдВрдиреЗ рдЗрд╕ рдПрдХрд▓ `svg` рдХреЛ рдЕрд▓рдЧ рд╕реЗ рд▓рд┐рдпрд╛ рдФрд░ рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдореЗрдВ рджреЗрдЦрд╛, рддреЛ рдХреЛрдИ рд╕рдорд╕реНрдпрд╛ рдирд╣реАрдВ рдереАред рдРрд╕рд╛ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рдЬрдм рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдмрд╣реБрдд рд╕рд╛рд░реЗ `svg` рдХреЛ рд░реЗрдВрдбрд░ рдХрд░рддрд╛ рд╣реИ, рддреЛ рдпрд╣ рдЧрд▓рддреА рд╣реЛрддреА рд╣реИред

### рдЕрдВрдд рдореЗрдВ

`epub` рдХреЛ `mobi` рдореЗрдВ рдХреИрд╕реЗ рдмрджрд▓реЗрдВ, рдЗрд╕рдХреЗ рд▓рд┐рдП рдЖрдк `Kindle` рдХреЗ рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рдЯреВрд▓ `Kindle Previewer 3` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдпрд╣рд╛рдВ рд╕рд┐рд░реНрдл рдПрдХ рдЕрдзреНрдпрд╛рдп рд╣реИред

рдЗрд╕ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХрд╛ рдХреЛрдб [feynman-lectures-mobi@lzwjava](https://github.com/lzwjava/feynman-lectures-mobi) рдкрд░ рдЙрдкрд▓рдмреНрдз рд╣реИред

рд╕рднреА рдкреЗрдЬреЛрдВ рдХреЛ рдХреИрд╕реЗ рдХреНрд░реЙрд▓ рдХрд░рдХреЗ рдЗрд▓реЗрдХреНрдЯреНрд░реЙрдирд┐рдХ рдмреБрдХ рдореЗрдВ рд╕рдВрдЧрдард┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдП, рдпрд╣ рдмрд╛рдж рдореЗрдВ рдмрддрд╛рдКрдВрдЧрд╛ред рд▓реЗрдХрд┐рди рдлрд╝реЗрдирдореИрди рдХреЗ рднреМрддрд┐рдХреА рд╡реНрдпрд╛рдЦреНрдпрд╛рди рдХрд╛ рдпрд╣ рдПрдХ рдЕрдзреНрдпрд╛рдп рднреА рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╛рдлреА рд╣реИред рдареАрдХ рд╣реИ, рдЪрд▓реЛ Kindle рдЙрдард╛рдПрдВ рдФрд░ рдкрдврд╝рдирд╛ рд╢реБрд░реВ рдХрд░реЗрдВред