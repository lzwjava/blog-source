---
audio: false
generated: true
image: false
lang: hi
layout: post
model: x-ai/grok-4-fast
title: डॉकर डेमॉन प्रॉक्सी सेटिंग्स कॉन्फ़िगर करना
translated: true
type: note
---

### Docker डेमन को प्रॉक्सी सेटिंग्स के लिए कॉन्फ़िगर करना

Docker डेमन को कॉर्पोरेट फ़ायरवॉल के पीछे से ऑपरेशन जैसे इमेजेज़ पुल करना या कंटेनर बिल्ड करने के लिए HTTP/HTTPS प्रॉक्सी का उपयोग करने के लिए कॉन्फ़िगर किया जा सकता है। यह `/etc/docker/daemon.json` फ़ाइल को एडिट (या क्रिएट) करके किया जाता है। ध्यान दें कि यह कॉन्फ़िगरेशन डेमन पर ही लागू होता है (जैसे `docker pull` या `docker build` के लिए), व्यक्तिगत कंटेनरों पर नहीं (जो एनवायरनमेंट वेरिएबल्स या Docker बिल्ड आर्ग्स का उपयोग करेंगे)।

#### आवश्यक शर्तें
- आपको Linux सिस्टम पर रूट या sudo एक्सेस की आवश्यकता है (यह Docker डेमन कॉन्फ़िगरेशन के लिए प्राथमिक OS है; Windows/Mac पर Docker Desktop के साथ, इसके बजाय GUI सेटिंग्स का उपयोग करें)।
- Docker इंस्टॉल और रनिंग हो।
- अपने प्रॉक्सी सर्वर का विवरण जानें (जैसे HTTP/HTTPS प्रॉक्सी के लिए `http://proxy.company.com:8080`, और कोई भी no-proxy एक्सेप्शन)।

#### चरण-दर-चरण कॉन्फ़िगरेशन

1.  **डेमन कॉन्फ़िगरेशन फ़ाइल ढूंढें या बनाएं**:
    - एक टर्मिनल खोलें और `/etc/docker/` पर नेविगेट करें (यदि डायरेक्टरी मौजूद नहीं है तो बनाएं: `sudo mkdir -p /etc/docker`)।
    - एक टेक्स्ट एडिटर का उपयोग करके `daemon.json` फ़ाइल को एडिट करें (जैसे `sudo nano /etc/docker/daemon.json` या `sudo vim /etc/docker/daemon.json`)।
    - यदि फ़ाइल मौजूद नहीं है, तो इसे बनाएं। यदि यह नई है तो एक खाली JSON ऑब्जेक्ट `{}` से शुरू करें।

2.  **प्रॉक्सी कॉन्फ़िगरेशन जोड़ें**:
    - JSON फ़ाइल में एक `"proxies"` सेक्शन जोड़ें। यहाँ एक बेसिक उदाहरण है:

      ```json
      {
        "proxies": {
          "http-proxy": "http://proxy.company.com:8080",
          "https-proxy": "http://proxy.company.com:8080",
          "no-proxy": "localhost,127.0.0.1,*.company.com,10.0.0.0/8"
        }
      }
      ```

      - **स्पष्टीकरण**:
        - `"http-proxy"`: HTTP प्रॉक्सी के लिए URL (गैर-HTTPS रिक्वेस्ट्स के लिए आवश्यक)।
        - `"https-proxy"`: HTTPS प्रॉक्सी के लिए URL (अक्सर HTTP प्रॉक्सी के समान)।
        - `"no-proxy"`: होस्ट्स/डोमेन्स/IP रेंज की एक कॉमा सेपरेटेड लिस्ट जो प्रॉक्सी को बायपास करनी चाहिए (जैसे लोकल एड्रेस या इंटरनल डोमेन)। यह अनंत लूप को रोकता है।
        - यदि ऑथेंटिकेशन की आवश्यकता है, तो फॉर्मेट `http://username:password@proxy.company.com:8080` का उपयोग करें।
        - SOCKS प्रॉक्सी के लिए, `"http-proxy": "socks5://proxy.company.com:1080"` का उपयोग करें।

      - यदि `daemon.json` में पहले से मौजूद कंटेंट है (जैसे अन्य सेटिंग्स `"log-driver": "json-file"`), तो `"proxies"` सेक्शन को कीज़ को डुप्लिकेट किए बिना उसमें मर्ज करें। वैध JSON सिंटैक्स सुनिश्चित करें (यदि आवश्यक हो तो `jsonlint` जैसे टूल का उपयोग करके वैलिडेट करें)।

3.  **सेव करें और Docker डेमन को रीस्टार्ट करें**:
    - फ़ाइल सेव करें।
    - बदलावों को लागू करने के लिए Docker सर्विस को रीस्टार्ट करें:
      ```
      sudo systemctl restart docker
      ```
      - पुराने सिस्टम या गैर-systemd सेटअप पर, `sudo service docker restart` का उपयोग करें।
    - सत्यापित करें कि डेमन चल रहा है:
      ```
      sudo systemctl status docker
      ```
      - यदि कोई समस्या हो तो लॉग्स चेक करें: `sudo journalctl -u docker.service`।

4.  **कॉन्फ़िगरेशन सत्यापित करें**:
    - एक इमेज पुल करके टेस्ट करें (जो अब आपके प्रॉक्सी के माध्यम से रूट होनी चाहिए):
      ```
      docker pull hello-world
      ```
    - डेमन कॉन्फ़िग का निरीक्षण करके चेक करें कि प्रॉक्सी सेटिंग्स लागू हैं:
      ```
      docker info | grep -i proxy
      ```
      - आपको इस तरह का आउटपुट दिखना चाहिए:
        ```
        HTTP Proxy: http://proxy.company.com:8080
        HTTPS Proxy: http://proxy.company.com:8080
        No Proxy: localhost,127.0.0.1,*.company.com,10.0.0.0/8
        ```
    - यदि आप बिल्ड कॉन्टेक्स्ट में Docker का उपयोग कर रहे हैं, तो इसके साथ टेस्ट करें:
      ```
      docker build -t test-proxy .
      ```
      (एक साधारण Dockerfile मानते हुए जो एक बेस इमेज पुल करता है।)

#### अतिरिक्त नोट्स
- **सुरक्षा**: शेयर्ड सिस्टम पर `daemon.json` में क्रेडेंशियल्स हार्डकोड करने से बचें। यदि संभव हो तो एनवायरनमेंट वेरिएबल्स का उपयोग करें, या अधिक एडवांस्ड सेटअप के लिए `docker config` जैसे टूल्स का उपयोग करें।
- **सामान्य समस्याएं**:
  - **सिंटैक्स एरर**: अमान्य JSON डेमन को स्टार्ट होने से रोकेगी। `cat /etc/docker/daemon.json` और एक JSON वैलिडेटर के साथ डबल-चेक करें।
  - **फ़ायरवॉल/SELinux**: सुनिश्चित करें कि आपका प्रॉक्सी पहुंच योग्य है और कोई सिक्योरिटी मॉड्यूल इसे ब्लॉक नहीं कर रहा है।
  - **Docker वर्जन**: यह Docker 20.10+ पर काम करता है (पहले के वर्जन में `HTTP_PROXY` जैसे अलग एनवायरनमेंट वेरिएबल्स का उपयोग करते थे)। अपना वर्जन `docker --version` से चेक करें और यदि आवश्यक हो तो अपग्रेड करें।
  - **रजिस्ट्री-विशिष्ट प्रॉक्सी**: प्राइवेट रजिस्ट्री के लिए, आपको `daemon.json` में `"registry-mirrors"` या इनसिक्योर रजिस्ट्री के तहत अतिरिक्त कॉन्फ़िग की आवश्यकता हो सकती है।
- **कंटेनरों के लिए**: यदि आपको *चल रहे कंटेनरों के अंदर* प्रॉक्सी सेटिंग्स की आवश्यकता है (डेमन के लिए नहीं), तो Dockerfile में एनवायरनमेंट वेरिएबल्स सेट करें (जैसे `ENV http_proxy=http://proxy.company.com:8080`) या `docker run -e http_proxy=...` के माध्यम से।
- **Docker Desktop (Windows/Mac)**: Settings > Resources > Proxies पर जाएं, और वहां एनेबल/कॉन्फ़िगर करें—JSON एडिटिंग की आवश्यकता नहीं है।

अधिक जानकारी के लिए, आधिकारिक Docker डॉक्स देखें: [Configure the Docker daemon](https://docs.docker.com/engine/reference/commandline/dockerd/#daemon-configuration-file)। यदि आपको कोई एरर आती है, तो ट्रबलशूटिंग के लिए सटीक आउटपुट शेयर करें!