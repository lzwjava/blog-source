---
audio: false
generated: true
lang: hi
layout: post
title: यूबंटू पर एसएफ़टीपी सर्वर स्थापित करना
translated: true
type: note
---

Ubuntu पर एक SFTP (SSH File Transfer Protocol) सर्वर सेट करना एक सीधी प्रक्रिया है जो आपको SSH एन्क्रिप्शन का उपयोग करके नेटवर्क पर फ़ाइलों को सुरक्षित रूप से स्थानांतरित करने की अनुमति देती है। इसे सेट अप करने में आपकी सहायता के लिए नीचे एक संपूर्ण, चरण-दर-चरण मार्गदर्शिका दी गई है।

---

### चरण 1: OpenSSH सर्वर इंस्टॉल करें
SFTP, OpenSSH सर्वर पर निर्भर करता है, जिसे आपको अपने Ubuntu सिस्टम पर इंस्टॉल करने की आवश्यकता है।

1. एक टर्मिनल खोलें और अपनी पैकेज सूची अपडेट करें:
   ```bash
   sudo apt update
   ```

2. OpenSSH सर्वर इंस्टॉल करें:
   ```bash
   sudo apt install openssh-server
   ```

3. जांचें कि SSH सेवा चल रही है या नहीं:
   ```bash
   sudo systemctl status ssh
   ```
   - यदि यह नहीं चल रही है, तो इसे शुरू करें:
     ```bash
     sudo systemctl start ssh
     ```
   - सुनिश्चित करें कि यह बूट पर शुरू हो:
     ```bash
     sudo systemctl enable ssh
     ```

---

### चरण 2: एक समर्पित SFTP उपयोगकर्ता बनाएँ
बेहतर सुरक्षा के लिए, SFTP एक्सेस के लिए एक विशिष्ट उपयोगकर्ता बनाएँ।

1. एक नया उपयोगकर्ता जोड़ें (उदाहरण के लिए, `sftpuser`):
   ```bash
   sudo adduser sftpuser
   ```
   - पासवर्ड सेट करने और किसी भी वैकल्पिक विवरण को भरने के लिए संकेतों का पालन करें।

2. (वैकल्पिक) इस उपयोगकर्ता को SSH के माध्यम से शेल तक पहुंचने से रोकें:
   ```bash
   sudo usermod -s /bin/false sftpuser
   ```

---

### चरण 3: SFTP के लिए SSH कॉन्फ़िगर करें
आप या तो सभी उपयोगकर्ताओं को अपने होम डायरेक्टरीज़ के साथ SFTP का उपयोग करने की अनुमति दे सकते हैं या विशिष्ट उपयोगकर्ताओं को कुछ फ़ोल्डरों तक सीमित कर सकते हैं।

#### विकल्प 1: सभी उपयोगकर्ताओं के लिए SFTP की अनुमति दें
यदि आप चाहते हैं कि सभी उपयोगकर्ता अपने होम डायरेक्टरीज़ तक SFTP के माध्यम से पहुंच सकें, तो OpenSSH इंस्टॉल करने के बाद किसी अतिरिक्त कॉन्फ़िगरेशन की आवश्यकता नहीं है। चरण 5 पर जाएं।

#### विकल्प 2: किसी उपयोगकर्ता को एक विशिष्ट डायरेक्टरी तक सीमित करें
किसी उपयोगकर्ता (उदाहरण के लिए, `sftpuser`) को एक विशिष्ट डायरेक्टरी तक सीमित करने के लिए:

1. SSH कॉन्फ़िगरेशन फ़ाइल संपादित करें:
   ```bash
   sudo nano /etc/ssh/sshd_config
   ```

2. फ़ाइल के अंत में निम्नलिखित पंक्तियाँ जोड़ें:
   ```ini
   Match User sftpuser
       ChrootDirectory /home/sftpuser
       ForceCommand internal-sftp
       AllowTcpForwarding no
       X11Forwarding no
   ```
   - फ़ाइल सहेजें (`Ctrl+O`, फिर `Enter`) और बाहर निकलें (`Ctrl+X`).

3. यह कॉन्फ़िगरेशन:
   - `sftpuser` को `/home/sftpuser` तक सीमित करता है।
   - केवल SFTP उपयोग को बाध्य करता है।
   - TCP फॉरवर्डिंग जैसी अतिरिक्त सुविधाओं को अक्षम करता है।

---

### चरण 4: डायरेक्टरी अनुमतियाँ सेट अप करें
प्रतिबंधित सेटअप (chroot) के काम करने के लिए, अनुमतियाँ समायोजित करें:

1. chroot डायरेक्टरी का मालिक root बनाएँ:
   ```bash
   sudo chown root:root /home/sftpuser
   ```

2. उपयोगकर्ता के लिए एक लिखने योग्य उपडायरेक्टरी बनाएँ (उदाहरण के लिए, `uploads`):
   ```bash
   sudo mkdir /home/sftpuser/uploads
   sudo chown sftpuser:sftpuser /home/sftpuser/uploads
   ```
   - उपयोगकर्ता अब `/home/sftpuser/uploads` में फ़ाइलें अपलोड कर सकता है।

---

### चरण 5: SSH सेवा को पुनरारंभ करें
अपने परिवर्तनों को लागू करने के लिए SSH को पुनरारंभ करें:
```bash
sudo systemctl restart ssh
```

---

### चरण 6: अपने SFTP सर्वर का परीक्षण करें
किसी अन्य डिवाइस से कनेक्ट करके सत्यापित करें कि सर्वर काम कर रहा है।

1. अपने Ubuntu मशीन का IP पता खोजें:
   ```bash
   ip addr show
   ```
   - `192.168.1.100` जैसा एक IP देखें।

2. कनेक्शन का परीक्षण करें:
   - **एक टर्मिनल से (Linux/macOS):**
     ```bash
     sftp sftpuser@<ubuntu-ip-address>
     ```
     - संकेत देने पर पासवर्ड दर्ज करें।
   - **FileZilla का उपयोग करके (किसी भी OS पर):**
     - होस्ट: `sftp://<ubuntu-ip-address>`
     - उपयोगकर्तानाम: `sftpuser`
     - पासवर्ड: (आपका पासवर्ड)
     - पोर्ट: 22

3. `uploads` फ़ोल्डर में एक फ़ाइल अपलोड करने या डायरेक्टरी सामग्री की सूची बनाने का प्रयास करें।

---

### चरण 7: फ़ायरवॉल कॉन्फ़िगर करें
यदि आप Ubuntu के फ़ायरवॉल (UFW) का उपयोग कर रहे हैं, तो SFTP ट्रैफ़िक की अनुमति दें:

1. फ़ायरवॉल स्थिति जांचें:
   ```bash
   sudo ufw status
   ```

2. SSH/SFTP (पोर्ट 22) की अनुमति दें:
   ```bash
   sudo ufw allow 22/tcp
   sudo ufw reload
   ```

---

### सब कुछ तैयार है!
आपका SFTP सर्वर अब तैयार है! उपयोगकर्ता एक SFTP क्लाइंट का उपयोग करके सुरक्षित रूप से कनेक्ट हो सकते हैं और फ़ाइलों को उनकी निर्दिष्ट डायरेक्टरीज़ में स्थानांतरित कर सकते हैं। यदि आपने `sftpuser` को प्रतिबंधित किया है, तो वे केवल `/home/sftpuser/uploads` (या जहाँ भी आपने सेट किया है) तक पहुंच पाएंगे। सुरक्षित फ़ाइल स्थानांतरण का आनंद लें!