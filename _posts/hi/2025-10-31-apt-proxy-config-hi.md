---
audio: false
generated: true
image: false
lang: hi
layout: post
model: x-ai/grok-4-fast
title: एपीटी प्रॉक्सी कॉन्फ़िगरेशन और उपयोग की जाँच
translated: true
type: note
---

### जाँच करना कि APT प्रॉक्सी का उपयोग कर रहा है या नहीं

यह पुष्टि करने के लिए कि क्या APT (Debian/Ubuntu-आधारित सिस्टम पर पैकेज मैनेजर) प्रॉक्सी का उपयोग करने के लिए कॉन्फ़िगर किया गया है—और क्या यह वास्तव में ऑपरेशन के दौरान लागू किया जा रहा है—आप इन चरणों का पालन कर सकते हैं। इसमें कॉन्फ़िगरेशन फ़ाइलों का निरीक्षण करना और कनेक्टिविटी का परीक्षण करना शामिल है। ध्यान दें कि APT प्रॉक्सी उपयोग को स्पष्ट रूप से सरल तरीके से लॉग नहीं करता है, इसलिए "पुष्टि" का आमतौर पर मतलब सेटिंग्स सत्यापित करना और एक परीक्षण रन के दौरान व्यवहार का अवलोकन करना होता है।

#### 1. **APT की प्रॉक्सी कॉन्फ़िगरेशन का निरीक्षण करें**
   APT प्रॉक्सी सेटिंग्स `/etc/apt/apt.conf` में या `/etc/apt/apt.conf.d/` की फ़ाइलों में (जैसे, `99proxy` या इसी तरह) संग्रहीत होती हैं। `Acquire::http::Proxy` या `Acquire::https::Proxy` को परिभाषित करने वाली लाइनों को देखें।

   - **सभी प्रॉक्सी-संबंधित कॉन्फ़िग की जाँच के लिए कमांड**:
     ```
     apt-config dump | grep -i proxy
     ```
     - **यह क्या करता है**: APT की प्रभावी कॉन्फ़िगरेशन डंप करता है और प्रॉक्सी प्रविष्टियों के लिए फ़िल्टर करता है। यदि आप `Acquire::http::Proxy "http://proxy.example.com:8080/"` जैसा आउटपुट देखते हैं, तो यह कॉन्फ़िगर है।
     - **यदि प्रॉक्सी सेट है तो उदाहरण आउटपुट**:
       ```
       Acquire::http::Proxy "http://username:password@proxy.example.com:8080";
       Acquire::https::Proxy "http://proxy.example.com:8080";
       ```

   - **मैन्युअल फ़ाइल जाँच**:
     ```
     grep -r "Proxy" /etc/apt/apt.conf* /etc/apt/apt.conf.d/
     ```
     - **यह क्या करता है**: सभी APT कॉन्फ़िग फ़ाइलों में "Proxy" कीवर्ड के लिए खोजता है।

   यदि कोई प्रॉक्सी लाइन दिखाई नहीं देती है, तो APT **कोई भी** उपयोग नहीं कर रहा है (यह सीधे कनेक्ट हो रहा है)।

#### 2. **परीक्षण करें कि क्या प्रॉक्सी वास्तव में उपयोग हो रहा है**
   केवल कॉन्फ़िगरेशन उपयोग की पुष्टि नहीं करता है—रिपॉजिटरी से डेटा प्राप्त करने वाले APT ऑपरेशन का सिमुलेशन करके परीक्षण करें (जो कि प्रॉक्सी के माध्यम से रूट होगा यदि सेट किया गया है)।

   - **बेसिक टेस्ट: एक अपडेट चलाएँ**:
     ```
     sudo apt update
     ```
     - **यह क्या करता है**: रिपॉजिटरी से पैकेज सूचियाँ प्राप्त करता है। आउटपुट देखें:
       - सफलता (जैसे, "Hit:1 http://archive.ubuntu.com ...") कनेक्टिविटी को इंगित करती है, संभवतः प्रॉक्सी के माध्यम से यदि कॉन्फ़िगर है।
       - "Failed to fetch" या टाइमआउट जैसी त्रुटियाँ प्रॉक्सी समस्याओं का सुझाव देती हैं (जैसे, गलत क्रेडेंशियल्स या अनुपलब्ध प्रॉक्सी)।
     - अधिक विवरण देखने के लिए, वर्बोसिटी जोड़ें: `sudo apt update -o Debug::Acquire::http=true`.

   - **केवल-डाउनलोड परीक्षण (सिस्टम में कोई बदलाव नहीं)**:
     ```
     sudo apt clean
     sudo apt -d --reinstall install hostname
     ```
     - **यह क्या करता है**: कैशे साफ़ करता है, फिर छोटे बिल्ट-इन `hostname` पैकेज को वास्तव में इंस्टॉल किए बिना पुनः इंस्टॉल करने का नाटक करता है (`-d` फ्लैग केवल डाउनलोड करता है)। सफल फ़ेच के लिए आउटपुट जाँचें। यदि यह काम करता है, तो प्रॉक्सी का उपयोग किया गया था (यह मानते हुए कि यह कॉन्फ़िगर है)।

   - **एडवांस्ड: नेटवर्क कॉल्स का पता लगाएँ (`strace` की आवश्यकता है)**:
     यदि आप एक रन के दौरान प्रॉक्सी कनेक्शन की पुष्टि करना चाहते हैं:
     ```
     sudo strace -e trace=connect sudo apt update 2>&1 | grep -i proxy
     ```
     - **यह क्या करता है**: नेटवर्क कनेक्शन के लिए सिस्टम कॉल्स का पता लगाता है। सीधे रिपॉजिटरी सर्वर (जैसे, `archive.ubuntu.com`) के बजाय आपके प्रॉक्सी के IP/पोर्ट से कनेक्ट होने के लिए देखें।

#### सामान्य समस्याएँ और समाधान
- **यदि प्रॉक्सी को ऑथ की आवश्यकता है**: सुनिश्चित करें कि कॉन्फ़िग `http://username:password@proxyhost:port` का उपयोग करता है।
- **एनवायरनमेंट वेरिएबल्स**: APT शेल प्रॉक्सी (`$http_proxy`) को अनदेखा करता है, इसलिए APT-विशिष्ट कॉन्फ़िग पर भरोसा करें।
- **आपके कमांड `sudo apt --fix-broken install` के संबंध में**: यह टूटी हुई डिपेंडेंसी को पैकेजों को पुनः इंस्टॉल करके ठीक करता है। यदि यह विफल हो रहा है (जैसे, नेटवर्क त्रुटियाँ), तो उपरोक्त परीक्षणों के साथ प्रॉक्सी की पुष्टि करने के बाद इसे चलाएँ। प्रॉक्सी समस्याएँ अक्सर फ़ेच विफलताओं के रूप में दिखाई देती हैं—पहले कॉन्फ़िग ठीक करें, फिर पुनः प्रयास करें।

यदि ये इसे हल नहीं करते हैं, तो अधिक सहायता के लिए त्रुटि आउटपुट साझा करें।

**संदर्भ**:
- [How to check if apt proxy configuration is correct? (Unix Stack Exchange)](https://unix.stackexchange.com/questions/49781/how-to-check-if-apt-proxy-configuration-is-correct)
- [How to Use APT with Proxy on Ubuntu and Debian (Linuxiac)](https://linuxiac.com/how-to-use-apt-with-proxy/)