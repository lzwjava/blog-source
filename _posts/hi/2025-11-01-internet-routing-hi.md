---
audio: false
generated: true
image: false
lang: hi
layout: post
model: x-ai/grok-4-fast
title: इंटरनेट रूटिंग कैसे काम करती है
translated: true
type: note
---

हाँ, आप हाई-लेवल फ्लो के साथ बिल्कुल सही हैं—एक बार आपके कंप्यूटर के पास IP एड्रेस (जैसे weibo.com के लिए 106.63.15.9) आ जाता है, तो यह एक कनेक्शन शुरू करता है जो आपके लोकल नेटवर्क, आपके राउटर, आपके ISP के इन्फ्रास्ट्रक्चर और इंटरनेट के इंटरकनेक्टेड राउटर्स ("लेयर बाय लेयर") के माध्यम से होकर गुजरता है, जब तक कि यह टारगेट सर्वर तक नहीं पहुँच जाता। यह सब स्वचालित रूप से TCP/IP प्रोटोकॉल स्टैक द्वारा हैंडल किया जाता है, आपके द्वारा URL टाइप करने या `ping` जैसा कोई कमांड रन करने के अलावा कुछ भी मैन्युअल किए बिना।

मैं इसे स्टेप बाय स्टेप समझाता हूँ, आपके `ping` और `traceroute` आउटपुट को संदर्भ में शामिल करते हुए। मैं इसे प्रैक्टिकल रखूंगा और अंदरूनी कामकाज पर फोकस करूंगा, आपके सेटअप (राउटर के पीछे Wi-Fi/ईथरनेट पर Mac) जैसे सामान्य होम सेटअप को मानते हुए।

### 1. **DNS रेजोल्यूशन (IP प्राप्त करना)**
   - किसी भी कनेक्शन से पहले, आपका कंप्यूटर सबसे पहले डोमेन नाम (जैसे "weibo.com") को DNS (डोमेन नेम सिस्टम) के माध्यम से IP एड्रेस में ट्रांसलेट करता है। यह आपके OS के DNS रिजॉल्वर के माध्यम से होता है, जो पब्लिक DNS सर्वर (जैसे Google का 8.8.8.8) को क्वेरी करता है।
   - आपके मामले में, `ping weibo.com` स्वचालित रूप से यह रेजोल्यूशन करता है, 106.63.15.9 को IPv4 एड्रेस के रूप में कन्फर्म करता है। (नोट: आपका लोकल प्रॉक्सी 127.0.0.1:7890 आमतौर पर HTTP/HTTPS ट्रैफिक को हैंडल करता है, लेकिन `ping` रॉ IP/ICMP का उपयोग करता है, इसलिए यह प्रॉक्सी को बायपास कर देता है।)
   - अगर DNS फेल हो जाता है, तो कोई कनेक्शन नहीं होता—सब कुछ यहीं रुक जाता है।

### 2. **आपका कंप्यूटर पैकेट तैयार करता है (लोकल साइड)**
   - एक बार IP मिलने के बाद, आपका Mac TCP/IP लेयर्स का उपयोग करके एक **पैकेट** (डेटा का एक हिस्सा) बनाता है:
     - **एप्लिकेशन लेयर**: कमांड या ऐप (जैसे ब्राउज़र या `ping`) डेटा का अनुरोध करता है। `Ping` एक ICMP "इको रिक्वेस्ट" (एक सरल "हे, क्या तुम वहाँ हो?" संदेश) भेजता है।
     - **ट्रांसपोर्ट लेयर**: TCP/UDP हेडर (रिलायबिलिटी/पोर्ट नंबर के लिए) या ping के लिए ICMP जोड़ता है। आपके पिंग ICMP का उपयोग करते हैं, जिसमें 56 बाइट्स डेटा + हेडर = 64-बाइट पैकेट होते हैं।
     - **नेटवर्क लेयर (IP)**: इसे एक IP हेडर में लपेटता है जिसमें सोर्स (आपका लोकल IP, जैसे 192.168.1.x) और डेस्टिनेशन (106.63.15.9) होता है। यहीं से रूटिंग निर्णय शुरू होते हैं।
     - **लिंक लेयर (ईथरनेट/Wi-Fi)**: लोकल नेटवर्क हॉप के लिए MAC एड्रेस जोड़ता है। आपका कंप्यूटर राउटर का MAC एड्रेस खोजने के लिए ARP (एड्रेस रेजोल्यूशन प्रोटोकॉल) का उपयोग करता है।
     - **फिजिकल लेयर**: आपके केबल/Wi-Fi पर इलेक्ट्रिकल सिग्नल में कन्वर्ट करता है।
   - आपका कंप्यूटर जानता है कि यह सीधे 106.63.15.9 तक नहीं पहुँच सकता (यह आपके लोकल 192.168.1.0/24 सबनेट पर नहीं है), इसलिए यह पैकेट को **डिफॉल्ट गेटवे**—आपके राउटर 192.168.1.1 पर भेजता है।

### 3. **लोकल हॉप: कंप्यूटर → राउटर**
   - यह पहला (और सबसे तेज़) कदम है, जो आपके `traceroute` आउटपुट में दिखाया गया है:
     ```
     1  192.168.1.1 (192.168.1.1) 26.903 ms 3.150 ms 3.161 ms
     ```
     - `Traceroute` (जो रास्ता मैप करने के लिए बढ़ते TTL—टाइम टू लिव—के साथ पैकेट भेजता है) इस हॉप की पुष्टि करता है जिसमें ~3-27ms राउंड-ट्रिप का समय लगता है।
     - आपका राउटर पैकेट प्राप्त करता है, लोकल ईथरनेट हेडर को हटाता है, और इसे अगले हॉप के लिए फिर से एनकैप्सुलेट करता है। यह इंटरनेट (अपने WAN/ISP कनेक्शन के माध्यम से) की ओर फॉरवर्ड करने के लिए अपनी रूटिंग टेबल का उपयोग करता है।
     - प्रॉक्सी इस पर कोई प्रभाव नहीं डालते—आपका लोकल प्रॉक्सी (पोर्ट 7890) केवल ऐप-लेवल ट्रैफिक जैसे वेब ब्राउज़िंग के लिए है, रॉ IP रूटिंग के लिए नहीं।

### 4. **राउटर → ISP → इंटरनेट बैकबोन ("लेयर बाय लेयर" रूटिंग)**
   - आपका राउटर आपके ISP (जैसे PPPoE, DHCP, या मॉडेम के माध्यम से) को डायल करता है और पैकेट को ISP के एज राउटर को सौंप देता है। इसमें आपके राउटर पर NAT (नेटवर्क एड्रेस ट्रांसलेशन) शामिल हो सकता है, जो आपके प्राइवेट IP (192.168.1.x) को आपके ISP द्वारा असाइन किए गए पब्लिक IP के लिए स्वैप कर देता है।
   - यहाँ से, यह इंटरनेट के पार **राउटर्स** की एक चेन है:
     - **ISP राउटर**: आपका ISP (जैसे Comcast या China Telecom) इसे अपने कोर नेटवर्क के माध्यम से रूट करता है। प्रत्येक राउटर TTL (आपके traceroute में 64 से शुरू) को घटाता है और BGP (बॉर्डर गेटवे प्रोटोकॉल) टेबल्स के आधार पर फॉरवर्ड करता है—अनिवार्य रूप से 106.63.15.9 के लिए सबसे अच्छे रास्ते का एक ग्लोबल मैप।
     - **इंटर-ISP/बैकबोन हॉप**: पैकेट ISP के बीच "पीयरिंग पॉइंट्स" (जैसे अंडरसी केबल, फाइबर ऑप्टिक्स) को पार करते हैं। भूगोल के आधार पर यह कुल 5-20 हॉप हो सकते हैं। Weibo.com का IP (106.63.15.9) चीन में है, इसलिए आपके लोकेशन (प्रॉक्सी के आधार पर US/EU का अनुमान) से, यह ट्रांस-पैसिफिक रूट्स से होकर गुजरेगा।
     - प्रत्येक हॉप एक राउटर होता है जो IP हेडर का निरीक्षण करता है, अगले गेटवे का फैसला करता है, और फॉरवर्ड करता है। कोई भी एक डिवाइस पूरे रास्ते को नहीं जानता—यह वितरित है।
   - आपका `traceroute` कट गया (शायद ^Z के साथ सस्पेंड हो गया), लेकिन अगर आप इसे पूरा चलाते, तो आपको 10-15 और लाइनें दिखाई देतीं जैसे:
     ```
     2  [ISP router IP] 10 ms ...
     3  [ISP core] 15 ms ...
     ...
     15  106.63.15.9  40 ms ...
     ```
     - समय जुड़ जाता है: आपके पिंग ~40ms कुल RTT (राउंड-ट्रिप टाइम) दिखाते हैं, इसलिए सर्वर तक वन-वे ~20ms है।

### 5. **टारगेट सर्वर प्राप्त करता है और जवाब देता है**
   - पैकेट Weibo के सर्वर (या 106.63.15.9 पर एक लोड बैलेंसर) पर पहुँचता है। यह प्रक्रिया को उलट देता है: ICMP इको रिप्लाई (पिंग के लिए) या TCP SYN-ACK (वेब कनेक्शन के लिए) के साथ जवाब देता है।
   - जवाब वापस एक समान रास्ते का अनुसरण करता है, अक्सर वही रास्ता लेकिन हमेशा नहीं (इंटरनेट रूटिंग असममित है)।
   - आपका `ping` सफलता की पुष्टि करता है: TTL=52 का मतलब ~12 हॉप (64-52=12), और 40ms लेटेंसी चीन-यूएस राउंड ट्रिप से मेल खाती है।

### यह "जादुई" क्यों लगता है (और कॉमन गोटचाज)
- **ऑटोमेशन**: आपका OS/कर्नल यह सब नेटवर्क स्टैक (जैसे `ifconfig` या `ip route` आपके रूट्स दिखाता है) के माध्यम से हैंडल करता है। डीबग करने तक कोई मैन्युअल कॉन्फ़िगरेशन आवश्यक नहीं है।
- **आपका प्रॉक्सी**: यह पिंग/traceroute के लिए पारदर्शी है लेकिन ब्राउज़र ट्रैफिक को weibo.com के लिए इंटरसेप्ट कर देगा, इसे 127.0.0.1:7890 के माध्यम से रूट करेगा (संभवतः VPN/सेंसरशिप बायपास के लिए)। रॉ टेस्टिंग के लिए `unset HTTP_PROXY HTTPS_PROXY` के साथ डिसेबल करें।
- **अगर यह फेल हो जाता है**: फायरवॉल, MTU मिसमैच, या रूट ब्लैकहोलिंग पैकेट्स को ड्रॉप कर सकते हैं। `tcpdump` या Wireshark जैसे टूल आपको इसे लोकल स्निफ करने देते हैं।
- **सिक्योरिटी नोट**: IP बदल सकते हैं (DNS TTL), और HTTPS इसके ऊपर एन्क्रिप्शन जोड़ता है (TCP कनेक्ट के बाद TLS हैंडशेक)।

संक्षेप में, हाँ—कंप्यूटर → राउटर → ISP → ग्लोबल राउटर मेश → सर्वर। यह IP रूटिंग पर बना एक खूबसूरत वितरित सिस्टम है। अगर आप एक पूरा traceroute शेयर करते हैं या किसी विशेष भाग (जैसे वेब के लिए TCP हैंडशेक) में गहराई से जाना चाहते हैं, तो मुझे बताएं!

[TCP/IP इलस्ट्रेटेड (नेटवर्किंग बेसिक्स पर किताब)](https://www.oreilly.com/library/view/tcp-ip-illustrated-volume/0201633469/)  
[ट्रेसरूट कैसे काम करता है (क्लाउडफ्लेयर एक्सप्लेनेशन)](https://www.cloudflare.com/learning/network-layer/what-is-traceroute/)