---
audio: false
generated: true
image: false
lang: hi
layout: post
title: рдкрд╛рдпрдерди рдбрд┐рдлрд▓рд┐рдм рдЕрдиреБрдХреНрд░рдо рддреБрд▓рдирд╛ рдЧрд╛рдЗрдб
translated: true
type: note
---

рдкрд╛рдпрдерди рдореЗрдВ, **`difflib`** рдореЙрдбреНрдпреВрд▓ рдЕрдиреБрдХреНрд░рдореЛрдВтАФрд╕реНрдЯреНрд░рд┐рдВрдЧреНрд╕, рд▓рд┐рд╕реНрдЯ, рдпрд╛ рдХрд┐рд╕реА рднреА рдЗрдЯрд░реЗрдмрд▓ рдХреА рддреБрд▓рдирд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЯреВрд▓реНрд╕ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдЕрдХреНрд╕рд░ рдЯреЗрдХреНрд╕реНрдЯреНрд╕ рдХреЗ рдмреАрдЪ рдЕрдВрддрд░ рдЦреЛрдЬрдиреЗ (рдЬреИрд╕реЗ рдпреВрдирд┐рдХреНрд╕ рдореЗрдВ `diff`) рдпрд╛ рдСрдЯреЛ-рдХрдореНрдкреНрд▓реАрд╢рди рдФрд░ рд╕рдорд╛рдирддрд╛ рдЯреВрд▓ рдмрдирд╛рдиреЗ рдЬреИрд╕реЗ рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред

---

### `difflib` рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ

рдЗрд╕рдХреЗ рдореВрд▓ рдореЗрдВ, `difflib` рджреЛ рдЗрдирдкреБрдЯреНрд╕ рдХреЗ рдмреАрдЪ рд╕рдмрд╕реЗ рд▓рдВрдмреЗ рд╕рдиреНрдирд┐рдХрдЯ рдореЗрд▓ рдЦрд╛рдиреЗ рд╡рд╛рд▓реЗ рдЙрдк-рдЕрдиреБрдХреНрд░рдо (subsequence) рдвреВрдВрдврдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░рддрд╛ рд╣реИред рдлрд┐рд░ рдпрд╣ рдЗрди рдореЗрд▓реЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рд╕рдорд╛рдирддрд╛рдУрдВ рдФрд░ рдЕрдВрддрд░реЛрдВ рдХреЛ рдЙрдЬрд╛рдЧрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд░рддрд╛ рд╣реИред рдпрд╣ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдпрд╣ рдХрд░ рд╕рдХрддреА рд╣реИ:

* рдорд╛рдирд╡-рдкрдардиреАрдп рдбрд┐рдлреНрд╕ рдЬрдирд░реЗрдЯ рдХрд░рдирд╛ (`ndiff`, `unified_diff`, `context_diff`)ред
* рдЕрдиреБрдХреНрд░рдореЛрдВ рдХреЗ рдмреАрдЪ рд╕рдорд╛рдирддрд╛ рдЕрдиреБрдкрд╛рдд (similarity ratios) рдХреА рдЧрдгрдирд╛ рдХрд░рдирд╛ред
* рдПрдХ рд▓рд┐рд╕реНрдЯ рд╕реЗ рдХрд░реАрдмреА рдореЗрд▓ рд╕реБрдЭрд╛рдирд╛ (`get_close_matches`)ред

---

### `SequenceMatcher`

рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдХреНрд▓рд╛рд╕ рд╣реИ **`difflib.SequenceMatcher`**ред

**рдпрд╣ рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ**:

* рдпрд╣ рджреЛ рдЕрдиреБрдХреНрд░рдореЛрдВ рдХреА рддреБрд▓рдирд╛ рдПрд▓рд┐рдореЗрдВрдЯ рджрд░ рдПрд▓рд┐рдореЗрдВрдЯ рдХрд░рддрд╛ рд╣реИред
* рдпрд╣ *рд╕рдмрд╕реЗ рд▓рдВрдмреЗ рд╕рд╛рдорд╛рдиреНрдп рдЙрдк-рдЕрдиреБрдХреНрд░рдо (longest common subsequence)* рдХреА рддрд▓рд╛рд╢ рдХрд░рддрд╛ рд╣реИ (рд▓реЗрдХрд┐рди рдЬрд░реВрд░реА рдирд╣реАрдВ рдХрд┐ рд╕рдиреНрдирд┐рдХрдЯ рд╣реЛ)ред
* рдпрд╣ рдСрдкрд░реЗрд╢рдиреНрд╕ (`replace`, `delete`, `insert`, `equal`) рдХреА рдПрдХ рд▓рд┐рд╕реНрдЯ рдмрдирд╛рддрд╛ рд╣реИ рдЬреЛ рдмрддрд╛рддреА рд╣реИ рдХрд┐ рдПрдХ рдЕрдиреБрдХреНрд░рдо рдХреЛ рджреВрд╕рд░реЗ рдореЗрдВ рдХреИрд╕реЗ рдмрджрд▓рд╛ рдЬрд╛рдПред

**рдореБрдЦреНрдп рдореЗрдердбреНрд╕**:

1. **`ratio()`**
   `[0, 1]` рдореЗрдВ рдПрдХ рдлреНрд▓реЛрдЯ рд░рд┐рдЯрд░реНрди рдХрд░рддрд╛ рд╣реИ рдЬреЛ рд╕рдорд╛рдирддрд╛ рдХреЛ рдорд╛рдкрддрд╛ рд╣реИред
   рдлреЙрд░реНрдореВрд▓рд╛:

   $$
   \text{ratio} = \frac{2 \times M}{T}
   $$

   рдЬрд╣рд╛рдБ `M` = рдореЗрд▓ рдЦрд╛рдиреЗ рд╡рд╛рд▓реЗ рдПрд▓рд┐рдореЗрдВрдЯреНрд╕ рдХреА рд╕рдВрдЦреНрдпрд╛, рдФрд░ `T` = рджреЛрдиреЛрдВ рдЕрдиреБрдХреНрд░рдореЛрдВ рдореЗрдВ рдХреБрд▓ рдПрд▓рд┐рдореЗрдВрдЯреНрд╕ред

2. **`quick_ratio()`** рдФрд░ **`real_quick_ratio()`**
   рд╕рдорд╛рдирддрд╛ рдХреЗ рддреЗрдЬрд╝ рдЕрдиреБрдорд╛рди, рд╕рдЯреАрдХрддрд╛ рдХреЗ рдмрджрд▓реЗ рдЧрддрд┐ рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВред

3. **`get_opcodes()`**
   `a` рдХреЛ `b` рдореЗрдВ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдСрдкрд░реЗрд╢рдиреНрд╕ рдХреА рдПрдХ рд▓рд┐рд╕реНрдЯ рд░рд┐рдЯрд░реНрди рдХрд░рддрд╛ рд╣реИред рдЙрджрд╛рд╣рд░рдг: `[('replace', 0, 2, 0, 1), ('equal', 2, 4, 1, 3)]`.

4. **`get_matching_blocks()`**
   рдЙрдирдХреА рдкреЛрдЬреАрд╢рди рдХреЗ рд╕рд╛рде рд╕рднреА рдореЗрд▓ рдЦрд╛рдиреЗ рд╡рд╛рд▓реЗ рдЙрдк-рдЕрдиреБрдХреНрд░рдо рд░рд┐рдЯрд░реНрди рдХрд░рддрд╛ рд╣реИред

---

### рдЙрджрд╛рд╣рд░рдг

```python
import difflib

a = "hello world"
b = "helo wrld"

s = difflib.SequenceMatcher(None, a, b)

print("Similarity ratio:", s.ratio())
print("Operations:", s.get_opcodes())
print("Matching blocks:", s.get_matching_blocks())
```

**рдЖрдЙрдЯрдкреБрдЯ**:

```
Similarity ratio: 0.9090909090909091
Operations: [('equal', 0, 1, 0, 1), ('delete', 1, 2, 1, 1),
             ('equal', 2, 5, 1, 4), ('delete', 5, 6, 4, 4),
             ('equal', 6, 11, 4, 9)]
Matching blocks: [Match(a=0, b=0, size=1),
                  Match(a=2, b=1, size=3),
                  Match(a=6, b=4, size=5),
                  Match(a=11, b=9, size=0)]
```

---

ЁЯСЙ рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ:

* `difflib` рдПрдХ рдЕрдиреБрдХреНрд░рдо рддреБрд▓рдирд╛ рдЯреВрд▓рдХрд┐рдЯ рд╣реИред
* `SequenceMatcher` рдХреЛрд░ рдЗрдВрдЬрди рд╣реИтАФрдпрд╣ рдореЗрд▓ рдЦрд╛рдиреЗ рд╡рд╛рд▓реЗ рдЙрдк-рдЕрдиреБрдХреНрд░рдо рдвреВрдВрдврддрд╛ рд╣реИ рдФрд░ рд╕рдорд╛рдирддрд╛ рдХреА рдЧрдгрдирд╛ рдХрд░рддрд╛ рд╣реИред
* рдпрд╣ рдбрд┐рдлреНрд╕, рд╕реНрдкреЗрд▓рдЪреЗрдХрд░реНрд╕, рд╕рд╛рд╣рд┐рддреНрдпрд┐рдХ рдЪреЛрд░реА рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдиреЗ, рдСрдЯреЛ-рд╕рдЬреЗрд╢рдиреНрд╕, рдЖрджрд┐ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рд╣реИред

рдХреНрдпрд╛ рдЖрдк рдореБрдЭреЗ `get_close_matches()` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдлрд╝рдЬрд╝реА рд╕реНрдЯреНрд░рд┐рдВрдЧ рдорд┐рд▓рд╛рди (рдЬреИрд╕реЗ рд╕реНрдкреЗрд▓-рдЪреЗрдХ рдпрд╛ рд╕рд░реНрдЪ рд╕рдЬреЗрд╢рдиреНрд╕ рдореЗрдВ) рдХреЗ рд▓рд┐рдП рднреА рджрд┐рдЦрд╛рдирд╛ рдЪрд╛рд╣реЗрдВрдЧреЗ? (рдЬреЛ рдЖрдВрддрд░рд┐рдХ рд░реВрдк рд╕реЗ `SequenceMatcher` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ)